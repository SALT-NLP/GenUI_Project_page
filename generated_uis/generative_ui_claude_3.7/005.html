<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding P-values in Statistics</title>
    <style>
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #6b8cbb;
            --accent-color: #e63946;
            --background-color: #f8f9fa;
            --text-color: #333;
            --light-gray: #e9ecef;
            --medium-gray: #ced4da;
            --dark-gray: #6c757d;
            --success-color: #28a745;
            --info-color: #17a2b8;
            --warning-color: #ffc107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            padding: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1rem;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        h2 {
            color: var(--secondary-color);
            margin: 1.5rem 0 1rem;
            border-bottom: 2px solid var(--light-gray);
            padding-bottom: 0.5rem;
        }
        
        h3 {
            color: var(--secondary-color);
            margin: 1rem 0 0.5rem;
        }
        
        p {
            margin-bottom: 1rem;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 2rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }
        
        .visualization {
            width: 100%;
            height: 400px;
            position: relative;
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .control-group {
            flex: 1;
            min-width: 200px;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark-gray);
        }
        
        input[type="range"] {
            width: 100%;
            margin-top: 0.5rem;
        }
        
        .value-display {
            display: inline-block;
            background-color: var(--light-gray);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            min-width: 60px;
            text-align: center;
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        
        button:hover {
            background-color: var(--secondary-color);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted var(--dark-gray);
            cursor: help;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: var(--dark-gray);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 0.5rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        .highlight {
            background-color: rgba(255, 193, 7, 0.2);
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
        }
        
        .important-note {
            background-color: rgba(230, 57, 70, 0.1);
            border-left: 4px solid var(--accent-color);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 4px 4px 0;
        }
        
        .floating-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 10;
        }
        
        .floating-controls.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }
        
        .collapsible-section {
            margin-bottom: 1rem;
        }
        
        .collapsible-header {
            background-color: var(--light-gray);
            padding: 0.75rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
        }
        
        .collapsible-header::after {
            content: "+";
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            transition: transform 0.3s ease;
        }
        
        .collapsible-header.active::after {
            content: "-";
        }
        
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            padding: 0 1rem;
        }
        
        .collapsible-content.active {
            max-height: 1000px;
            padding: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Understanding P-values in Statistics</h1>
            <p>A comprehensive guide to one of the most misunderstood concepts in statistics</p>
        </header>
        
        <section id="introduction" class="card">
            <h2>Introduction</h2>
            <p>
                The p-value is a fundamental concept in statistical hypothesis testing, yet it's often misunderstood and misinterpreted. This guide will help you understand what p-values are, how they're calculated, and how to correctly interpret them in your statistical analyses.
            </p>
            <p>
                Whether you're a student, researcher, or data analyst, a solid understanding of p-values is essential for making valid statistical inferences and avoiding common pitfalls in data interpretation.
            </p>
        </section>
        
        <div class="two-column">
            <section id="definition" class="card">
                <h2>What is a P-value?</h2>
                <p>
                    A <strong>p-value</strong> is the probability of obtaining test results at least as extreme as the results actually observed, assuming that the <span class="tooltip">null hypothesis<span class="tooltip-text">The hypothesis that there is no significant difference or effect</span></span> is true.
                </p>
                <p>
                    In simpler terms, the p-value helps us determine whether the observed data is compatible with our null hypothesis or if it suggests that the null hypothesis should be rejected.
                </p>
                <p class="important-note">
                    <strong>Important:</strong> The p-value is <em>not</em> the probability that the null hypothesis is true. It is also <em>not</em> the probability that the alternative hypothesis is false.
                </p>
            </section>
            
            <section id="context" class="card">
                <h2>P-values in Hypothesis Testing</h2>
                <p>
                    P-values are used within the framework of <strong>hypothesis testing</strong>, which typically follows these steps:
                </p>
                <ol>
                    <li>Formulate null (H₀) and alternative (H₁) hypotheses</li>
                    <li>Choose a significance level (α), commonly 0.05</li>
                    <li>Collect data and calculate a test statistic</li>
                    <li>Determine the p-value</li>
                    <li>Make a decision: reject H₀ if p-value ≤ α</li>
                </ol>
                <p>
                    The p-value serves as a measure of evidence against the null hypothesis. The smaller the p-value, the stronger the evidence against H₀.
                </p>
            </section>
        </div>
        
        <section id="interpretation" class="card">
            <h2>How to Interpret P-values</h2>
            <p>
                Interpreting p-values correctly is crucial for making valid statistical inferences. Here's how to think about different p-value ranges:
            </p>
            
            <div class="two-column">
                <div>
                    <h3>Small p-value (e.g., p ≤ 0.05)</h3>
                    <p>
                        A small p-value indicates that the observed data would be unlikely under the null hypothesis. This suggests that the null hypothesis may not be a plausible explanation for the observed data.
                    </p>
                    <p>
                        <span class="highlight">When p ≤ α (significance level), we typically reject the null hypothesis.</span>
                    </p>
                </div>
                
                <div>
                    <h3>Large p-value (e.g., p > 0.05)</h3>
                    <p>
                        A large p-value indicates that the observed data is fairly likely under the null hypothesis. This suggests that the null hypothesis remains a plausible explanation.
                    </p>
                    <p>
                        <span class="highlight">When p > α, we fail to reject (but do not "accept") the null hypothesis.</span>
                    </p>
                </div>
            </div>
            
            <div class="important-note">
                <strong>Remember:</strong> Failing to reject the null hypothesis is not the same as proving it true. We simply don't have enough evidence against it.
            </div>
        </section>
        
        <section id="misconceptions" class="card">
            <h2>Common Misconceptions About P-values</h2>
            
            <div class="collapsible-section">
                <div class="collapsible-header">Misconception 1: P-value is the probability that the null hypothesis is true</div>
                <div class="collapsible-content">
                    <p>
                        <strong>Incorrect:</strong> The p-value tells us the probability that H₀ is true.
                    </p>
                    <p>
                        <strong>Correct:</strong> The p-value is the probability of observing data at least as extreme as what we observed, <em>assuming</em> that H₀ is true. It doesn't tell us the probability of H₀ being true or false.
                    </p>
                </div>
            </div>
            
            <div class="collapsible-section">
                <div class="collapsible-header">Misconception 2: A small p-value proves the alternative hypothesis</div>
                <div class="collapsible-content">
                    <p>
                        <strong>Incorrect:</strong> A small p-value proves that the alternative hypothesis is true.
                    </p>
                    <p>
                        <strong>Correct:</strong> A small p-value only indicates evidence against the null hypothesis. It doesn't directly prove the alternative hypothesis, though it's consistent with it.
                    </p>
                </div>
            </div>
            
            <div class="collapsible-section">
                <div class="collapsible-header">Misconception 3: P-value measures the size or importance of an effect</div>
                <div class="collapsible-content">
                    <p>
                        <strong>Incorrect:</strong> A smaller p-value means a larger or more important effect.
                    </p>
                    <p>
                        <strong>Correct:</strong> The p-value does not measure the size or importance of an effect. Very small effects can have very small p-values with large enough sample sizes. Effect size measures (like Cohen's d or odds ratios) should be used to assess the magnitude of effects.
                    </p>
                </div>
            </div>
            
            <div class="collapsible-section">
                <div class="collapsible-header">Misconception 4: Statistical significance equals practical significance</div>
                <div class="collapsible-content">
                    <p>
                        <strong>Incorrect:</strong> If a result is statistically significant (p ≤ 0.05), it must be practically important.
                    </p>
                    <p>
                        <strong>Correct:</strong> Statistical significance only tells us that the observed effect is unlikely to be due to chance alone. It doesn't tell us if the effect is large enough to matter in practical terms.
                    </p>
                </div>
            </div>
        </section>
        
        <section id="visualization" class="card">
            <h2>Visualizing P-values</h2>
            <p>
                P-values are often easier to understand when visualized. The graph below shows a normal distribution with a highlighted area representing the p-value for a given test statistic.
            </p>
            
            <div class="visualization">
                <canvas id="distributionChart"></canvas>
                <div class="floating-controls" id="chartControls">
                    <div class="control-group">
                        <label>Chart Type</label>
                        <select id="chartType">
                            <option value="line">Line</option>
                            <option value="bar">Bar</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Fill Color</label>
                        <input type="color" id="fillColor" value="#4a6fa5">
                    </div>
                    <div class="control-group">
                        <label>Border Color</label>
                        <input type="color" id="borderColor" value="#333333">
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <div class="control-group">
                    <label for="testStatistic">Test Statistic (z or t value)</label>
                    <input type="range" id="testStatistic" min="-4" max="4" step="0.1" value="1.96">
                    <div>Value: <span id="testStatisticValue" class="value-display">1.96</span></div>
                </div>
                
                <div class="control-group">
                    <label for="testType">Test Type</label>
                    <select id="testType">
                        <option value="two-tailed">Two-tailed test</option>
                        <option value="right-tailed">Right-tailed test</option>
                        <option value="left-tailed">Left-tailed test</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label>Calculated P-value: <span id="pValueDisplay" class="value-display">0.05</span></label>
                    <div id="significance">
                        Significance: <span id="significanceText">Significant at α = 0.05</span>
                    </div>
                </div>
            </div>
            
            <p>
                Try adjusting the test statistic value and test type to see how the p-value changes. This interactive visualization helps illustrate the relationship between test statistics and p-values.
            </p>
        </section>
        
        <section id="interactive-example" class="card">
            <h2>Interactive Example: Hypothesis Testing</h2>
            <p>
                Let's walk through a concrete example of hypothesis testing and p-value calculation. In this scenario, we're testing whether a new medication affects patient recovery time.
            </p>
            
            <div class="two-column">
                <div>
                    <h3>Scenario</h3>
                    <p>
                        <strong>Null Hypothesis (H₀):</strong> The medication has no effect on recovery time (mean recovery time = 10 days).
                    </p>
                    <p>
                        <strong>Alternative Hypothesis (H₁):</strong> The medication affects recovery time (mean recovery time ≠ 10 days).
                    </p>
                    <p>
                        <strong>Significance Level (α):</strong> 0.05
                    </p>
                    
                    <div class="controls">
                        <div class="control-group">
                            <label for="sampleSize">Sample Size</label>
                            <input type="range" id="sampleSize" min="10" max="100" step="1" value="30">
                            <div>Value: <span id="sampleSizeValue" class="value-display">30</span></div>
                        </div>
                        
                        <div class="control-group">
                            <label for="sampleMean">Sample Mean (days)</label>
                            <input type="range" id="sampleMean" min="8" max="12" step="0.1" value="9.5">
                            <div>Value: <span id="sampleMeanValue" class="value-display">9.5</span></div>
                        </div>
                        
                        <div class="control-group">
                            <label for="sampleStdDev">Sample Standard Deviation (days)</label>
                            <input type="range" id="sampleStdDev" min="0.5" max="3" step="0.1" value="1.5">
                            <div>Value: <span id="sampleStdDevValue" class="value-display">1.5</span></div>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3>Results</h3>
                    <div id="resultsContainer">
                        <p>
                            <strong>Test Statistic (t):</strong> <span id="testStatisticResult">-1.83</span>
                        </p>
                        <p>
                            <strong>Degrees of Freedom:</strong> <span id="degreesOfFreedom">29</span>
                        </p>
                        <p>
                            <strong>P-value:</strong> <span id="pValueResult">0.078</span>
                        </p>
                        <p>
                            <strong>Conclusion:</strong> <span id="conclusion">Fail to reject the null hypothesis. The data does not provide sufficient evidence that the medication affects recovery time.</span>
                        </p>
                    </div>
                    
                    <div class="visualization">
                        <canvas id="exampleChart"></canvas>
                    </div>
                </div>
            </div>
            
            <p>
                Adjust the sample parameters above to see how they affect the test statistic, p-value, and conclusion. This interactive example demonstrates how p-values are calculated and interpreted in a real-world hypothesis testing scenario.
            </p>
        </section>
    </div>
    
    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";
        
        // Initialize collapsible sections
        document.querySelectorAll('.collapsible-header').forEach(header => {
            header.addEventListener('click', () => {
                header.classList.toggle('active');
                const content = header.nextElementSibling;
                content.classList.toggle('active');
            });
        });
        
        // Distribution visualization
        const distributionCtx = document.getElementById('distributionChart').getContext('2d');
        
        // Generate normal distribution data
        function generateNormalDistribution(mean = 0, stdDev = 1, points = 100) {
            const data = [];
            const xMin = mean - 4 * stdDev;
            const xMax = mean + 4 * stdDev;
            const step = (xMax - xMin) / points;
            
            for (let x = xMin; x <= xMax; x += step) {
                const y = (1 / (stdDev * Math.sqrt(2 * Math.PI))) * 
                          Math.exp(-0.5 * Math.pow((x - mean) / stdDev, 2));
                data.push({x, y});
            }
            
            return data;
        }
        
        // Calculate p-value for normal distribution
        function calculatePValue(testStat, testType) {
            // Standard normal cumulative distribution function
            function normCDF(x) {
                const t = 1 / (1 + 0.2316419 * Math.abs(x));
                const d = 0.3989423 * Math.exp(-x * x / 2);
                const p = d * t * (0.3193815 + t * (-0.3565638 + t * (1.781478 + t * (-1.821256 + t * 1.330274))));
                return x > 0 ? 1 - p : p;
            }
            
            if (testType === 'two-tailed') {
                return 2 * (1 - normCDF(Math.abs(testStat)));
            } else if (testType === 'right-tailed') {
                return 1 - normCDF(testStat);
            } else { // left-tailed
                return normCDF(testStat);
            }
        }
        
        // Create the distribution chart
        const distributionChart = new Chart(distributionCtx, {
            type: 'line',
            data: {
                datasets: [{
                    label: 'Normal Distribution',
                    data: generateNormalDistribution(),
                    borderColor: '#333333',
                    borderWidth: 2,
                    pointRadius: 0,
                    fill: false
                }, {
                    label: 'P-value Region',
                    data: [],
                    backgroundColor: 'rgba(74, 111, 165, 0.5)',
                    borderColor: 'rgba(74, 111, 165, 0)',
                    borderWidth: 0,
                    pointRadius: 0,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'linear',
                        title: {
                            display: true,
                            text: 'Test Statistic Value'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Probability Density'
                        },
                        beginAtZero: true
                    }
                },
                plugins: {
                    legend: {
                        display: true
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `Value: ${context.parsed.x.toFixed(2)}`;
                            }
                        }
                    }
                },
                onClick: function() {
                    const controls = document.getElementById('chartControls');
                    controls.classList.toggle('active');
                }
            }
        });
        
        // Update distribution chart based on test statistic and test type
        function updateDistributionChart() {
            const testStat = parseFloat(document.getElementById('testStatistic').value);
            const testType = document.getElementById('testType').value;
            
            // Update normal distribution data
            distributionChart.data.datasets[0].data = generateNormalDistribution();
            
            // Update p-value region data
            const pValueData = [];
            const normalData = generateNormalDistribution();
            
            if (testType === 'two-tailed') {
                normalData.forEach(point => {
                    if (point.x <= -Math.abs(testStat) || point.x >= Math.abs(testStat)) {
                        pValueData.push(point);
                    }
                });
            } else if (testType === 'right-tailed') {
                normalData.forEach(point => {
                    if (point.x >= testStat) {
                        pValueData.push(point);
                    }
                });
            } else { // left-tailed
                normalData.forEach(point => {
                    if (point.x <= testStat) {
                        pValueData.push(point);
                    }
                });
            }
            
            distributionChart.data.datasets[1].data = pValueData;
            
            // Calculate and display p-value
            const pValue = calculatePValue(testStat, testType);
            document.getElementById('pValueDisplay').textContent = pValue.toFixed(4);
            
            // Update significance text
            const significanceText = document.getElementById('significanceText');
            if (pValue <= 0.05) {
                significanceText.textContent = 'Significant at α = 0.05';
                significanceText.style.color = '#28a745';
            } else {
                significanceText.textContent = 'Not significant at α = 0.05';
                significanceText.style.color = '#e63946';
            }
            
            distributionChart.update();
        }
        
        // Event listeners for distribution chart controls
        document.getElementById('testStatistic').addEventListener('input', function() {
            document.getElementById('testStatisticValue').textContent = this.value;
            updateDistributionChart();
        });
        
        document.getElementById('testType').addEventListener('change', updateDistributionChart);
        
        // Chart customization controls
        document.getElementById('chartType').addEventListener('change', function() {
            distributionChart.config.type = this.value;
            distributionChart.update();
        });
        
        document.getElementById('fillColor').addEventListener('input', function() {
            distributionChart.data.datasets[1].backgroundColor = this.value + '80'; // Add 50% transparency
            distributionChart.update();
        });
        
        document.getElementById('borderColor').addEventListener('input', function() {
            distributionChart.data.datasets[0].borderColor = this.value;
            distributionChart.update();
        });
        
        // Interactive example
        const exampleCtx = document.getElementById('exampleChart').getContext('2d');
        
        // Create the example chart
        const exampleChart = new Chart(exampleCtx, {
            type: 'bar',
            data: {
                labels: ['Null Hypothesis (μ = 10)', 'Sample Mean'],
                datasets: [{
                    label: 'Recovery Time (days)',
                    data: [10, 9.5],
                    backgroundColor: [
                        'rgba(74, 111, 165, 0.5)',
                        'rgba(230, 57, 70, 0.5)'
                    ],
                    borderColor: [
                        'rgba(74, 111, 165, 1)',
                        'rgba(230, 57, 70, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false,
                        title: {
                            display: true,
                            text: 'Recovery Time (days)'
                        }
                    }
                }
            }
        });
        
        // Update example based on user inputs
        function updateExample() {
            const sampleSize = parseInt(document.getElementById('sampleSize').value);
            const sampleMean = parseFloat(document.getElementById('sampleMean').value);
            const sampleStdDev = parseFloat(document.getElementById('sampleStdDev').value);
            
            // Update chart data
            exampleChart.data.datasets[0].data[1] = sampleMean;
            exampleChart.update();
            
            // Calculate t-statistic
            const nullMean = 10; // From the null hypothesis
            const standardError = sampleStdDev / Math.sqrt(sampleSize);
            const tStat = (sampleMean - nullMean) / standardError;
            
            // Calculate p-value (using t-distribution approximation)
            const df = sampleSize - 1;
            
            // Simple approximation of t-distribution p-value for two-tailed test
            // This is a simplified calculation and not exact
            const tStatAbs = Math.abs(tStat);
            const x = df / (df + tStatAbs * tStatAbs);
            const pValue = Math.min(1, 2 * (1 - (0.5 * Math.pow(x, df / 2))));
            
            // Update results
            document.getElementById('testStatisticResult').textContent = tStat.toFixed(2);
            document.getElementById('degreesOfFreedom').textContent = df;
            document.getElementById('pValueResult').textContent = pValue.toFixed(3);
            
            // Update conclusion
            const conclusion = document.getElementById('conclusion');
            if (pValue <= 0.05) {
                conclusion.textContent = 'Reject the null hypothesis. The data provides evidence that the medication affects recovery time.';
                conclusion.style.color = '#28a745';
            } else {
                conclusion.textContent = 'Fail to reject the null hypothesis. The data does not provide sufficient evidence that the medication affects recovery time.';
                conclusion.style.color = '#e63946';
            }
        }
        
        // Event listeners for example controls
        document.getElementById('sampleSize').addEventListener('input', function() {
            document.getElementById('sampleSizeValue').textContent = this.value;
            updateExample();
        });
        
        document.getElementById('sampleMean').addEventListener('input', function() {
            document.getElementById('sampleMeanValue').textContent = this.value;
            updateExample();
        });
        
        document.getElementById('sampleStdDev').addEventListener('input', function() {
            document.getElementById('sampleStdDevValue').textContent = this.value;
            updateExample();
        });
        
        // Initialize charts
        updateDistributionChart();
        updateExample();
    </script>
</body>
</html>