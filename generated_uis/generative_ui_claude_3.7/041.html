<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Conservation Infographic</title>
    <style>
        :root {
            --primary-blue: #2196F3;
            --dark-blue: #0D47A1;
            --light-blue: #BBDEFB;
            --accent-green: #4CAF50;
            --light-green: #C8E6C9;
            --text-dark: #263238;
            --text-light: #FFFFFF;
            --background: #F5F7FA;
            --section-padding: 3rem 2rem;
            --transition-standard: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.05);
            --shadow-medium: 0 15px 30px rgba(0, 0, 0, 0.1);
            --border-radius: 15px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--background);
            scroll-behavior: smooth;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        header {
            text-align: center;
            padding: var(--section-padding);
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            color: var(--text-light);
            border-radius: 0 0 30px 30px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            position: relative;
            z-index: 2;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.9;
        }

        .water-drop {
            position: absolute;
            bottom: -50px;
            right: -50px;
            width: 300px;
            height: 300px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50% 50% 50% 0;
            transform: rotate(45deg);
            z-index: 1;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: rotate(45deg) translate(0, 0);
            }

            50% {
                transform: rotate(45deg) translate(0, -20px);
            }
        }

        section {
            margin: 4rem 0;
            position: relative;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        h2 {
            font-size: 2.2rem;
            margin-bottom: 2rem;
            color: var(--dark-blue);
            text-align: center;
            position: relative;
        }

        h2::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background-color: var(--accent-green);
            margin: 0.8rem auto 0;
            border-radius: 2px;
        }

        .intro {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 3rem;
            margin-bottom: 3rem;
        }

        .intro-text {
            flex: 1;
        }

        .intro-text p {
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .hero-image {
            flex: 1;
            text-align: center;
        }

        .hero-image svg {
            max-width: 100%;
            height: auto;
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.1));
            animation: water-pulse 4s ease-in-out infinite;
        }

        @keyframes water-pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .facts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .fact-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--shadow-light);
            transition: var(--transition-standard);
            position: relative;
            overflow: hidden;
        }

        .fact-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .fact-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 70px;
            height: 70px;
            background-color: var(--light-blue);
            border-radius: 50%;
            margin-bottom: 1.5rem;
            transition: var(--transition-standard);
        }

        .fact-card:hover .fact-icon {
            transform: scale(1.1);
            background-color: var(--primary-blue);
        }

        .fact-card:hover .fact-icon svg {
            fill: white;
        }

        .fact-icon svg {
            width: 40px;
            height: 40px;
            fill: var(--primary-blue);
            transition: var(--transition-standard);
        }

        .fact-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: 0.5rem;
            line-height: 1.1;
            transition: var(--transition-standard);
        }

        .fact-card:hover .fact-number {
            transform: scale(1.05);
        }

        .fact-text {
            font-size: 1.1rem;
        }

        .tips-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .tip-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow-light);
            transition: var(--transition-standard);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .tip-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .tip-icon {
            width: 50px;
            height: 50px;
            background-color: var(--light-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            transition: var(--transition-standard);
        }

        .tip-card:hover .tip-icon {
            transform: rotate(10deg);
            background-color: var(--accent-green);
        }

        .tip-card:hover .tip-icon svg {
            fill: white;
        }

        .tip-icon svg {
            width: 30px;
            height: 30px;
            fill: var(--accent-green);
            transition: var(--transition-standard);
        }

        .tip-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--accent-green);
        }

        .chart-container {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--shadow-light);
            margin-top: 3rem;
            height: 400px;
            position: relative;
            transition: var(--transition-standard);
        }

        .chart-container:hover {
            box-shadow: var(--shadow-medium);
        }

        .impact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .impact-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--shadow-light);
            display: flex;
            flex-direction: column;
            transition: var(--transition-standard);
            height: 100%;
        }

        .impact-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .impact-icon {
            width: 60px;
            height: 60px;
            margin-bottom: 1.5rem;
            transition: var(--transition-standard);
        }

        .impact-card:hover .impact-icon {
            transform: scale(1.1);
        }

        .impact-title {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--dark-blue);
        }

        .cta-section {
            background: linear-gradient(135deg, var(--accent-green), var(--primary-blue));
            border-radius: var(--border-radius);
            padding: 3rem 2rem;
            text-align: center;
            color: white;
            margin-top: 4rem;
            box-shadow: var(--shadow-light);
            transition: var(--transition-standard);
        }

        .cta-section:hover {
            box-shadow: var(--shadow-medium);
        }

        .cta-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: white;
        }

        .cta-title::after {
            background-color: white;
        }

        .cta-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .cta-button {
            padding: 1rem 2rem;
            background-color: white;
            color: var(--primary-blue);
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition-standard);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .cta-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(-100%);
            transition: var(--transition-standard);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .cta-button:hover::after {
            transform: translateX(0);
        }

        .cta-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.3);
        }

        .cta-button svg {
            width: 20px;
            height: 20px;
            transition: var(--transition-standard);
        }

        .cta-button:hover svg {
            transform: scale(1.2);
        }

        .floating-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(-10px);
            transition: var(--transition-standard);
            pointer-events: none;
            z-index: 10;
        }

        .floating-controls.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .control-group {
            margin: 10px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            flex-direction: column;
        }

        label {
            font-size: 0.9rem;
            color: var(--text-dark);
            font-weight: 500;
        }

        input,
        select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%;
            transition: var(--transition-standard);
        }

        input:focus,
        select:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
            outline: none;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            margin-left: 8px;
            vertical-align: middle;
        }

        .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: var(--dark-blue);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            font-size: 0.9rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform-origin: bottom center;
        }

        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--dark-blue) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-5px);
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 5px;
            background-color: var(--accent-green);
            width: 0;
            z-index: 1000;
            transition: width 0.3s ease;
        }

        .scroll-indicator {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background-color: var(--primary-blue);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: var(--transition-standard);
            opacity: 0;
            transform: translateY(20px);
            z-index: 100;
        }

        .scroll-indicator.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .scroll-indicator:hover {
            background-color: var(--dark-blue);
            transform: translateY(-5px);
        }

        .scroll-indicator svg {
            width: 24px;
            height: 24px;
            fill: white;
        }

        footer {
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
            color: var(--text-dark);
            opacity: 0.8;
            font-size: 0.9rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }

            .intro {
                flex-direction: column;
                gap: 2rem;
            }

            .fact-number {
                font-size: 2.5rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .cta-button {
                width: 100%;
                max-width: 250px;
            }

            .scroll-indicator {
                bottom: 20px;
                right: 20px;
                width: 40px;
                height: 40px;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --background: #121212;
                --text-dark: #e0e0e0;
                --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.3);
                --shadow-medium: 0 15px 30px rgba(0, 0, 0, 0.4);
            }

            .fact-card,
            .tip-card,
            .impact-card,
            .chart-container {
                background-color: #1e1e1e;
                box-shadow: var(--shadow-light);
            }

            .floating-controls {
                background: rgba(30, 30, 30, 0.95);
            }

            input,
            select {
                background-color: #333;
                border-color: #555;
                color: #e0e0e0;
            }

            .fact-icon,
            .tip-icon {
                background-color: rgba(33, 150, 243, 0.2);
            }
        }

        /* Keyboard navigation focus styles */
        a:focus,
        button:focus,
        input:focus,
        select:focus {
            outline: 3px solid rgba(33, 150, 243, 0.5);
            outline-offset: 2px;
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>

<body>
    <div class="progress-bar" id="progressBar" role="progressbar" aria-valuemin="0" aria-valuemax="100"
        aria-valuenow="0"></div>

    <a href="#top" class="scroll-indicator" id="scrollTop" aria-label="Scroll to top">
        <svg viewBox="0 0 24 24">
            <path d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" />
        </svg>
    </a>

    <header id="top">
        <div class="water-drop" aria-hidden="true"></div>
        <h1>Every Drop Counts</h1>
        <p class="subtitle">Understanding the importance of water conservation and how we can make a difference in
            preserving our most precious resource.</p>
    </header>

    <div class="container">
        <section class="intro-section" id="intro">
            <div class="intro">
                <div class="intro-text">
                    <h2>Why Water Conservation Matters</h2>
                    <p>Water is essential for all life on Earth, yet it's a finite resource. Despite 71% of our planet
                        being covered in water, only 3% is freshwater, and less than 1% is accessible for human use. As
                        populations grow and climate change intensifies, the need to conserve water becomes increasingly
                        critical.</p>
                    <p>Through simple changes in our daily habits and informed choices, we can all contribute to
                        preserving this vital resource for future generations.</p>
                </div>
                <div class="hero-image" aria-hidden="true">
                    <svg width="400" height="300" viewBox="0 0 400 300">
                        <circle cx="200" cy="150" r="120" fill="#BBDEFB" />
                        <path d="M200 30 Q 300 150 200 270 Q 100 150 200 30" fill="#2196F3" />
                        <circle cx="170" cy="110" r="15" fill="white" opacity="0.6" />
                    </svg>
                </div>
            </div>
        </section>

        <section id="facts">
            <h2>Water Facts</h2>
            <div class="facts-container">
                <div class="fact-card">
                    <div class="fact-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path d="M12,3L2,12h3v8h6v-6h2v6h6v-8h3L12,3z" />
                        </svg>
                    </div>
                    <div class="fact-number" aria-label="80 to 100 gallons">80-100</div>
                    <div class="fact-text">Gallons of water used by the average American every day</div>
                    <div class="tooltip" tabindex="0" role="button" aria-label="More information">ℹ️
                        <span class="tooltip-text" role="tooltip">This includes water used for drinking, bathing,
                            washing, cooking, and outdoor activities.</span>
                    </div>
                </div>
                <div class="fact-card">
                    <div class="fact-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M15,12H9v-2h6V12z M15,16H9v-2h6V16z M19,4h-1V2h-2v2H8V2H6v2H5C3.9,4,3,4.9,3,6v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V6C21,4.9,20.1,4,19,4z M19,20H5V9h14V20z" />
                        </svg>
                    </div>
                    <div class="fact-number">2025</div>
                    <div class="fact-text">Year by which 1.8 billion people will live in regions with absolute water
                        scarcity</div>
                    <div class="tooltip" tabindex="0" role="button" aria-label="More information">ℹ️
                        <span class="tooltip-text" role="tooltip">Absolute water scarcity is defined as having less than
                            500 cubic meters of water per person per year.</span>
                    </div>
                </div>
                <div class="fact-card">
                    <div class="fact-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M13,17h-2v-6h2V17z M13,9h-2V7h2V9z" />
                        </svg>
                    </div>
                    <div class="fact-number">70%</div>
                    <div class="fact-text">Of Earth's freshwater is frozen in glaciers and polar ice caps</div>
                    <div class="tooltip" tabindex="0" role="button" aria-label="More information">ℹ️
                        <span class="tooltip-text" role="tooltip">This leaves only 30% available in groundwater, lakes,
                            and rivers for human use.</span>
                    </div>
                </div>
            </div>
        </section>

        <section id="waterUsage">
            <h2>Where Our Water Goes</h2>
            <div class="chart-container" id="chartContainer">
                <canvas id="waterUsageChart"></canvas>
                <div class="floating-controls" id="chartControls">
                    <div class="control-group">
                        <label for="chartType">Chart Type</label>
                        <select id="chartType">
                            <option value="bar">Bar Chart</option>
                            <option value="pie">Pie Chart</option>
                            <option value="doughnut">Doughnut Chart</option>
                            <option value="polarArea">Polar Area</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="showPercentages">Show Percentages</label>
                        <input type="checkbox" id="showPercentages">
                    </div>
                    <div class="control-group">
                        <label for="colorTheme">Color Theme</label>
                        <select id="colorTheme">
                            <option value="blues">Blues</option>
                            <option value="greens">Greens</option>
                            <option value="mixed">Mixed</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="animationSpeed">Animation Speed</label>
                        <input type="range" id="animationSpeed" min="100" max="2000" value="800" step="100">
                    </div>
                    <div class="control-group">
                        <label for="dataExport">Export Data</label>
                        <select id="dataExport">
                            <option value="">Select Format</option>
                            <option value="csv">CSV</option>
                            <option value="json">JSON</option>
                            <option value="image">Image</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <section id="tips">
            <h2>Water Conservation Tips</h2>
            <div class="tips-container">
                <div class="tip-card">
                    <div class="tip-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M7,19c-1.1,0-2,0.9-2,2h14c0-1.1-0.9-2-2-2h-4v-2h3c1.1,0,2-0.9,2-2h-8c0,1.1,0.9,2,2,2h3v2H7z M12,3c-1.66,0-3,1.34-3,3v4c0,1.66,1.34,3,3,3s3-1.34,3-3V6C15,4.34,13.66,3,12,3z M13,10c0,0.55-0.45,1-1,1s-1-0.45-1-1V6c0-0.55,0.45-1,1-1s1,0.45,1,1V10z" />
                        </svg>
                    </div>
                    <h3 class="tip-title">Fix Leaky Faucets</h3>
                    <p>A faucet that drips once per second can waste more than 3,000 gallons of water per year. Fixing
                        leaks promptly can save both water and money.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M21,10.78V8c0-1.65-1.35-3-3-3h-4c-0.77,0-1.47,0.3-2,0.78C11.47,5.3,10.77,5,10,5H6C4.35,5,3,6.35,3,8v2.78 C2.39,11.33,2,12.12,2,13v6h2v-2h16v2h2v-6C22,12.12,21.61,11.33,21,10.78z M14,7h4c0.55,0,1,0.45,1,1v2h-6V8 C13,7.45,13.45,7,14,7z M5,8c0-0.55,0.45-1,1-1h4c0.55,0,1,0.45,1,1v2H5V8z M4,15v-2c0-0.55,0.45-1,1-1h14c0.55,0,1,0.45,1,1v2 H4z" />
                        </svg>
                    </div>
                    <h3 class="tip-title">Take Shorter Showers</h3>
                    <p>Reducing your shower time by just two minutes can save up to 150 gallons of water per month. Try
                        using a timer to keep track.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M9,21c0,0.55,0.45,1,1,1h4c0.55,0,1-0.45,1-1v-1H9V21z M12,2C8.14,2,5,5.14,5,9c0,2.38,1.19,4.47,3,5.74V17 c0,0.55,0.45,1,1,1h6c0.55,0,1-0.45,1-1v-2.26c1.81-1.27,3-3.36,3-5.74C19,5.14,15.86,2,12,2z M14,13.7V16h-4v-2.3 C8.48,12.63,7,11.53,7,9c0-2.76,2.24-5,5-5s5,2.24,5,5C17,11.49,15.49,12.65,14,13.7z" />
                        </svg>
                    </div>
                    <h3 class="tip-title">Use Energy-Efficient Appliances</h3>
                    <p>ENERGY STAR certified dishwashers and washing machines use up to 50% less water than standard
                        models.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M12,22c4.97,0,9-4.03,9-9c0-4.97-4.03-9-9-9s-9,4.03-9,9C3,17.97,7.03,22,12,22z M5.6,10.25c0-1.38,1.12-2.5,2.5-2.5 c0.53,0,1.01,0.16,1.42,0.44l-0.02,0.19c0,1.38,1.12,2.5,2.5,2.5s2.5-1.12,2.5-2.5c0-0.06-0.01-0.12-0.02-0.19 c0.4-0.28,0.89-0.44,1.42-0.44c1.38,0,2.5,1.12,2.5,2.5c0,1-0.59,1.85-1.43,2.25c-0.84,0.4-1.43,1.25-1.43,2.25 c0,1.38-1.12,2.5-2.5,2.5s-2.5-1.12-2.5-2.5c0-1-0.59-1.85-1.43-2.25C6.19,12.1,5.6,11.25,5.6,10.25z" />
                        </svg>
                    </div>
                    <h3 class="tip-title">Water Plants Wisely</h3>
                    <p>Water your garden in the early morning or evening to minimize evaporation. Use drip irrigation or
                        soaker hoses for more efficient watering.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M18,2H6C4.9,2,4,2.9,4,4v16c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V4C20,2.9,19.1,2,18,2z M9,4h2v5l-1-0.75L9,9V4z M18,20 H6V4h1v9l3-2.25L13,13V4h5V20z" />
                        </svg>
                    </div>
                    <h3 class="tip-title">Collect Rainwater</h3>
                    <p>Install rain barrels to collect rainwater from your roof. This water can be used for gardening,
                        washing cars, and other outdoor uses.</p>
                </div>
                <div class="tip-card">
                    <div class="tip-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M19.77,7.23l0.01-0.01c-0.29-0.29-0.77-0.29-1.06,0l-3.7,3.7L9,4.91C8.71,4.62,8.23,4.62,7.94,4.91L4.73,8.12 c-0.29,0.29-0.29,0.77,0,1.06l5.03,5.03C9.47,13.91,9,14.98,9,16.15c0,2.15,1.7,3.85,3.85,3.85c2.15,0,3.85-1.7,3.85-3.85 c0-1.17-0.47-2.24-1.21-2.94l4.28-4.28C20.06,8.64,20.06,8.16,19.77,7.23z M12.85,18c-1.01,0-1.85-0.84-1.85-1.85 s0.84-1.85,1.85-1.85s1.85,0.84,1.85,1.85S13.86,18,12.85,18z" />
                        </svg>
                    </div>
                    <h3 class="tip-title">Install Low-Flow Fixtures</h3>
                    <p>Replace standard faucets and showerheads with low-flow alternatives. These can reduce water use
                        by 30-50% without sacrificing performance.</p>
                </div>
            </div>
        </section>

        <section id="impact">
            <h2>The Impact of Conservation</h2>
            <div class="impact-grid">
                <div class="impact-card">
                    <div class="impact-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="60" height="60">
                            <path
                                d="M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9S16.97,3,12,3z M12,19c-3.86,0-7-3.14-7-7s3.14-7,7-7s7,3.14,7,7 S15.86,19,12,19z"
                                fill="#0D47A1" />
                            <path
                                d="M16,10h-3V7c0-0.55-0.45-1-1-1s-1,0.45-1,1v3H8c-0.55,0-1,0.45-1,1s0.45,1,1,1h3v3c0,0.55,0.45,1,1,1s1-0.45,1-1v-3h3 c0.55,0,1-0.45,1-1S16.55,10,16,10z"
                                fill="#0D47A1" />
                        </svg>
                    </div>
                    <h3 class="impact-title">Preserving Ecosystems</h3>
                    <p>Conserving water helps maintain healthy rivers, lakes, and wetlands, protecting the diverse plant
                        and animal species that depend on these habitats.</p>
                </div>
                <div class="impact-card">
                    <div class="impact-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="60" height="60">
                            <path
                                d="M11.8,10.9c-2.27-0.59-3-1.2-3-2.15c0-1.09,1.01-1.85,2.7-1.85c1.78,0,2.44,0.85,2.5,2.1h2.21 c-0.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94,0.42-3.5,1.68-3.5,3.61c0,2.31,1.91,3.46,4.7,4.13c2.5,0.6,3,1.48,3,2.41 c0,0.69-0.49,1.79-2.7,1.79c-2.06,0-2.87-0.92-2.98-2.1H6.32c0.12,2.19,1.76,3.42,3.68,3.83V21h3v-2.15 c1.95-0.37,3.5-1.5,3.5-3.55C16.5,12.46,14.07,11.49,11.8,10.9z"
                                fill="#4CAF50" />
                        </svg>
                    </div>
                    <h3 class="impact-title">Economic Benefits</h3>
                    <p>Water conservation reduces utility bills for households and businesses. It also decreases the
                        need for costly infrastructure projects like dams and water treatment facilities.</p>
                </div>
                <div class="impact-card">
                    <div class="impact-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" width="60" height="60">
                            <path
                                d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10s10-4.48,10-10C22,6.48,17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8 c0-4.41,3.59-8,8-8s8,3.59,8,8C20,16.41,16.41,20,12,20z"
                                fill="#2196F3" />
                            <path d="M12,17l5-5h-4V7h-2v5H7L12,17z" fill="#2196F3" />
                        </svg>
                    </div>
                    <h3 class="impact-title">Energy Savings</h3>
                    <p>It takes significant energy to treat and transport water. By using less water, we reduce energy
                        consumption and the associated greenhouse gas emissions that contribute to climate change.</p>
                </div>
            </div>
        </section>

        <section class="cta-section" id="action">
            <h2 class="cta-title">Take Action Today</h2>
            <p>Every person can make a difference in conserving our planet's most precious resource. Start with small
                changes in your daily habits and inspire others to do the same.</p>
            <div class="cta-buttons">
                <button class="cta-button" id="shareBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path
                            d="M18,16.08c-0.76,0-1.44,0.3-1.96,0.77L8.91,12.7c0.05-0.23,0.09-0.46,0.09-0.7s-0.04-0.47-0.09-0.7l7.05-4.11 c0.54,0.5,1.25,0.81,2.04,0.81c1.66,0,3-1.34,3-3s-1.34-3-3-3s-3,1.34-3,3c0,0.24,0.04,0.47,0.09,0.7L8.04,9.81 C7.5,9.31,6.79,9,6,9c-1.66,0-3,1.34-3,3s1.34,3,3,3c0.79,0,1.5-0.31,2.04-0.81l7.12,4.16c-0.05,0.21-0.08,0.43-0.08,0.65 c0,1.61,1.31,2.92,2.92,2.92c1.61,0,2.92-1.31,2.92-2.92S19.61,16.08,18,16.08z"
                            fill="#2196F3" />
                    </svg>
                    Share This Information
                </button>
                <button class="cta-button" id="calculateBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path
                            d="M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h14c1.1,0,2-0.9,2-2V5C21,3.9,20.1,3,19,3z M19,19H5V5h14V19z"
                            fill="#2196F3" />
                        <path d="M7,12h2v5h-2V12z M11,10h2v7h-2V10z M15,7h2v10h-2V7z" fill="#2196F3" />
                    </svg>
                    Calculate Your Water Footprint
                </button>
            </div>
        </section>

        <div id="waterCalculator"
            style="display: none; background: white; padding: 20px; border-radius: 15px; margin-top: 20px; box-shadow: var(--shadow-light);">
            <h3 style="margin-bottom: 15px; color: var(--primary-blue);">Water Footprint Calculator</h3>
            <form id="waterCalcForm">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                    <div class="control-group">
                        <label for="showerTime">Average Shower Time (minutes)</label>
                        <input type="number" id="showerTime" min="1" max="60" value="8">
                    </div>
                    <div class="control-group">
                        <label for="flushesPerDay">Toilet Flushes Per Day</label>
                        <input type="number" id="flushesPerDay" min="1" max="20" value="5">
                    </div>
                    <div class="control-group">
                        <label for="dishwasherLoads">Dishwasher Loads Per Week</label>
                        <input type="number" id="dishwasherLoads" min="0" max="14" value="3">
                    </div>
                    <div class="control-group">
                        <label for="laundryLoads">Laundry Loads Per Week</label>
                        <input type="number" id="laundryLoads" min="0" max="14" value="4">
                    </div>
                </div>
                <button type="submit"
                    style="background: var(--primary-blue); color: white; border: none; padding: 10px 20px; border-radius: 5px; margin-top: 15px; cursor: pointer;">Calculate</button>
            </form>
            <div id="waterCalcResult"
                style="margin-top: 20px; padding: 15px; border-radius: 8px; background: var(--light-blue); display: none;">
                <h4 style="margin-bottom: 10px;">Your Estimated Daily Water Usage:</h4>
                <p id="waterCalcValue" style="font-size: 24px; font-weight: bold; color: var(--dark-blue);"></p>
                <p id="waterCalcComparison"></p>
                <div id="waterCalcTips" style="margin-top: 15px;"></div>
            </div>
        </div>
    </div>

    <footer>
        <p>© 2023 Water Conservation Initiative. All data sourced from the Environmental Protection Agency and the World
            Health Organization.</p>
        <p style="margin-top: 10px;">
            <a href="#" style="color: var(--primary-blue); text-decoration: none; margin: 0 10px;">Privacy Policy</a> |
            <a href="#" style="color: var(--primary-blue); text-decoration: none; margin: 0 10px;">Contact Us</a> |
            <a href="#" style="color: var(--primary-blue); text-decoration: none; margin: 0 10px;">Resources</a>
        </p>
    </footer>

    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // Animation for sections on scroll
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.15
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // 检查是否为卡片元素
                    if (entry.target.classList.contains('fact-card') ||
                        entry.target.classList.contains('tip-card') ||
                        entry.target.classList.contains('impact-card')) {
                        entry.target.style.opacity = 1;
                        entry.target.style.transform = 'translateY(0)';
                    } else {
                        // 对于section元素，使用CSS类
                        entry.target.classList.add('visible');
                    }
                    // 一旦元素可见就停止观察它，确保它不会再次变为不可见
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('section').forEach(section => {
            observer.observe(section);
        });

        document.querySelectorAll('.fact-card, .tip-card, .impact-card').forEach(card => {
            card.style.opacity = 0;
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
            observer.observe(card);
        });

        // Initialize water usage chart
        const ctx = document.getElementById('waterUsageChart').getContext('2d');

        const colorThemes = {
            blues: ['#E3F2FD', '#BBDEFB', '#90CAF9', '#64B5F6', '#42A5F5', '#2196F3', '#1E88E5', '#1976D2', '#1565C0', '#0D47A1'],
            greens: ['#E8F5E9', '#C8E6C9', '#A5D6A7', '#81C784', '#66BB6A', '#4CAF50', '#43A047', '#388E3C', '#2E7D32', '#1B5E20'],
            mixed: ['#E3F2FD', '#C8E6C9', '#BBDEFB', '#A5D6A7', '#90CAF9', '#66BB6A', '#64B5F6', '#4CAF50', '#2196F3', '#388E3C']
        };

        const chartData = {
            labels: ['Toilet', 'Shower', 'Faucet', 'Washing Machine', 'Leaks', 'Other'],
            datasets: [{
                label: 'Average Water Usage (%)',
                data: [24, 20, 19, 17, 12, 8],
                backgroundColor: colorThemes.blues.slice(4, 10),
                borderColor: 'rgba(255, 255, 255, 0.8)',
                borderWidth: 1
            }]
        };

        const chartConfig = {
            type: 'bar',
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                onClick: (e) => toggleControls(),
                animation: {
                    duration: 800,
                    easing: 'easeOutQuart'
                },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: {
                                size: 14,
                                family: "'Segoe UI', 'Roboto', sans-serif"
                            },
                            padding: 20
                        }
                    },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                const showPercentages = document.getElementById('showPercentages').checked;
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.y !== null) {
                                    label += context.parsed.y;
                                    if (showPercentages) {
                                        label += '%';
                                    }
                                }
                                return label;
                            }
                        },
                        padding: 12,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleFont: {
                            size: 14,
                            weight: 'bold'
                        },
                        bodyFont: {
                            size: 13
                        },
                        displayColors: true,
                        borderColor: 'rgba(255, 255, 255, 0.1)',
                        borderWidth: 1
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function (value) {
                                const showPercentages = document.getElementById('showPercentages').checked;
                                return showPercentages ? value + '%' : value;
                            },
                            font: {
                                size: 12
                            },
                            padding: 8
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        ticks: {
                            font: {
                                size: 12
                            },
                            padding: 8
                        },
                        grid: {
                            display: false
                        }
                    }
                }
            }
        };

        const waterUsageChart = new Chart(ctx, chartConfig);
        const chartControls = document.getElementById('chartControls');

        function toggleControls() {
            chartControls.classList.toggle('active');
        }

        // Close controls when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('#chartControls') &&
                !e.target.closest('#waterUsageChart') &&
                chartControls.classList.contains('active')) {
                chartControls.classList.remove('active');
            }
        });

        // Chart control event listeners
        document.getElementById('chartType').addEventListener('change', updateChart);
        document.getElementById('showPercentages').addEventListener('change', updateChart);
        document.getElementById('colorTheme').addEventListener('change', updateChart);
        document.getElementById('animationSpeed').addEventListener('change', updateChart);
        document.getElementById('dataExport').addEventListener('change', exportChartData);

        function updateChart() {
            const chartType = document.getElementById('chartType').value;
            const showPercentages = document.getElementById('showPercentages').checked;
            const colorTheme = document.getElementById('colorTheme').value;
            const animationSpeed = parseInt(document.getElementById('animationSpeed').value);

            waterUsageChart.config.type = chartType;
            waterUsageChart.data.datasets[0].backgroundColor = colorThemes[colorTheme].slice(4, 10);
            waterUsageChart.options.animation.duration = animationSpeed;

            // Update tooltip and axis formatting for percentages
            waterUsageChart.options.scales.y.ticks.callback = function (value) {
                return showPercentages ? value + '%' : value;
            };

            waterUsageChart.update();
        }

        function exportChartData() {
            const format = document.getElementById('dataExport').value;
            if (!format) return;

            const chartData = waterUsageChart.data;
            let output;
            let fileName;
            let mimeType;

            switch (format) {
                case 'csv':
                    output = 'Category,Value\n';
                    chartData.labels.forEach((label, i) => {
                        output += `${label},${chartData.datasets[0].data[i]}\n`;
                    });
                    fileName = 'water_usage_data.csv';
                    mimeType = 'text/csv';
                    break;

                case 'json':
                    const jsonData = {
                        labels: chartData.labels,
                        data: chartData.datasets[0].data
                    };
                    output = JSON.stringify(jsonData, null, 2);
                    fileName = 'water_usage_data.json';
                    mimeType = 'application/json';
                    break;

                case 'image':
                    // Convert chart to image
                    const canvas = document.getElementById('waterUsageChart');
                    const image = canvas.toDataURL('image/png');

                    // Create temporary link for download
                    const a = document.createElement('a');
                    a.href = image;
                    a.download = 'water_usage_chart.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);

                    // Reset select
                    document.getElementById('dataExport').value = '';
                    return;
            }

            // Create download link
            const blob = new Blob([output], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            // Reset select
            document.getElementById('dataExport').value = '';
        }

        // Progress bar functionality
        const progressBar = document.getElementById('progressBar');

        window.addEventListener('scroll', () => {
            const windowHeight = window.innerHeight;
            const fullHeight = document.body.clientHeight;
            const scrolled = window.scrollY;
            const progressWidth = (scrolled / (fullHeight - windowHeight)) * 100;
            progressBar.style.width = `${progressWidth}%`;
            progressBar.setAttribute('aria-valuenow', Math.round(progressWidth));

            // Show/hide scroll to top button
            const scrollTop = document.getElementById('scrollTop');
            if (scrolled > 300) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        });

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();

                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 20,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Water footprint calculator
        const calculateBtn = document.getElementById('calculateBtn');
        const waterCalculator = document.getElementById('waterCalculator');
        const waterCalcForm = document.getElementById('waterCalcForm');
        const waterCalcResult = document.getElementById('waterCalcResult');
        const waterCalcValue = document.getElementById('waterCalcValue');
        const waterCalcComparison = document.getElementById('waterCalcComparison');
        const waterCalcTips = document.getElementById('waterCalcTips');

        calculateBtn.addEventListener('click', () => {
            waterCalculator.style.display = waterCalculator.style.display === 'none' ? 'block' : 'none';

            if (waterCalculator.style.display === 'block') {
                waterCalculator.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        });

        waterCalcForm.addEventListener('submit', (e) => {
            e.preventDefault();

            // Get values
            const showerTime = parseInt(document.getElementById('showerTime').value);
            const flushesPerDay = parseInt(document.getElementById('flushesPerDay').value);
            const dishwasherLoads = parseInt(document.getElementById('dishwasherLoads').value);
            const laundryLoads = parseInt(document.getElementById('laundryLoads').value);

            // Calculate water usage (gallons)
            const showerUsage = showerTime * 2.5; // 2.5 gallons per minute
            const toiletUsage = flushesPerDay * 1.6; // 1.6 gallons per flush
            const dishwasherUsage = (dishwasherLoads / 7) * 6; // 6 gallons per load, converted to daily
            const laundryUsage = (laundryLoads / 7) * 40; // 40 gallons per load, converted to daily

            // Basic usage (drinking, washing hands, etc.)
            const basicUsage = 10;

            const totalUsage = Math.round(showerUsage + toiletUsage + dishwasherUsage + laundryUsage + basicUsage);

            // Display result
            waterCalcValue.textContent = `${totalUsage} gallons per day`;

            // Compare to average
            const avgUsage = 80;
            const percentDiff = Math.round(((totalUsage - avgUsage) / avgUsage) * 100);

            if (totalUsage < avgUsage) {
                waterCalcComparison.textContent = `Great job! You use ${Math.abs(percentDiff)}% less water than the average American.`;
                waterCalcComparison.style.color = '#388E3C';
            } else if (totalUsage > avgUsage) {
                waterCalcComparison.textContent = `You use ${percentDiff}% more water than the average American.`;
                waterCalcComparison.style.color = '#D32F2F';
            } else {
                waterCalcComparison.textContent = `You use about the same amount of water as the average American.`;
                waterCalcComparison.style.color = '#0D47A1';
            }

            // Custom tips based on usage
            waterCalcTips.innerHTML = '<h4 style="margin-bottom: 10px;">Personalized Tips:</h4><ul style="padding-left: 20px;">';

            if (showerTime > 5) {
                waterCalcTips.innerHTML += '<li>Try reducing your shower time to 5 minutes to save up to ' +
                    Math.round((showerTime - 5) * 2.5) + ' gallons per day.</li>';
            }

            if (flushesPerDay > 4) {
                waterCalcTips.innerHTML += '<li>Consider installing a dual-flush toilet to save water when a full flush isn\'t needed.</li>';
            }

            if (dishwasherLoads > 3) {
                waterCalcTips.innerHTML += '<li>Only run your dishwasher when it\'s completely full to maximize efficiency.</li>';
            }

            if (laundryLoads > 3) {
                waterCalcTips.innerHTML += '<li>Try to consolidate laundry loads and only wash when you have full loads.</li>';
            }

            waterCalcTips.innerHTML += '</ul>';

            waterCalcResult.style.display = 'block';
        });

        // Social share functionality
        document.getElementById('shareBtn').addEventListener('click', () => {
            if (navigator.share) {
                navigator.share({
                    title: 'Water Conservation Infographic',
                    text: 'Check out this informative water conservation guide!',
                    url: window.location.href
                })
                    .catch(error => console.log('Error sharing:', error));
            } else {
                alert('Share this page: ' + window.location.href);
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Alt+T to scroll to top
            if (e.altKey && e.key === 't') {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            // Alt+C to toggle calculator
            if (e.altKey && e.key === 'c') {
                calculateBtn.click();
            }

            // Alt+S to share
            if (e.altKey && e.key === 's') {
                document.getElementById('shareBtn').click();
            }
        });
    </script>
</body>

</html>