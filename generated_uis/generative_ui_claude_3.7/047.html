<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Architecture Explorer</title>
    <style>
        :root {
            --primary: #4285f4;
            --secondary: #34a853;
            --accent: #ea4335;
            --light: #f8f9fa;
            --dark: #202124;
            --gray: #5f6368;
            --light-gray: #dadce0;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --radius: 8px;
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }
        
        header {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .logo svg {
            height: 32px;
            width: 32px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
        }
        
        nav a {
            text-decoration: none;
            color: var(--gray);
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 0;
            position: relative;
        }
        
        nav a:hover {
            color: var(--primary);
        }
        
        nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary);
            transition: var(--transition);
        }
        
        nav a:hover::after, nav a.active::after {
            width: 100%;
        }
        
        nav a.active {
            color: var(--primary);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
        }
        
        .sidebar {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 100px;
        }
        
        .sidebar h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .pattern-list {
            list-style: none;
        }
        
        .pattern-item {
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .pattern-item:hover {
            background-color: var(--light);
        }
        
        .pattern-item.active {
            background-color: rgba(66, 133, 244, 0.1);
            color: var(--primary);
            font-weight: 500;
        }
        
        .pattern-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .diagram-container {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .diagram-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .diagram-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .diagram-controls {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn:hover {
            background-color: #3b78e7;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn:focus {
            outline: 2px solid rgba(66, 133, 244, 0.5);
            outline-offset: 2px;
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .btn-outline:hover {
            background-color: rgba(66, 133, 244, 0.1);
        }
        
        .diagram-canvas {
            flex: 1;
            min-height: 400px;
            border: 1px solid var(--light-gray);
            border-radius: var(--radius);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }
        
        .diagram-canvas.zoomed {
            transform: scale(1.2);
            transform-origin: center center;
        }
        
        .info-panel {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 1.5rem;
        }
        
        .info-panel h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.25rem;
        }
        
        .component-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .component-card {
            border: 1px solid var(--light-gray);
            border-radius: var(--radius);
            padding: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .component-card:hover {
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }
        
        .component-card:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }
        
        .component-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }
        
        .component-icon {
            width: 32px;
            height: 32px;
            background-color: rgba(66, 133, 244, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .component-title {
            font-weight: 500;
            color: var(--dark);
        }
        
        .component-description {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .tooltip {
            position: absolute;
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 0.75rem;
            max-width: 250px;
            z-index: 100;
            font-size: 0.9rem;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            pointer-events: none;
        }
        
        .tooltip.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .tooltip-title {
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }
        
        .tooltip-description {
            color: var(--gray);
        }
        
        .cloud-component {
            position: absolute;
            cursor: pointer;
            transition: var(--transition);
            width: 60px;
            height: 60px;
            background-color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            z-index: 2;
        }
        
        .cloud-component:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }
        
        .cloud-component.selected {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }
        
        .cloud-component:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }
        
        .connector {
            position: absolute;
            background-color: var(--light-gray);
            z-index: 1;
            transition: var(--transition);
        }
        
        .connector.highlighted {
            background-color: var(--primary);
            box-shadow: 0 0 5px rgba(66, 133, 244, 0.5);
        }
        
        .glossary-section {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 1.5rem;
            margin-top: 2rem;
        }
        
        .glossary-section h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.25rem;
        }
        
        .glossary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .glossary-item {
            border-bottom: 1px solid var(--light-gray);
            padding-bottom: 0.75rem;
            margin-bottom: 0.75rem;
            transition: var(--transition);
        }
        
        .glossary-item:hover {
            transform: translateX(5px);
            border-bottom-color: var(--primary);
        }
        
        .glossary-term {
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }
        
        .glossary-definition {
            font-size: 0.9rem;
            color: var(--gray);
        }
        
        .step-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 1rem;
        }
        
        .step-indicator {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .step-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--light-gray);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .step-dot:hover {
            transform: scale(1.2);
        }
        
        .step-dot.active {
            background-color: var(--primary);
            transform: scale(1.2);
        }
        
        .step-description {
            margin-top: 1rem;
            padding: 1rem;
            background-color: var(--light);
            border-radius: var(--radius);
            font-size: 0.9rem;
            transition: var(--transition);
            border-left: 3px solid var(--primary);
        }
        
        .search-container {
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid var(--light-gray);
            border-radius: var(--radius);
            font-size: 0.9rem;
            outline: none;
            transition: var(--transition);
        }
        
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }
        
        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
        
        .modal.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(-20px);
            transition: var(--transition);
        }
        
        .modal.visible .modal-content {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
        }
        
        .modal-close:hover {
            color: var(--accent);
            transform: rotate(90deg);
        }
        
        .tab-container {
            margin-bottom: 1.5rem;
        }
        
        .tab-nav {
            display: flex;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 1rem;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            transition: var(--transition);
        }
        
        .tab-btn:hover {
            color: var(--primary);
        }
        
        .tab-btn.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .service-item {
            border: 1px solid var(--light-gray);
            border-radius: var(--radius);
            padding: 1rem;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .service-item:hover {
            box-shadow: var(--shadow);
            transform: translateY(-2px);
        }
        
        .service-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 0.75rem;
        }
        
        .service-name {
            font-weight: 500;
            font-size: 0.9rem;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 0.75rem;
            border: 1px solid var(--light-gray);
            text-align: left;
        }
        
        .comparison-table th {
            background-color: var(--light);
            font-weight: 500;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: rgba(248, 249, 250, 0.5);
        }
        
        .comparison-table td:first-child {
            font-weight: 500;
        }
        
        .feature-available {
            color: var(--secondary);
        }
        
        .feature-unavailable {
            color: var(--accent);
        }
        
        .zoom-controls {
            position: absolute;
            bottom: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            z-index: 10;
        }
        
        .zoom-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: white;
            border: 1px solid var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }
        
        .zoom-btn:hover {
            background-color: var(--light);
        }
        
        .component-label {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            font-weight: 500;
            white-space: nowrap;
            color: var(--dark);
            background-color: rgba(255, 255, 255, 0.8);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        @media (max-width: 992px) {
            .container {
                grid-template-columns: 220px 1fr;
                gap: 1.5rem;
            }
            
            .component-list {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .glossary-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                position: static;
            }
            
            header {
                padding: 1rem;
            }
            
            .logo {
                font-size: 1.2rem;
            }
            
            nav ul {
                gap: 1rem;
            }
            
            .diagram-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .diagram-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .component-list {
                grid-template-columns: 1fr;
            }
            
            .glossary-grid {
                grid-template-columns: 1fr;
            }
            
            .step-controls {
                flex-direction: column;
                gap: 1rem;
            }
            
            .step-indicator {
                order: -1;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 1rem;
                margin: 1rem auto;
            }
            
            .diagram-container,
            .info-panel,
            .glossary-section {
                padding: 1rem;
            }
            
            nav ul {
                gap: 0.5rem;
            }
            
            .diagram-canvas {
                min-height: 300px;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --light: #202124;
                --dark: #e8eaed;
                --gray: #9aa0a6;
                --light-gray: #3c4043;
                --shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            }
            
            body {
                background-color: #121212;
            }
            
            header,
            .sidebar,
            .diagram-container,
            .info-panel,
            .glossary-section,
            .modal-content,
            .cloud-component,
            .zoom-btn {
                background-color: #202124;
            }
            
            .component-card,
            .service-item {
                border-color: var(--light-gray);
                background-color: #202124;
            }
            
            .search-input {
                background-color: #202124;
                color: var(--dark);
            }
            
            .step-description {
                background-color: #282828;
            }
            
            .comparison-table th {
                background-color: #282828;
            }
            
            .comparison-table tr:nth-child(even) {
                background-color: rgba(40, 40, 40, 0.5);
            }
            
            .tooltip,
            .component-label {
                background-color: #282828;
                color: var(--dark);
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        .slide-in-right {
            animation: slideInRight 0.5s ease forwards;
        }
        
        .slide-in-up {
            animation: slideInUp 0.5s ease forwards;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z" />
            </svg>
            Cloud Architecture Explorer
        </div>
        <nav>
            <ul>
                <li><a href="#" class="active">Patterns</a></li>
                <li><a href="#">Components</a></li>
                <li><a href="#">Glossary</a></li>
                <li><a href="#">Resources</a></li>
            </ul>
        </nav>
    </header>
    
    <div class="container">
        <aside class="sidebar">
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search patterns..." id="search-input" aria-label="Search patterns">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </div>
            
            <h3>Architecture Patterns</h3>
            <ul class="pattern-list" id="pattern-list">
                <li class="pattern-item active" data-pattern="web-app" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                            <line x1="8" y1="21" x2="16" y2="21"></line>
                            <line x1="12" y1="17" x2="12" y2="21"></line>
                        </svg>
                    </div>
                    Web Application
                </li>
                <li class="pattern-item" data-pattern="microservices" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                    </div>
                    Microservices
                </li>
                <li class="pattern-item" data-pattern="serverless" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                        </svg>
                    </div>
                    Serverless Architecture
                </li>
                <li class="pattern-item" data-pattern="data-lake" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                        </svg>
                    </div>
                    Data Lake
                </li>
                <li class="pattern-item" data-pattern="event-driven" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <line x1="22" y1="12" x2="2" y2="12"></line>
                            <path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>
                        </svg>
                    </div>
                    Event-Driven Architecture
                </li>
            </ul>
            
            <h3 style="margin-top: 1.5rem;">Cloud Providers</h3>
            <ul class="pattern-list">
                <li class="pattern-item" data-provider="aws" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path>
                            <path d="M12 12v9"></path>
                            <path d="m16 16-4-4-4 4"></path>
                        </svg>
                    </div>
                    AWS
                </li>
                <li class="pattern-item" data-provider="azure" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path>
                            <path d="M12 12v9"></path>
                            <path d="m16 16-4-4-4 4"></path>
                        </svg>
                    </div>
                    Azure
                </li>
                <li class="pattern-item" data-provider="gcp" tabindex="0">
                    <div class="pattern-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path>
                            <path d="M12 12v9"></path>
                            <path d="m16 16-4-4-4 4"></path>
                        </svg>
                    </div>
                    Google Cloud
                </li>
            </ul>
        </aside>
        
        <main class="main-content">
            <section class="diagram-container fade-in">
                <div class="diagram-header">
                    <h2 class="diagram-title">Web Application Architecture</h2>
                    <div class="diagram-controls">
                        <button class="btn btn-outline" id="zoom-btn" aria-label="Toggle zoom">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                <line x1="11" y1="8" x2="11" y2="14"></line>
                                <line x1="8" y1="11" x2="14" y2="11"></line>
                            </svg>
                            Zoom
                        </button>
                        <button class="btn btn-outline" id="compare-btn" aria-label="Compare cloud providers">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <polyline points="16 3 21 3 21 8"></polyline>
                                <line x1="4" y1="20" x2="21" y2="3"></line>
                                <polyline points="21 16 21 21 16 21"></polyline>
                                <line x1="15" y1="15" x2="21" y2="21"></line>
                                <line x1="4" y1="4" x2="9" y2="9"></line>
                            </svg>
                            Compare Providers
                        </button>
                        <button class="btn" id="guide-btn" aria-label="Start guided tour">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            Start Guided Tour
                        </button>
                    </div>
                </div>
                
                <div class="diagram-canvas" id="diagram-canvas" tabindex="0" aria-label="Cloud architecture diagram">
                    <!-- Cloud components will be dynamically added here -->
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoom-in-btn" aria-label="Zoom in">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                <line x1="11" y1="8" x2="11" y2="14"></line>
                                <line x1="8" y1="11" x2="14" y2="11"></line>
                            </svg>
                        </button>
                        <button class="zoom-btn" id="zoom-out-btn" aria-label="Zoom out">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                <line x1="8" y1="11" x2="14" y2="11"></line>
                            </svg>
                        </button>
                        <button class="zoom-btn" id="reset-zoom-btn" aria-label="Reset zoom">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path>
                                <path d="M3 3v5h5"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <div class="step-controls" style="display: none;" id="tour-controls">
                    <button class="btn btn-outline" id="prev-step-btn" aria-label="Previous step">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        Previous
                    </button>
                    
                    <div class="step-indicator" id="step-indicator" aria-label="Tour progress">
                        <!-- Step dots will be dynamically added here -->
                    </div>
                    
                    <button class="btn" id="next-step-btn" aria-label="Next step">
                        Next
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </button>
                </div>
                
                <div class="step-description slide-in-up" id="step-description" style="display: none;" aria-live="polite">
                    <!-- Step description will be dynamically added here -->
                </div>
            </section>
            
            <section class="info-panel slide-in-right" id="info-panel">
                <h3>Component Details</h3>
                <p>Select a component in the diagram above to see its details.</p>
                
                <div class="component-list" id="component-list">
                    <!-- Component cards will be dynamically added here -->
                </div>
            </section>
            
            <section class="glossary-section fade-in">
                <h3>Cloud Glossary</h3>
                <div class="glossary-grid">
                    <div class="glossary-item">
                        <div class="glossary-term">API Gateway</div>
                        <div class="glossary-definition">A service that creates, publishes, maintains, monitors, and secures APIs at any scale.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Auto Scaling</div>
                        <div class="glossary-definition">A feature that automatically adjusts the number of compute resources in your server group according to demand.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">CDN (Content Delivery Network)</div>
                        <div class="glossary-definition">A distributed network of servers that delivers web content to users based on their geographic location.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Containers</div>
                        <div class="glossary-definition">Lightweight, standalone executable software packages that include everything needed to run an application.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Elasticity</div>
                        <div class="glossary-definition">The ability to automatically or dynamically increase or decrease the resources as needed.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Load Balancer</div>
                        <div class="glossary-definition">A device that distributes network or application traffic across multiple servers to ensure no single server bears too much demand.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Microservices</div>
                        <div class="glossary-definition">An architectural style that structures an application as a collection of small, loosely coupled services that can be developed, deployed, and scaled independently.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Serverless</div>
                        <div class="glossary-definition">A cloud computing execution model where the cloud provider dynamically manages the allocation of machine resources, eliminating the need for server management.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Virtual Machine (VM)</div>
                        <div class="glossary-definition">An emulation of a computer system that provides the functionality of a physical computer, running an operating system and applications.</div>
                    </div>
                    <div class="glossary-item">
                        <div class="glossary-term">Infrastructure as Code (IaC)</div>
                        <div class="glossary-definition">The process of managing and provisioning computing infrastructure through machine-readable definition files, rather than physical hardware configuration.</div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <div class="tooltip" id="tooltip" role="tooltip">
        <div class="tooltip-title">Component Name</div>
        <div class="tooltip-description">Component description goes here.</div>
    </div>
    
    <div class="modal" id="comparison-modal" role="dialog" aria-labelledby="modal-title" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">Cloud Provider Comparison</h2>
                <button class="modal-close" id="close-modal" aria-label="Close modal">&times;</button>
            </div>
            <div class="tab-container">
                <div class="tab-nav" role="tablist">
                    <button class="tab-btn active" data-tab="services" role="tab" aria-selected="true" aria-controls="services-tab" id="services-tab-btn">Services</button>
                    <button class="tab-btn" data-tab="pricing" role="tab" aria-selected="false" aria-controls="pricing-tab" id="pricing-tab-btn">Pricing Models</button>
                    <button class="tab-btn" data-tab="features" role="tab" aria-selected="false" aria-controls="features-tab" id="features-tab-btn">Features</button>
                </div>
                <div class="tab-content active" id="services-tab" role="tabpanel" aria-labelledby="services-tab-btn">
                    <h3>Equivalent Services Across Providers</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th scope="col">Service Type</th>
                                <th scope="col">AWS</th>
                                <th scope="col">Azure</th>
                                <th scope="col">Google Cloud</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Virtual Machines</td>
                                <td>EC2</td>
                                <td>Virtual Machines</td>
                                <td>Compute Engine</td>
                            </tr>
                            <tr>
                                <td>Object Storage</td>
                                <td>S3</td>
                                <td>Blob Storage</td>
                                <td>Cloud Storage</td>
                            </tr>
                            <tr>
                                <td>Relational Database</td>
                                <td>RDS</td>
                                <td>SQL Database</td>
                                <td>Cloud SQL</td>
                            </tr>
                            <tr>
                                <td>NoSQL Database</td>
                                <td>DynamoDB</td>
                                <td>Cosmos DB</td>
                                <td>Firestore</td>
                            </tr>
                            <tr>
                                <td>Serverless</td>
                                <td>Lambda</td>
                                <td>Functions</td>
                                <td>Cloud Functions</td>
                            </tr>
                            <tr>
                                <td>Container Orchestration</td>
                                <td>EKS/ECS</td>
                                <td>AKS/Container Instances</td>
                                <td>GKE</td>
                            </tr>
                            <tr>
                                <td>CDN</td>
                                <td>CloudFront</td>
                                <td>CDN</td>
                                <td>Cloud CDN</td>
                            </tr>
                        </tbody>
                    </table>
                    <h3 style="margin-top: 1.5rem;">Popular Services by Provider</h3>
                    <div class="service-grid">
                        <div class="service-item">
                            <div class="service-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                    <line x1="8" y1="21" x2="16" y2="21"></line>
                                    <line x1="12" y1="17" x2="12" y2="21"></line>
                                </svg>
                            </div>
                            <div class="service-name">AWS EC2</div>
                        </div>
                        <div class="service-item">
                            <div class="service-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                                </svg>
                            </div>
                            <div class="service-name">AWS S3</div>
                        </div>
                        <div class="service-item">
                            <div class="service-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <polyline points="16 3 21 3 21 8"></polyline>
                                    <line x1="4" y1="20" x2="21" y2="3"></line>
                                    <polyline points="21 16 21 21 16 21"></polyline>
                                    <line x1="15" y1="15" x2="21" y2="21"></line>
                                    <line x1="4" y1="4" x2="9" y2="9"></line>
                                </svg>
                            </div>
                            <div class="service-name">Azure VMs</div>
                        </div>
                        <div class="service-item">
                            <div class="service-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                                    <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                                    <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                                </svg>
                            </div>
                            <div class="service-name">Azure SQL</div>
                        </div>
                        <div class="service-item">
                            <div class="service-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                            </div>
                            <div class="service-name">GCP GKE</div>
                        </div>
                        <div class="service-item">
                            <div class="service-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path>
                                    <path d="M12 12v9"></path>
                                    <path d="m16 16-4-4-4 4"></path>
                                </svg>
                            </div>
                            <div class="service-name">GCP Functions</div>
                        </div>
                    </div>
                </div>
                <div class="tab-content" id="pricing-tab" role="tabpanel" aria-labelledby="pricing-tab-btn" hidden>
                    <h3>Pricing Model Comparison</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th scope="col">Pricing Feature</th>
                                <th scope="col">AWS</th>
                                <th scope="col">Azure</th>
                                <th scope="col">Google Cloud</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Pay-as-you-go</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Free Tier</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Reserved Instances</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Spot/Preemptible Instances</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Sustained Use Discounts</td>
                                <td class="feature-unavailable">✗</td>
                                <td class="feature-unavailable">✗</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Committed Use Discounts</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Free Egress to Same Region</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                        </tbody>
                    </table>
                    <p style="margin-top: 1rem; color: var(--gray);">Note: Pricing details may change. Always check the provider's official documentation for the most current information.</p>
                </div>
                <div class="tab-content" id="features-tab" role="tabpanel" aria-labelledby="features-tab-btn" hidden>
                    <h3>Feature Comparison</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th scope="col">Feature</th>
                                <th scope="col">AWS</th>
                                <th scope="col">Azure</th>
                                <th scope="col">Google Cloud</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Global Regions</td>
                                <td>25+</td>
                                <td>60+</td>
                                <td>20+</td>
                            </tr>
                            <tr>
                                <td>Hybrid Cloud Support</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>AI/ML Services</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Kubernetes Integration</td>
                                <td>EKS</td>
                                <td>AKS</td>
                                <td>GKE</td>
                            </tr>
                            <tr>
                                <td>Serverless Computing</td>
                                <td>Lambda</td>
                                <td>Functions</td>
                                <td>Cloud Functions</td>
                            </tr>
                            <tr>
                                <td>IoT Platform</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                            </tr>
                            <tr>
                                <td>Blockchain Services</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-available">✓</td>
                                <td class="feature-unavailable">✗</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Define cloud components for web application architecture
            const webAppComponents = [
                {
                    id: 'user',
                    name: 'Users',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#5f6368" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>',
                    description: 'End users who access the web application through browsers or mobile devices.',
                    position: { top: '50px', left: '50px' },
                    details: 'Users interact with your application through browsers or mobile apps. Their requests are sent to the cloud infrastructure where they are processed and responded to. Ensuring a good user experience requires optimizing response times, availability, and security throughout your architecture.'
                },
                {
                    id: 'cdn',
                    name: 'CDN',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>',
                    description: 'Content Delivery Network caches static content closer to users for faster delivery.',
                    position: { top: '50px', left: '150px' },
                    details: 'A Content Delivery Network (CDN) distributes your static content (images, CSS, JavaScript) across multiple locations worldwide. This reduces latency by serving content from the location closest to the user. CDNs also provide DDoS protection and can offload traffic from your origin servers. Popular CDN services include Amazon CloudFront, Azure CDN, and Google Cloud CDN.'
                },
                {
                    id: 'load-balancer',
                    name: 'Load Balancer',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ea4335" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polyline points="17 18 23 18 23 6 17 6"></polyline><polyline points="7 6 1 6 1 18 7 18"></polyline><path d="M1 10h22"></path><path d="M1 14h22"></path></svg>',
                    description: 'Distributes incoming traffic across multiple instances for high availability and reliability.',
                    position: { top: '50px', left: '250px' },
                    details: 'Load balancers distribute incoming application traffic across multiple targets, such as web servers. This increases the availability and fault tolerance of your application. They can also perform health checks to ensure traffic is only sent to healthy instances. Load balancers support SSL termination, session persistence, and can help with auto-scaling. Cloud providers offer Application Load Balancers (Layer 7) and Network Load Balancers (Layer 4).'
                },
                {
                    id: 'web-tier',
                    name: 'Web Tier',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#34a853" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>',
                    description: 'Handles HTTP requests and serves web content to users.',
                    position: { top: '150px', left: '150px' },
                    details: 'The Web Tier consists of servers that handle HTTP requests and serve web content. These can be auto-scaling groups of instances running web servers like Nginx or Apache, or managed services like AWS Elastic Beanstalk, Azure App Service, or Google App Engine. This tier processes incoming requests, renders HTML, and communicates with the application tier for dynamic content. It can be scaled horizontally to handle increased traffic.'
                },
                {
                    id: 'app-tier',
                    name: 'Application Tier',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fbbc05" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M18 10h-4V3H8v7H4l7 7 7-7z"></path><path d="M18 17v3H6v-3"></path></svg>',
                    description: 'Contains the business logic of the application.',
                    position: { top: '150px', left: '250px' },
                    details: 'The Application Tier contains your business logic and processes data from the web tier before storing or retrieving it from the database. This tier can be implemented using containers (Docker with Kubernetes/ECS), serverless functions (Lambda, Azure Functions), or traditional application servers. It handles authentication, data processing, and business rules. The application tier can be scaled independently from the web tier based on computational demands.'
                },
                {
                    id: 'database',
                    name: 'Database',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></svg>',
                    description: 'Stores and manages application data.',
                    position: { top: '250px', left: '200px' },
                    details: 'The Database Tier stores and manages your application data. Cloud providers offer managed database services like Amazon RDS, Azure SQL Database, or Google Cloud SQL for relational databases, as well as NoSQL options like DynamoDB, Cosmos DB, or Firestore. For high availability, you can implement read replicas, multi-AZ deployments, and automated backups. Database scaling can be vertical (increasing instance size) or horizontal (sharding).'
                },
                {
                    id: 'cache',
                    name: 'Cache',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#34a853" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle></svg>',
                    description: 'In-memory data store for faster data retrieval.',
                    position: { top: '200px', left: '350px' },
                    details: 'Caching improves performance by storing frequently accessed data in memory for quick retrieval. Services like Redis or Memcached can be used to implement caching layers that reduce database load and improve response times. Caching can be implemented at different levels - browser caching, CDN caching, application caching (for API responses or computed results), and database query caching. Proper cache invalidation strategies are essential for maintaining data consistency.'
                },
                {
                    id: 'storage',
                    name: 'Object Storage',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ea4335" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>',
                    description: 'Stores and serves static files like images, videos, and documents.',
                    position: { top: '250px', left: '350px' },
                    details: 'Object Storage services like Amazon S3, Azure Blob Storage, or Google Cloud Storage provide scalable storage for static files such as images, videos, documents, and backups. These services offer high durability and availability. They support lifecycle policies for automatic archiving or deletion, versioning for tracking changes, and access control for security. Object storage is often integrated with CDNs for faster content delivery and can be used for static website hosting.'
                },
                {
                    id: 'monitoring',
                    name: 'Monitoring',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fbbc05" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M2 12h4l3 8 3-16 3 8 3-4h4"></path></svg>',
                    description: 'Tracks application performance and health.',
                    position: { top: '300px', left: '150px' },
                    details: 'Monitoring services collect and analyze metrics from your application and infrastructure to provide insights into performance, health, and usage patterns. Services like CloudWatch, Application Insights, or Cloud Monitoring help detect and diagnose issues. Monitoring includes infrastructure metrics (CPU, memory, disk), application metrics (response times, error rates), logs, and alerts. Implementing comprehensive monitoring is essential for maintaining reliability, optimizing performance, and planning capacity.'
                },
                {
                    id: 'security',
                    name: 'Security',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4285f4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>',
                    description: 'Protects application and data from threats.',
                    position: { top: '300px', left: '250px' },
                    details: 'Security services protect your application and data from threats. This includes firewalls, identity and access management, encryption, DDoS protection, and security monitoring. Cloud providers offer comprehensive security services that integrate with your architecture. Key security principles include defense in depth, least privilege access, encryption in transit and at rest, regular security audits, and automated compliance checks. A well-designed security architecture addresses both external threats and internal risks.'
                },
                {
                    id: 'api-gateway',
                    name: 'API Gateway',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#ea4335" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>',
                    description: 'Manages, secures, and routes API requests to backend services.',
                    position: { top: '150px', left: '350px' },
                    details: 'API Gateway acts as a front door for APIs, handling tasks such as request routing, composition, and protocol translation. It provides features like authentication, rate limiting, caching, request/response transformations, and monitoring. Services like Amazon API Gateway, Azure API Management, or Google Cloud Endpoints help you create, publish, and manage APIs securely. API Gateway enables you to build microservices architectures by providing a unified entry point for client applications.'
                },
                {
                    id: 'messaging',
                    name: 'Messaging',
                    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fbbc05" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>',
                    description: 'Enables asynchronous communication between components.',
                    position: { top: '300px', left: '350px' },
                    details: 'Messaging services enable asynchronous communication between different components of your application. They support patterns like publish/subscribe, queues, and event-driven architectures. Services like Amazon SQS/SNS, Azure Service Bus/Event Grid, or Google Pub/Sub provide reliable message delivery with features such as dead-letter queues, message filtering, and delivery guarantees. Messaging helps build loosely coupled systems that can scale independently and remain resilient to failures.'
                }
            ];
            
            // Define connections between components
            const webAppConnections = [
                { from: 'user', to: 'cdn', description: 'Request static content' },
                { from: 'user', to: 'load-balancer', description: 'Request dynamic content' },
                { from: 'cdn', to: 'web-tier', description: 'Origin requests' },
                { from: 'load-balancer', to: 'web-tier', description: 'Route requests' },
                { from: 'web-tier', to: 'app-tier', description: 'Process requests' },
                { from: 'app-tier', to: 'database', description: 'Query/store data' },
                { from: 'app-tier', to: 'cache', description: 'Cache results' },
                { from: 'app-tier', to: 'storage', description: 'Read/write files' },
                { from: 'web-tier', to: 'monitoring', description: 'Log metrics' },
                { from: 'app-tier', to: 'monitoring', description: 'Log metrics' },
                { from: 'database', to: 'monitoring', description: 'Log metrics' },
                { from: 'web-tier', to: 'security', description: 'Enforce policies' },
                { from: 'app-tier', to: 'security', description: 'Enforce policies' },
                { from: 'database', to: 'security', description: 'Enforce policies' },
                { from: 'app-tier', to: 'api-gateway', description: 'Expose APIs' },
                { from: 'api-gateway', to: 'security', description: 'Authenticate' },
                { from: 'app-tier', to: 'messaging', description: 'Send/receive messages' },
                { from: 'messaging', to: 'monitoring', description: 'Log metrics' }
            ];
            
            // Define tour steps
            const tourSteps = [
                {
                    title: 'User Interaction',
                    description: 'Users access your application through browsers or mobile apps. Their requests are sent to your cloud infrastructure, starting the request flow. Different types of content follow different paths - static content through CDN and dynamic content through your application servers.',
                    highlight: ['user', 'cdn', 'load-balancer']
                },
                {
                    title: 'Front-end Processing',
                    description: 'The load balancer distributes traffic across multiple instances for high availability. The web tier handles HTTP requests, processes user input, and communicates with the application tier for business logic processing.',
                    highlight: ['load-balancer', 'web-tier']
                },
                {
                    title: 'Application Logic',
                    description: 'The application tier contains your business logic and processes data. API Gateway manages and secures API requests from external clients. These components work together to implement your application\'s functionality and business rules.',
                    highlight: ['app-tier', 'api-gateway']
                },
                {
                    title: 'Data Management',
                    description: 'Your application data is stored in databases, with caching to improve performance. Object storage handles static files like images and documents. Messaging enables asynchronous communication between components. These services provide the data foundation for your application.',
                    highlight: ['database', 'cache', 'storage', 'messaging']
                },
                {
                    title: 'Operational Excellence',
                    description: 'Monitoring tracks application performance and health, while security services protect your application and data from threats. These cross-cutting concerns ensure your application runs reliably, securely, and efficiently in the cloud.',
                    highlight: ['monitoring', 'security']
                }
            ];
            
            // Initialize variables
            const diagramCanvas = document.getElementById('diagram-canvas');
            const tooltip = document.getElementById('tooltip');
            const componentList = document.getElementById('component-list');
            const guideBtn = document.getElementById('guide-btn');
            const tourControls = document.getElementById('tour-controls');
            const prevStepBtn = document.getElementById('prev-step-btn');
            const nextStepBtn = document.getElementById('next-step-btn');
            const stepIndicator = document.getElementById('step-indicator');
            const stepDescription = document.getElementById('step-description');
            const zoomBtn = document.getElementById('zoom-btn');
            const zoomInBtn = document.getElementById('zoom-in-btn');
            const zoomOutBtn = document.getElementById('zoom-out-btn');
            const resetZoomBtn = document.getElementById('reset-zoom-btn');
            const searchInput = document.getElementById('search-input');
            const compareBtn = document.getElementById('compare-btn');
            const comparisonModal = document.getElementById('comparison-modal');
            const closeModalBtn = document.getElementById('close-modal');
            const tabBtns = document.querySelectorAll('.tab-btn');
            
            let currentPattern = 'web-app';
            let currentTourStep = 0;
            let isTourActive = false;
            let zoomLevel = 1;
            let isDragging = false;
            let dragStartX, dragStartY;
            let canvasOffsetX = 0;
            let canvasOffsetY = 0;
            
            // Render components
            function renderComponents(components) {
                diagramCanvas.innerHTML = '';
                
                // Add zoom controls back
                diagramCanvas.appendChild(document.querySelector('.zoom-controls'));
                
                // Add components
                components.forEach(component => {
                    const componentEl = document.createElement('div');
                    componentEl.className = 'cloud-component';
                    componentEl.id = component.id;
                    componentEl.innerHTML = component.icon;
                    componentEl.style.top = component.position.top;
                    componentEl.style.left = component.position.left;
                    componentEl.setAttribute('data-name', component.name);
                    componentEl.setAttribute('data-description', component.description);
                    componentEl.setAttribute('tabindex', '0');
                    componentEl.setAttribute('role', 'button');
                    componentEl.setAttribute('aria-label', `${component.name}: ${component.description}`);
                    
                    // Add component label
                    const label = document.createElement('div');
                    label.className = 'component-label';
                    label.textContent = component.name;
                    componentEl.appendChild(label);
                    
                    componentEl.addEventListener('click', () => {
                        showComponentDetails(component);
                        selectComponent(component.id);
                    });
                    
                    componentEl.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            showComponentDetails(component);
                            selectComponent(component.id);
                            e.preventDefault();
                        }
                    });
                    
                    componentEl.addEventListener('mouseenter', (e) => {
                        showTooltip(e, component.name, component.description);
                    });
                    
                    componentEl.addEventListener('mouseleave', () => {
                        hideTooltip();
                    });
                    
                    componentEl.addEventListener('focus', (e) => {
                        showTooltip(e, component.name, component.description);
                    });
                    
                    componentEl.addEventListener('blur', () => {
                        hideTooltip();
                    });
                    
                    diagramCanvas.appendChild(componentEl);
                });
                
                // Render connections
                renderConnections(webAppConnections);
                
                // Render component list
                renderComponentList(components);
            }
            
            // Render connections between components
            function renderConnections(connections) {
                connections.forEach(connection => {
                    const fromEl = document.getElementById(connection.from);
                    const toEl = document.getElementById(connection.to);
                    
                    if (fromEl && toEl) {
                        const fromRect = fromEl.getBoundingClientRect();
                        const toRect = toEl.getBoundingClientRect();
                        
                        const canvasRect = diagramCanvas.getBoundingClientRect();
                        
                        const from = {
                            x: fromRect.left + fromRect.width / 2 - canvasRect.left,
                            y: fromRect.top + fromRect.height / 2 - canvasRect.top
                        };
                        
                        const to = {
                            x: toRect.left + toRect.width / 2 - canvasRect.left,
                            y: toRect.top + toRect.height / 2 - canvasRect.top
                        };
                        
                        const angle = Math.atan2(to.y - from.y, to.x - from.x);
                        const length = Math.sqrt(Math.pow(to.x - from.x, 2) + Math.pow(to.y - from.y, 2));
                        
                        const connector = document.createElement('div');
                        connector.className = 'connector';
                        connector.setAttribute('data-from', connection.from);
                        connector.setAttribute('data-to', connection.to);
                        connector.setAttribute('data-description', connection.description || '');
                        connector.setAttribute('aria-hidden', 'true');
                        connector.style.width = `${length}px`;
                        connector.style.height = '2px';
                        connector.style.left = `${from.x}px`;
                        connector.style.top = `${from.y}px`;
                        connector.style.transform = `rotate(${angle}rad)`;
                        connector.style.transformOrigin = '0 0';
                        
                        diagramCanvas.appendChild(connector);
                    }
                });
            }
            
            // Render component list
            function renderComponentList(components) {
                componentList.innerHTML = '';
                
                components.forEach(component => {
                    const card = document.createElement('div');
                    card.className = 'component-card';
                    card.setAttribute('data-id', component.id);
                    card.setAttribute('tabindex', '0');
                    card.setAttribute('role', 'button');
                    card.setAttribute('aria-label', `${component.name}: ${component.description}`);
                    
                    card.innerHTML = `
                        <div class="component-header">
                            <div class="component-icon">${component.icon}</div>
                            <div class="component-title">${component.name}</div>
                        </div>
                        <div class="component-description">${component.description}</div>
                    `;
                    
                    card.addEventListener('click', () => {
                        showComponentDetails(component);
                        selectComponent(component.id);
                    });
                    
                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            showComponentDetails(component);
                            selectComponent(component.id);
                            e.preventDefault();
                        }
                    });
                    
                    componentList.appendChild(card);
                });
            }
            
            // Show component details
            function showComponentDetails(component) {
                const infoPanel = document.getElementById('info-panel');
                infoPanel.innerHTML = `
                    <h3>${component.name}</h3>
                    <p>${component.details}</p>
                    
                    <h4 style="margin-top: 1.5rem; margin-bottom: 0.5rem;">Related Services</h4>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
                        <span style="background-color: rgba(66, 133, 244, 0.1); color: var(--primary); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.9rem;">AWS ${getServiceName(component.id, 'aws')}</span>
                        <span style="background-color: rgba(66, 133, 244, 0.1); color: var(--primary); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.9rem;">Azure ${getServiceName(component.id, 'azure')}</span>
                        <span style="background-color: rgba(66, 133, 244, 0.1); color: var(--primary); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.9rem;">GCP ${getServiceName(component.id, 'gcp')}</span>
                    </div>
                    
                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem;">Connected Components</h4>
                    <ul style="list-style: none; padding: 0;">
                        ${getConnectedComponents(component.id).map(conn => 
                            `<li style="padding: 0.5rem; border-bottom: 1px solid var(--light-gray);">
                                <strong>${conn.component}</strong> - ${conn.description}
                            </li>`
                        ).join('')}
                    </ul>
                `;
                
                // Highlight related connections
                highlightConnections(component.id);

                // Announce for screen readers
                const liveRegion = document.createElement('div');
                liveRegion.setAttribute('aria-live', 'polite');
                liveRegion.setAttribute('class', 'sr-only');
                liveRegion.textContent = `Details for ${component.name} are now displayed`;
                document.body.appendChild(liveRegion);
                setTimeout(() => document.body.removeChild(liveRegion), 1000);
            }
            
            // Get AWS/Azure/GCP service name based on component
            function getServiceName(componentId, provider) {
                const serviceMap = {
                    'load-balancer': {
                        aws: 'ELB/ALB',
                        azure: 'Load Balancer',
                        gcp: 'Cloud Load Balancing'
                    },
                    'web-tier': {
                        aws: 'EC2/Elastic Beanstalk',
                        azure: 'App Service',
                        gcp: 'App Engine/GCE'
                    },
                    'app-tier': {
                        aws: 'ECS/EKS/Lambda',
                        azure: 'AKS/Functions',
                        gcp: 'GKE/Cloud Functions'
                    },
                    'database': {
                        aws: 'RDS/DynamoDB',
                        azure: 'SQL Database/Cosmos DB',
                        gcp: 'Cloud SQL/Firestore'
                    },
                    'cache': {
                        aws: 'ElastiCache',
                        azure: 'Redis Cache',
                        gcp: 'Memorystore'
                    },
                    'storage': {
                        aws: 'S3',
                        azure: 'Blob Storage',
                        gcp: 'Cloud Storage'
                    },
                    'cdn': {
                        aws: 'CloudFront',
                        azure: 'CDN',
                        gcp: 'Cloud CDN'
                    },
                    'monitoring': {
                        aws: 'CloudWatch',
                        azure: 'Monitor',
                        gcp: 'Cloud Monitoring'
                    },
                    'security': {
                        aws: 'IAM/WAF/Shield',
                        azure: 'Security Center',
                        gcp: 'Cloud Security'
                    },
                    'api-gateway': {
                        aws: 'API Gateway',
                        azure: 'API Management',
                        gcp: 'API Gateway'
                    },
                    'messaging': {
                        aws: 'SQS/SNS',
                        azure: 'Service Bus',
                        gcp: 'Pub/Sub'
                    },
                    'user': {
                        aws: 'N/A',
                        azure: 'N/A',
                        gcp: 'N/A'
                    }
                };
                
                return serviceMap[componentId] ? serviceMap[componentId][provider] : 'N/A';
            }
            
            // Get connected components
            function getConnectedComponents(componentId) {
                const connected = [];
                
                webAppConnections.forEach(conn => {
                    if (conn.from === componentId) {
                        const targetComponent = webAppComponents.find(comp => comp.id === conn.to);
                        if (targetComponent) {
                            connected.push({
                                component: targetComponent.name,
                                description: conn.description || 'Connected to'
                            });
                        }
                    } else if (conn.to === componentId) {
                        const sourceComponent = webAppComponents.find(comp => comp.id === conn.from);
                        if (sourceComponent) {
                            connected.push({
                                component: sourceComponent.name,
                                description: conn.description || 'Connected from'
                            });
                        }
                    }
                });
                
                return connected;
            }
            
            // Highlight connections for a component
            function highlightConnections(componentId) {
                // Reset all connections
                document.querySelectorAll('.connector').forEach(conn => {
                    conn.classList.remove('highlighted');
                });
                
                // Highlight related connections
                document.querySelectorAll(`.connector[data-from="${componentId}"], .connector[data-to="${componentId}"]`).forEach(conn => {
                    conn.classList.add('highlighted');
                });
            }
            
            // Select component
            function selectComponent(id) {
                // Remove selected class from all components
                document.querySelectorAll('.cloud-component').forEach(el => {
                    el.classList.remove('selected');
                    el.setAttribute('aria-selected', 'false');
                });
                
                // Add selected class to the clicked component
                const selectedComponent = document.getElementById(id);
                if (selectedComponent) {
                    selectedComponent.classList.add('selected');
                    selectedComponent.setAttribute('aria-selected', 'true');
                    selectedComponent.focus();
                }
            }
            
            // Show tooltip
            function showTooltip(event, title, description) {
                tooltip.querySelector('.tooltip-title').textContent = title;
                tooltip.querySelector('.tooltip-description').textContent = description;
                
                const rect = event.target.getBoundingClientRect();
                tooltip.style.left = `${rect.right + 10}px`;
                tooltip.style.top = `${rect.top}px`;
                tooltip.classList.add('visible');
            }
            
            // Hide tooltip
            function hideTooltip() {
                tooltip.classList.remove('visible');
            }
            
            // Initialize tour
            function initTour() {
                isTourActive = true;
                tourControls.style.display = 'flex';
                stepDescription.style.display = 'block';
                guideBtn.textContent = 'End Guided Tour';
                guideBtn.setAttribute('aria-pressed', 'true');
                
                // Create step indicators
                stepIndicator.innerHTML = '';
                for (let i = 0; i < tourSteps.length; i++) {
                    const dot = document.createElement('div');
                    dot.className = `step-dot ${i === 0 ? 'active' : ''}`;
                    dot.setAttribute('data-step', i);
                    dot.setAttribute('role', 'button');
                    dot.setAttribute('tabindex', '0');
                    dot.setAttribute('aria-label', `Step ${i + 1}: ${tourSteps[i].title}`);
                    dot.setAttribute('aria-current', i === 0 ? 'step' : 'false');
                    
                    dot.addEventListener('click', () => showTourStep(i));
                    dot.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            showTourStep(i);
                            e.preventDefault();
                        }
                    });
                    
                    stepIndicator.appendChild(dot);
                }
                
                // Show first step
                showTourStep(0);
                
                // Reset zoom and position
                resetZoom();
            }
            
            // End tour
            function endTour() {
                isTourActive = false;
                tourControls.style.display = 'none';
                stepDescription.style.display = 'none';
                guideBtn.textContent = 'Start Guided Tour';
                guideBtn.setAttribute('aria-pressed', 'false');
                
                // Remove highlights
                document.querySelectorAll('.cloud-component').forEach(el => {
                    el.style.opacity = '1';
                    el.classList.remove('selected');
                    el.setAttribute('aria-selected', 'false');
                });
                
                // Reset connection highlights
                document.querySelectorAll('.connector').forEach(conn => {
                    conn.classList.remove('highlighted');
                });

                // Announce tour end for screen readers
                const liveRegion = document.createElement('div');
                liveRegion.setAttribute('aria-live', 'polite');
                liveRegion.setAttribute('class', 'sr-only');
                liveRegion.textContent = 'Guided tour has ended';
                document.body.appendChild(liveRegion);
                setTimeout(() => document.body.removeChild(liveRegion), 1000);
            }
            
            // Show tour step
            function showTourStep(stepIndex) {
                if (stepIndex < 0 || stepIndex >= tourSteps.length) {
                    endTour();
                    return;
                }
                
                currentTourStep = stepIndex;
                const step = tourSteps[stepIndex];
                
                // Update step indicators
                document.querySelectorAll('.step-dot').forEach((dot, i) => {
                    dot.classList.toggle('active', i === stepIndex);
                    dot.setAttribute('aria-current', i === stepIndex ? 'step' : 'false');
                });
                
                // Update step description
                stepDescription.innerHTML = `
                    <h4>${step.title}</h4>
                    <p>${step.description}</p>
                `;
                
                // Highlight components
                document.querySelectorAll('.cloud-component').forEach(el => {
                    if (step.highlight.includes(el.id)) {
                        el.style.opacity = '1';
                        el.classList.add('selected');
                        el.setAttribute('aria-selected', 'true');
                    } else {
                        el.style.opacity = '0.3';
                        el.classList.remove('selected');
                        el.setAttribute('aria-selected', 'false');
                    }
                });
                
                // Highlight related connections
                document.querySelectorAll('.connector').forEach(conn => {
                    const fromId = conn.getAttribute('data-from');
                    const toId = conn.getAttribute('data-to');
                    
                    if (step.highlight.includes(fromId) && step.highlight.includes(toId)) {
                        conn.classList.add('highlighted');
                    } else {
                        conn.classList.remove('highlighted');
                    }
                });
                
                // Update button states
                prevStepBtn.disabled = stepIndex === 0;
                nextStepBtn.textContent = stepIndex === tourSteps.length - 1 ? 'Finish' : 'Next';

                // Announce step for screen readers
                const liveRegion = document.createElement('div');
                liveRegion.setAttribute('aria-live', 'polite');
                liveRegion.setAttribute('class', 'sr-only');
                liveRegion.textContent = `Step ${stepIndex + 1} of ${tourSteps.length}: ${step.title}`;
                document.body.appendChild(liveRegion);
                setTimeout(() => document.body.removeChild(liveRegion), 1000);
            }
            
            // Toggle zoom
            function toggleZoom() {
                diagramCanvas.classList.toggle('zoomed');
                const isZoomed = diagramCanvas.classList.contains('zoomed');
                zoomBtn.setAttribute('aria-pressed', isZoomed ? 'true' : 'false');
            }
            
            // Zoom in
            function zoomIn() {
                if (zoomLevel < 2) {
                    zoomLevel += 0.1;
                    updateZoom();
                }
            }
            
            // Zoom out
            function zoomOut() {
                if (zoomLevel > 0.5) {
                    zoomLevel -= 0.1;
                    updateZoom();
                }
            }
            
            // Reset zoom
            function resetZoom() {
                zoomLevel = 1;
                canvasOffsetX = 0;
                canvasOffsetY = 0;
                updateZoom();
            }
            
            // Update zoom level
            function updateZoom() {
                diagramCanvas.style.transform = `scale(${zoomLevel}) translate(${canvasOffsetX}px, ${canvasOffsetY}px)`;
                
                // Announce zoom level for screen readers
                const liveRegion = document.createElement('div');
                liveRegion.setAttribute('aria-live', 'polite');
                liveRegion.setAttribute('class', 'sr-only');
                liveRegion.textContent = `Zoom level: ${Math.round(zoomLevel * 100)}%`;
                document.body.appendChild(liveRegion);
                setTimeout(() => document.body.removeChild(liveRegion), 1000);
            }
            
            // Search patterns
            function searchPatterns(query) {
                const patternItems = document.querySelectorAll('.pattern-item');
                
                if (!query) {
                    patternItems.forEach(item => {
                        item.style.display = 'flex';
                    });
                    return;
                }
                
                query = query.toLowerCase();
                
                patternItems.forEach(item => {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(query)) {
                        item.style.display = 'flex';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }
            
            // Toggle modal
            function toggleModal() {
                const isVisible = comparisonModal.classList.contains('visible');
                comparisonModal.classList.toggle('visible');
                comparisonModal.setAttribute('aria-hidden', isVisible ? 'true' : 'false');
                
                // If opening, set focus to close button
                if (!isVisible) {
                    closeModalBtn.focus();
                }
            }
            
            // Switch tabs
            function switchTab(tabId) {
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                    tab.setAttribute('hidden', 'true');
                });
                
                // Deactivate all tab buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                    btn.setAttribute('aria-selected', 'false');
                });
                
                // Activate selected tab and its button
                const selectedTab = document.getElementById(`${tabId}-tab`);
                const selectedBtn = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
                
                selectedTab.classList.add('active');
                selectedTab.removeAttribute('hidden');
                
                selectedBtn.classList.add('active');
                selectedBtn.setAttribute('aria-selected', 'true');
            }
            
            // Event listeners
            guideBtn.addEventListener('click', () => {
                if (isTourActive) {
                    endTour();
                } else {
                    initTour();
                }
            });
            
            prevStepBtn.addEventListener('click', () => {
                showTourStep(currentTourStep - 1);
            });
            
            nextStepBtn.addEventListener('click', () => {
                showTourStep(currentTourStep + 1);
            });
            
            zoomBtn.addEventListener('click', toggleZoom);
            
            zoomInBtn.addEventListener('click', zoomIn);
            
            zoomOutBtn.addEventListener('click', zoomOut);
            
            resetZoomBtn.addEventListener('click', resetZoom);
            
            // Keyboard navigation for tour
            document.addEventListener('keydown', (e) => {
                if (isTourActive) {
                    if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                        showTourStep(currentTourStep + 1);
                        e.preventDefault();
                    } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                        showTourStep(currentTourStep - 1);
                        e.preventDefault();
                    } else if (e.key === 'Escape') {
                        endTour();
                        e.preventDefault();
                    }
                }
                
                // Close modal with Escape
                if (e.key === 'Escape' && comparisonModal.classList.contains('visible')) {
                    toggleModal();
                    e.preventDefault();
                }
            });
            
            // Mouse drag to pan
            diagramCanvas.addEventListener('mousedown', (e) => {
                if (e.target === diagramCanvas) {
                    isDragging = true;
                    dragStartX = e.clientX - canvasOffsetX;
                    dragStartY = e.clientY - canvasOffsetY;
                    diagramCanvas.style.cursor = 'grabbing';
                }
            });
            
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    canvasOffsetX = e.clientX - dragStartX;
                    canvasOffsetY = e.clientY - dragStartY;
                    updateZoom();
                }
            });
            
            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    diagramCanvas.style.cursor = 'default';
                }
            });
            
            // Search input
            searchInput.addEventListener('input', () => {
                searchPatterns(searchInput.value);
            });
            
            // Comparison modal
            compareBtn.addEventListener('click', toggleModal);
            
            closeModalBtn.addEventListener('click', toggleModal);
            
            // Tab switching
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    switchTab(btn.getAttribute('data-tab'));
                });
                
                // Keyboard support for tabs
                btn.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                        const tabs = Array.from(document.querySelectorAll('.tab-btn'));
                        const currentIndex = tabs.indexOf(btn);
                        let newIndex;
                        
                        if (e.key === 'ArrowLeft') {
                            newIndex = currentIndex === 0 ? tabs.length - 1 : currentIndex - 1;
                        } else {
                            newIndex = currentIndex === tabs.length - 1 ? 0 : currentIndex + 1;
                        }
                        
                        tabs[newIndex].click();
                        tabs[newIndex].focus();
                        e.preventDefault();
                    }
                });
            });
            
            // Close modal on outside click
            comparisonModal.addEventListener('click', (e) => {
                if (e.target === comparisonModal) {
                    toggleModal();
                }
            });
            
            // Pattern selection
            document.querySelectorAll('.pattern-item').forEach(item => {
                item.addEventListener('click', () => {
                    document.querySelectorAll('.pattern-item').forEach(el => {
                        el.classList.remove('active');
                        el.setAttribute('aria-selected', 'false');
                    });
                    
                    item.classList.add('active');
                    item.setAttribute('aria-selected', 'true');
                    currentPattern = item.getAttribute('data-pattern');
                    
                    // End tour if active
                    if (isTourActive) {
                        endTour();
                    }
                    
                    // Update diagram title
                    document.querySelector('.diagram-title').textContent = item.textContent.trim() + ' Architecture';
                    
                    // For now, we only have web app architecture implemented
                    renderComponents(webAppComponents);
                    
                    // Announce pattern change for screen readers
                    const liveRegion = document.createElement('div');
                    liveRegion.setAttribute('aria-live', 'polite');
                    liveRegion.setAttribute('class', 'sr-only');
                    liveRegion.textContent = `Displaying ${item.textContent.trim()} Architecture`;
                    document.body.appendChild(liveRegion);
                    setTimeout(() => document.body.removeChild(liveRegion), 1000);
                });
                
                // Keyboard support
                item.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        item.click();
                        e.preventDefault();
                    }
                });
            });
            
            // Initialize with web app architecture
            renderComponents(webAppComponents);
            
            // Add animation classes after initial render
            setTimeout(() => {
                document.querySelectorAll('.cloud-component').forEach((component, index) => {
                    setTimeout(() => {
                        component.classList.add('fade-in');
                    }, index * 100);
                });
            }, 500);

            // Add a hidden class for screen reader only content
            const style = document.createElement('style');
            style.textContent = `
                .sr-only {
                    position: absolute;
                    width: 1px;
                    height: 1px;
                    padding: 0;
                    margin: -1px;
                    overflow: hidden;
                    clip: rect(0, 0, 0, 0);
                    white-space: nowrap;
                    border: 0;
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>