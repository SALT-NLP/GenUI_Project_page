<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathConfidence - Curriculum Builder for Math Teachers</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4285F4;
            --primary-light: #8bb4f7;
            --primary-dark: #3367d6;
            --secondary: #34A853;
            --secondary-light: #5dc26b;
            --secondary-dark: #2a8642;
            --accent: #FBBC05;
            --accent-light: #fcd050;
            --accent-dark: #f0ad0c;
            --danger: #EA4335;
            --danger-light: #f07066;
            --danger-dark: #d33426;
            --text-dark: #202124;
            --text-medium: #5f6368;
            --text-light: #9aa0a6;
            --background: #ffffff;
            --background-light: #f8f9fa;
            --background-dark: #f1f3f4;
            --border: #dadce0;
            --shadow: rgba(60, 64, 67, 0.3);
            --shadow-light: rgba(60, 64, 67, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', Arial, sans-serif;
            color: var(--text-dark);
            background-color: var(--background-light);
            line-height: 1.6;
        }

        .app-container {
            display: grid;
            grid-template-columns: 260px 1fr;
            grid-template-rows: 64px 1fr;
            height: 100vh;
        }

        /* Header Styles */
        .header {
            grid-column: 1 / -1;
            display: flex;
            align-items: center;
            padding: 0 24px;
            background-color: var(--background);
            box-shadow: 0 2px 4px var(--shadow-light);
            z-index: 10;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .logo-icon {
            font-size: 2rem;
            color: var(--primary);
        }

        .search-bar {
            margin-left: 24px;
            flex-grow: 1;
            max-width: 600px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 10px 16px 10px 40px;
            border: 1px solid var(--border);
            border-radius: 24px;
            font-size: 1rem;
            outline: none;
            transition: all 0.2s;
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px var(--primary-light);
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-medium);
        }

        .user-menu {
            display: flex;
            align-items: center;
            margin-left: auto;
            gap: 16px;
        }

        .icon-button {
            background: none;
            border: none;
            color: var(--text-medium);
            font-size: 1.25rem;
            padding: 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            position: relative;
        }

        .icon-button:hover {
            background-color: var(--background-dark);
            color: var(--text-dark);
        }

        .icon-button:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-light);
        }

        .notification-badge {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--danger);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .user-avatar:hover {
            transform: scale(1.05);
        }

        /* Sidebar Styles */
        .sidebar {
            background-color: var(--background);
            border-right: 1px solid var(--border);
            padding: 24px 16px;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-medium);
            padding: 8px 12px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border-radius: 8px;
            color: var(--text-dark);
            text-decoration: none;
            margin-bottom: 4px;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }

        .nav-item:hover {
            background-color: var(--background-light);
        }

        .nav-item.active {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            font-weight: 500;
        }

        .nav-icon {
            margin-right: 12px;
            font-size: 1.25rem;
        }

        /* Main Content Styles */
        .main-content {
            padding: 24px;
            overflow-y: auto;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 24px;
            color: var(--text-dark);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .card {
            background-color: var(--background);
            border-radius: 12px;
            box-shadow: 0 2px 6px var(--shadow-light);
            padding: 20px;
            transition: box-shadow 0.3s, transform 0.3s;
        }

        .card:hover {
            box-shadow: 0 4px 12px var(--shadow-light);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--text-dark);
        }

        .card-icon {
            color: var(--primary);
            font-size: 1.5rem;
            background-color: var(--primary-light);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-content {
            margin-bottom: 16px;
        }

        .stat {
            font-size: 2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .stat-label {
            color: var(--text-medium);
            font-size: 0.875rem;
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: var(--text-medium);
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        .trend {
            display: flex;
            align-items: center;
            color: var(--secondary);
        }

        .trend.negative {
            color: var(--danger);
        }

        .trend-icon {
            margin-right: 4px;
        }

        /* Section Styles */
        .section {
            margin-bottom: 32px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 500;
            color: var(--text-dark);
        }

        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-light);
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--border);
            color: var(--text-medium);
        }

        .btn-outline:hover {
            background-color: var(--background-dark);
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            background-color: var(--background);
            border-radius: 12px;
            box-shadow: 0 2px 6px var(--shadow-light);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
        }

        th {
            font-weight: 500;
            color: var(--text-medium);
            border-bottom: 1px solid var(--border);
            position: relative;
            cursor: pointer;
        }

        th:hover {
            color: var(--text-dark);
        }

        th::after {
            content: "arrow_upward";
            font-family: 'Material Icons Round';
            font-size: 16px;
            opacity: 0;
            margin-left: 4px;
            vertical-align: middle;
        }

        th.sorted-asc::after {
            content: "arrow_upward";
            opacity: 1;
        }

        th.sorted-desc::after {
            content: "arrow_downward";
            opacity: 1;
        }

        tr:hover {
            background-color: var(--background-light);
        }

        .student-name {
            display: flex;
            align-items: center;
        }

        .student-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--accent);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            margin-right: 12px;
        }

        .progress-bar-container {
            width: 100%;
            height: 8px;
            background-color: var(--background-dark);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            transition: width 0.5s ease-in-out;
        }

        .progress-bar.good {
            background-color: var(--secondary);
        }

        .progress-bar.warning {
            background-color: var(--accent);
        }

        .progress-bar.danger {
            background-color: var(--danger);
        }

        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
            transition: transform 0.2s;
        }

        .status-badge:hover {
            transform: scale(1.05);
        }

        .status-badge.completed {
            background-color: var(--secondary-light);
            color: var(--secondary-dark);
        }

        .status-badge.in-progress {
            background-color: var(--accent-light);
            color: var(--accent-dark);
        }

        .status-badge.not-started {
            background-color: var(--text-light);
            color: var(--text-dark);
        }

        .status-badge.at-risk {
            background-color: var(--danger-light);
            color: var(--danger-dark);
        }

        /* Chart Container */
        .chart-container {
            background-color: var(--background);
            border-radius: 12px;
            box-shadow: 0 2px 6px var(--shadow-light);
            padding: 20px;
            height: 350px;
            position: relative;
        }

        .chart-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 8px;
            z-index: 5;
        }

        /* Methodology Cards */
        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .methodology-card {
            background-color: var(--background);
            border-radius: 12px;
            box-shadow: 0 2px 6px var(--shadow-light);
            padding: 20px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .methodology-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px var(--shadow-light);
        }

        .methodology-card::after {
            content: "arrow_forward";
            font-family: 'Material Icons Round';
            position: absolute;
            bottom: 16px;
            right: 16px;
            color: var(--primary);
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.3s ease;
        }

        .methodology-card:hover::after {
            opacity: 1;
            transform: translateX(0);
        }

        .methodology-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background-color: var(--primary-light);
            color: var(--primary-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 16px;
        }

        .methodology-title {
            font-size: 1.125rem;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .methodology-description {
            color: var(--text-medium);
            font-size: 0.875rem;
            margin-bottom: 16px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .tag-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            padding: 4px 8px;
            border-radius: 4px;
            background-color: var(--background-dark);
            color: var(--text-medium);
            font-size: 0.75rem;
            transition: background-color 0.2s, color 0.2s;
        }

        .tag:hover {
            background-color: var(--primary-light);
            color: var(--primary-dark);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal {
            background-color: var(--background);
            border-radius: 12px;
            box-shadow: 0 8px 24px var(--shadow);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(20px);
            transition: transform 0.3s;
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            background-color: var(--background);
            z-index: 1;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 500;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-medium);
            font-size: 1.25rem;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s, color 0.2s;
        }

        .modal-close:hover {
            background-color: var(--background-dark);
            color: var(--text-dark);
        }

        .modal-close:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--primary-light);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 16px 20px;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            position: sticky;
            bottom: 0;
            background-color: var(--background);
            z-index: 1;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-dark);
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 1rem;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px var(--primary-light);
            outline: none;
        }

        .form-select {
            appearance: none;
            padding-right: 32px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%235f6368' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-hint {
            font-size: 0.75rem;
            color: var(--text-medium);
            margin-top: 4px;
        }

        .form-error {
            font-size: 0.75rem;
            color: var(--danger);
            margin-top: 4px;
        }

        .form-control.error {
            border-color: var(--danger);
        }

        .form-control.error:focus {
            box-shadow: 0 0 0 2px var(--danger-light);
        }

        /* Toolbar */
        .toolbar {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .filter-dropdown {
            position: relative;
        }

        .filter-menu {
            position: absolute;
            top: 100%;
            left: 0;
            min-width: 200px;
            background-color: var(--background);
            border-radius: 8px;
            box-shadow: 0 4px 12px var(--shadow-light);
            padding: 8px;
            margin-top: 4px;
            z-index: 10;
            display: none;
        }

        .filter-menu.active {
            display: block;
            animation: fadeIn 0.2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .filter-option {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .filter-option:hover {
            background-color: var(--background-light);
        }

        .filter-option.selected {
            background-color: var(--primary-light);
            color: var(--primary-dark);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--text-dark);
            color: var(--background);
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.75rem;
        }

        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--text-dark) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Floating chart controls */
        .floating-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--background);
            padding: 16px;
            border-radius: 8px;
            box-shadow: 0 4px 12px var(--shadow-light);
            z-index: 10;
            display: none;
        }

        .floating-controls.active {
            display: block;
            animation: fadeIn 0.2s ease-in-out;
        }

        .control-group {
            margin-bottom: 12px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        /* Responsive Styles */
        @media (max-width: 1199px) {
            .app-container {
                grid-template-columns: 220px 1fr;
            }
        }

        @media (max-width: 991px) {
            .app-container {
                grid-template-columns: 64px 1fr;
            }

            .sidebar {
                padding: 24px 8px;
            }

            .nav-title, .nav-item span {
                display: none;
            }

            .nav-item {
                justify-content: center;
                padding: 12px;
            }

            .nav-icon {
                margin-right: 0;
            }

            .logo span {
                display: none;
            }
        }

        @media (max-width: 767px) {
            .dashboard-grid, .methodology-grid {
                grid-template-columns: 1fr;
            }

            .search-bar {
                display: none;
            }

            .toolbar {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        @media (max-width: 599px) {
            .app-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: none;
            }

            .header {
                padding: 0 16px;
            }

            .mobile-menu-btn {
                display: block;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Keyboard focus styles */
        :focus-visible {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* Dark mode support (placeholder) */
        @media (prefers-color-scheme: dark) {
            /* Dark mode styles would go here */
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="logo">
                <span class="material-icons-round logo-icon">school</span>
                <span>MathConfidence</span>
            </div>
            <div class="search-bar">
                <span class="material-icons-round search-icon">search</span>
                <input type="text" class="search-input" placeholder="Search for resources, students, or topics..." aria-label="Search">
            </div>
            <div class="user-menu">
                <button class="icon-button" aria-label="Notifications">
                    <span class="material-icons-round">notifications</span>
                    <span class="notification-badge" aria-hidden="true"></span>
                    <span class="sr-only">3 new notifications</span>
                </button>
                <button class="icon-button" aria-label="Help">
                    <span class="material-icons-round">help_outline</span>
                </button>
                <div class="user-avatar" tabindex="0" aria-label="User menu" role="button">
                    <span>MT</span>
                </div>
            </div>
        </header>

        <aside class="sidebar">
            <div class="nav-section">
                <div class="nav-title">Main</div>
                <a class="nav-item active" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">dashboard</span>
                    <span>Dashboard</span>
                </a>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">menu_book</span>
                    <span>Curriculum Builder</span>
                </a>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">quiz</span>
                    <span>Diagnostic Tool</span>
                </a>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">groups</span>
                    <span>Students</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-title">Resources</div>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">auto_stories</span>
                    <span>Teaching Strategies</span>
                </a>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">psychology</span>
                    <span>Math Anxiety Resources</span>
                </a>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">calculate</span>
                    <span>Practice Problems</span>
                </a>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">analytics</span>
                    <span>Reports</span>
                </a>
            </div>

            <div class="nav-section">
                <div class="nav-title">Settings</div>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">person</span>
                    <span>Profile</span>
                </a>
                <a class="nav-item" tabindex="0" role="button">
                    <span class="material-icons-round nav-icon">settings</span>
                    <span>Settings</span>
                </a>
            </div>
        </aside>

        <main class="main-content">
            <h1 class="page-title">Teacher Dashboard</h1>

            <div class="dashboard-grid">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Active Curricula</div>
                        <div class="card-icon">
                            <span class="material-icons-round">menu_book</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="stat">4</div>
                        <div class="stat-label">Current active curricula</div>
                    </div>
                    <div class="card-footer">
                        <span>Since last month</span>
                        <div class="trend">
                            <span class="material-icons-round trend-icon">arrow_upward</span>
                            <span>2</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Student Anxiety Level</div>
                        <div class="card-icon">
                            <span class="material-icons-round">psychology</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="stat">-18%</div>
                        <div class="stat-label">Average anxiety reduction</div>
                    </div>
                    <div class="card-footer">
                        <span>Since program start</span>
                        <div class="trend">
                            <span class="material-icons-round trend-icon">arrow_downward</span>
                            <span>Good progress</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Knowledge Gaps</div>
                        <div class="card-icon">
                            <span class="material-icons-round">find_in_page</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="stat">14</div>
                        <div class="stat-label">Common gaps identified</div>
                    </div>
                    <div class="card-footer">
                        <span>3 addressed this month</span>
                        <div class="trend">
                            <span class="material-icons-round trend-icon">arrow_upward</span>
                            <span>21%</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Practice Completion</div>
                        <div class="card-icon">
                            <span class="material-icons-round">assignment_turned_in</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="stat">76%</div>
                        <div class="stat-label">Average completion rate</div>
                    </div>
                    <div class="card-footer">
                        <span>Last week</span>
                        <div class="trend">
                            <span class="material-icons-round trend-icon">arrow_upward</span>
                            <span>12%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Student Progress</h2>
                    <div class="toolbar">
                        <div class="filter-dropdown">
                            <button class="btn btn-outline" id="filterBtn">
                                <span class="material-icons-round">filter_list</span>
                                Filter
                            </button>
                            <div class="filter-menu" id="filterMenu">
                                <div class="filter-option selected">All Students</div>
                                <div class="filter-option">High Anxiety</div>
                                <div class="filter-option">Medium Anxiety</div>
                                <div class="filter-option">Low Anxiety</div>
                                <div class="filter-option">At Risk</div>
                                <div class="filter-option">On Track</div>
                            </div>
                        </div>
                        <button class="btn btn-outline">
                            <span class="material-icons-round">sort</span>
                            Sort
                        </button>
                        <button class="btn btn-outline">
                            <span class="material-icons-round">file_download</span>
                            Export
                        </button>
                        <button class="btn btn-primary">
                            <span class="material-icons-round">visibility</span>
                            View All
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th class="sorted-asc" tabindex="0" role="button" aria-sort="ascending">Student</th>
                                <th tabindex="0" role="button" aria-sort="none">Progress</th>
                                <th tabindex="0" role="button" aria-sort="none">Anxiety Level</th>
                                <th tabindex="0" role="button" aria-sort="none">Knowledge Gaps</th>
                                <th tabindex="0" role="button" aria-sort="none">Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">JD</div>
                                        <div>Jamie Davis</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="progress-bar-container" title="85% complete">
                                        <div class="progress-bar good" style="width: 85%"></div>
                                    </div>
                                    <div style="font-size: 0.75rem; margin-top: 4px;">85%</div>
                                </td>
                                <td>
                                    <div class="tooltip">
                                        Low
                                        <span class="tooltip-text">Anxiety score: 3.2/10 (Decreased from 5.7)</span>
                                    </div>
                                </td>
                                <td>2 remaining</td>
                                <td><span class="status-badge completed">On Track</span></td>
                                <td><button class="btn btn-outline">View</button></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">AR</div>
                                        <div>Alex Rodriguez</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="progress-bar-container" title="62% complete">
                                        <div class="progress-bar warning" style="width: 62%"></div>
                                    </div>
                                    <div style="font-size: 0.75rem; margin-top: 4px;">62%</div>
                                </td>
                                <td>
                                    <div class="tooltip">
                                        Medium
                                        <span class="tooltip-text">Anxiety score: 5.8/10 (Decreased from 7.1)</span>
                                    </div>
                                </td>
                                <td>5 remaining</td>
                                <td><span class="status-badge in-progress">In Progress</span></td>
                                <td><button class="btn btn-outline">View</button></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">SK</div>
                                        <div>Sarah Kim</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="progress-bar-container" title="38% complete">
                                        <div class="progress-bar danger" style="width: 38%"></div>
                                    </div>
                                    <div style="font-size: 0.75rem; margin-top: 4px;">38%</div>
                                </td>
                                <td>
                                    <div class="tooltip">
                                        High
                                        <span class="tooltip-text">Anxiety score: 8.2/10 (Decreased from 9.0)</span>
                                    </div>
                                </td>
                                <td>8 remaining</td>
                                <td><span class="status-badge at-risk">Needs Help</span></td>
                                <td><button class="btn btn-outline">View</button></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">MP</div>
                                        <div>Michael Patel</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="progress-bar-container" title="91% complete">
                                        <div class="progress-bar good" style="width: 91%"></div>
                                    </div>
                                    <div style="font-size: 0.75rem; margin-top: 4px;">91%</div>
                                </td>
                                <td>
                                    <div class="tooltip">
                                        Low
                                        <span class="tooltip-text">Anxiety score: 2.8/10 (Decreased from 4.5)</span>
                                    </div>
                                </td>
                                <td>1 remaining</td>
                                <td><span class="status-badge completed">On Track</span></td>
                                <td><button class="btn btn-outline">View</button></td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">LJ</div>
                                        <div>Liam Johnson</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="progress-bar-container" title="54% complete">
                                        <div class="progress-bar warning" style="width: 54%"></div>
                                    </div>
                                    <div style="font-size: 0.75rem; margin-top: 4px;">54%</div>
                                </td>
                                <td>
                                    <div class="tooltip">
                                        Medium
                                        <span class="tooltip-text">Anxiety score: 6.1/10 (Decreased from 7.3)</span>
                                    </div>
                                </td>
                                <td>6 remaining</td>
                                <td><span class="status-badge in-progress">In Progress</span></td>
                                <td><button class="btn btn-outline">View</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Anxiety Level Trends</h2>
                    <div class="chart-controls">
                        <button class="btn btn-outline" id="showChartControlsBtn">
                            <span class="material-icons-round">tune</span>
                            Customize
                        </button>
                        <button class="btn btn-outline" id="exportChartBtn">
                            <span class="material-icons-round">file_download</span>
                            Export
                        </button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="anxietyChart"></canvas>
                    <div class="floating-controls" id="chartControls">
                        <div class="control-group">
                            <label for="timeRangeSelect" class="form-label">Time Range:</label>
                            <select id="timeRangeSelect" class="form-control form-select">
                                <option value="3">Last 3 months</option>
                                <option value="6" selected>Last 6 months</option>
                                <option value="12">Last 12 months</option>
                                <option value="custom">Custom range</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="studentGroupSelect" class="form-label">Student Group:</label>
                            <select id="studentGroupSelect" class="form-control form-select">
                                <option value="all" selected>All Students</option>
                                <option value="high">High Anxiety</option>
                                <option value="medium">Medium Anxiety</option>
                                <option value="low">Low Anxiety</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="chartTypeSelect" class="form-label">Chart Type:</label>
                            <select id="chartTypeSelect" class="form-control form-select">
                                <option value="line" selected>Line Chart</option>
                                <option value="bar">Bar Chart</option>
                                <option value="radar">Radar Chart</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label class="form-label">Data Series:</label>
                            <div>
                                <input type="checkbox" id="showAverage" checked>
                                <label for="showAverage">Class Average</label>
                            </div>
                            <div>
                                <input type="checkbox" id="showHigh" checked>
                                <label for="showHigh">High Anxiety</label>
                            </div>
                            <div>
                                <input type="checkbox" id="showLow" checked>
                                <label for="showLow">Low Anxiety</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Recommended Teaching Methodologies</h2>
                    <button class="btn btn-primary" id="createMethodologyBtn">
                        <span class="material-icons-round">add</span>
                        Create New
                    </button>
                </div>
                <div class="methodology-grid">
                    <div class="methodology-card" data-id="1">
                        <div class="methodology-icon">
                            <span class="material-icons-round">psychology</span>
                        </div>
                        <h3 class="methodology-title">Growth Mindset Development</h3>
                        <p class="methodology-description">Focus on developing a growth mindset to help students understand that mathematical ability can be developed through effort and learning.</p>
                        <div class="tag-container">
                            <span class="tag">Anxiety Reduction</span>
                            <span class="tag">Confidence Building</span>
                        </div>
                    </div>

                    <div class="methodology-card" data-id="2">
                        <div class="methodology-icon">
                            <span class="material-icons-round">handyman</span>
                        </div>
                        <h3 class="methodology-title">Scaffolded Instruction</h3>
                        <p class="methodology-description">Break complex concepts into smaller, manageable parts with structured support that gradually decreases as students gain confidence.</p>
                        <div class="tag-container">
                            <span class="tag">Knowledge Gaps</span>
                            <span class="tag">Step-by-Step Learning</span>
                        </div>
                    </div>

                    <div class="methodology-card" data-id="3">
                        <div class="methodology-icon">
                            <span class="material-icons-round">groups</span>
                        </div>
                        <h3 class="methodology-title">Collaborative Problem Solving</h3>
                        <p class="methodology-description">Implement structured group work that encourages students to verbalize their thinking and learn from peers in a supportive environment.</p>
                        <div class="tag-container">
                            <span class="tag">Social Learning</span>
                            <span class="tag">Communication Skills</span>
                        </div>
                    </div>

                    <div class="methodology-card" data-id="4">
                        <div class="methodology-icon">
                            <span class="material-icons-round">lightbulb</span>
                        </div>
                        <h3 class="methodology-title">Multiple Representations</h3>
                        <p class="methodology-description">Present mathematical concepts using various representations (verbal, visual, numerical, algebraic) to accommodate different learning styles.</p>
                        <div class="tag-container">
                            <span class="tag">Visual Learning</span>
                            <span class="tag">Comprehension</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Methodology Detail Modal -->
    <div class="modal-overlay" id="methodologyModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Growth Mindset Development</h3>
                <button class="modal-close" id="closeModalBtn" aria-label="Close">
                    <span class="material-icons-round">close</span>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <p>Focus on developing a growth mindset to help students understand that mathematical ability can be developed through effort and learning.</p>
                </div>
                <div class="form-group">
                    <label class="form-label">Key Benefits</label>
                    <ul>
                        <li>Reduces anxiety by shifting focus from innate ability to effort and learning</li>
                        <li>Encourages persistence when facing challenges</li>
                        <li>Builds resilience and confidence over time</li>
                        <li>Creates a positive classroom culture around mistakes and learning</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label class="form-label">Implementation Strategies</label>
                    <ol>
                        <li>Explicitly teach students about brain plasticity and how learning changes the brain</li>
                        <li>Provide specific process-focused feedback instead of person-focused praise</li>
                        <li>Normalize struggle and mistakes as part of the learning process</li>
                        <li>Share stories of famous mathematicians who overcame challenges</li>
                        <li>Use reflection prompts that focus on effort, strategies, and progress</li>
                    </ol>
                </div>
                <div class="form-group">
                    <label class="form-label">Classroom Activities</label>
                    <ul>
                        <li><strong>Effort Journal:</strong> Students track their effort and strategies, not just outcomes</li>
                        <li><strong>Mistake Analysis:</strong> Structured analysis of errors as learning opportunities</li>
                        <li><strong>Growth Mindset Moments:</strong> Short reflections on overcoming challenges</li>
                        <li><strong>Learning Celebration:</strong> Recognize progress and improvement, not just achievement</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label class="form-label">Resources</label>
                    <ul>
                        <li>Growth Mindset Mathematics Posters</li>
                        <li>Student Self-Assessment Tools</li>
                        <li>Parent Education Materials</li>
                        <li>Professional Development Modules</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelModalBtn">Cancel</button>
                <button class="btn btn-primary">
                    <span class="material-icons-round">add_circle_outline</span>
                    Apply to Curriculum
                </button>
            </div>
        </div>
    </div>

    <!-- Create New Methodology Modal -->
    <div class="modal-overlay" id="createMethodologyModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Create New Teaching Methodology</h3>
                <button class="modal-close" id="closeCreateModalBtn" aria-label="Close">
                    <span class="material-icons-round">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="methodName">Methodology Name</label>
                    <input type="text" id="methodName" class="form-control" placeholder="Enter a name for this methodology" required>
                    <div class="form-hint">Choose a descriptive name that reflects the core approach</div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="methodIcon">Icon</label>
                    <select id="methodIcon" class="form-control form-select">
                        <option value="psychology">Psychology (Mind)</option>
                        <option value="school">Education</option>
                        <option value="handyman">Tools/Techniques</option>
                        <option value="groups">Collaboration</option>
                        <option value="lightbulb">Ideas/Concepts</option>
                        <option value="spa">Wellness/Calm</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="methodDescription">Description</label>
                    <textarea id="methodDescription" class="form-control form-textarea" placeholder="Describe the methodology and its benefits" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="methodTarget">Target Issues</label>
                    <select id="methodTarget" class="form-control form-select" multiple size="4" aria-multiselectable="true">
                        <option value="anxiety">Math Anxiety</option>
                        <option value="gaps">Knowledge Gaps</option>
                        <option value="confidence">Confidence Building</option>
                        <option value="engagement">Student Engagement</option>
                        <option value="conceptual">Conceptual Understanding</option>
                        <option value="procedural">Procedural Fluency</option>
                    </select>
                    <div class="form-hint">Hold Ctrl/Cmd to select multiple issues</div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="methodImplementation">Implementation Steps</label>
                    <textarea id="methodImplementation" class="form-control form-textarea" placeholder="List the key steps to implement this methodology"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="methodResources">Required Resources</label>
                    <textarea id="methodResources" class="form-control form-textarea" placeholder="List any resources needed for this methodology"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Evidence Level</label>
                    <div>
                        <input type="radio" name="evidence" id="evidence1" value="research-based" checked>
                        <label for="evidence1">Research-based</label>
                    </div>
                    <div>
                        <input type="radio" name="evidence" id="evidence2" value="evidence-informed">
                        <label for="evidence2">Evidence-informed</label>
                    </div>
                    <div>
                        <input type="radio" name="evidence" id="evidence3" value="practice-based">
                        <label for="evidence3">Practice-based</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelCreateModalBtn">Cancel</button>
                <button class="btn btn-primary" id="saveMethodologyBtn">
                    <span class="material-icons-round">save</span>
                    Create Methodology
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // DOM Elements
        const methodologyCards = document.querySelectorAll('.methodology-card');
        const methodologyModal = document.getElementById('methodologyModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const cancelModalBtn = document.getElementById('cancelModalBtn');
        const createMethodologyBtn = document.getElementById('createMethodologyBtn');
        const createMethodologyModal = document.getElementById('createMethodologyModal');
        const closeCreateModalBtn = document.getElementById('closeCreateModalBtn');
        const cancelCreateModalBtn = document.getElementById('cancelCreateModalBtn');
        const saveMethodologyBtn = document.getElementById('saveMethodologyBtn');
        const filterBtn = document.getElementById('filterBtn');
        const filterMenu = document.getElementById('filterMenu');
        const filterOptions = document.querySelectorAll('.filter-option');
        const showChartControlsBtn = document.getElementById('showChartControlsBtn');
        const chartControls = document.getElementById('chartControls');
        const exportChartBtn = document.getElementById('exportChartBtn');

        // Methodology cards click event
        methodologyCards.forEach(card => {
            card.addEventListener('click', () => {
                const methodId = card.getAttribute('data-id');
                const title = card.querySelector('.methodology-title').textContent;
                modalTitle.textContent = title;
                methodologyModal.classList.add('active');
            });

            // Keyboard accessibility
            card.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    card.click();
                }
            });
        });

        // Close methodology modal
        closeModalBtn.addEventListener('click', () => {
            methodologyModal.classList.remove('active');
        });

        cancelModalBtn.addEventListener('click', () => {
            methodologyModal.classList.remove('active');
        });

        // Create methodology modal
        createMethodologyBtn.addEventListener('click', () => {
            createMethodologyModal.classList.add('active');
        });

        closeCreateModalBtn.addEventListener('click', () => {
            createMethodologyModal.classList.remove('active');
        });

        cancelCreateModalBtn.addEventListener('click', () => {
            createMethodologyModal.classList.remove('active');
        });

        saveMethodologyBtn.addEventListener('click', () => {
            // Form validation
            const methodName = document.getElementById('methodName');
            const methodDescription = document.getElementById('methodDescription');
            
            let isValid = true;
            
            if (!methodName.value.trim()) {
                methodName.classList.add('error');
                if (!methodName.nextElementSibling.classList.contains('form-error')) {
                    const errorMsg = document.createElement('div');
                    errorMsg.classList.add('form-error');
                    errorMsg.textContent = 'Methodology name is required';
                    methodName.parentNode.insertBefore(errorMsg, methodName.nextElementSibling.nextSibling);
                }
                isValid = false;
            } else {
                methodName.classList.remove('error');
                const errorMsg = methodName.parentNode.querySelector('.form-error');
                if (errorMsg) errorMsg.remove();
            }
            
            if (!methodDescription.value.trim()) {
                methodDescription.classList.add('error');
                if (!methodDescription.nextElementSibling || !methodDescription.nextElementSibling.classList.contains('form-error')) {
                    const errorMsg = document.createElement('div');
                    errorMsg.classList.add('form-error');
                    errorMsg.textContent = 'Description is required';
                    methodDescription.parentNode.appendChild(errorMsg);
                }
                isValid = false;
            } else {
                methodDescription.classList.remove('error');
                const errorMsg = methodDescription.parentNode.querySelector('.form-error');
                if (errorMsg) errorMsg.remove();
            }
            
            if (isValid) {
                // Here you would typically save the new methodology
                alert('Methodology created successfully!');
                createMethodologyModal.classList.remove('active');
                
                // Reset form
                document.getElementById('methodName').value = '';
                document.getElementById('methodDescription').value = '';
                document.getElementById('methodImplementation').value = '';
                document.getElementById('methodResources').value = '';
            }
        });

        // Filter dropdown
        filterBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            filterMenu.classList.toggle('active');
        });

        filterOptions.forEach(option => {
            option.addEventListener('click', () => {
                filterOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
                filterBtn.textContent = option.textContent;
                filterMenu.classList.remove('active');
            });
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!filterBtn.contains(e.target) && !filterMenu.contains(e.target)) {
                filterMenu.classList.remove('active');
            }
        });

        // Chart controls
        showChartControlsBtn.addEventListener('click', () => {
            chartControls.classList.toggle('active');
        });

        // Close chart controls when clicking outside
        document.addEventListener('click', (e) => {
            if (!showChartControlsBtn.contains(e.target) && !chartControls.contains(e.target)) {
                chartControls.classList.remove('active');
            }
        });

        exportChartBtn.addEventListener('click', () => {
            const canvas = document.getElementById('anxietyChart');
            const image = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = 'anxiety-trends.png';
            link.href = image;
            link.click();
        });

        // Close modals when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === methodologyModal) {
                methodologyModal.classList.remove('active');
            }
            if (e.target === createMethodologyModal) {
                createMethodologyModal.classList.remove('active');
            }
        });

        // Escape key to close modals
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                methodologyModal.classList.remove('active');
                createMethodologyModal.classList.remove('active');
                chartControls.classList.remove('active');
                filterMenu.classList.remove('active');
            }
        });

        // Anxiety Chart
        const anxietyCtx = document.getElementById('anxietyChart').getContext('2d');
        const anxietyChart = new Chart(anxietyCtx, {
            type: 'line',
            data: {
                labels: ['September', 'October', 'November', 'December', 'January', 'February'],
                datasets: [
                    {
                        label: 'Class Average Anxiety Level',
                        data: [7.8, 7.2, 6.5, 5.9, 5.2, 4.6],
                        borderColor: '#EA4335',
                        backgroundColor: 'rgba(234, 67, 53, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'High Anxiety Students',
                        data: [9.2, 8.9, 8.5, 7.8, 7.1, 6.4],
                        borderColor: '#FBBC05',
                        backgroundColor: 'rgba(251, 188, 5, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Low Anxiety Students',
                        data: [5.4, 4.9, 4.5, 4.2, 3.8, 3.5],
                        borderColor: '#34A853',
                        backgroundColor: 'rgba(52, 168, 83, 0.1)',
                        tension: 0.3,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10,
                        title: {
                            display: true,
                            text: 'Anxiety Level (0-10)'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Month'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(255, 255, 255, 0.9)',
                        titleColor: '#202124',
                        bodyColor: '#5f6368',
                        borderColor: '#dadce0',
                        borderWidth: 1,
                        padding: 12,
                        cornerRadius: 8,
                        boxShadow: '0 4px 6px rgba(60, 64, 67, 0.15)',
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                label += context.parsed.y.toFixed(1) + '/10';
                                return label;
                            }
                        }
                    },
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 16
                        }
                    }
                }
            }
        });

        // Chart control listeners
        document.getElementById('timeRangeSelect').addEventListener('change', updateChart);
        document.getElementById('studentGroupSelect').addEventListener('change', updateChart);
        document.getElementById('chartTypeSelect').addEventListener('change', updateChartType);
        document.getElementById('showAverage').addEventListener('change', toggleDataset);
        document.getElementById('showHigh').addEventListener('change', toggleDataset);
        document.getElementById('showLow').addEventListener('change', toggleDataset);

        function updateChart() {
            const timeRange = document.getElementById('timeRangeSelect').value;
            const studentGroup = document.getElementById('studentGroupSelect').value;
            
            // This would typically fetch new data based on selections
            // For demo purposes, we'll just modify the existing data
            
            if (studentGroup === 'high') {
                anxietyChart.data.datasets[0].data = [8.7, 8.2, 7.9, 7.5, 7.0, 6.4];
            } else if (studentGroup === 'medium') {
                anxietyChart.data.datasets[0].data = [7.2, 6.8, 6.3, 5.9, 5.4, 4.9];
            } else if (studentGroup === 'low') {
                anxietyChart.data.datasets[0].data = [5.4, 4.9, 4.5, 4.2, 3.8, 3.5];
            } else {
                anxietyChart.data.datasets[0].data = [7.8, 7.2, 6.5, 5.9, 5.2, 4.6];
            }
            
            if (timeRange === '3') {
                anxietyChart.data.labels = ['December', 'January', 'February'];
                anxietyChart.data.datasets.forEach(dataset => {
                    dataset.data = dataset.data.slice(-3);
                });
            } else if (timeRange === '12') {
                anxietyChart.data.labels = ['March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December', 'January', 'February'];
                // In a real app, you'd fetch 12 months of data
            } else {
                anxietyChart.data.labels = ['September', 'October', 'November', 'December', 'January', 'February'];
            }
            
            anxietyChart.update();
        }

        function updateChartType() {
            const chartType = document.getElementById('chartTypeSelect').value;
            anxietyChart.config.type = chartType;
            anxietyChart.update();
        }

        function toggleDataset(e) {
            const datasetIndex = {
                'showAverage': 0,
                'showHigh': 1,
                'showLow': 2
            }[e.target.id];
            
            anxietyChart.data.datasets[datasetIndex].hidden = !e.target.checked;
            anxietyChart.update();
        }

        // Sortable table headers
        const tableHeaders = document.querySelectorAll('th[role="button"]');
        tableHeaders.forEach(header => {
            header.addEventListener('click', () => {
                // Remove sorting classes from all headers
                tableHeaders.forEach(h => {
                    h.classList.remove('sorted-asc', 'sorted-desc');
                    h.setAttribute('aria-sort', 'none');
                });
                
                // Add appropriate sorting class to clicked header
                if (header.classList.contains('sorted-asc')) {
                    header.classList.remove('sorted-asc');
                    header.classList.add('sorted-desc');
                    header.setAttribute('aria-sort', 'descending');
                } else {
                    header.classList.remove('sorted-desc');
                    header.classList.add('sorted-asc');
                    header.setAttribute('aria-sort', 'ascending');
                }
                
                // In a real app, you would sort the table data here
            });
        });

        // Form validation for methodology creation
        const methodName = document.getElementById('methodName');
        const methodDescription = document.getElementById('methodDescription');
        
        methodName.addEventListener('input', validateField);
        methodDescription.addEventListener('input', validateField);
        
        function validateField(e) {
            const field = e.target;
            
            if (!field.value.trim() && field.required) {
                field.classList.add('error');
                
                // Add error message if it doesn't exist
                if (!field.nextElementSibling || !field.nextElementSibling.classList.contains('form-error')) {
                    const errorMsg = document.createElement('div');
                    errorMsg.classList.add('form-error');
                    errorMsg.textContent = `${field.id === 'methodName' ? 'Methodology name' : 'Description'} is required`;
                    
                    if (field.nextElementSibling && field.nextElementSibling.classList.contains('form-hint')) {
                        field.parentNode.insertBefore(errorMsg, field.nextElementSibling.nextSibling);
                    } else {
                        field.parentNode.appendChild(errorMsg);
                    }
                }
            } else {
                field.classList.remove('error');
                
                // Remove error message if it exists
                const errorMsg = field.parentNode.querySelector('.form-error');
                if (errorMsg) errorMsg.remove();
            }
        }
    </script>
</body>
</html>