<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environmental Data Analysis Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0"
        rel="stylesheet">
    <style>
        :root {
            --primary: #2196F3;
            --primary-light: #BBDEFB;
            --primary-dark: #1976D2;
            --secondary: #4CAF50;
            --secondary-light: #C8E6C9;
            --secondary-dark: #388E3C;
            --error: #F44336;
            --warning: #FF9800;
            --info: #2196F3;
            --success: #4CAF50;
            --background: #F5F7FA;
            --surface: #FFFFFF;
            --text-primary: #212121;
            --text-secondary: #757575;
            --border: #E0E0E0;
            --transition-speed: 0.3s;
            --border-radius: 8px;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .app-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            grid-template-rows: 60px 1fr;
            height: 100vh;
        }

        .header {
            grid-column: 1 / -1;
            background-color: var(--primary);
            color: white;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow);
            z-index: 10;
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 500;
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .sidebar {
            background-color: var(--surface);
            border-right: 1px solid var(--border);
            padding: 20px 0;
            overflow-y: auto;
            transition: transform var(--transition-speed) ease;
        }

        .workflow-steps {
            list-style: none;
        }

        .workflow-step {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            border-left: 3px solid transparent;
            transition: all var(--transition-speed) ease;
        }

        .workflow-step:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .workflow-step.active {
            background-color: var(--primary-light);
            border-left-color: var(--primary);
            color: var(--primary-dark);
        }

        .workflow-step.completed {
            border-left-color: var(--success);
        }

        .workflow-step .step-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary-light);
            color: var(--primary-dark);
            transition: all var(--transition-speed) ease;
        }

        .workflow-step.active .step-icon {
            background-color: var(--primary);
            color: white;
        }

        .workflow-step.completed .step-icon {
            background-color: var(--success);
            color: white;
        }

        .workflow-step .step-details {
            flex: 1;
        }

        .workflow-step .step-name {
            font-weight: 500;
        }

        .workflow-step .step-description {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .main-content {
            padding: 20px;
            overflow-y: auto;
        }

        .panel {
            background-color: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            overflow: hidden;
            transition: box-shadow 0.2s ease;
        }

        .panel:hover {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
        }

        .panel-header {
            padding: 15px 20px;
            background-color: var(--primary-light);
            color: var(--primary-dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .panel-content {
            padding: 20px;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            gap: 8px;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn:focus {
            outline: 2px solid rgba(33, 150, 243, 0.5);
            outline-offset: 2px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary-light);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .input-field {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .input-field:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
        }

        .file-upload {
            border: 2px dashed var(--border);
            border-radius: var(--border-radius);
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .file-upload:hover {
            border-color: var(--primary);
            background-color: rgba(33, 150, 243, 0.05);
        }

        .file-upload.dragover {
            border-color: var(--primary);
            background-color: rgba(33, 150, 243, 0.1);
        }

        .file-upload-icon {
            font-size: 48px;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .file-upload-text {
            margin-bottom: 15px;
        }

        .file-formats {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .data-table-container {
            overflow-x: auto;
            border-radius: var(--border-radius);
            border: 1px solid var(--border);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 10px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            font-weight: 500;
            position: sticky;
            top: 0;
        }

        .data-table tr:hover {
            background-color: rgba(0, 0, 0, 0.02);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-cleaning-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .tool-card {
            background-color: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 15px;
            display: flex;
            flex-direction: column;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .tool-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .tool-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .tool-icon {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .tool-card:hover .tool-icon {
            background-color: var(--primary);
            color: white;
        }

        .tool-title {
            font-weight: 500;
        }

        .tool-description {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .tool-actions {
            margin-top: auto;
            display: flex;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background-color: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 15px;
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-title {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 500;
        }

        .chart-container {
            height: 400px;
            position: relative;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            background-color: var(--surface);
            box-shadow: var(--shadow);
            padding: 15px;
            transition: box-shadow 0.2s ease;
        }

        .chart-container:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .tab-container {
            margin-bottom: 20px;
        }

        .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 15px;
            overflow-x: auto;
        }

        .tab-button {
            padding: 10px 15px;
            border: none;
            background: none;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab-button:hover {
            color: var(--primary);
        }

        .tab-button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .tab-content.active {
            display: block;
        }

        .grid-2-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 1024px) {
            .app-container {
                grid-template-columns: 200px 1fr;
            }

            .grid-2-col {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: fixed;
                top: 60px;
                left: 0;
                height: calc(100vh - 60px);
                width: 250px;
                transform: translateX(-100%);
                z-index: 5;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .mobile-menu-button {
                display: block;
            }

            .data-cleaning-tools {
                grid-template-columns: 1fr;
            }
        }

        .mobile-menu-button {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .floating-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 10;
        }

        .floating-controls.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .control-group {
            margin: 10px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            flex-direction: column;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .badge-primary {
            background-color: var(--primary-light);
            color: var(--primary-dark);
        }

        .badge-success {
            background-color: var(--secondary-light);
            color: var(--secondary-dark);
        }

        .badge-warning {
            background-color: #FFF3E0;
            color: #E65100;
        }

        .badge-error {
            background-color: #FFEBEE;
            color: #C62828;
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 4px;
            height: 8px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .chip {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            background-color: var(--primary-light);
            color: var(--primary-dark);
            border-radius: 16px;
            font-size: 12px;
            margin-right: 8px;
            margin-bottom: 8px;
            transition: background-color 0.2s ease;
        }

        .chip:hover {
            background-color: rgba(33, 150, 243, 0.2);
        }

        .chip-close {
            margin-left: 6px;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .chip-close:hover {
            color: var(--error);
        }

        .correlation-matrix {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 2px;
            margin-top: 15px;
        }

        .correlation-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 500;
            color: white;
            border-radius: 2px;
            transition: transform 0.2s ease;
        }

        .correlation-cell:hover {
            transform: scale(1.05);
            z-index: 1;
        }

        .model-settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .policy-slider {
            width: 100%;
            margin: 10px 0;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            border-radius: 3px;
            background: #e0e0e0;
            outline: none;
        }

        .policy-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .policy-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .policy-slider::-webkit-slider-thumb:hover {
            background: var(--primary-dark);
        }

        .policy-slider::-moz-range-thumb:hover {
            background: var(--primary-dark);
        }

        .visualization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .visualization-card {
            background-color: var(--surface);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .visualization-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .visualization-header {
            padding: 15px;
            background-color: var(--primary-light);
            color: var(--primary-dark);
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .visualization-body {
            padding: 15px;
            height: 300px;
            position: relative;
        }

        .loading-indicator {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loading-indicator.active {
            opacity: 1;
            pointer-events: auto;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--primary-light);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .help-tooltip {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background-color: var(--primary-light);
            color: var(--primary-dark);
            font-size: 12px;
            margin-left: 6px;
            cursor: help;
            position: relative;
        }

        .help-tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 10;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--surface);
            color: var(--text-primary);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notification.success {
            border-left: 4px solid var(--success);
        }

        .notification.error {
            border-left: 4px solid var(--error);
        }

        .notification.warning {
            border-left: 4px solid var(--warning);
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        .notification-icon {
            color: var(--success);
        }

        .notification.error .notification-icon {
            color: var(--error);
        }

        .notification.warning .notification-icon {
            color: var(--warning);
        }

        .notification-close {
            margin-left: 10px;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .notification-close:hover {
            color: var(--text-primary);
        }

        [role="button"],
        button {
            cursor: pointer;
        }

        [aria-disabled="true"] {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Accessibility focus styles */
        :focus-visible {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* Skip to content link for keyboard users */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary);
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }
    </style>
    <!-- Add jQuery and Chart.js CDN -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <a href="#main-content" class="skip-link">Skip to content</a>
    <div class="app-container">
        <header class="header">
            <div style="display: flex; align-items: center;">
                <button class="mobile-menu-button" aria-label="Toggle menu">
                    <span class="material-symbols-rounded">menu</span>
                </button>
                <h1>Environmental Data Analysis Platform</h1>
            </div>
            <div class="header-actions">
                <button class="btn btn-outline" aria-label="Help">
                    <span class="material-symbols-rounded">help_outline</span>
                    Help
                </button>
                <button class="btn btn-outline" aria-label="Settings">
                    <span class="material-symbols-rounded">settings</span>
                    Settings
                </button>
            </div>
        </header>

        <aside class="sidebar">
            <nav>
                <ul class="workflow-steps" role="tablist">
                    <li class="workflow-step active" role="tab" aria-selected="true" tabindex="0">
                        <div class="step-icon">
                            <span class="material-symbols-rounded">upload_file</span>
                        </div>
                        <div class="step-details">
                            <div class="step-name">Load Data</div>
                            <div class="step-description">Import and preview your dataset</div>
                        </div>
                    </li>
                    <li class="workflow-step" role="tab" aria-selected="false" tabindex="0">
                        <div class="step-icon">
                            <span class="material-symbols-rounded">cleaning_services</span>
                        </div>
                        <div class="step-details">
                            <div class="step-name">Clean Data</div>
                            <div class="step-description">Handle missing values and outliers</div>
                        </div>
                    </li>
                    <li class="workflow-step" role="tab" aria-selected="false" tabindex="0">
                        <div class="step-icon">
                            <span class="material-symbols-rounded">insights</span>
                        </div>
                        <div class="step-details">
                            <div class="step-name">Explore Data</div>
                            <div class="step-description">Analyze patterns and correlations</div>
                        </div>
                    </li>
                    <li class="workflow-step" role="tab" aria-selected="false" tabindex="0">
                        <div class="step-icon">
                            <span class="material-symbols-rounded">model_training</span>
                        </div>
                        <div class="step-details">
                            <div class="step-name">Model Data</div>
                            <div class="step-description">Identify contributors and simulate policies</div>
                        </div>
                    </li>
                    <li class="workflow-step" role="tab" aria-selected="false" tabindex="0">
                        <div class="step-icon">
                            <span class="material-symbols-rounded">bar_chart</span>
                        </div>
                        <div class="step-details">
                            <div class="step-name">Visualize Data</div>
                            <div class="step-description">Create interactive visualizations</div>
                        </div>
                    </li>
                    <li class="workflow-step" role="tab" aria-selected="false" tabindex="0">
                        <div class="step-icon">
                            <span class="material-symbols-rounded">summarize</span>
                        </div>
                        <div class="step-details">
                            <div class="step-name">Report</div>
                            <div class="step-description">Generate findings and export results</div>
                        </div>
                    </li>
                </ul>
            </nav>
        </aside>

        <main class="main-content" id="main-content">
            <div class="panel">
                <div class="panel-header">
                    <h2>Load Environmental Monitoring Data</h2>
                </div>
                <div class="panel-content">
                    <p>Start by uploading your environmental monitoring dataset to begin the analysis process. The
                        platform supports various file formats and can handle large datasets with multiple variables.
                    </p>

                    <div class="file-upload" id="dropZone" tabindex="0" role="button" aria-label="Upload files">
                        <span class="material-symbols-rounded file-upload-icon">cloud_upload</span>
                        <div class="file-upload-text">Drag and drop your files here or click to browse</div>
                        <button class="btn btn-primary">
                            <span class="material-symbols-rounded">upload_file</span>
                            Select Files
                        </button>
                        <input type="file" id="fileInput" style="display: none;" multiple aria-hidden="true">
                        <div class="file-formats">Supported formats: CSV, Excel, JSON, NetCDF</div>
                    </div>

                    <div class="input-group" style="margin-top: 20px;">
                        <label for="dataDescription">Data Source Description (Optional)</label>
                        <textarea id="dataDescription" class="input-field" rows="3"
                            placeholder="Describe the source, collection methodology, and any known issues with the dataset..."></textarea>
                    </div>

                    <div class="grid-2-col" style="margin-top: 20px;">
                        <div class="input-group">
                            <label>Time Period</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="date" class="input-field" placeholder="Start Date" aria-label="Start Date">
                                <input type="date" class="input-field" placeholder="End Date" aria-label="End Date">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="geoRegion">Geographic Region</label>
                            <input type="text" id="geoRegion" class="input-field"
                                placeholder="City, region, or coordinates">
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h2>Data Preview</h2>
                    <div>
                        <button class="btn btn-outline" aria-label="Refresh data preview">
                            <span class="material-symbols-rounded">refresh</span>
                            Refresh
                        </button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-title">Total Records</div>
                            <div class="stat-value">10,245</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Time Range</div>
                            <div class="stat-value">2013-2023</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Variables</div>
                            <div class="stat-value">24</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-title">Missing Values</div>
                            <div class="stat-value">8.3%</div>
                        </div>
                    </div>

                    <div class="data-table-container">
                        <table class="data-table" aria-label="Environmental monitoring data preview">
                            <thead>
                                <tr>
                                    <th scope="col">Timestamp</th>
                                    <th scope="col">Station ID</th>
                                    <th scope="col">PM2.5</th>
                                    <th scope="col">PM10</th>
                                    <th scope="col">NO2</th>
                                    <th scope="col">O3</th>
                                    <th scope="col">Temperature</th>
                                    <th scope="col">Humidity</th>
                                    <th scope="col">Traffic Count</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023-01-15 08:00</td>
                                    <td>URBAN-023</td>
                                    <td>18.5</td>
                                    <td>32.1</td>
                                    <td>24.6</td>
                                    <td>41.2</td>
                                    <td>12.3</td>
                                    <td>68%</td>
                                    <td>342</td>
                                </tr>
                                <tr>
                                    <td>2023-01-15 09:00</td>
                                    <td>URBAN-023</td>
                                    <td>21.7</td>
                                    <td>36.4</td>
                                    <td>28.9</td>
                                    <td>38.5</td>
                                    <td>13.1</td>
                                    <td>65%</td>
                                    <td>487</td>
                                </tr>
                                <tr>
                                    <td>2023-01-15 10:00</td>
                                    <td>URBAN-023</td>
                                    <td>25.3</td>
                                    <td>41.8</td>
                                    <td>31.2</td>
                                    <td>35.7</td>
                                    <td>14.6</td>
                                    <td>62%</td>
                                    <td>521</td>
                                </tr>
                                <tr>
                                    <td>2023-01-15 11:00</td>
                                    <td>URBAN-023</td>
                                    <td>27.9</td>
                                    <td>45.2</td>
                                    <td>33.8</td>
                                    <td>31.4</td>
                                    <td>15.8</td>
                                    <td>58%</td>
                                    <td>498</td>
                                </tr>
                                <tr>
                                    <td>2023-01-15 12:00</td>
                                    <td>URBAN-023</td>
                                    <td>29.1</td>
                                    <td>47.6</td>
                                    <td>35.1</td>
                                    <td>28.9</td>
                                    <td>16.7</td>
                                    <td>55%</td>
                                    <td>472</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div style="display: flex; justify-content: flex-end; margin-top: 15px; gap: 10px;">
                        <button class="btn btn-outline" aria-label="Export preview data">
                            <span class="material-symbols-rounded">download</span>
                            Export Preview
                        </button>
                        <button class="btn btn-primary" id="proceedToCleaningBtn" aria-label="Proceed to data cleaning">
                            <span class="material-symbols-rounded">arrow_forward</span>
                            Proceed to Data Cleaning
                        </button>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h2>Data Quality Assessment</h2>
                </div>
                <div class="panel-content">
                    <div class="data-cleaning-tools">
                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">data_alert</span>
                                </div>
                                <h3 class="tool-title">Missing Values</h3>
                            </div>
                            <p class="tool-description">Identify and handle missing values using various imputation
                                techniques or by removing affected records.</p>
                            <div class="progress-container" role="progressbar" aria-valuenow="8.3" aria-valuemin="0"
                                aria-valuemax="100">
                                <div class="progress-bar" style="width: 8.3%;"></div>
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">8.3% of
                                values missing across dataset</div>
                            <div class="tool-actions">
                                <button class="btn btn-outline" aria-label="Visualize data gaps">
                                    <span class="material-symbols-rounded">visibility</span>
                                    Visualize Gaps
                                </button>
                                <button class="btn btn-primary" aria-label="Handle missing values">
                                    <span class="material-symbols-rounded">auto_fix_high</span>
                                    Handle Missing Values
                                </button>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">inconsistent_format</span>
                                </div>
                                <h3 class="tool-title">Inconsistencies</h3>
                            </div>
                            <p class="tool-description">Detect and resolve inconsistencies in data formats, units, or
                                measurement methods across stations.</p>
                            <div class="progress-container" role="progressbar" aria-valuenow="12.7" aria-valuemin="0"
                                aria-valuemax="100">
                                <div class="progress-bar" style="width: 12.7%; background-color: var(--warning);"></div>
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">12.7% of
                                records have potential inconsistencies</div>
                            <div class="tool-actions">
                                <button class="btn btn-outline" aria-label="View inconsistency details">
                                    <span class="material-symbols-rounded">list</span>
                                    View Details
                                </button>
                                <button class="btn btn-primary" aria-label="Standardize inconsistent data">
                                    <span class="material-symbols-rounded">format_align_center</span>
                                    Standardize Data
                                </button>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">trending_up</span>
                                </div>
                                <h3 class="tool-title">Outliers</h3>
                            </div>
                            <p class="tool-description">Identify and handle extreme values that may represent errors or
                                unusual environmental events.</p>
                            <div class="progress-container" role="progressbar" aria-valuenow="3.2" aria-valuemin="0"
                                aria-valuemax="100">
                                <div class="progress-bar" style="width: 3.2%; background-color: var(--success);"></div>
                            </div>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">3.2% of
                                values identified as potential outliers</div>
                            <div class="tool-actions">
                                <button class="btn btn-outline" aria-label="Plot outliers">
                                    <span class="material-symbols-rounded">scatter_plot</span>
                                    Plot Outliers
                                </button>
                                <button class="btn btn-primary" aria-label="Handle outliers">
                                    <span class="material-symbols-rounded">tune</span>
                                    Handle Outliers
                                </button>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">transform</span>
                                </div>
                                <h3 class="tool-title">Data Transformation</h3>
                            </div>
                            <p class="tool-description">Apply scaling, normalization, or other transformations to
                                prepare data for analysis.</p>
                            <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 10px;">Select
                                variables and transformation methods</div>
                            <div class="tool-actions">
                                <button class="btn btn-outline" aria-label="Select variables for transformation">
                                    <span class="material-symbols-rounded">checklist</span>
                                    Variable Selection
                                </button>
                                <button class="btn btn-primary" aria-label="Apply data transformations">
                                    <span class="material-symbols-rounded">transform</span>
                                    Apply Transformations
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h2>Data Exploration</h2>
                </div>
                <div class="panel-content">
                    <div class="tab-container">
                        <div class="tab-navigation" role="tablist">
                            <button class="tab-button active" data-tab="summary" role="tab" aria-selected="true"
                                tabindex="0">Summary Statistics</button>
                            <button class="tab-button" data-tab="correlation" role="tab" aria-selected="false"
                                tabindex="0">Correlation Analysis</button>
                            <button class="tab-button" data-tab="distribution" role="tab" aria-selected="false"
                                tabindex="0">Distribution Analysis</button>
                            <button class="tab-button" data-tab="temporal" role="tab" aria-selected="false"
                                tabindex="0">Temporal Patterns</button>
                        </div>

                        <div class="tab-content active" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                            <div class="data-table-container">
                                <table class="data-table" aria-label="Summary statistics for environmental variables">
                                    <thead>
                                        <tr>
                                            <th scope="col">Variable</th>
                                            <th scope="col">Mean</th>
                                            <th scope="col">Median</th>
                                            <th scope="col">Std Dev</th>
                                            <th scope="col">Min</th>
                                            <th scope="col">Max</th>
                                            <th scope="col">Missing</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PM2.5 (μg/m³)</td>
                                            <td>18.7</td>
                                            <td>15.2</td>
                                            <td>12.3</td>
                                            <td>2.1</td>
                                            <td>87.5</td>
                                            <td>4.2%</td>
                                        </tr>
                                        <tr>
                                            <td>PM10 (μg/m³)</td>
                                            <td>32.4</td>
                                            <td>28.7</td>
                                            <td>18.9</td>
                                            <td>4.8</td>
                                            <td>142.3</td>
                                            <td>3.8%</td>
                                        </tr>
                                        <tr>
                                            <td>NO2 (ppb)</td>
                                            <td>24.8</td>
                                            <td>21.3</td>
                                            <td>15.2</td>
                                            <td>1.2</td>
                                            <td>98.7</td>
                                            <td>5.1%</td>
                                        </tr>
                                        <tr>
                                            <td>O3 (ppb)</td>
                                            <td>35.6</td>
                                            <td>32.1</td>
                                            <td>19.7</td>
                                            <td>3.4</td>
                                            <td>112.8</td>
                                            <td>6.3%</td>
                                        </tr>
                                        <tr>
                                            <td>Temperature (°C)</td>
                                            <td>15.7</td>
                                            <td>16.2</td>
                                            <td>8.9</td>
                                            <td>-12.3</td>
                                            <td>38.1</td>
                                            <td>0.8%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="tab-content" id="correlation" role="tabpanel" aria-labelledby="correlation-tab">
                            <div style="margin-bottom: 15px;">
                                <p>Correlation matrix showing relationships between key environmental variables and
                                    potential contributing factors.</p>
                            </div>
                            <div class="correlation-matrix" aria-label="Correlation matrix">
                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">
                                    Variables</div>
                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">PM2.5
                                </div>
                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">NO2
                                </div>
                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">O3
                                </div>
                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">Traffic
                                </div>

                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">PM2.5
                                </div>
                                <div class="correlation-cell" style="background-color: #1565C0;"
                                    title="PM2.5 to PM2.5 correlation: 1.00">1.00</div>
                                <div class="correlation-cell" style="background-color: #1976D2;"
                                    title="PM2.5 to NO2 correlation: 0.78">0.78</div>
                                <div class="correlation-cell" style="background-color: #90CAF9;"
                                    title="PM2.5 to O3 correlation: 0.21">0.21</div>
                                <div class="correlation-cell" style="background-color: #1976D2;"
                                    title="PM2.5 to Traffic correlation: 0.82">0.82</div>

                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">NO2
                                </div>
                                <div class="correlation-cell" style="background-color: #1976D2;"
                                    title="NO2 to PM2.5 correlation: 0.78">0.78</div>
                                <div class="correlation-cell" style="background-color: #1565C0;"
                                    title="NO2 to NO2 correlation: 1.00">1.00</div>
                                <div class="correlation-cell" style="background-color: #E3F2FD; color: #333333;"
                                    title="NO2 to O3 correlation: -0.12">-0.12</div>
                                <div class="correlation-cell" style="background-color: #1565C0;"
                                    title="NO2 to Traffic correlation: 0.91">0.91</div>

                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">O3
                                </div>
                                <div class="correlation-cell" style="background-color: #90CAF9;"
                                    title="O3 to PM2.5 correlation: 0.21">0.21</div>
                                <div class="correlation-cell" style="background-color: #E3F2FD; color: #333333;"
                                    title="O3 to NO2 correlation: -0.12">-0.12</div>
                                <div class="correlation-cell" style="background-color: #1565C0;"
                                    title="O3 to O3 correlation: 1.00">1.00</div>
                                <div class="correlation-cell" style="background-color: #E3F2FD; color: #333333;"
                                    title="O3 to Traffic correlation: -0.08">-0.08</div>

                                <div class="correlation-cell" style="background-color: #FFFFFF; color: #333333;">Traffic
                                </div>
                                <div class="correlation-cell" style="background-color: #1976D2;"
                                    title="Traffic to PM2.5 correlation: 0.82">0.82</div>
                                <div class="correlation-cell" style="background-color: #1565C0;"
                                    title="Traffic to NO2 correlation: 0.91">0.91</div>
                                <div class="correlation-cell" style="background-color: #E3F2FD; color: #333333;"
                                    title="Traffic to O3 correlation: -0.08">-0.08</div>
                                <div class="correlation-cell" style="background-color: #1565C0;"
                                    title="Traffic to Traffic correlation: 1.00">1.00</div>
                            </div>
                        </div>

                        <div class="tab-content" id="distribution" role="tabpanel" aria-labelledby="distribution-tab">
                            <div class="chart-container">
                                <canvas id="distributionChart" aria-label="Distribution analysis chart"></canvas>
                                <div class="floating-controls" id="distributionControls">
                                    <div class="control-group">
                                        <label for="distributionVariable">Variable</label>
                                        <select id="distributionVariable" class="input-field">
                                            <option value="pm25">PM2.5</option>
                                            <option value="pm10">PM10</option>
                                            <option value="no2">NO2</option>
                                            <option value="o3">O3</option>
                                            <option value="temp">Temperature</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label for="distributionChartType">Chart Type</label>
                                        <select id="distributionChartType" class="input-field">
                                            <option value="histogram">Histogram</option>
                                            <option value="boxplot">Box Plot</option>
                                            <option value="violin">Violin Plot</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label for="distributionGroupBy">Group By</label>
                                        <select id="distributionGroupBy" class="input-field">
                                            <option value="none">None</option>
                                            <option value="season">Season</option>
                                            <option value="weekday">Weekday/Weekend</option>
                                            <option value="location">Location Type</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label for="distributionColor">Color Scheme</label>
                                        <input type="color" id="distributionColor" value="#2196F3" class="input-field">
                                    </div>
                                    <div class="control-group">
                                        <button id="applyDistributionSettings" class="btn btn-primary">Apply</button>
                                        <button id="resetDistributionSettings" class="btn btn-outline">Reset</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="tab-content" id="temporal" role="tabpanel" aria-labelledby="temporal-tab">
                            <div class="chart-container">
                                <canvas id="temporalChart" aria-label="Temporal patterns chart"></canvas>
                                <div class="floating-controls" id="temporalControls">
                                    <div class="control-group">
                                        <label>Variables</label>
                                        <div style="display: flex; flex-direction: column; gap: 5px;">
                                            <label><input type="checkbox" checked> PM2.5</label>
                                            <label><input type="checkbox" checked> NO2</label>
                                            <label><input type="checkbox"> O3</label>
                                            <label><input type="checkbox"> Temperature</label>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label for="timeAggregation">Time Aggregation</label>
                                        <select id="timeAggregation" class="input-field">
                                            <option value="hourly">Hourly</option>
                                            <option value="daily" selected>Daily</option>
                                            <option value="weekly">Weekly</option>
                                            <option value="monthly">Monthly</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label>Date Range</label>
                                        <div style="display: flex; gap: 5px;">
                                            <input type="date" class="input-field" style="width: 130px;"
                                                aria-label="Start date">
                                            <input type="date" class="input-field" style="width: 130px;"
                                                aria-label="End date">
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label for="yAxisScale">Y-Axis Scale</label>
                                        <select id="yAxisScale" class="input-field">
                                            <option value="linear">Linear</option>
                                            <option value="logarithmic">Logarithmic</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <button id="applyTemporalSettings" class="btn btn-primary">Apply</button>
                                        <button id="resetTemporalSettings" class="btn btn-outline">Reset</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h2>Modeling & Policy Analysis</h2>
                </div>
                <div class="panel-content">
                    <div class="model-settings">
                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">target</span>
                                </div>
                                <h3 class="tool-title">Target Variable</h3>
                            </div>
                            <p class="tool-description">Select the air quality parameter you want to model and predict.
                            </p>
                            <div class="input-group">
                                <select class="input-field" id="targetVariable" aria-label="Select target variable">
                                    <option>PM2.5 (μg/m³)</option>
                                    <option>PM10 (μg/m³)</option>
                                    <option>NO2 (ppb)</option>
                                    <option>O3 (ppb)</option>
                                    <option>Air Quality Index (AQI)</option>
                                </select>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">model_training</span>
                                </div>
                                <h3 class="tool-title">Model Type</h3>
                            </div>
                            <p class="tool-description">Choose the modeling approach based on your analysis goals.</p>
                            <div class="input-group">
                                <select class="input-field" id="modelType" aria-label="Select model type">
                                    <option>Multiple Linear Regression</option>
                                    <option>Random Forest</option>
                                    <option>Gradient Boosting</option>
                                    <option>Time Series (ARIMA)</option>
                                    <option>Neural Network</option>
                                </select>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">variable</span>
                                </div>
                                <h3 class="tool-title">Predictor Variables</h3>
                            </div>
                            <p class="tool-description">Select the variables to include in your model.</p>
                            <div style="margin-top: 10px;" id="predictorChips">
                                <div class="chip" role="button" aria-label="Remove Traffic Count variable">
                                    Traffic Count
                                    <span class="material-symbols-rounded chip-close">close</span>
                                </div>
                                <div class="chip" role="button" aria-label="Remove Temperature variable">
                                    Temperature
                                    <span class="material-symbols-rounded chip-close">close</span>
                                </div>
                                <div class="chip" role="button" aria-label="Remove Humidity variable">
                                    Humidity
                                    <span class="material-symbols-rounded chip-close">close</span>
                                </div>
                                <div class="chip" role="button" aria-label="Remove Wind Speed variable">
                                    Wind Speed
                                    <span class="material-symbols-rounded chip-close">close</span>
                                </div>
                                <div class="chip" role="button" aria-label="Remove Construction Activity variable">
                                    Construction Activity
                                    <span class="material-symbols-rounded chip-close">close</span>
                                </div>
                                <button class="btn btn-outline" style="margin-top: 10px;" id="addVariableBtn"
                                    aria-label="Add predictor variable">
                                    <span class="material-symbols-rounded">add</span>
                                    Add Variable
                                </button>
                            </div>
                        </div>

                        <div class="tool-card">
                            <div class="tool-card-header">
                                <div class="tool-icon">
                                    <span class="material-symbols-rounded">settings</span>
                                </div>
                                <h3 class="tool-title">Model Settings</h3>
                            </div>
                            <p class="tool-description">Configure model parameters and validation approach.</p>
                            <div class="input-group">
                                <label for="validationMethod">Validation Method</label>
                                <select id="validationMethod" class="input-field">
                                    <option>Cross-Validation (5-fold)</option>
                                    <option>Train/Test Split (80/20)</option>
                                    <option>Time-Based Validation</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="featureSelection">Feature Selection</label>
                                <select id="featureSelection" class="input-field">
                                    <option>None</option>
                                    <option>Recursive Feature Elimination</option>
                                    <option>LASSO Regularization</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: center; margin: 20px 0;">
                        <button class="btn btn-primary" style="padding: 10px 20px;" id="runModelBtn"
                            aria-label="Run model">
                            <span class="material-symbols-rounded">play_arrow</span>
                            Run Model
                        </button>
                    </div>

                    <h3 style="margin: 20px 0 15px 0;">Policy Intervention Simulation</h3>
                    <p>Adjust the sliders to simulate different policy interventions and view their projected impact on
                        air quality.</p>

                    <div class="grid-2-col" style="margin-top: 20px;">
                        <div>
                            <div class="input-group">
                                <label for="trafficSlider">Traffic Reduction</label>
                                <input type="range" class="policy-slider" min="0" max="50" value="20" id="trafficSlider"
                                    aria-valuemin="0" aria-valuemax="50" aria-valuenow="20">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>0%</span>
                                    <span id="trafficValue">20%</span>
                                    <span>50%</span>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="industrialSlider">Industrial Emissions Control</label>
                                <input type="range" class="policy-slider" min="0" max="80" value="30"
                                    id="industrialSlider" aria-valuemin="0" aria-valuemax="80" aria-valuenow="30">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>0%</span>
                                    <span id="industrialValue">30%</span>
                                    <span>80%</span>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="greenSpaceSlider">Green Space Increase</label>
                                <input type="range" class="policy-slider" min="0" max="100" value="15"
                                    id="greenSpaceSlider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="15">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>0%</span>
                                    <span id="greenSpaceValue">15%</span>
                                    <span>100%</span>
                                </div>
                            </div>

                            <div class="input-group">
                                <label for="constructionSlider">Construction Dust Control</label>
                                <input type="range" class="policy-slider" min="0" max="90" value="40"
                                    id="constructionSlider" aria-valuemin="0" aria-valuemax="90" aria-valuenow="40">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>0%</span>
                                    <span id="constructionValue">40%</span>
                                    <span>90%</span>
                                </div>
                            </div>
                        </div>

                        <div class="chart-container">
                            <canvas id="policyImpactChart" aria-label="Policy impact simulation chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h2>Visualization Dashboard</h2>
                </div>
                <div class="panel-content">
                    <div class="visualization-grid">
                        <div class="visualization-card">
                            <div class="visualization-header">
                                <h3>PM2.5 Trends (2013-2023)</h3>
                                <div>
                                    <button class="btn btn-outline" style="padding: 4px 8px;" aria-label="Edit chart">
                                        <span class="material-symbols-rounded">edit</span>
                                    </button>
                                    <button class="btn btn-outline" style="padding: 4px 8px;"
                                        aria-label="View chart fullscreen">
                                        <span class="material-symbols-rounded">fullscreen</span>
                                    </button>
                                </div>
                            </div>
                            <div class="visualization-body">
                                <canvas id="pm25TrendChart" aria-label="PM2.5 trend chart 2013-2023"></canvas>
                            </div>
                        </div>

                        <div class="visualization-card">
                            <div class="visualization-header">
                                <h3>Contributor Analysis</h3>
                                <div>
                                    <button class="btn btn-outline" style="padding: 4px 8px;" aria-label="Edit chart">
                                        <span class="material-symbols-rounded">edit</span>
                                    </button>
                                    <button class="btn btn-outline" style="padding: 4px 8px;"
                                        aria-label="View chart fullscreen">
                                        <span class="material-symbols-rounded">fullscreen</span>
                                    </button>
                                </div>
                            </div>
                            <div class="visualization-body">
                                <canvas id="contributorChart" aria-label="Air quality contributors chart"></canvas>
                            </div>
                        </div>

                        <div class="visualization-card">
                            <div class="visualization-header">
                                <h3>Seasonal Patterns</h3>
                                <div>
                                    <button class="btn btn-outline" style="padding: 4px 8px;" aria-label="Edit chart">
                                        <span class="material-symbols-rounded">edit</span>
                                    </button>
                                    <button class="btn btn-outline" style="padding: 4px 8px;"
                                        aria-label="View chart fullscreen">
                                        <span class="material-symbols-rounded">fullscreen</span>
                                    </button>
                                </div>
                            </div>
                            <div class="visualization-body">
                                <canvas id="seasonalChart" aria-label="Seasonal patterns chart"></canvas>
                            </div>
                        </div>

                        <div class="visualization-card">
                            <div class="visualization-header">
                                <h3>Policy Impact Projection</h3>
                                <div>
                                    <button class="btn btn-outline" style="padding: 4px 8px;" aria-label="Edit chart">
                                        <span class="material-symbols-rounded">edit</span>
                                    </button>
                                    <button class="btn btn-outline" style="padding: 4px 8px;"
                                        aria-label="View chart fullscreen">
                                        <span class="material-symbols-rounded">fullscreen</span>
                                    </button>
                                </div>
                            </div>
                            <div class="visualization-body">
                                <canvas id="policyProjectionChart" aria-label="Policy impact projection chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: center; margin-top: 20px; gap: 15px;">
                        <button class="btn btn-outline" aria-label="Add new visualization">
                            <span class="material-symbols-rounded">add</span>
                            Add Visualization
                        </button>
                        <button class="btn btn-outline" aria-label="Customize dashboard layout">
                            <span class="material-symbols-rounded">dashboard_customize</span>
                            Customize Layout
                        </button>
                        <button class="btn btn-primary" aria-label="Export dashboard">
                            <span class="material-symbols-rounded">download</span>
                            Export Dashboard
                        </button>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <h2>Reporting & Recommendations</h2>
                </div>
                <div class="panel-content">
                    <div class="input-group">
                        <label for="reportTitle">Report Title</label>
                        <input type="text" id="reportTitle" class="input-field"
                            value="Urban Air Quality Analysis and Policy Recommendations (2013-2023)">
                    </div>

                    <div class="input-group">
                        <label for="executiveSummary">Executive Summary</label>
                        <textarea id="executiveSummary" class="input-field" rows="4"
                            placeholder="Provide a brief summary of your key findings and recommendations..."></textarea>
                    </div>

                    <div style="margin: 20px 0;">
                        <h3>Key Findings</h3>
                        <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                            <span class="material-symbols-rounded"
                                style="margin-right: 10px; color: var(--primary); margin-top: 3px;">insights</span>
                            <div>
                                <strong>Traffic is the primary contributor to PM2.5 and NO2 levels</strong>
                                <p style="color: var(--text-secondary); font-size: 14px;">Statistical analysis shows 72%
                                    correlation between traffic density and PM2.5 levels during weekdays.</p>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                            <span class="material-symbols-rounded"
                                style="margin-right: 10px; color: var(--primary); margin-top: 3px;">insights</span>
                            <div>
                                <strong>Construction activity significantly impacts local air quality</strong>
                                <p style="color: var(--text-secondary); font-size: 14px;">Areas within 500m of
                                    construction sites show 43% higher PM10 levels compared to similar areas without
                                    construction.</p>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                            <span class="material-symbols-rounded"
                                style="margin-right: 10px; color: var(--primary); margin-top: 3px;">insights</span>
                            <div>
                                <strong>Seasonal patterns show winter peaks in particulate matter</strong>
                                <p style="color: var(--text-secondary); font-size: 14px;">PM2.5 levels are 65% higher
                                    during winter months, likely due to increased heating and temperature inversions.
                                </p>
                            </div>
                        </div>
                        <button class="btn btn-outline" style="margin-top: 10px;" aria-label="Add new finding">
                            <span class="material-symbols-rounded">add</span>
                            Add Finding
                        </button>
                    </div>

                    <div style="margin: 20px 0;">
                        <h3>Policy Recommendations</h3>
                        <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                            <span class="material-symbols-rounded"
                                style="margin-right: 10px; color: var(--secondary); margin-top: 3px;">policy</span>
                            <div>
                                <strong>Implement Low Emission Zones in high-traffic areas</strong>
                                <p style="color: var(--text-secondary); font-size: 14px;">Model projections show
                                    potential 28% reduction in NO2 and 18% reduction in PM2.5 levels.</p>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                            <span class="material-symbols-rounded"
                                style="margin-right: 10px; color: var(--secondary); margin-top: 3px;">policy</span>
                            <div>
                                <strong>Enhance construction dust control regulations</strong>
                                <p style="color: var(--text-secondary); font-size: 14px;">Requiring water spraying and
                                    site enclosure could reduce local PM10 levels by up to 35%.</p>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                            <span class="material-symbols-rounded"
                                style="margin-right: 10px; color: var(--secondary); margin-top: 3px;">policy</span>
                            <div>
                                <strong>Increase urban green spaces and vegetation barriers</strong>
                                <p style="color: var(--text-secondary); font-size: 14px;">Model suggests 15% improvement
                                    in local air quality with strategic green infrastructure placement.</p>
                            </div>
                        </div>
                        <button class="btn btn-outline" style="margin-top: 10px;"
                            aria-label="Add new policy recommendation">
                            <span class="material-symbols-rounded">add</span>
                            Add Recommendation
                        </button>
                    </div>

                    <div style="display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px;">
                        <button class="btn btn-outline" aria-label="Preview report">
                            <span class="material-symbols-rounded">preview</span>
                            Preview Report
                        </button>
                        <button class="btn btn-outline" aria-label="Save report draft">
                            <span class="material-symbols-rounded">save</span>
                            Save Draft
                        </button>
                        <button class="btn btn-primary" aria-label="Generate full report">
                            <span class="material-symbols-rounded">description</span>
                            Generate Full Report
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading indicator -->
    <div class="loading-indicator" id="loadingIndicator">
        <div class="spinner"></div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <span class="material-symbols-rounded notification-icon">check_circle</span>
        <div class="notification-content">
            <div class="notification-title">Success</div>
            <div class="notification-message">Operation completed successfully</div>
        </div>
        <span class="material-symbols-rounded notification-close">close</span>
    </div>

    <script>
        // Enhanced Environmental Data Analysis Platform - JavaScript
        // Global variables and data structures
        let globalDataset = null;
        let cleanedDataset = null;
        let modelResults = null;
        let charts = {};
        let currentStep = 1;
        let uploadedFiles = [];
        let dataQualityMetrics = {
            missingValues: 8.3,
            inconsistencies: 12.7,
            outliers: 3.2
        };

        // Sample data for demonstration
        const sampleData = {
            stations: ['URBAN-023', 'SUBURBAN-015', 'INDUSTRIAL-008', 'BACKGROUND-002'],
            variables: ['PM2.5', 'PM10', 'NO2', 'O3', 'Temperature', 'Humidity', 'Traffic Count'],
            timeRange: { start: '2013-01-01', end: '2023-12-31' },
            records: 10245
        };

        $(document).ready(function () {
            initializeApplication();
            setupEventHandlers();
            initializeCharts();
        });

        // Initialize application
        function initializeApplication() {
            console.log('Environmental Data Analysis Platform initialized');
            updateWorkflowProgress();
            generateSampleDataPreview();
        }

        // Setup all event handlers
        function setupEventHandlers() {
            setupNavigationHandlers();
            setupFileUploadHandlers();
            setupDataCleaningHandlers();
            setupExplorationHandlers();
            setupModelingHandlers();
            setupVisualizationHandlers();
            setupReportingHandlers();
            setupUIHandlers();
        }

        // Navigation and workflow handlers
        function setupNavigationHandlers() {
            // Workflow step navigation
            $('.workflow-step').on('click keydown', function (e) {
                if (e.type === 'click' || e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const stepIndex = $(this).index() + 1;
                    navigateToStep(stepIndex);
                }
            });

            // Tab navigation
            $('.tab-button').on('click', function () {
                const tabId = $(this).data('tab');
                switchTab(tabId);
            });

            // Mobile menu toggle
            $('.mobile-menu-button').on('click', function () {
                $('.sidebar').toggleClass('active');
            });
        }

        // File upload functionality
        function setupFileUploadHandlers() {
            $('#dropZone').on('click', function () {
                $('#fileInput').click();
            });

            $('#dropZone').on('dragover', function (e) {
                e.preventDefault();
                $(this).addClass('dragover');
            });

            $('#dropZone').on('dragleave', function () {
                $(this).removeClass('dragover');
            });

            $('#dropZone').on('drop', function (e) {
                e.preventDefault();
                $(this).removeClass('dragover');
                const files = e.originalEvent.dataTransfer.files;
                if (files.length) {
                    handleFileUpload(files);
                }
            });

            $('#fileInput').on('change', function () {
                handleFileUpload(this.files);
            });

            // Proceed to cleaning button
            $('#proceedToCleaningBtn').on('click', function () {
                if (validateDataUpload()) {
                    navigateToStep(2);
                    showNotification('success', 'Data Validation Complete', 'Proceeding to data cleaning phase');
                }
            });
        }

        // Data cleaning handlers
        function setupDataCleaningHandlers() {
            // Missing values handling
            $('[aria-label*="Visualize data gaps"]').on('click', function () {
                visualizeDataGaps();
            });

            $('[aria-label*="Handle missing values"]').on('click', function () {
                handleMissingValues();
            });

            // Inconsistencies handling
            $('[aria-label*="View inconsistency details"]').on('click', function () {
                viewInconsistencyDetails();
            });

            $('[aria-label*="Standardize inconsistent data"]').on('click', function () {
                standardizeInconsistentData();
            });

            // Outliers handling
            $('[aria-label*="Plot outliers"]').on('click', function () {
                plotOutliers();
            });

            $('[aria-label*="Handle outliers"]').on('click', function () {
                handleOutliers();
            });

            // Data transformation
            $('[aria-label*="Variable Selection"]').on('click', function () {
                openVariableSelection();
            });

            $('[aria-label*="Apply data transformations"]').on('click', function () {
                applyDataTransformations();
            });
        }

        // Data exploration handlers
        function setupExplorationHandlers() {
            // Distribution chart controls
            $('#applyDistributionSettings').on('click', function () {
                updateDistributionChart();
            });

            $('#resetDistributionSettings').on('click', function () {
                resetDistributionSettings();
            });

            // Temporal chart controls
            $('#applyTemporalSettings').on('click', function () {
                updateTemporalChart();
            });

            $('#resetTemporalSettings').on('click', function () {
                resetTemporalSettings();
            });

            // Refresh data preview
            $('[aria-label*="Refresh data preview"]').on('click', function () {
                refreshDataPreview();
            });

            // Export preview
            $('[aria-label*="Export preview data"]').on('click', function () {
                exportPreviewData();
            });
        }

        // Modeling handlers
        function setupModelingHandlers() {
            // Run model button
            $('#runModelBtn').on('click', function () {
                runAnalysisModel();
            });

            // Add variable functionality
            $('#addVariableBtn').on('click', function () {
                addPredictorVariable();
            });

            // Remove chip functionality
            $(document).on('click', '.chip .chip-close', function () {
                $(this).parent().remove();
                updateModelConfiguration();
            });

            // Policy sliders
            $('.policy-slider').on('input', function () {
                updatePolicySlider(this);
                updatePolicyImpactModel();
            });

            // Model configuration selectors
            $('#targetVariable, #modelType, #validationMethod, #featureSelection').on('change', function () {
                updateModelConfiguration();
            });
        }

        // Visualization handlers
        function setupVisualizationHandlers() {
            // Visualization controls
            $('[aria-label*="Edit chart"]').on('click', function () {
                openChartEditor(this);
            });

            $('[aria-label*="View chart fullscreen"]').on('click', function () {
                openChartFullscreen(this);
            });

            $('[aria-label*="Add new visualization"]').on('click', function () {
                addNewVisualization();
            });

            $('[aria-label*="Customize dashboard layout"]').on('click', function () {
                customizeDashboardLayout();
            });

            $('[aria-label*="Export dashboard"]').on('click', function () {
                exportDashboard();
            });

            // Chart interaction
            $('.chart-container').on('click', function (e) {
                if ($(e.target).closest('canvas').length) {
                    toggleChartControls(this);
                }
            });
        }

        // Reporting handlers
        function setupReportingHandlers() {
            // Add findings and recommendations
            $('[aria-label*="Add new finding"]').on('click', function () {
                addNewFinding();
            });

            $('[aria-label*="Add new policy recommendation"]').on('click', function () {
                addNewRecommendation();
            });

            // Report generation
            $('[aria-label*="Preview report"]').on('click', function () {
                previewReport();
            });

            $('[aria-label*="Save report draft"]').on('click', function () {
                saveReportDraft();
            });

            $('[aria-label*="Generate full report"]').on('click', function () {
                generateFullReport();
            });
        }

        // UI handlers
        function setupUIHandlers() {
            // Help and Settings
            $('[aria-label*="Help"]').on('click', function () {
                openHelpCenter();
            });

            $('[aria-label*="Settings"]').on('click', function () {
                openSettings();
            });

            // Close controls when clicking outside
            $(document).on('click', function (e) {
                if (!$(e.target).closest('.floating-controls').length && !$(e.target).closest('canvas').length) {
                    $('.floating-controls').removeClass('active');
                }
            });

            // Notification close
            $(document).on('click', '.notification-close', function () {
                $('#notification').removeClass('show');
            });
        }

        // Core functionality implementations
        function navigateToStep(stepNumber) {
            currentStep = stepNumber;
            $('.workflow-step').removeClass('active').attr('aria-selected', 'false');
            $(`.workflow-step:nth-child(${stepNumber})`).addClass('active').attr('aria-selected', 'true');

            // Mark previous steps as completed
            for (let i = 1; i < stepNumber; i++) {
                $(`.workflow-step:nth-child(${i})`).addClass('completed');
            }

            updateWorkflowProgress();
            showLoading();
            setTimeout(hideLoading, 800);
            $('html, body').animate({ scrollTop: 0 }, 'smooth');
        }

        function updateWorkflowProgress() {
            const stepNames = ['Load Data', 'Clean Data', 'Explore Data', 'Model Data', 'Visualize Data', 'Report'];
            console.log(`Current step: ${currentStep} - ${stepNames[currentStep - 1]}`);
        }

        function handleFileUpload(files) {
            if (!files || files.length === 0) return;

            showLoading();
            uploadedFiles = Array.from(files);

            // Validate file types
            const supportedTypes = ['.csv', '.xlsx', '.json', '.nc'];
            const validFiles = uploadedFiles.filter(file => {
                return supportedTypes.some(type => file.name.toLowerCase().endsWith(type));
            });

            if (validFiles.length === 0) {
                hideLoading();
                showNotification('error', 'Invalid File Type', 'Please upload CSV, Excel, JSON, or NetCDF files');
                return;
            }

            // Simulate file processing
            setTimeout(() => {
                processUploadedFiles(validFiles);
                generateDataPreview();
                updateDataQualityMetrics();
                hideLoading();
                showNotification('success', 'Files Processed', `Successfully processed ${validFiles.length} file(s)`);
                $('.workflow-step:first-child').addClass('completed');
            }, 2000);
        }

        function processUploadedFiles(files) {
            globalDataset = {
                files: files.map(f => f.name),
                records: Math.floor(Math.random() * 50000) + 5000,
                variables: sampleData.variables,
                timeRange: sampleData.timeRange,
                stations: sampleData.stations
            };

            console.log('Files processed:', globalDataset);
        }

        function generateDataPreview() {
            // Update statistics
            $('.stat-card .stat-value').eq(0).text(globalDataset.records.toLocaleString());
            $('.stat-card .stat-value').eq(1).text(`${globalDataset.timeRange.start.slice(0, 4)}-${globalDataset.timeRange.end.slice(0, 4)}`);
            $('.stat-card .stat-value').eq(2).text(globalDataset.variables.length);

            // Generate sample data rows
            generateSampleDataRows();
        }

        function generateSampleDataRows() {
            const tbody = $('.data-table tbody');
            tbody.empty();

            for (let i = 0; i < 5; i++) {
                const row = `
            <tr>
                <td>${new Date(2023, 0, 15 + i, 8 + i).toISOString().slice(0, 16).replace('T', ' ')}</td>
                <td>${sampleData.stations[Math.floor(Math.random() * sampleData.stations.length)]}</td>
                <td>${(Math.random() * 30 + 10).toFixed(1)}</td>
                <td>${(Math.random() * 50 + 20).toFixed(1)}</td>
                <td>${(Math.random() * 40 + 15).toFixed(1)}</td>
                <td>${(Math.random() * 60 + 20).toFixed(1)}</td>
                <td>${(Math.random() * 25 + 5).toFixed(1)}</td>
                <td>${Math.floor(Math.random() * 30 + 50)}%</td>
                <td>${Math.floor(Math.random() * 200 + 300)}</td>
            </tr>
        `;
                tbody.append(row);
            }
        }

        function generateSampleDataPreview() {
            generateSampleDataRows();
        }

        function validateDataUpload() {
            if (!globalDataset || !uploadedFiles.length) {
                showNotification('warning', 'No Data Uploaded', 'Please upload data files before proceeding');
                return false;
            }
            return true;
        }

        function visualizeDataGaps() {
            showLoading();
            setTimeout(() => {
                // Create data gap visualization
                const gapData = generateMissingDataPattern();
                displayDataGapVisualization(gapData);
                hideLoading();
                showNotification('info', 'Data Gaps Visualized', `Found missing data in ${gapData.affectedColumns} columns`);
            }, 1200);
        }

        function generateMissingDataPattern() {
            return {
                affectedColumns: Math.floor(Math.random() * 8) + 3,
                totalMissing: Math.floor(globalDataset.records * dataQualityMetrics.missingValues / 100),
                pattern: 'Random with seasonal clusters'
            };
        }

        function displayDataGapVisualization(gapData) {
            console.log('Data gap visualization:', gapData);
            // In a real implementation, this would create an interactive heatmap
        }

        function handleMissingValues() {
            showLoading();
            setTimeout(() => {
                const method = prompt('Select imputation method:\n1. Linear interpolation\n2. Mean/Median\n3. Forward fill\n4. Remove rows', '1') || '1';

                let methodName = '';
                switch (method) {
                    case '1': methodName = 'Linear interpolation'; break;
                    case '2': methodName = 'Mean/Median imputation'; break;
                    case '3': methodName = 'Forward fill'; break;
                    case '4': methodName = 'Row removal'; break;
                    default: methodName = 'Linear interpolation';
                }

                // Simulate data cleaning
                dataQualityMetrics.missingValues = Math.max(0, dataQualityMetrics.missingValues - 5);
                updateDataQualityDisplay();

                hideLoading();
                showNotification('success', 'Missing Values Handled', `Applied ${methodName} to missing data`);
            }, 1800);
        }

        function viewInconsistencyDetails() {
            showLoading();
            setTimeout(() => {
                const inconsistencies = {
                    unitMismatches: 67,
                    formatErrors: 34,
                    rangingIssues: 26
                };

                const details = `Inconsistency Details:\n• Unit mismatches: ${inconsistencies.unitMismatches}\n• Format errors: ${inconsistencies.formatErrors}\n• Range issues: ${inconsistencies.rangingIssues}`;

                hideLoading();
                alert(details);
                showNotification('info', 'Inconsistencies Analyzed', `Found ${Object.values(inconsistencies).reduce((a, b) => a + b)} inconsistencies`);
            }, 1000);
        }

        function standardizeInconsistentData() {
            showLoading();
            setTimeout(() => {
                dataQualityMetrics.inconsistencies = Math.max(0, dataQualityMetrics.inconsistencies - 8);
                updateDataQualityDisplay();

                hideLoading();
                showNotification('success', 'Data Standardized', 'All measurements converted to standard units and formats');
            }, 2200);
        }

        function plotOutliers() {
            showLoading();
            setTimeout(() => {
                const outlierData = generateOutlierAnalysis();
                displayOutlierPlot(outlierData);

                hideLoading();
                showNotification('info', 'Outliers Plotted', `Identified ${outlierData.count} potential outliers`);
            }, 1500);
        }

        function generateOutlierAnalysis() {
            return {
                count: Math.floor(globalDataset.records * dataQualityMetrics.outliers / 100),
                variables: ['PM2.5', 'NO2', 'Traffic Count'],
                method: 'IQR and Z-score analysis'
            };
        }

        function displayOutlierPlot(outlierData) {
            console.log('Outlier analysis:', outlierData);
            // In a real implementation, this would create scatter plots
        }

        function handleOutliers() {
            showLoading();
            setTimeout(() => {
                const method = prompt('Select outlier handling method:\n1. Winsorization\n2. Remove outliers\n3. Transform data\n4. Keep as is', '1') || '1';

                let methodName = '';
                switch (method) {
                    case '1': methodName = 'Winsorization'; break;
                    case '2': methodName = 'Outlier removal'; break;
                    case '3': methodName = 'Data transformation'; break;
                    case '4': methodName = 'No changes'; break;
                    default: methodName = 'Winsorization';
                }

                if (method !== '4') {
                    dataQualityMetrics.outliers = Math.max(0, dataQualityMetrics.outliers - 1.5);
                    updateDataQualityDisplay();
                }

                hideLoading();
                showNotification('success', 'Outliers Processed', `Applied ${methodName} to extreme values`);
            }, 2000);
        }

        function updateDataQualityDisplay() {
            $('.progress-bar').eq(0).css('width', `${dataQualityMetrics.missingValues}%`);
            $('.progress-bar').eq(1).css('width', `${dataQualityMetrics.inconsistencies}%`);
            $('.progress-bar').eq(2).css('width', `${dataQualityMetrics.outliers}%`);

            $('.progress-container').eq(0).attr('aria-valuenow', dataQualityMetrics.missingValues).next().text(`${dataQualityMetrics.missingValues.toFixed(1)}% of values missing across dataset`);
            $('.progress-container').eq(1).attr('aria-valuenow', dataQualityMetrics.inconsistencies).next().text(`${dataQualityMetrics.inconsistencies.toFixed(1)}% of records have potential inconsistencies`);
            $('.progress-container').eq(2).attr('aria-valuenow', dataQualityMetrics.outliers).next().text(`${dataQualityMetrics.outliers.toFixed(1)}% of values identified as potential outliers`);

            $('.stat-card .stat-value').eq(3).text(`${dataQualityMetrics.missingValues.toFixed(1)}%`);
        }

        // Utility functions
        function showLoading() {
            $('#loadingIndicator').addClass('active');
        }

        function hideLoading() {
            $('#loadingIndicator').removeClass('active');
        }

        function showNotification(type, title, message) {
            const $notification = $('#notification');
            const $notificationTitle = $notification.find('.notification-title');
            const $notificationMessage = $notification.find('.notification-message');
            const $notificationIcon = $notification.find('.notification-icon');

            $notification.removeClass('success error warning info').addClass(type);
            $notificationTitle.text(title);
            $notificationMessage.text(message);

            const icons = {
                success: 'check_circle',
                error: 'error',
                warning: 'warning',
                info: 'info'
            };
            $notificationIcon.text(icons[type] || 'info');

            $notification.addClass('show');
            setTimeout(() => $notification.removeClass('show'), 5000);
        }

        // Data exploration functions
        function openVariableSelection() {
            const availableVars = ['Precipitation', 'Wind Direction', 'Solar Radiation', 'Industrial Activity', 'Population Density', 'Vehicle Emissions', 'Seasonal Index'];
            const selectedVar = prompt(`Select variable to add:\n${availableVars.map((v, i) => `${i + 1}. ${v}`).join('\n')}`, '1');

            if (selectedVar && selectedVar >= 1 && selectedVar <= availableVars.length) {
                const variable = availableVars[selectedVar - 1];
                addVariableChip(variable);
                showNotification('success', 'Variable Added', `${variable} added to transformation list`);
            }
        }

        function addVariableChip(variableName) {
            const chip = $(`
        <div class="chip" role="button" aria-label="Remove ${variableName} variable">
            ${variableName}
            <span class="material-symbols-rounded chip-close">close</span>
        </div>
    `);
            chip.insertBefore('#addVariableBtn');
        }

        function applyDataTransformations() {
            showLoading();
            setTimeout(() => {
                const selectedVariables = $('.chip').not('#addVariableBtn').length;
                const transformations = ['Log transformation', 'Z-score normalization', 'Min-Max scaling', 'Box-Cox transformation'];

                cleanedDataset = {
                    ...globalDataset,
                    transformations: transformations,
                    processedVariables: selectedVariables
                };

                hideLoading();
                showNotification('success', 'Transformations Applied', `Applied ${transformations.length} transformations to ${selectedVariables} variables`);
                navigateToStep(3);
            }, 2500);
        }

        function switchTab(tabId) {
            $('.tab-button').removeClass('active').attr('aria-selected', 'false');
            $('.tab-content').removeClass('active');

            $(`.tab-button[data-tab="${tabId}"]`).addClass('active').attr('aria-selected', 'true');
            $(`#${tabId}`).addClass('active');

            // Update charts if needed
            if (tabId === 'distribution' && charts.distributionChart) {
                charts.distributionChart.update();
            } else if (tabId === 'temporal' && charts.temporalChart) {
                charts.temporalChart.update();
            }
        }

        function updateDistributionChart() {
            const variable = $('#distributionVariable').val();
            const chartType = $('#distributionChartType').val();
            const groupBy = $('#distributionGroupBy').val();
            const color = $('#distributionColor').val();

            showLoading();
            setTimeout(() => {
                if (charts.distributionChart) {
                    charts.distributionChart.data.datasets[0].backgroundColor = color;
                    charts.distributionChart.data.datasets[0].borderColor = color;

                    const variableNames = {
                        pm25: 'PM2.5', pm10: 'PM10', no2: 'NO2', o3: 'O3', temp: 'Temperature'
                    };

                    const variableName = variableNames[variable] || 'PM2.5';
                    charts.distributionChart.options.plugins.title.text = `${variableName} Distribution Analysis`;
                    charts.distributionChart.data.datasets[0].label = `${variableName} Distribution`;

                    if (groupBy !== 'none') {
                        addGroupingToChart(charts.distributionChart, groupBy);
                    }

                    charts.distributionChart.update();
                }

                hideLoading();
                $('#distributionControls').removeClass('active');
                showNotification('success', 'Chart Updated', 'Distribution visualization settings applied successfully');
            }, 1000);
        }

        function addGroupingToChart(chart, groupBy) {
            // Simulate adding grouped data
            const groupLabels = {
                season: ['Spring', 'Summer', 'Fall', 'Winter'],
                weekday: ['Weekday', 'Weekend'],
                location: ['Urban', 'Suburban', 'Rural']
            };

            if (groupLabels[groupBy]) {
                console.log(`Adding grouping by ${groupBy}:`, groupLabels[groupBy]);
            }
        }

        function resetDistributionSettings() {
            $('#distributionVariable').val('pm25');
            $('#distributionChartType').val('histogram');
            $('#distributionGroupBy').val('none');
            $('#distributionColor').val('#2196F3');

            if (charts.distributionChart) {
                charts.distributionChart.data.datasets[0].backgroundColor = '#2196F3';
                charts.distributionChart.data.datasets[0].borderColor = '#1976D2';
                charts.distributionChart.update();
            }

            showNotification('info', 'Settings Reset', 'Distribution chart settings restored to defaults');
        }

        function updateTemporalChart() {
            const timeAggregation = $('#timeAggregation').val();
            const yAxisScale = $('#yAxisScale').val();
            const checkedVariables = $('#temporalControls input[type="checkbox"]:checked').map(function () {
                return $(this).parent().text().trim();
            }).get();

            showLoading();
            setTimeout(() => {
                if (charts.temporalChart) {
                    charts.temporalChart.options.scales.y.type = yAxisScale;
                    charts.temporalChart.options.plugins.title.text = `${timeAggregation.charAt(0).toUpperCase() + timeAggregation.slice(1)} Air Quality Trends`;

                    // Update dataset visibility based on selected variables
                    charts.temporalChart.data.datasets.forEach((dataset, index) => {
                        dataset.hidden = !checkedVariables.includes(dataset.label);
                    });

                    updateTemporalData(timeAggregation);
                    charts.temporalChart.update();
                }

                hideLoading();
                $('#temporalControls').removeClass('active');
                showNotification('success', 'Chart Updated', `Temporal analysis updated for ${checkedVariables.length} variables`);
            }, 1200);
        }

        function updateTemporalData(aggregation) {
            const dataPatterns = {
                hourly: generateHourlyData(),
                daily: generateDailyData(),
                weekly: generateWeeklyData(),
                monthly: generateMonthlyData()
            };

            const newData = dataPatterns[aggregation] || dataPatterns.daily;
            if (charts.temporalChart) {
                charts.temporalChart.data.labels = newData.labels;
                charts.temporalChart.data.datasets.forEach((dataset, index) => {
                    dataset.data = newData.datasets[index] || newData.datasets[0];
                });
            }
        }

        function generateHourlyData() {
            return {
                labels: Array.from({ length: 24 }, (_, i) => `${i}:00`),
                datasets: [
                    Array.from({ length: 24 }, () => Math.random() * 30 + 10),
                    Array.from({ length: 24 }, () => Math.random() * 40 + 15)
                ]
            };
        }

        function generateDailyData() {
            return {
                labels: Array.from({ length: 30 }, (_, i) => `Day ${i + 1}`),
                datasets: [
                    Array.from({ length: 30 }, () => Math.random() * 35 + 10),
                    Array.from({ length: 30 }, () => Math.random() * 45 + 15)
                ]
            };
        }

        function generateWeeklyData() {
            return {
                labels: Array.from({ length: 52 }, (_, i) => `Week ${i + 1}`),
                datasets: [
                    Array.from({ length: 52 }, () => Math.random() * 40 + 12),
                    Array.from({ length: 52 }, () => Math.random() * 50 + 18)
                ]
            };
        }

        function generateMonthlyData() {
            return {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [
                    [28, 32, 25, 19, 15, 12, 10, 11, 14, 18, 22, 26],
                    [35, 38, 30, 25, 22, 20, 18, 19, 23, 27, 32, 36]
                ]
            };
        }

        function resetTemporalSettings() {
            $('#timeAggregation').val('daily');
            $('#yAxisScale').val('linear');
            $('#temporalControls input[type="checkbox"]').each(function (index) {
                $(this).prop('checked', index < 2);
            });

            if (charts.temporalChart) {
                charts.temporalChart.options.scales.y.type = 'linear';
                updateTemporalData('daily');
                charts.temporalChart.update();
            }

            showNotification('info', 'Settings Reset', 'Temporal chart settings restored to defaults');
        }

        function refreshDataPreview() {
            showLoading();
            setTimeout(() => {
                generateSampleDataRows();
                updateDataQualityMetrics();
                hideLoading();
                showNotification('success', 'Data Refreshed', 'Preview data has been updated with latest processing results');
            }, 1200);
        }

        function exportPreviewData() {
            showLoading();
            setTimeout(() => {
                const csvContent = generateCSVContent();
                downloadFile(csvContent, 'data_preview.csv', 'text/csv');
                hideLoading();
                showNotification('success', 'Export Complete', 'Preview data exported as CSV file');
            }, 1500);
        }

        function generateCSVContent() {
            const headers = ['Timestamp', 'Station ID', 'PM2.5', 'PM10', 'NO2', 'O3', 'Temperature', 'Humidity', 'Traffic Count'];
            const rows = [];

            $('.data-table tbody tr').each(function () {
                const row = [];
                $(this).find('td').each(function () {
                    row.push($(this).text());
                });
                rows.push(row.join(','));
            });

            return [headers.join(','), ...rows].join('\n');
        }

        function downloadFile(content, filename, contentType) {
            const blob = new Blob([content], { type: contentType });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Modeling functions
        function runAnalysisModel() {
            if (!cleanedDataset) {
                showNotification('warning', 'Data Not Cleaned', 'Please complete data cleaning before running the model');
                return;
            }

            showLoading();
            const targetVar = $('#targetVariable').val();
            const modelType = $('#modelType').val();
            const validationMethod = $('#validationMethod').val();

            setTimeout(() => {
                modelResults = generateModelResults(targetVar, modelType, validationMethod);
                displayModelResults();
                updatePolicyImpactModel();
                hideLoading();
                showNotification('success', 'Model Training Complete', `${modelType} model achieved R² = ${modelResults.r2}`);
                navigateToStep(4);
            }, 3000);
        }

        function generateModelResults(target, model, validation) {
            return {
                target: target,
                model: model,
                validation: validation,
                r2: (Math.random() * 0.3 + 0.65).toFixed(3),
                rmse: (Math.random() * 5 + 2).toFixed(2),
                features: $('.chip').not('#addVariableBtn').map(function () { return $(this).text().trim(); }).get(),
                featureImportance: generateFeatureImportance()
            };
        }

        function generateFeatureImportance() {
            const features = ['Traffic Count', 'Temperature', 'Humidity', 'Wind Speed', 'Construction Activity'];
            return features.map(feature => ({
                name: feature,
                importance: Math.random()
            })).sort((a, b) => b.importance - a.importance);
        }

        function displayModelResults() {
            if (!modelResults) return;

            console.log('Model Results:', modelResults);
            // In a real implementation, this would update UI elements with model metrics
        }

        function addPredictorVariable() {
            const variables = ['Precipitation', 'Wind Direction', 'Solar Radiation', 'Industrial Activity', 'Population Density', 'Vehicle Density', 'Green Space Index'];
            const randomVar = variables[Math.floor(Math.random() * variables.length)];
            addVariableChip(randomVar);
            updateModelConfiguration();
            showNotification('info', 'Variable Added', `${randomVar} added to predictor variables`);
        }

        function updateModelConfiguration() {
            const selectedVars = $('.chip').not('#addVariableBtn').length;
            console.log(`Model configuration updated: ${selectedVars} predictor variables selected`);
        }

        function updatePolicySlider(slider) {
            const value = $(slider).val();
            const sliderId = $(slider).attr('id');
            const valueId = sliderId.replace('Slider', 'Value');
            $(`#${valueId}`).text(value + '%');
            $(slider).attr('aria-valuenow', value);
        }

        function updatePolicyImpactModel() {
            if (!charts.policyImpactChart) return;

            const trafficReduction = parseInt($('#trafficSlider').val()) / 100;
            const industrialReduction = parseInt($('#industrialSlider').val()) / 100;
            const greenSpaceIncrease = parseInt($('#greenSpaceSlider').val()) / 100;
            const constructionControl = parseInt($('#constructionSlider').val()) / 100;

            // Enhanced policy impact model with realistic coefficients
            const impacts = calculatePolicyImpacts(trafficReduction, industrialReduction, greenSpaceIncrease, constructionControl);

            charts.policyImpactChart.data.datasets[1].data = impacts;
            charts.policyImpactChart.update();

            console.log('Policy impact updated:', impacts);
        }

        function calculatePolicyImpacts(traffic, industrial, greenSpace, construction) {
            const baselevels = [18.7, 32.4, 24.8, 35.6]; // PM2.5, PM10, NO2, O3

            const impacts = [
                // PM2.5 impact
                baselevels[0] * (1 - (traffic * 0.45 + industrial * 0.22 + greenSpace * 0.12 + construction * 0.18)),
                // PM10 impact  
                baselevels[1] * (1 - (traffic * 0.35 + industrial * 0.25 + greenSpace * 0.10 + construction * 0.30)),
                // NO2 impact
                baselevels[2] * (1 - (traffic * 0.60 + industrial * 0.25 + greenSpace * 0.08 + construction * 0.07)),
                // O3 impact (complex chemistry - can increase with NOx reduction)
                baselevels[3] * (1 + (traffic * 0.05 - industrial * 0.10 - greenSpace * 0.05))
            ];

            return impacts.map(val => Math.max(0, val));
        }

        // Visualization functions
        function openChartEditor(element) {
            const chartContainer = $(element).closest('.visualization-card');
            const chartTitle = chartContainer.find('h3').text();

            const settings = prompt(`Edit ${chartTitle}:\n1. Change colors\n2. Modify data range\n3. Add annotations\n4. Export settings`, '1');

            if (settings) {
                showNotification('info', 'Chart Editor', `${chartTitle} editor opened with option ${settings}`);
            }
        }

        function openChartFullscreen(element) {
            const chartContainer = $(element).closest('.visualization-card');
            const chartTitle = chartContainer.find('h3').text();

            // Create fullscreen overlay
            const overlay = $(`
        <div class="fullscreen-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; flex-direction: column;">
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 20px; color: white;">
                <h2>${chartTitle}</h2>
                <button class="btn btn-outline close-fullscreen" style="color: white; border-color: white;">
                    <span class="material-symbols-rounded">close</span>
                    Close
                </button>
            </div>
            <div style="flex: 1; padding: 20px;">
                <canvas id="fullscreenChart" style="width: 100%; height: 100%;"></canvas>
            </div>
        </div>
    `);

            $('body').append(overlay);

            overlay.find('.close-fullscreen').on('click', function () {
                overlay.remove();
            });

            showNotification('info', 'Fullscreen Mode', `${chartTitle} opened in fullscreen view`);
        }

        function addNewVisualization() {
            const vizTypes = ['Line Chart', 'Bar Chart', 'Scatter Plot', 'Heatmap', 'Box Plot', 'Violin Plot'];
            const selectedType = prompt(`Select visualization type:\n${vizTypes.map((v, i) => `${i + 1}. ${v}`).join('\n')}`, '1');

            if (selectedType && selectedType >= 1 && selectedType <= vizTypes.length) {
                const vizType = vizTypes[selectedType - 1];
                createNewVisualization(vizType);
                showNotification('success', 'Visualization Added', `New ${vizType} added to dashboard`);
            }
        }

        function createNewVisualization(type) {
            const newVizCard = $(`
        <div class="visualization-card">
            <div class="visualization-header">
                <h3>New ${type}</h3>
                <div>
                    <button class="btn btn-outline" style="padding: 4px 8px;" aria-label="Edit chart">
                        <span class="material-symbols-rounded">edit</span>
                    </button>
                    <button class="btn btn-outline" style="padding: 4px 8px;" aria-label="View chart fullscreen">
                        <span class="material-symbols-rounded">fullscreen</span>
                    </button>
                </div>
            </div>
            <div class="visualization-body">
                <canvas id="newChart${Date.now()}" aria-label="New ${type} chart"></canvas>
            </div>
        </div>
    `);

            $('.visualization-grid').append(newVizCard);
        }

        function customizeDashboardLayout() {
            const layoutOptions = ['Grid View', 'List View', 'Masonry Layout', 'Custom Layout'];
            const selectedLayout = prompt(`Select dashboard layout:\n${layoutOptions.map((v, i) => `${i + 1}. ${v}`).join('\n')}`, '1');

            if (selectedLayout) {
                showNotification('info', 'Layout Updated', `Dashboard layout changed to ${layoutOptions[selectedLayout - 1]}`);
            }
        }

        function exportDashboard() {
            showLoading();

            const exportOptions = {
                pdf: generatePDFReport(),
                png: captureScreenshots(),
                interactive: packageInteractiveDashboard()
            };

            setTimeout(() => {
                hideLoading();
                const format = prompt('Select export format:\n1. PDF Report\n2. PNG Images\n3. Interactive HTML', '1');

                let formatName = '';
                switch (format) {
                    case '1': formatName = 'PDF Report'; break;
                    case '2': formatName = 'PNG Images'; break;
                    case '3': formatName = 'Interactive HTML'; break;
                    default: formatName = 'PDF Report';
                }

                showNotification('success', 'Dashboard Exported', `Dashboard exported as ${formatName}`);
            }, 2500);
        }

        function generatePDFReport() {
            console.log('Generating PDF report with all visualizations');
            return 'pdf_content';
        }

        function captureScreenshots() {
            console.log('Capturing chart screenshots');
            return 'screenshot_data';
        }

        function packageInteractiveDashboard() {
            console.log('Packaging interactive dashboard');
            return 'interactive_html';
        }

        function toggleChartControls(container) {
            const controls = $(container).find('.floating-controls');
            if (controls.length) {
                controls.toggleClass('active');
            }
        }

        // Reporting functions
        function addNewFinding() {
            const finding = prompt('Enter your new finding:', 'New environmental finding...');
            if (finding) {
                const findingElement = $(`
            <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                <span class="material-symbols-rounded" style="margin-right: 10px; color: var(--primary); margin-top: 3px;">insights</span>
                <div>
                    <strong>${finding}</strong>
                    <p style="color: var(--text-secondary); font-size: 14px;">Statistical significance and methodology details to be added.</p>
                </div>
            </div>
        `);

                findingElement.insertBefore($('[aria-label*="Add new finding"]'));
                showNotification('success', 'Finding Added', 'New finding added to the report');
            }
        }

        function addNewRecommendation() {
            const recommendation = prompt('Enter your new policy recommendation:', 'New policy recommendation...');
            if (recommendation) {
                const recElement = $(`
            <div style="display: flex; align-items: flex-start; margin: 15px 0;">
                <span class="material-symbols-rounded" style="margin-right: 10px; color: var(--secondary); margin-top: 3px;">policy</span>
                <div>
                    <strong>${recommendation}</strong>
                    <p style="color: var(--text-secondary); font-size: 14px;">Implementation details and projected impact to be specified.</p>
                </div>
            </div>
        `);

                recElement.insertBefore($('[aria-label*="Add new policy recommendation"]'));
                showNotification('success', 'Recommendation Added', 'New policy recommendation added to the report');
            }
        }

        function previewReport() {
            showLoading();
            setTimeout(() => {
                const reportData = compileReportData();
                displayReportPreview(reportData);
                hideLoading();
                showNotification('info', 'Report Preview', 'Report preview generated successfully');
            }, 1800);
        }

        function compileReportData() {
            return {
                title: $('#reportTitle').val(),
                summary: $('#executiveSummary').val(),
                findings: $('.insights').length,
                recommendations: $('.policy').length,
                modelResults: modelResults,
                datasetInfo: globalDataset
            };
        }

        function displayReportPreview(data) {
            const previewWindow = window.open('', '_blank', 'width=800,height=600');
            previewWindow.document.write(`
        <html>
            <head><title>Report Preview</title></head>
            <body style="font-family: Arial, sans-serif; padding: 20px;">
                <h1>${data.title}</h1>
                <h2>Executive Summary</h2>
                <p>${data.summary || 'Summary to be added...'}</p>
                <h2>Key Findings (${data.findings})</h2>
                <h2>Policy Recommendations (${data.recommendations})</h2>
                <h2>Model Results</h2>
                <p>Model Performance: ${data.modelResults ? `R² = ${data.modelResults.r2}` : 'No model results available'}</p>
            </body>
        </html>
    `);
        }

        function saveReportDraft() {
            showLoading();
            setTimeout(() => {
                const reportData = compileReportData();
                localStorage.setItem('environmentalReportDraft', JSON.stringify(reportData));
                hideLoading();
                showNotification('success', 'Draft Saved', 'Report draft saved to local storage');
            }, 1000);
        }

        function generateFullReport() {
            if (!modelResults) {
                showNotification('warning', 'Incomplete Analysis', 'Please complete the modeling phase before generating the full report');
                return;
            }

            showLoading();
            setTimeout(() => {
                const reportData = compileReportData();
                const reportHTML = generateCompleteReportHTML(reportData);
                downloadFile(reportHTML, 'environmental_analysis_report.html', 'text/html');

                hideLoading();
                showNotification('success', 'Report Generated', 'Complete analysis report has been generated and downloaded');
                navigateToStep(6);
            }, 4000);
        }

        function generateCompleteReportHTML(data) {
            return `
<!DOCTYPE html>
<html>
<head>
    <title>${data.title}</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1, h2, h3 { color: #2196F3; }
        .summary { background: #f5f5f5; padding: 15px; border-radius: 5px; }
        .finding { margin: 15px 0; padding: 10px; border-left: 4px solid #2196F3; }
        .recommendation { margin: 15px 0; padding: 10px; border-left: 4px solid #4CAF50; }
    </style>
</head>
<body>
    <h1>${data.title}</h1>
    
    <div class="summary">
        <h2>Executive Summary</h2>
        <p>${data.summary || 'Comprehensive analysis of environmental data revealing key patterns and policy recommendations.'}</p>
    </div>
    
    <h2>Dataset Overview</h2>
    <ul>
        <li>Total Records: ${data.datasetInfo ? data.datasetInfo.records.toLocaleString() : 'N/A'}</li>
        <li>Variables Analyzed: ${data.datasetInfo ? data.datasetInfo.variables.length : 'N/A'}</li>
        <li>Time Period: ${data.datasetInfo ? `${data.datasetInfo.timeRange.start} to ${data.datasetInfo.timeRange.end}` : 'N/A'}</li>
    </ul>
    
    <h2>Model Performance</h2>
    ${data.modelResults ? `
        <ul>
            <li>Model Type: ${data.modelResults.model}</li>
            <li>R-squared: ${data.modelResults.r2}</li>
            <li>RMSE: ${data.modelResults.rmse}</li>
            <li>Validation Method: ${data.modelResults.validation}</li>
        </ul>
    ` : '<p>No model results available</p>'}
    
    <h2>Key Findings</h2>
    <div class="finding">Statistical analysis reveals significant relationships between traffic patterns and air quality indicators.</div>
    <div class="finding">Seasonal variations show winter peaks in particulate matter concentrations.</div>
    <div class="finding">Industrial activities contribute significantly to NO2 levels in urban areas.</div>
    
    <h2>Policy Recommendations</h2>
    <div class="recommendation">Implement Low Emission Zones in high-traffic areas to reduce vehicular emissions.</div>
    <div class="recommendation">Enhance construction dust control regulations to minimize PM10 impacts.</div>
    <div class="recommendation">Increase urban green spaces to improve local air quality through natural filtration.</div>
    
    <h2>Methodology</h2>
    <p>This analysis employed advanced statistical modeling and machine learning techniques to identify key factors contributing to air quality variations. Data quality assessment and cleaning procedures ensured robust analytical results.</p>
    
    <footer style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #ddd;">
        <p><em>Report generated on ${new Date().toLocaleDateString()} using Environmental Data Analysis Platform</em></p>
    </footer>
</body>
</html>`;
        }

        // UI utility functions
        function openHelpCenter() {
            const helpWindow = window.open('', '_blank', 'width=600,height=500');
            helpWindow.document.write(`
        <html>
            <head><title>Help Center</title></head>
            <body style="font-family: Arial, sans-serif; padding: 20px;">
                <h1>Environmental Data Analysis Platform - Help</h1>
                <h2>Getting Started</h2>
                <ol>
                    <li>Upload your environmental monitoring data files</li>
                    <li>Clean and preprocess the data</li>
                    <li>Explore patterns and relationships</li>
                    <li>Build predictive models</li>
                    <li>Create visualizations</li>
                    <li>Generate comprehensive reports</li>
                </ol>
                <h2>Supported File Formats</h2>
                <ul>
                    <li>CSV files (.csv)</li>
                    <li>Excel files (.xlsx)</li>
                    <li>JSON files (.json)</li>
                    <li>NetCDF files (.nc)</li>
                </ul>
                <h2>Contact Support</h2>
                <p>For technical assistance, contact: support@enviro-platform.com</p>
            </body>
        </html>
    `);
            showNotification('info', 'Help Center', 'Help documentation opened in new window');
        }

        function openSettings() {
            const settings = {
                theme: localStorage.getItem('theme') || 'light',
                language: localStorage.getItem('language') || 'en',
                notifications: localStorage.getItem('notifications') !== 'false'
            };

            const newTheme = prompt(`Current theme: ${settings.theme}\nSelect new theme:\n1. Light\n2. Dark\n3. Auto`, '1');

            if (newTheme) {
                const themes = ['light', 'dark', 'auto'];
                const selectedTheme = themes[newTheme - 1] || 'light';
                localStorage.setItem('theme', selectedTheme);
                showNotification('success', 'Settings Updated', `Theme changed to ${selectedTheme}`);
            }
        }

        // Initialize charts
        function initializeCharts() {
            initializeDistributionChart();
            initializeTemporalChart();
            initializePolicyImpactChart();
            initializeVisualizationCharts();
        }

        function initializeDistributionChart() {
            const ctx = $('#distributionChart')[0];
            if (!ctx) return;

            charts.distributionChart = new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['0-5', '5-10', '10-15', '15-20', '20-25', '25-30', '30-35', '35-40', '40+'],
                    datasets: [{
                        label: 'PM2.5 Distribution (μg/m³)',
                        data: [120, 350, 890, 1200, 850, 480, 320, 180, 90],
                        backgroundColor: '#2196F3',
                        borderColor: '#1976D2',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        title: {
                            display: true,
                            text: 'PM2.5 Distribution Across All Stations'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Frequency' }
                        },
                        x: {
                            title: { display: true, text: 'PM2.5 Concentration (μg/m³)' }
                        }
                    }
                }
            });
        }

        function initializeTemporalChart() {
            const ctx = $('#temporalChart')[0];
            if (!ctx) return;

            charts.temporalChart = new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'PM2.5',
                        data: [28, 32, 25, 19, 15, 12, 10, 11, 14, 18, 22, 26],
                        borderColor: '#2196F3',
                        backgroundColor: 'rgba(33, 150, 243, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }, {
                        label: 'NO2',
                        data: [35, 38, 30, 25, 22, 20, 18, 19, 23, 27, 32, 36],
                        borderColor: '#FF9800',
                        backgroundColor: 'rgba(255, 152, 0, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        title: {
                            display: true,
                            text: 'Monthly Air Quality Trends (2023)'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Concentration' }
                        },
                        x: {
                            title: { display: true, text: 'Month' }
                        }
                    }
                }
            });
        }

        function initializePolicyImpactChart() {
            const ctx = $('#policyImpactChart')[0];
            if (!ctx) return;

            charts.policyImpactChart = new Chart(ctx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['PM2.5', 'PM10', 'NO2', 'O3'],
                    datasets: [{
                        label: 'Current Levels',
                        data: [18.7, 32.4, 24.8, 35.6],
                        backgroundColor: '#90CAF9',
                        borderColor: '#2196F3',
                        borderWidth: 1
                    }, {
                        label: 'Projected After Policy Implementation',
                        data: [12.1, 22.5, 15.2, 33.8],
                        backgroundColor: '#A5D6A7',
                        borderColor: '#4CAF50',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        title: {
                            display: true,
                            text: 'Projected Impact of Policy Interventions'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Concentration' }
                        }
                    }
                }
            });
        }

        function initializeVisualizationCharts() {
            // Initialize all dashboard charts
            initializeChart('pm25TrendChart', createTrendChartConfig());
            initializeChart('contributorChart', createContributorChartConfig());
            initializeChart('seasonalChart', createSeasonalChartConfig());
            initializeChart('policyProjectionChart', createProjectionChartConfig());
        }

        function initializeChart(canvasId, config) {
            const ctx = $(`#${canvasId}`)[0];
            if (ctx) {
                charts[canvasId] = new Chart(ctx.getContext('2d'), config);
            }
        }

        function createTrendChartConfig() {
            return {
                type: 'line',
                data: {
                    labels: ['2013', '2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'],
                    datasets: [{
                        label: 'Annual Average PM2.5 (μg/m³)',
                        data: [32.5, 30.8, 29.2, 28.5, 26.1, 24.3, 22.8, 18.6, 20.1, 19.4, 18.7],
                        borderColor: '#2196F3',
                        backgroundColor: 'rgba(33, 150, 243, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: false, title: { display: true, text: 'PM2.5 (μg/m³)' } },
                        x: { title: { display: true, text: 'Year' } }
                    }
                }
            };
        }

        function createContributorChartConfig() {
            return {
                type: 'bar',
                data: {
                    labels: ['Traffic', 'Industry', 'Construction', 'Residential', 'Background'],
                    datasets: [{
                        label: 'Contribution to PM2.5 (%)',
                        data: [45, 22, 15, 12, 6],
                        backgroundColor: ['#1976D2', '#388E3C', '#F57C00', '#D32F2F', '#7B1FA2'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Contribution (%)' } },
                        x: { title: { display: true, text: 'Source' } }
                    }
                }
            };
        }

        function createSeasonalChartConfig() {
            return {
                type: 'radar',
                data: {
                    labels: ['Winter', 'Spring', 'Summer', 'Fall'],
                    datasets: [{
                        label: 'PM2.5',
                        data: [28, 20, 12, 22],
                        backgroundColor: 'rgba(33, 150, 243, 0.2)',
                        borderColor: '#2196F3',
                        borderWidth: 2,
                        pointBackgroundColor: '#2196F3'
                    }, {
                        label: 'NO2',
                        data: [32, 24, 18, 26],
                        backgroundColor: 'rgba(255, 152, 0, 0.2)',
                        borderColor: '#FF9800',
                        borderWidth: 2,
                        pointBackgroundColor: '#FF9800'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            beginAtZero: true,
                            pointLabels: { font: { size: 14, weight: 'bold' } }
                        }
                    }
                }
            };
        }

        function createProjectionChartConfig() {
            return {
                type: 'line',
                data: {
                    labels: ['2023', '2024', '2025', '2026', '2027', '2028'],
                    datasets: [{
                        label: 'Business as Usual',
                        data: [18.7, 18.5, 18.3, 18.1, 17.9, 17.7],
                        borderColor: '#F44336',
                        backgroundColor: 'rgba(244, 67, 54, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }, {
                        label: 'Moderate Intervention',
                        data: [18.7, 17.2, 15.8, 14.5, 13.6, 12.8],
                        borderColor: '#FF9800',
                        backgroundColor: 'rgba(255, 152, 0, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }, {
                        label: 'Aggressive Intervention',
                        data: [18.7, 16.1, 13.9, 12.0, 10.5, 9.2],
                        borderColor: '#4CAF50',
                        backgroundColor: 'rgba(76, 175, 80, 0.1)',
                        borderWidth: 2,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: { display: true, text: 'PM2.5 Projection Under Different Scenarios' }
                    },
                    scales: {
                        y: { title: { display: true, text: 'PM2.5 (μg/m³)' } },
                        x: { title: { display: true, text: 'Year' } }
                    }
                }
            };
        }  
    </script>
</body>

</html>