<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Longitudinal Study Analysis Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #5a73f0;
            --primary-dark: #3a51cc;
            --secondary: #6c757d;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #3498db;
            --light: #f8f9fa;
            --dark: #343a40;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-400: #ced4da;
            --gray-500: #adb5bd;
            --gray-600: #6c757d;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.5;
            color: var(--gray-800);
            background-color: var(--gray-100);
            overflow-x: hidden;
        }

        .app-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            background-color: white;
            border-right: 1px solid var(--gray-300);
            padding: 1.5rem 0;
            overflow-y: auto;
            position: sticky;
            top: 0;
            height: 100vh;
        }

        .sidebar-header {
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid var(--gray-300);
        }

        .app-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .app-description {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .nav-list {
            list-style: none;
            padding: 1.5rem 0;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1.5rem;
            color: var(--gray-700);
            text-decoration: none;
            transition: var(--transition);
        }

        .nav-link:hover {
            color: var(--primary);
            background-color: var(--gray-100);
        }

        .nav-link.active {
            color: var(--primary);
            background-color: rgba(67, 97, 238, 0.1);
            font-weight: 500;
        }

        .nav-link.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background-color: var(--primary);
        }

        .nav-link i {
            margin-right: 0.75rem;
            font-size: 1.25rem;
        }

        .nav-link span {
            font-size: 0.9375rem;
        }

        .progress-indicator {
            margin: 1.5rem;
            padding: 1rem;
            background-color: var(--gray-100);
            border-radius: var(--border-radius);
        }

        .progress-title {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        .progress-bar-container {
            height: 6px;
            background-color: var(--gray-300);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            width: 20%;
            transition: width 0.5s ease;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.75rem;
            color: var(--gray-600);
        }

        /* Main Content */
        .main-content {
            padding: 2rem;
            overflow-y: auto;
        }

        .section {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .section-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--gray-300);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        .section-body {
            padding: 1.5rem;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--gray-700);
        }

        .form-control {
            display: block;
            width: 100%;
            padding: 0.625rem 0.875rem;
            font-size: 0.9375rem;
            font-weight: 400;
            line-height: 1.5;
            color: var(--gray-800);
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid var(--gray-400);
            border-radius: var(--border-radius);
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        .form-control:focus {
            border-color: var(--primary-light);
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.25);
        }

        .file-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            border: 2px dashed var(--gray-400);
            border-radius: var(--border-radius);
            background-color: var(--gray-100);
            transition: var(--transition);
            cursor: pointer;
        }

        .file-upload:hover {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .file-upload-icon {
            font-size: 3rem;
            color: var(--gray-500);
            margin-bottom: 1rem;
        }

        .file-upload-text {
            font-size: 1rem;
            color: var(--gray-700);
            margin-bottom: 0.5rem;
        }

        .file-upload-subtext {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .uploaded-files {
            margin-top: 1.5rem;
        }

        .uploaded-file {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background-color: white;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            margin-bottom: 0.75rem;
        }

        .uploaded-file-info {
            display: flex;
            align-items: center;
        }

        .uploaded-file-icon {
            margin-right: 0.75rem;
            font-size: 1.25rem;
            color: var(--primary);
        }

        .uploaded-file-name {
            font-size: 0.9375rem;
            color: var(--gray-800);
        }

        .uploaded-file-size {
            font-size: 0.8125rem;
            color: var(--gray-600);
            margin-left: 0.75rem;
        }

        .uploaded-file-actions {
            display: flex;
            align-items: center;
        }

        .uploaded-file-action {
            background: none;
            border: none;
            font-size: 1.125rem;
            color: var(--gray-600);
            cursor: pointer;
            margin-left: 0.5rem;
            transition: var(--transition);
        }

        .uploaded-file-action:hover {
            color: var(--danger);
        }

        .btn {
            display: inline-block;
            font-weight: 500;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            user-select: none;
            border: 1px solid transparent;
            padding: 0.625rem 1.25rem;
            font-size: 0.9375rem;
            line-height: 1.5;
            border-radius: var(--border-radius);
            transition: var(--transition);
            cursor: pointer;
        }

        .btn-primary {
            color: #fff;
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }

        .btn-outline-secondary {
            color: var(--secondary);
            background-color: transparent;
            border-color: var(--secondary);
        }

        .btn-outline-secondary:hover {
            color: #fff;
            background-color: var(--secondary);
            border-color: var(--secondary);
        }

        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }

        .btn-lg {
            padding: 0.875rem 1.5rem;
            font-size: 1rem;
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn-icon i {
            margin-right: 0.5rem;
        }

        /* Data Table */
        .data-table-container {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--gray-300);
        }

        .data-table th {
            background-color: var(--gray-100);
            font-weight: 600;
            color: var(--gray-700);
            white-space: nowrap;
        }

        .data-table tbody tr:hover {
            background-color: var(--gray-100);
        }

        /* Variable Assignment */
        .variable-assignment-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .variable-list {
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            min-height: 300px;
            max-height: 500px;
            overflow-y: auto;
        }

        .variable-list-header {
            padding: 0.75rem 1rem;
            background-color: var(--gray-100);
            border-bottom: 1px solid var(--gray-300);
            font-weight: 500;
            color: var(--gray-700);
        }

        .variable-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--gray-300);
            transition: var(--transition);
            cursor: grab;
        }

        .variable-item:last-child {
            border-bottom: none;
        }

        .variable-item:hover {
            background-color: var(--gray-100);
        }

        .variable-name {
            font-size: 0.9375rem;
            color: var(--gray-800);
        }

        .variable-type {
            font-size: 0.8125rem;
            color: var(--gray-600);
            padding: 0.25rem 0.5rem;
            background-color: var(--gray-200);
            border-radius: 4px;
        }

        .variable-role-container {
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
        }

        .variable-role-header {
            padding: 0.75rem 1rem;
            background-color: var(--gray-100);
            border-bottom: 1px solid var(--gray-300);
            font-weight: 500;
            color: var(--gray-700);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .variable-role-list {
            min-height: 100px;
            padding: 0.75rem 1rem;
        }

        .role-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            background-color: var(--gray-200);
            border-radius: 4px;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: var(--gray-700);
        }

        .role-badge i {
            font-size: 1rem;
            margin-left: 0.375rem;
            cursor: pointer;
            color: var(--gray-600);
            transition: var(--transition);
        }

        .role-badge i:hover {
            color: var(--danger);
        }

        /* Analysis Configuration */
        .analysis-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .analysis-option {
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .analysis-option:hover {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
        }

        .analysis-option.selected {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .analysis-option-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .analysis-option-radio {
            margin-right: 0.75rem;
        }

        .analysis-option-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--gray-800);
        }

        .analysis-option-description {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .subgroup-builder {
            margin-top: 1.5rem;
            padding: 1.25rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            background-color: var(--gray-100);
        }

        .subgroup-rule {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .subgroup-rule select,
        .subgroup-rule input {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--gray-400);
            border-radius: var(--border-radius);
            margin-right: 0.75rem;
        }

        .subgroup-action {
            background: none;
            border: none;
            font-size: 1.125rem;
            color: var(--gray-600);
            cursor: pointer;
            transition: var(--transition);
        }

        .subgroup-action:hover {
            color: var(--primary);
        }

        .subgroup-action.remove:hover {
            color: var(--danger);
        }

        /* Visualization Dashboard */
        .visualization-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .visualization-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }

        .visualization-header {
            padding: 1rem 1.25rem;
            border-bottom: 1px solid var(--gray-300);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .visualization-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-800);
        }

        .visualization-actions {
            display: flex;
            align-items: center;
        }

        .visualization-action {
            background: none;
            border: none;
            font-size: 1.125rem;
            color: var(--gray-600);
            cursor: pointer;
            margin-left: 0.75rem;
            transition: var(--transition);
        }

        .visualization-action:hover {
            color: var(--primary);
        }

        .visualization-body {
            padding: 1.25rem;
            height: 400px;
            position: relative;
        }

        .chart-container {
            width: 100%;
            height: 100%;
        }

        .visualization-footer {
            padding: 0.75rem 1.25rem;
            border-top: 1px solid var(--gray-300);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .chart-legend {
            display: flex;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 1rem;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            margin-right: 0.5rem;
        }

        /* Report Generation */
        .report-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .report-option {
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            padding: 1.25rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .report-option:hover {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
        }

        .report-option.selected {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px var(--primary);
            background-color: rgba(67, 97, 238, 0.05);
        }

        .report-option-header {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .report-option-icon {
            font-size: 1.5rem;
            color: var(--primary);
            margin-right: 0.75rem;
        }

        .report-option-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--gray-800);
        }

        .report-option-description {
            font-size: 0.875rem;
            color: var(--gray-600);
            margin-top: 0.25rem;
        }

        .report-format-options {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        .report-format {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--gray-300);
            border-radius: 4px;
            font-size: 0.875rem;
            color: var(--gray-700);
            cursor: pointer;
            transition: var(--transition);
        }

        .report-format:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .report-format.selected {
            border-color: var(--primary);
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .report-format i {
            margin-right: 0.5rem;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .app-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: none;
            }

            .variable-assignment-container {
                grid-template-columns: 1fr;
            }
        }

        /* Floating Controls for Charts */
        .floating-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1rem;
            z-index: 10;
            display: none;
        }

        .chart-container:hover .floating-controls {
            display: block;
        }

        .control-group {
            margin-bottom: 0.75rem;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            font-size: 0.8125rem;
            color: var(--gray-700);
            margin-bottom: 0.25rem;
        }

        .control-input {
            width: 100%;
            padding: 0.375rem 0.5rem;
            font-size: 0.8125rem;
            border: 1px solid var(--gray-300);
            border-radius: 4px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-300);
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 0.75rem 1.25rem;
            font-size: 0.9375rem;
            font-weight: 500;
            color: var(--gray-600);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: var(--transition);
        }

        .tab:hover {
            color: var(--primary);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        /* Statistical Results */
        .statistical-results {
            margin-top: 1.5rem;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
        }

        .results-table th,
        .results-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--gray-300);
        }

        .results-table th {
            background-color: var(--gray-100);
            font-weight: 600;
            color: var(--gray-700);
            position: sticky;
            top: 0;
        }

        .results-table tbody tr:hover {
            background-color: var(--gray-100);
        }

        .results-table .significant {
            color: var(--primary);
            font-weight: 500;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border: 3px solid rgba(67, 97, 238, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 100;
        }

        .loading-text {
            margin-top: 1rem;
            font-size: 0.9375rem;
            color: var(--gray-700);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="app-title">Longitudinal Study Analysis</h1>
                <p class="app-description">Analyze intervention effectiveness for first-generation students</p>
            </div>

            <ul class="nav-list">
                <li class="nav-item">
                    <a href="#data-upload" class="nav-link active">
                        <i class="material-icons">upload_file</i>
                        <span>Data Upload</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#variable-definition" class="nav-link">
                        <i class="material-icons">category</i>
                        <span>Variable Definition</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#analysis-configuration" class="nav-link">
                        <i class="material-icons">tune</i>
                        <span>Analysis Configuration</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#results-visualization" class="nav-link">
                        <i class="material-icons">insights</i>
                        <span>Results Visualization</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#report-generation" class="nav-link">
                        <i class="material-icons">description</i>
                        <span>Report Generation</span>
                    </a>
                </li>
            </ul>

            <div class="progress-indicator">
                <h3 class="progress-title">Analysis Progress</h3>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="progress-steps">
                    <span>Data</span>
                    <span>Variables</span>
                    <span>Analysis</span>
                    <span>Results</span>
                    <span>Report</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Data Upload Section -->
            <section id="data-upload" class="section">
                <div class="section-header">
                    <h2 class="section-title">Data Upload</h2>
                    <button class="btn btn-outline-secondary btn-sm">
                        <i class="material-icons">help_outline</i>
                    </button>
                </div>
                <div class="section-body">
                    <div class="form-group">
                        <label class="form-label">Upload your longitudinal study data files</label>
                        <div class="file-upload" id="file-dropzone">
                            <i class="material-icons file-upload-icon">cloud_upload</i>
                            <p class="file-upload-text">Drag & drop your files here or click to browse</p>
                            <p class="file-upload-subtext">Supported formats: CSV, XLSX, SPSS (.sav), Stata (.dta)</p>
                            <input type="file" id="file-input" style="display: none;" multiple>
                        </div>
                    </div>

                    <div class="uploaded-files">
                        <div class="uploaded-file">
                            <div class="uploaded-file-info">
                                <i class="material-icons uploaded-file-icon">insert_drive_file</i>
                                <span class="uploaded-file-name">first_gen_students_baseline.csv</span>
                                <span class="uploaded-file-size">3.2 MB</span>
                            </div>
                            <div class="uploaded-file-actions">
                                <button class="uploaded-file-action">
                                    <i class="material-icons">visibility</i>
                                </button>
                                <button class="uploaded-file-action">
                                    <i class="material-icons">delete_outline</i>
                                </button>
                            </div>
                        </div>
                        <div class="uploaded-file">
                            <div class="uploaded-file-info">
                                <i class="material-icons uploaded-file-icon">insert_drive_file</i>
                                <span class="uploaded-file-name">first_gen_students_followup1.csv</span>
                                <span class="uploaded-file-size">2.8 MB</span>
                            </div>
                            <div class="uploaded-file-actions">
                                <button class="uploaded-file-action">
                                    <i class="material-icons">visibility</i>
                                </button>
                                <button class="uploaded-file-action">
                                    <i class="material-icons">delete_outline</i>
                                </button>
                            </div>
                        </div>
                        <div class="uploaded-file">
                            <div class="uploaded-file-info">
                                <i class="material-icons uploaded-file-icon">insert_drive_file</i>
                                <span class="uploaded-file-name">first_gen_students_followup2.csv</span>
                                <span class="uploaded-file-size">2.9 MB</span>
                            </div>
                            <div class="uploaded-file-actions">
                                <button class="uploaded-file-action">
                                    <i class="material-icons">visibility</i>
                                </button>
                                <button class="uploaded-file-action">
                                    <i class="material-icons">delete_outline</i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 2rem;">
                        <label class="form-label">Data Preview</label>
                        <div class="data-table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>student_id</th>
                                        <th>time_point</th>
                                        <th>intervention_group</th>
                                        <th>gpa</th>
                                        <th>courses_completed</th>
                                        <th>study_hours</th>
                                        <th>belonging_score</th>
                                        <th>self_efficacy_score</th>
                                        <th>stress_level</th>
                                        <th>campus_involvement</th>
                                        <th>work_hours</th>
                                        <th>family_obligations</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1001</td>
                                        <td>0</td>
                                        <td>mentoring</td>
                                        <td>3.2</td>
                                        <td>4</td>
                                        <td>12</td>
                                        <td>3.5</td>
                                        <td>3.8</td>
                                        <td>4.2</td>
                                        <td>2</td>
                                        <td>15</td>
                                        <td>3</td>
                                    </tr>
                                    <tr>
                                        <td>1002</td>
                                        <td>0</td>
                                        <td>workshops</td>
                                        <td>2.8</td>
                                        <td>5</td>
                                        <td>10</td>
                                        <td>3.2</td>
                                        <td>3.5</td>
                                        <td>3.9</td>
                                        <td>1</td>
                                        <td>20</td>
                                        <td>4</td>
                                    </tr>
                                    <tr>
                                        <td>1003</td>
                                        <td>0</td>
                                        <td>control</td>
                                        <td>3.0</td>
                                        <td>5</td>
                                        <td>8</td>
                                        <td>3.0</td>
                                        <td>3.2</td>
                                        <td>4.0</td>
                                        <td>0</td>
                                        <td>12</td>
                                        <td>2</td>
                                    </tr>
                                    <tr>
                                        <td>1004</td>
                                        <td>0</td>
                                        <td>counseling</td>
                                        <td>3.5</td>
                                        <td>4</td>
                                        <td>15</td>
                                        <td>3.7</td>
                                        <td>4.0</td>
                                        <td>3.8</td>
                                        <td>3</td>
                                        <td>10</td>
                                        <td>2</td>
                                    </tr>
                                    <tr>
                                        <td>1005</td>
                                        <td>0</td>
                                        <td>mentoring</td>
                                        <td>2.9</td>
                                        <td>4</td>
                                        <td>11</td>
                                        <td>3.4</td>
                                        <td>3.6</td>
                                        <td>4.1</td>
                                        <td>1</td>
                                        <td>18</td>
                                        <td>3</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="form-group" style="text-align: right;">
                        <button class="btn btn-primary btn-icon" id="next-to-variables">
                            <i class="material-icons">arrow_forward</i> Next: Define Variables
                        </button>
                    </div>
                </div>
            </section>

            <!-- Variable Definition Section -->
            <section id="variable-definition" class="section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Variable Definition</h2>
                    <button class="btn btn-outline-secondary btn-sm">
                        <i class="material-icons">help_outline</i>
                    </button>
                </div>
                <div class="section-body">
                    <p style="margin-bottom: 1.5rem;">Assign variables to appropriate roles for your longitudinal analysis. Drag variables from the list on the left to the appropriate category on the right.</p>
                    
                    <div class="variable-assignment-container">
                        <div>
                            <div class="variable-list">
                                <div class="variable-list-header">Available Variables</div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">student_id</span>
                                    <span class="variable-type">Categorical</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">time_point</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">intervention_group</span>
                                    <span class="variable-type">Categorical</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">gpa</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">courses_completed</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">study_hours</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">belonging_score</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">self_efficacy_score</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">stress_level</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">campus_involvement</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">work_hours</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                                <div class="variable-item" draggable="true">
                                    <span class="variable-name">family_obligations</span>
                                    <span class="variable-type">Numeric</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div class="variable-role-container">
                                <div class="variable-role-header">
                                    <span>ID Variable</span>
                                    <span>(Required)</span>
                                </div>
                                <div class="variable-role-list" id="id-variables">
                                    <div class="role-badge">
                                        student_id
                                        <i class="material-icons">close</i>
                                    </div>
                                </div>
                            </div>

                            <div class="variable-role-container">
                                <div class="variable-role-header">
                                    <span>Time Variable</span>
                                    <span>(Required for longitudinal analysis)</span>
                                </div>
                                <div class="variable-role-list" id="time-variables">
                                    <div class="role-badge">
                                        time_point
                                        <i class="material-icons">close</i>
                                    </div>
                                </div>
                            </div>

                            <div class="variable-role-container">
                                <div class="variable-role-header">
                                    <span>Independent Variables</span>
                                    <span>(Treatment/Intervention)</span>
                                </div>
                                <div class="variable-role-list" id="independent-variables">
                                    <div class="role-badge">
                                        intervention_group
                                        <i class="material-icons">close</i>
                                    </div>
                                </div>
                            </div>

                            <div class="variable-role-container">
                                <div class="variable-role-header">
                                    <span>Dependent Variables</span>
                                    <span>(Outcomes)</span>
                                </div>
                                <div class="variable-role-list" id="dependent-variables">
                                    <div class="role-badge">
                                        gpa
                                        <i class="material-icons">close</i>
                                    </div>
                                    <div class="role-badge">
                                        belonging_score
                                        <i class="material-icons">close</i>
                                    </div>
                                    <div class="role-badge">
                                        self_efficacy_score
                                        <i class="material-icons">close</i>
                                    </div>
                                </div>
                            </div>

                            <div class="variable-role-container">
                                <div class="variable-role-header">
                                    <span>Covariates/Confounders</span>
                                    <span>(Control variables)</span>
                                </div>
                                <div class="variable-role-list" id="covariate-variables">
                                    <div class="role-badge">
                                        work_hours
                                        <i class="material-icons">close</i>
                                    </div>
                                    <div class="role-badge">
                                        family_obligations
                                        <i class="material-icons">close</i>
                                    </div>
                                </div>
                            </div>

                            <div class="variable-role-container">
                                <div class="variable-role-header">
                                    <span>Subgroup Variables</span>
                                    <span>(For stratified analysis)</span>
                                </div>
                                <div class="variable-role-list" id="subgroup-variables">
                                    <!-- Empty for now -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="text-align: right; margin-top: 1.5rem;">
                        <button class="btn btn-outline-secondary btn-icon" style="margin-right: 0.75rem;">
                            <i class="material-icons">arrow_back</i> Back
                        </button>
                        <button class="btn btn-primary btn-icon" id="next-to-analysis">
                            <i class="material-icons">arrow_forward</i> Next: Configure Analysis
                        </button>
                    </div>
                </div>
            </section>

            <!-- Analysis Configuration Section -->
            <section id="analysis-configuration" class="section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Analysis Configuration</h2>
                    <button class="btn btn-outline-secondary btn-sm">
                        <i class="material-icons">help_outline</i>
                    </button>
                </div>
                <div class="section-body">
                    <div class="form-group">
                        <label class="form-label">Select Analysis Method</label>
                        <div class="analysis-options">
                            <div class="analysis-option selected">
                                <div class="analysis-option-header">
                                    <input type="radio" name="analysis-method" id="method-repeated" class="analysis-option-radio" checked>
                                    <label for="method-repeated" class="analysis-option-title">Repeated Measures ANOVA</label>
                                </div>
                                <p class="analysis-option-description">Analyze changes in outcomes across multiple time points for different intervention groups.</p>
                            </div>
                            <div class="analysis-option">
                                <div class="analysis-option-header">
                                    <input type="radio" name="analysis-method" id="method-mixed" class="analysis-option-radio">
                                    <label for="method-mixed" class="analysis-option-title">Linear Mixed Effects Model</label>
                                </div>
                                <p class="analysis-option-description">Account for individual differences and handle missing data in longitudinal designs.</p>
                            </div>
                            <div class="analysis-option">
                                <div class="analysis-option-header">
                                    <input type="radio" name="analysis-method" id="method-growth" class="analysis-option-radio">
                                    <label for="method-growth" class="analysis-option-title">Growth Curve Analysis</label>
                                </div>
                                <p class="analysis-option-description">Model individual trajectories over time and identify factors affecting growth rates.</p>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 2rem;">
                        <label class="form-label">Outcome Variables to Analyze</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.75rem;">
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" checked style="margin-right: 0.5rem;">
                                GPA
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" checked style="margin-right: 0.5rem;">
                                Belonging Score
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" checked style="margin-right: 0.5rem;">
                                Self-Efficacy Score
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" style="margin-right: 0.5rem;">
                                Stress Level
                            </label>
                            <label style="display: flex; align-items: center;">
                                <input type="checkbox" style="margin-right: 0.5rem;">
                                Campus Involvement
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Subgroup Analysis</label>
                        <div class="subgroup-builder">
                            <p style="margin-bottom: 1rem; font-size: 0.9375rem; color: var(--gray-700);">Define rules to create subgroups for analysis.</p>
                            
                            <div class="subgroup-rule">
                                <select>
                                    <option>work_hours</option>
                                    <option>family_obligations</option>
                                    <option>campus_involvement</option>
                                </select>
                                <select>
                                    <option>less than</option>
                                    <option>greater than</option>
                                    <option>equal to</option>
                                    <option>not equal to</option>
                                </select>
                                <input type="text" value="15">
                                <button class="subgroup-action remove">
                                    <i class="material-icons">delete_outline</i>
                                </button>
                            </div>
                            
                            <div class="subgroup-rule">
                                <select>
                                    <option>family_obligations</option>
                                    <option>work_hours</option>
                                    <option>campus_involvement</option>
                                </select>
                                <select>
                                    <option>greater than</option>
                                    <option>less than</option>
                                    <option>equal to</option>
                                    <option>not equal to</option>
                                </select>
                                <input type="text" value="2">
                                <button class="subgroup-action remove">
                                    <i class="material-icons">delete_outline</i>
                                </button>
                            </div>

                            <button class="btn btn-outline-secondary btn-sm" style="margin-top: 0.75rem;">
                                <i class="material-icons" style="font-size: 1rem; vertical-align: text-bottom;">add</i>
                                Add Rule
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Advanced Options</label>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem;">
                            <div>
                                <label class="form-label" style="font-size: 0.9375rem; margin-bottom: 0.375rem;">Significance Level ()</label>
                                <select class="form-control">
                                    <option>0.05 (Standard)</option>
                                    <option>0.01 (Conservative)</option>
                                    <option>0.10 (Liberal)</option>
                                </select>
                            </div>
                            <div>
                                <label class="form-label" style="font-size: 0.9375rem; margin-bottom: 0.375rem;">Multiple Comparisons Correction</label>
                                <select class="form-control">
                                    <option>Bonferroni</option>
                                    <option>Tukey HSD</option>
                                    <option>Holm-Bonferroni</option>
                                    <option>None</option>
                                </select>
                            </div>
                            <div>
                                <label class="form-label" style="font-size: 0.9375rem; margin-bottom: 0.375rem;">Missing Data Handling</label>
                                <select class="form-control">
                                    <option>Listwise Deletion</option>
                                    <option>Multiple Imputation</option>
                                    <option>Last Observation Carried Forward</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="text-align: right; margin-top: 1.5rem;">
                        <button class="btn btn-outline-secondary btn-icon" style="margin-right: 0.75rem;">
                            <i class="material-icons">arrow_back</i> Back
                        </button>
                        <button class="btn btn-primary btn-icon btn-lg" id="run-analysis">
                            <i class="material-icons">play_arrow</i> Run Analysis
                        </button>
                    </div>
                </div>
            </section>

            <!-- Results Visualization Section -->
            <section id="results-visualization" class="section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Results Visualization</h2>
                    <button class="btn btn-outline-secondary btn-sm">
                        <i class="material-icons">help_outline</i>
                    </button>
                </div>
                <div class="section-body">
                    <div class="tabs">
                        <div class="tab active" data-tab="visualizations">Data Visualizations</div>
                        <div class="tab" data-tab="statistical-results">Statistical Results</div>
                    </div>

                    <div id="visualizations-tab">
                        <div class="visualization-container">
                            <div class="visualization-card">
                                <div class="visualization-header">
                                    <h3 class="visualization-title">GPA Over Time by Intervention Group</h3>
                                    <div class="visualization-actions">
                                        <button class="visualization-action">
                                            <i class="material-icons">filter_list</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">download</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">fullscreen</i>
                                        </button>
                                    </div>
                                </div>
                                <div class="visualization-body">
                                    <canvas id="gpaChart"></canvas>
                                    <div class="floating-controls">
                                        <div class="control-group">
                                            <label class="control-label">Chart Type</label>
                                            <select class="control-input">
                                                <option>Line</option>
                                                <option>Bar</option>
                                                <option>Scatter</option>
                                            </select>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Show Confidence Intervals</label>
                                            <input type="checkbox" checked>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Mentoring Group Color</label>
                                            <input type="color" class="control-input" value="#4361ee">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Workshops Group Color</label>
                                            <input type="color" class="control-input" value="#f39c12">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Counseling Group Color</label>
                                            <input type="color" class="control-input" value="#2ecc71">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Control Group Color</label>
                                            <input type="color" class="control-input" value="#e74c3c">
                                        </div>
                                    </div>
                                </div>
                                <div class="visualization-footer">
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #4361ee;"></div>
                                            <span>Mentoring</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #f39c12;"></div>
                                            <span>Workshops</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #2ecc71;"></div>
                                            <span>Counseling</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #e74c3c;"></div>
                                            <span>Control</span>
                                        </div>
                                    </div>
                                    <span>n = 248 students</span>
                                </div>
                            </div>

                            <div class="visualization-card">
                                <div class="visualization-header">
                                    <h3 class="visualization-title">Belonging Score Over Time by Intervention Group</h3>
                                    <div class="visualization-actions">
                                        <button class="visualization-action">
                                            <i class="material-icons">filter_list</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">download</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">fullscreen</i>
                                        </button>
                                    </div>
                                </div>
                                <div class="visualization-body">
                                    <canvas id="belongingChart"></canvas>
                                    <div class="floating-controls">
                                        <div class="control-group">
                                            <label class="control-label">Chart Type</label>
                                            <select class="control-input">
                                                <option>Line</option>
                                                <option>Bar</option>
                                                <option>Scatter</option>
                                            </select>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Show Confidence Intervals</label>
                                            <input type="checkbox" checked>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Mentoring Group Color</label>
                                            <input type="color" class="control-input" value="#4361ee">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Workshops Group Color</label>
                                            <input type="color" class="control-input" value="#f39c12">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Counseling Group Color</label>
                                            <input type="color" class="control-input" value="#2ecc71">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Control Group Color</label>
                                            <input type="color" class="control-input" value="#e74c3c">
                                        </div>
                                    </div>
                                </div>
                                <div class="visualization-footer">
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #4361ee;"></div>
                                            <span>Mentoring</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #f39c12;"></div>
                                            <span>Workshops</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #2ecc71;"></div>
                                            <span>Counseling</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #e74c3c;"></div>
                                            <span>Control</span>
                                        </div>
                                    </div>
                                    <span>n = 248 students</span>
                                </div>
                            </div>

                            <div class="visualization-card">
                                <div class="visualization-header">
                                    <h3 class="visualization-title">Self-Efficacy Score Over Time by Intervention Group</h3>
                                    <div class="visualization-actions">
                                        <button class="visualization-action">
                                            <i class="material-icons">filter_list</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">download</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">fullscreen</i>
                                        </button>
                                    </div>
                                </div>
                                <div class="visualization-body">
                                    <canvas id="efficacyChart"></canvas>
                                    <div class="floating-controls">
                                        <div class="control-group">
                                            <label class="control-label">Chart Type</label>
                                            <select class="control-input">
                                                <option>Line</option>
                                                <option>Bar</option>
                                                <option>Scatter</option>
                                            </select>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Show Confidence Intervals</label>
                                            <input type="checkbox" checked>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Mentoring Group Color</label>
                                            <input type="color" class="control-input" value="#4361ee">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Workshops Group Color</label>
                                            <input type="color" class="control-input" value="#f39c12">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Counseling Group Color</label>
                                            <input type="color" class="control-input" value="#2ecc71">
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Control Group Color</label>
                                            <input type="color" class="control-input" value="#e74c3c">
                                        </div>
                                    </div>
                                </div>
                                <div class="visualization-footer">
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #4361ee;"></div>
                                            <span>Mentoring</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #f39c12;"></div>
                                            <span>Workshops</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #2ecc71;"></div>
                                            <span>Counseling</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #e74c3c;"></div>
                                            <span>Control</span>
                                        </div>
                                    </div>
                                    <span>n = 248 students</span>
                                </div>
                            </div>

                            <div class="visualization-card">
                                <div class="visualization-header">
                                    <h3 class="visualization-title">Subgroup Analysis: GPA by Work Hours</h3>
                                    <div class="visualization-actions">
                                        <button class="visualization-action">
                                            <i class="material-icons">filter_list</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">download</i>
                                        </button>
                                        <button class="visualization-action">
                                            <i class="material-icons">fullscreen</i>
                                        </button>
                                    </div>
                                </div>
                                <div class="visualization-body">
                                    <canvas id="subgroupChart"></canvas>
                                    <div class="floating-controls">
                                        <div class="control-group">
                                            <label class="control-label">Chart Type</label>
                                            <select class="control-input">
                                                <option>Bar</option>
                                                <option>Line</option>
                                                <option>Scatter</option>
                                            </select>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Outcome Measure</label>
                                            <select class="control-input">
                                                <option>GPA</option>
                                                <option>Belonging Score</option>
                                                <option>Self-Efficacy Score</option>
                                            </select>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Subgroup Variable</label>
                                            <select class="control-input">
                                                <option>Work Hours</option>
                                                <option>Family Obligations</option>
                                            </select>
                                        </div>
                                        <div class="control-group">
                                            <label class="control-label">Show Error Bars</label>
                                            <input type="checkbox" checked>
                                        </div>
                                    </div>
                                </div>
                                <div class="visualization-footer">
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #4361ee;"></div>
                                            <span>Low Work Hours (15)</span>
                                        </div>
                                        <div class="legend-item">
                                            <div class="legend-color" style="background-color: #e74c3c;"></div>
                                            <span>High Work Hours (>15)</span>
                                        </div>
                                    </div>
                                    <span>n = 248 students</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="statistical-results-tab" style="display: none;">
                        <div class="statistical-results">
                            <h3 style="margin-bottom: 1rem; font-size: 1.125rem; font-weight: 600;">Repeated Measures ANOVA Results</h3>
                            
                            <div style="margin-bottom: 2rem;">
                                <h4 style="margin-bottom: 0.75rem; font-size: 1rem; font-weight: 500;">GPA Outcome</h4>
                                <div class="data-table-container">
                                    <table class="results-table">
                                        <thead>
                                            <tr>
                                                <th>Effect</th>
                                                <th>df</th>
                                                <th>F</th>
                                                <th>p-value</th>
                                                <th>partial </th>
                                                <th>Significance</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Time</td>
                                                <td>2, 488</td>
                                                <td>15.42</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.059</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Intervention Group</td>
                                                <td>3, 244</td>
                                                <td>8.76</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.097</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Time  Intervention</td>
                                                <td>6, 488</td>
                                                <td>4.32</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.051</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Work Hours (Covariate)</td>
                                                <td>1, 244</td>
                                                <td>12.55</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.049</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Family Obligations (Covariate)</td>
                                                <td>1, 244</td>
                                                <td>3.21</td>
                                                <td>0.074</td>
                                                <td>0.013</td>
                                                <td>.</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p style="font-size: 0.875rem; color: var(--gray-600); margin-top: 0.5rem;">Significance codes: *** p&lt;0.001, ** p&lt;0.01, * p&lt;0.05, . p&lt;0.1</p>
                            </div>

                            <div style="margin-bottom: 2rem;">
                                <h4 style="margin-bottom: 0.75rem; font-size: 1rem; font-weight: 500;">Belonging Score Outcome</h4>
                                <div class="data-table-container">
                                    <table class="results-table">
                                        <thead>
                                            <tr>
                                                <th>Effect</th>
                                                <th>df</th>
                                                <th>F</th>
                                                <th>p-value</th>
                                                <th>partial </th>
                                                <th>Significance</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Time</td>
                                                <td>2, 488</td>
                                                <td>22.78</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.085</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Intervention Group</td>
                                                <td>3, 244</td>
                                                <td>11.45</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.123</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Time  Intervention</td>
                                                <td>6, 488</td>
                                                <td>7.89</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.089</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Work Hours (Covariate)</td>
                                                <td>1, 244</td>
                                                <td>5.67</td>
                                                <td class="significant">0.018</td>
                                                <td>0.023</td>
                                                <td>*</td>
                                            </tr>
                                            <tr>
                                                <td>Family Obligations (Covariate)</td>
                                                <td>1, 244</td>
                                                <td>4.89</td>
                                                <td class="significant">0.028</td>
                                                <td>0.020</td>
                                                <td>*</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p style="font-size: 0.875rem; color: var(--gray-600); margin-top: 0.5rem;">Significance codes: *** p&lt;0.001, ** p&lt;0.01, * p&lt;0.05, . p&lt;0.1</p>
                            </div>

                            <div>
                                <h4 style="margin-bottom: 0.75rem; font-size: 1rem; font-weight: 500;">Self-Efficacy Score Outcome</h4>
                                <div class="data-table-container">
                                    <table class="results-table">
                                        <thead>
                                            <tr>
                                                <th>Effect</th>
                                                <th>df</th>
                                                <th>F</th>
                                                <th>p-value</th>
                                                <th>partial </th>
                                                <th>Significance</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Time</td>
                                                <td>2, 488</td>
                                                <td>19.34</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.073</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Intervention Group</td>
                                                <td>3, 244</td>
                                                <td>9.87</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.108</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Time  Intervention</td>
                                                <td>6, 488</td>
                                                <td>5.43</td>
                                                <td class="significant">&lt;0.001</td>
                                                <td>0.063</td>
                                                <td>***</td>
                                            </tr>
                                            <tr>
                                                <td>Work Hours (Covariate)</td>
                                                <td>1, 244</td>
                                                <td>7.82</td>
                                                <td class="significant">0.006</td>
                                                <td>0.031</td>
                                                <td>**</td>
                                            </tr>
                                            <tr>
                                                <td>Family Obligations (Covariate)</td>
                                                <td>1, 244</td>
                                                <td>2.15</td>
                                                <td>0.144</td>
                                                <td>0.009</td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <p style="font-size: 0.875rem; color: var(--gray-600); margin-top: 0.5rem;">Significance codes: *** p&lt;0.001, ** p&lt;0.01, * p&lt;0.05, . p&lt;0.1</p>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="text-align: right; margin-top: 1.5rem;">
                        <button class="btn btn-outline-secondary btn-icon" style="margin-right: 0.75rem;">
                            <i class="material-icons">arrow_back</i> Back
                        </button>
                        <button class="btn btn-primary btn-icon" id="next-to-report">
                            <i class="material-icons">arrow_forward</i> Next: Generate Report
                        </button>
                    </div>
                </div>
            </section>

            <!-- Report Generation Section -->
            <section id="report-generation" class="section" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">Report Generation</h2>
                    <button class="btn btn-outline-secondary btn-sm">
                        <i class="material-icons">help_outline</i>
                    </button>
                </div>
                <div class="section-body">
                    <p style="margin-bottom: 1.5rem;">Generate customized reports based on your analysis results. Select the report type and content to include.</p>

                    <div class="form-group">
                        <label class="form-label">Report Type</label>
                        <div class="report-options">
                            <div class="report-option selected">
                                <div class="report-option-header">
                                    <div class="report-option-icon">
                                        <i class="material-icons">school</i>
                                    </div>
                                    <div>
                                        <div class="report-option-title">Academic Report</div>
                                        <div class="report-option-description">Comprehensive report with detailed statistical results, methodology, and literature context. Suitable for academic publications.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="report-option">
                                <div class="report-option-header">
                                    <div class="report-option-icon">
                                        <i class="material-icons">business</i>
                                    </div>
                                    <div>
                                        <div class="report-option-title">Administrator Report</div>
                                        <div class="report-option-description">Focused on key findings, implementation recommendations, and ROI metrics. Suitable for university administrators.</div>
                                    </div>
                                </div>
                            </div>
                            <div class="report-option">
                                <div class="report-option-header">
                                    <div class="report-option-icon">
                                        <i class="material-icons">summarize</i>
                                    </div>
                                    <div>
                                        <div class="report-option-title">Executive Summary</div>
                                        <div class="report-option-description">Brief overview of key findings and recommendations. Suitable for quick review by stakeholders.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Content to Include</label>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 0.75rem;">
                            <label style="display: flex; align-items: flex-start;">
                                <input type="checkbox" checked style="margin-right: 0.5rem; margin-top: 0.25rem;">
                                <div>
                                    <div style="font-weight: 500;">Methodology</div>
                                    <div style="font-size: 0.875rem; color: var(--gray-600);">Research design, data collection, and analysis methods</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: flex-start;">
                                <input type="checkbox" checked style="margin-right: 0.5rem; margin-top: 0.25rem;">
                                <div>
                                    <div style="font-weight: 500;">Statistical Results</div>
                                    <div style="font-size: 0.875rem; color: var(--gray-600);">Detailed statistical tables and significance tests</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: flex-start;">
                                <input type="checkbox" checked style="margin-right: 0.5rem; margin-top: 0.25rem;">
                                <div>
                                    <div style="font-weight: 500;">Data Visualizations</div>
                                    <div style="font-size: 0.875rem; color: var(--gray-600);">Charts and graphs illustrating key findings</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: flex-start;">
                                <input type="checkbox" checked style="margin-right: 0.5rem; margin-top: 0.25rem;">
                                <div>
                                    <div style="font-weight: 500;">Subgroup Analysis</div>
                                    <div style="font-size: 0.875rem; color: var(--gray-600);">Results broken down by specific student groups</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: flex-start;">
                                <input type="checkbox" checked style="margin-right: 0.5rem; margin-top: 0.25rem;">
                                <div>
                                    <div style="font-weight: 500;">Recommendations</div>
                                    <div style="font-size: 0.875rem; color: var(--gray-600);">Practical applications based on findings</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: flex-start;">
                                <input type="checkbox" style="margin-right: 0.5rem; margin-top: 0.25rem;">
                                <div>
                                    <div style="font-weight: 500;">Literature Review</div>
                                    <div style="font-size: 0.875rem; color: var(--gray-600);">Context within existing research</div>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Report Format</label>
                        <div class="report-format-options">
                            <div class="report-format selected">
                                <i class="material-icons">picture_as_pdf</i>
                                PDF Document
                            </div>
                            <div class="report-format">
                                <i class="material-icons">description</i>
                                Word Document (.docx)
                            </div>
                            <div class="report-format">
                                <i class="material-icons">slideshow</i>
                                PowerPoint (.pptx)
                            </div>
                            <div class="report-format">
                                <i class="material-icons">html</i>
                                HTML Report
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="text-align: right; margin-top: 1.5rem;">
                        <button class="btn btn-outline-secondary btn-icon" style="margin-right: 0.75rem;">
                            <i class="material-icons">arrow_back</i> Back
                        </button>
                        <button class="btn btn-primary btn-icon btn-lg" id="generate-report">
                            <i class="material-icons">description</i> Generate Report
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // Navigation functionality
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const target = e.currentTarget.getAttribute('href').substring(1);
                
                // Hide all sections
                document.querySelectorAll('.section').forEach(section => {
                    section.style.display = 'none';
                });
                
                // Show target section
                document.getElementById(target).style.display = 'block';
                
                // Update active link
                document.querySelectorAll('.nav-link').forEach(navLink => {
                    navLink.classList.remove('active');
                });
                e.currentTarget.classList.add('active');
                
                // Update progress bar
                updateProgress(target);
            });
        });

        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', (e) => {
                const target = e.currentTarget.getAttribute('data-tab');
                
                // Hide all tab contents
                document.querySelectorAll('[id$="-tab"]').forEach(content => {
                    content.style.display = 'none';
                });
                
                // Show target tab content
                document.getElementById(`${target}-tab`).style.display = 'block';
                
                // Update active tab
                document.querySelectorAll('.tab').forEach(t => {
                    t.classList.remove('active');
                });
                e.currentTarget.classList.add('active');
            });
        });

        // Next buttons
        document.getElementById('next-to-variables').addEventListener('click', () => {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('variable-definition').style.display = 'block';
            updateProgress('variable-definition');
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#variable-definition') {
                    link.classList.add('active');
                }
            });
        });

        document.getElementById('next-to-analysis').addEventListener('click', () => {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('analysis-configuration').style.display = 'block';
            updateProgress('analysis-configuration');
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#analysis-configuration') {
                    link.classList.add('active');
                }
            });
        });

        document.getElementById('run-analysis').addEventListener('click', () => {
            // Show loading overlay
            const loadingOverlay = document.createElement('div');
            loadingOverlay.className = 'loading-overlay';
            loadingOverlay.innerHTML = `
                <div class="loading-spinner"></div>
                <div class="loading-text">Running analysis, please wait...</div>
            `;
            document.getElementById('analysis-configuration').appendChild(loadingOverlay);
            
            // Simulate analysis running
            setTimeout(() => {
                loadingOverlay.remove();
                
                document.querySelectorAll('.section').forEach(section => {
                    section.style.display = 'none';
                });
                document.getElementById('results-visualization').style.display = 'block';
                updateProgress('results-visualization');
                
                // Update nav links
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#results-visualization') {
                        link.classList.add('active');
                    }
                });
                
                // Initialize charts
                initCharts();
            }, 2000);
        });

        document.getElementById('next-to-report').addEventListener('click', () => {
            document.querySelectorAll('.section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('report-generation').style.display = 'block';
            updateProgress('report-generation');
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#report-generation') {
                    link.classList.add('active');
                }
            });
        });

        document.getElementById('generate-report').addEventListener('click', () => {
            // Show loading overlay
            const loadingOverlay = document.createElement('div');
            loadingOverlay.className = 'loading-overlay';
            loadingOverlay.innerHTML = `
                <div class="loading-spinner"></div>
                <div class="loading-text">Generating report, please wait...</div>
            `;
            document.getElementById('report-generation').appendChild(loadingOverlay);
            
            // Simulate report generation
            setTimeout(() => {
                loadingOverlay.remove();
                
                // Show success message
                const successMessage = document.createElement('div');
                successMessage.style.position = 'fixed';
                successMessage.style.top = '20px';
                successMessage.style.left = '50%';
                successMessage.style.transform = 'translateX(-50%)';
                successMessage.style.padding = '1rem 1.5rem';
                successMessage.style.backgroundColor = 'var(--success)';
                successMessage.style.color = 'white';
                successMessage.style.borderRadius = 'var(--border-radius)';
                successMessage.style.boxShadow = 'var(--box-shadow)';
                successMessage.style.zIndex = '1000';
                successMessage.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <i class="material-icons" style="margin-right: 0.75rem;">check_circle</i>
                        <span>Report generated successfully! Downloading file...</span>
                    </div>
                `;
                document.body.appendChild(successMessage);
                
                setTimeout(() => {
                    successMessage.remove();
                }, 3000);
            }, 2000);
        });

        // File upload functionality
        const fileDropzone = document.getElementById('file-dropzone');
        const fileInput = document.getElementById('file-input');

        fileDropzone.addEventListener('click', () => {
            fileInput.click();
        });

        fileDropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileDropzone.style.borderColor = 'var(--primary)';
            fileDropzone.style.backgroundColor = 'rgba(67, 97, 238, 0.05)';
        });

        fileDropzone.addEventListener('dragleave', () => {
            fileDropzone.style.borderColor = 'var(--gray-400)';
            fileDropzone.style.backgroundColor = 'var(--gray-100)';
        });

        fileDropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            fileDropzone.style.borderColor = 'var(--gray-400)';
            fileDropzone.style.backgroundColor = 'var(--gray-100)';
            
            // Handle file drop (would normally process files)
            // For demo, we're just showing the already displayed files
        });

        // Report option selection
        document.querySelectorAll('.report-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.report-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
            });
        });

        // Report format selection
        document.querySelectorAll('.report-format').forEach(format => {
            format.addEventListener('click', () => {
                document.querySelectorAll('.report-format').forEach(fmt => {
                    fmt.classList.remove('selected');
                });
                format.classList.add('selected');
            });
        });

        // Analysis option selection
        document.querySelectorAll('.analysis-option').forEach(option => {
            option.addEventListener('click', () => {
                document.querySelectorAll('.analysis-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                option.classList.add('selected');
                
                // Also check the radio button
                const radio = option.querySelector('input[type="radio"]');
                radio.checked = true;
            });
        });

        // Update progress bar
        function updateProgress(currentSection) {
            const progressMap = {
                'data-upload': 20,
                'variable-definition': 40,
                'analysis-configuration': 60,
                'results-visualization': 80,
                'report-generation': 100
            };
            
            const progressBar = document.getElementById('progress-bar');
            progressBar.style.width = `${progressMap[currentSection]}%`;
        }

        // Initialize charts
        function initCharts() {
            // GPA Chart
            const gpaCtx = document.getElementById('gpaChart').getContext('2d');
            const gpaChart = new Chart(gpaCtx, {
                type: 'line',
                data: {
                    labels: ['Baseline', 'Follow-up 1', 'Follow-up 2'],
                    datasets: [
                        {
                            label: 'Mentoring',
                            data: [3.1, 3.3, 3.5],
                            borderColor: '#4361ee',
                            backgroundColor: 'rgba(67, 97, 238, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Workshops',
                            data: [3.0, 3.1, 3.2],
                            borderColor: '#f39c12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Counseling',
                            data: [3.2, 3.4, 3.6],
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Control',
                            data: [3.0, 3.0, 3.1],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 2.5,
                            max: 4.0,
                            title: {
                                display: true,
                                text: 'GPA (0-4.0 scale)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time Point'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        },
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });

            // Belonging Chart
            const belongingCtx = document.getElementById('belongingChart').getContext('2d');
            const belongingChart = new Chart(belongingCtx, {
                type: 'line',
                data: {
                    labels: ['Baseline', 'Follow-up 1', 'Follow-up 2'],
                    datasets: [
                        {
                            label: 'Mentoring',
                            data: [3.4, 3.8, 4.2],
                            borderColor: '#4361ee',
                            backgroundColor: 'rgba(67, 97, 238, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Workshops',
                            data: [3.3, 3.5, 3.7],
                            borderColor: '#f39c12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Counseling',
                            data: [3.5, 3.9, 4.1],
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Control',
                            data: [3.2, 3.3, 3.4],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 2.5,
                            max: 5.0,
                            title: {
                                display: true,
                                text: 'Belonging Score (1-5 scale)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time Point'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        },
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });

            // Self-Efficacy Chart
            const efficacyCtx = document.getElementById('efficacyChart').getContext('2d');
            const efficacyChart = new Chart(efficacyCtx, {
                type: 'line',
                data: {
                    labels: ['Baseline', 'Follow-up 1', 'Follow-up 2'],
                    datasets: [
                        {
                            label: 'Mentoring',
                            data: [3.7, 4.0, 4.3],
                            borderColor: '#4361ee',
                            backgroundColor: 'rgba(67, 97, 238, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Workshops',
                            data: [3.5, 3.7, 3.9],
                            borderColor: '#f39c12',
                            backgroundColor: 'rgba(243, 156, 18, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Counseling',
                            data: [3.8, 4.1, 4.4],
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Control',
                            data: [3.6, 3.7, 3.8],
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 3.0,
                            max: 5.0,
                            title: {
                                display: true,
                                text: 'Self-Efficacy Score (1-5 scale)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Time Point'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        },
                        legend: {
                            display: false
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });

            // Subgroup Chart
            const subgroupCtx = document.getElementById('subgroupChart').getContext('2d');
            const subgroupChart = new Chart(subgroupCtx, {
                type: 'bar',
                data: {
                    labels: ['Mentoring', 'Workshops', 'Counseling', 'Control'],
                    datasets: [
                        {
                            label: 'Low Work Hours (15)',
                            data: [3.7, 3.4, 3.8, 3.2],
                            backgroundColor: '#4361ee',
                        },
                        {
                            label: 'High Work Hours (>15)',
                            data: [3.3, 3.0, 3.4, 2.9],
                            backgroundColor: '#e74c3c',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 2.5,
                            max: 4.0,
                            title: {
                                display: true,
                                text: 'Final GPA'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Intervention Group'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        },
                        legend: {
                            display: false,
                            position: 'top'
                        },
                        title: {
                            display: false
                        }
                    }
                }
            });
        }

        // Initialize with data upload section
        updateProgress('data-upload');
    </script>
</body>
</html>