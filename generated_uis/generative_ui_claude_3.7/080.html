<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Revitalization Planner</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        :root {
            --primary: #8D2F23;
            --primary-light: #B8473A;
            --primary-dark: #6A1F15;
            --secondary: #4A6D7C;
            --secondary-light: #6A8D9C;
            --secondary-dark: #2A4D5C;
            --accent: #D4AF37;
            --accent-light: #F4CF57;
            --accent-dark: #B48F17;
            --neutral-100: #FFFFFF;
            --neutral-200: #F5F5F5;
            --neutral-300: #E0E0E0;
            --neutral-400: #CCCCCC;
            --neutral-500: #999999;
            --neutral-600: #666666;
            --neutral-700: #444444;
            --neutral-800: #333333;
            --neutral-900: #222222;
            --success: #2E7D32;
            --warning: #F9A825;
            --error: #C62828;
            --info: #1565C0;
            --border-radius-sm: 4px;
            --border-radius-md: 8px;
            --border-radius-lg: 12px;
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.1);
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-xxl: 48px;
            --font-family-primary: 'Montserrat', sans-serif;
            --font-family-secondary: 'Lora', serif;
            --transition-fast: 0.2s ease;
            --transition-medium: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-primary);
            background-color: var(--neutral-200);
            color: var(--neutral-800);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-family-secondary);
            color: var(--neutral-900);
            margin-bottom: var(--spacing-md);
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 600;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        h3 {
            font-size: 1.4rem;
            font-weight: 600;
        }

        p {
            margin-bottom: var(--spacing-md);
        }

        .container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
        }

        .sidebar {
            background-color: var(--neutral-100);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 10;
            transition: transform var(--transition-medium);
        }

        .sidebar-toggle {
            display: none;
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 20;
            background-color: var(--primary);
            color: var(--neutral-100);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            transition: background-color var(--transition-fast);
        }

        .sidebar-toggle:hover {
            background-color: var(--primary-light);
        }

        .logo-container {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-xl);
        }

        .logo {
            font-family: var(--font-family-secondary);
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--primary);
        }

        .logo span {
            color: var(--accent);
        }

        .nav-list {
            list-style: none;
        }

        .nav-item {
            margin-bottom: var(--spacing-md);
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: var(--spacing-md);
            text-decoration: none;
            color: var(--neutral-700);
            border-radius: var(--border-radius-md);
            transition: background-color var(--transition-fast), color var(--transition-fast);
        }

        .nav-link:hover {
            background-color: var(--neutral-200);
            color: var(--primary);
        }

        .nav-link.active {
            background-color: var(--primary-light);
            color: var(--neutral-100);
        }

        .nav-link .icon {
            margin-right: var(--spacing-md);
            font-size: 1.2rem;
        }

        .progress-container {
            margin-top: var(--spacing-xl);
            padding: var(--spacing-md);
            background-color: var(--neutral-200);
            border-radius: var(--border-radius-md);
        }

        .progress-title {
            font-size: 0.9rem;
            color: var(--neutral-700);
            margin-bottom: var(--spacing-sm);
        }

        .progress-bar {
            height: 8px;
            background-color: var(--neutral-300);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 35%;
            transition: width var(--transition-medium);
        }

        .progress-stats {
            display: flex;
            justify-content: space-between;
            font-size: 0.8rem;
            color: var(--neutral-600);
            margin-top: var(--spacing-xs);
        }

        .main-content {
            padding: var(--spacing-lg) var(--spacing-xl);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .page-title {
            font-size: 2rem;
            color: var(--neutral-900);
        }

        .header-actions {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-sm) var(--spacing-md);
            border: none;
            border-radius: var(--border-radius-md);
            font-family: var(--font-family-primary);
            font-weight: 500;
            cursor: pointer;
            transition: background-color var(--transition-fast), transform var(--transition-fast), box-shadow var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }

        .btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(141, 47, 35, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:active::after {
            animation: ripple 0.6s linear;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--neutral-100);
        }

        .btn-primary:hover {
            background-color: var(--primary-light);
        }

        .btn-secondary {
            background-color: var(--neutral-200);
            color: var(--neutral-800);
        }

        .btn-secondary:hover {
            background-color: var(--neutral-300);
        }

        .btn-accent {
            background-color: var(--accent);
            color: var(--neutral-900);
        }

        .btn-accent:hover {
            background-color: var(--accent-light);
        }

        .btn .icon {
            margin-right: var(--spacing-sm);
        }

        .section {
            background-color: var(--neutral-100);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-sm);
            transition: box-shadow var(--transition-medium);
        }

        .section:hover {
            box-shadow: var(--shadow-md);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .section-title {
            font-size: 1.4rem;
            color: var(--neutral-900);
            display: flex;
            align-items: center;
        }

        .section-title .icon {
            margin-right: var(--spacing-sm);
            color: var(--primary);
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--spacing-lg);
        }

        .card {
            background-color: var(--neutral-100);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-light);
            color: var(--neutral-100);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: var(--spacing-md);
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .card-content {
            color: var(--neutral-700);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .card-content p {
            margin-bottom: var(--spacing-lg);
        }

        .card-content .btn {
            margin-top: auto;
            align-self: flex-start;
        }

        .form-group {
            margin-bottom: var(--spacing-lg);
        }

        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: var(--spacing-sm);
            color: var(--neutral-800);
        }

        .form-control {
            width: 100%;
            padding: var(--spacing-md);
            border: 1px solid var(--neutral-400);
            border-radius: var(--border-radius-md);
            font-family: var(--font-family-primary);
            font-size: 1rem;
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(141, 47, 35, 0.2);
        }

        .form-control:hover {
            border-color: var(--neutral-600);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .chart-container {
            height: 400px;
            margin-bottom: var(--spacing-lg);
            position: relative;
            border-radius: var(--border-radius-md);
            background-color: var(--neutral-100);
            padding: var(--spacing-md);
            box-shadow: var(--shadow-sm);
            transition: box-shadow var(--transition-medium);
        }

        .chart-container:hover {
            box-shadow: var(--shadow-md);
        }

        .swot-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .swot-card {
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-md);
            background-color: var(--neutral-100);
            box-shadow: var(--shadow-sm);
            transition: box-shadow var(--transition-medium);
        }

        .swot-card:hover {
            box-shadow: var(--shadow-md);
        }

        .swot-card-strength {
            border-left: 4px solid var(--success);
        }

        .swot-card-weakness {
            border-left: 4px solid var(--warning);
        }

        .swot-card-opportunity {
            border-left: 4px solid var(--info);
        }

        .swot-card-threat {
            border-left: 4px solid var(--error);
        }

        .swot-title {
            font-size: 1.2rem;
            margin-bottom: var(--spacing-md);
            color: var(--neutral-800);
        }

        .swot-items {
            list-style: none;
        }

        .swot-item {
            display: flex;
            margin-bottom: var(--spacing-md);
            position: relative;
        }

        .swot-item-input {
            flex: 1;
            padding: var(--spacing-md);
            border: 1px solid var(--neutral-300);
            border-radius: var(--border-radius-md);
            font-family: var(--font-family-primary);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        .swot-item-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(141, 47, 35, 0.2);
        }

        .swot-item-input:hover {
            border-color: var(--neutral-600);
        }

        .swot-item .swot-item-delete {
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--error);
            cursor: pointer;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .swot-item:hover .swot-item-delete {
            opacity: 1;
        }

        .swot-add-btn {
            background-color: var(--neutral-200);
            color: var(--neutral-700);
            border: none;
            border-radius: var(--border-radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            font-family: var(--font-family-primary);
            display: flex;
            align-items: center;
            margin-top: var(--spacing-sm);
            transition: background-color var(--transition-fast);
        }

        .swot-add-btn:hover {
            background-color: var(--neutral-300);
        }

        .swot-add-btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(153, 153, 153, 0.3);
        }

        .swot-add-btn .icon {
            margin-right: var(--spacing-sm);
        }

        .info-panel {
            background-color: var(--neutral-200);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            border-left: 4px solid var(--secondary);
            transition: transform var(--transition-medium);
        }

        .info-panel:hover {
            transform: translateY(-2px);
        }

        .info-panel-title {
            font-size: 1.1rem;
            margin-bottom: var(--spacing-sm);
            color: var(--secondary-dark);
            display: flex;
            align-items: center;
        }

        .info-panel-title .icon {
            margin-right: var(--spacing-sm);
        }

        .info-panel-content {
            color: var(--neutral-700);
        }

        .tab-container {
            margin-bottom: var(--spacing-xl);
        }

        .tab-nav {
            display: flex;
            border-bottom: 1px solid var(--neutral-300);
            margin-bottom: var(--spacing-lg);
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--neutral-400) var(--neutral-200);
        }

        .tab-nav::-webkit-scrollbar {
            height: 6px;
        }

        .tab-nav::-webkit-scrollbar-track {
            background: var(--neutral-200);
        }

        .tab-nav::-webkit-scrollbar-thumb {
            background-color: var(--neutral-400);
            border-radius: 3px;
        }

        .tab-btn {
            padding: var(--spacing-md) var(--spacing-lg);
            background: none;
            border: none;
            font-family: var(--font-family-primary);
            font-weight: 500;
            color: var(--neutral-600);
            cursor: pointer;
            position: relative;
            transition: color var(--transition-fast);
            white-space: nowrap;
        }

        .tab-btn:hover {
            color: var(--primary);
        }

        .tab-btn:focus {
            outline: none;
            color: var(--primary);
        }

        .tab-btn.active {
            color: var(--primary);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .brainstorm-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-xl);
        }

        .brainstorm-note {
            background-color: var(--accent-light);
            padding: var(--spacing-md);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            min-height: 120px;
            position: relative;
            cursor: move;
            transition: transform var(--transition-fast), box-shadow var(--transition-fast);
        }

        .brainstorm-note:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-md);
        }

        .brainstorm-note.dragging {
            opacity: 0.5;
            box-shadow: var(--shadow-lg);
        }

        .brainstorm-note-content {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            resize: none;
            font-family: var(--font-family-primary);
            color: var(--neutral-900);
        }

        .brainstorm-note-content:focus {
            outline: none;
        }

        .brainstorm-note-delete {
            position: absolute;
            top: 5px;
            right: 5px;
            background: none;
            border: none;
            color: var(--neutral-700);
            cursor: pointer;
            font-size: 1rem;
            opacity: 0;
            transition: opacity var(--transition-fast);
        }

        .brainstorm-note:hover .brainstorm-note-delete {
            opacity: 1;
        }

        .brainstorm-add {
            background-color: var(--neutral-200);
            border: 2px dashed var(--neutral-400);
            border-radius: var(--border-radius-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
            cursor: pointer;
            transition: background-color var(--transition-fast), border-color var(--transition-fast);
        }

        .brainstorm-add:hover {
            background-color: var(--neutral-300);
            border-color: var(--neutral-500);
        }

        .brainstorm-add .icon {
            font-size: 1.5rem;
            color: var(--neutral-500);
            margin-bottom: var(--spacing-sm);
        }

        .brainstorm-add-text {
            color: var(--neutral-600);
            font-size: 0.9rem;
        }

        .data-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-xl);
            border: 2px dashed var(--neutral-400);
            border-radius: var(--border-radius-md);
            margin-bottom: var(--spacing-xl);
            transition: background-color var(--transition-fast), border-color var(--transition-fast);
        }

        .data-upload:hover {
            background-color: var(--neutral-200);
            border-color: var(--neutral-500);
        }

        .data-upload.drag-over {
            background-color: rgba(74, 109, 124, 0.1);
            border-color: var(--secondary);
        }

        .data-upload-icon {
            font-size: 2.5rem;
            color: var(--neutral-500);
            margin-bottom: var(--spacing-md);
        }

        .data-upload-text {
            color: var(--neutral-700);
            margin-bottom: var(--spacing-md);
            text-align: center;
        }

        .data-upload-btn {
            background-color: var(--secondary);
            color: var(--neutral-100);
            padding: var(--spacing-sm) var(--spacing-lg);
            border: none;
            border-radius: var(--border-radius-md);
            font-family: var(--font-family-primary);
            font-weight: 500;
            cursor: pointer;
            transition: background-color var(--transition-fast), transform var(--transition-fast);
        }

        .data-upload-btn:hover {
            background-color: var(--secondary-light);
            transform: translateY(-2px);
        }

        .data-upload-btn:active {
            transform: translateY(0);
        }

        .data-upload-btn:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 109, 124, 0.3);
        }

        .data-input {
            display: none;
        }

        .floating-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--neutral-100);
            padding: 15px;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 5;
            max-width: 250px;
        }

        .floating-controls.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .control-group {
            margin: 10px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
            flex-direction: column;
        }

        .control-label {
            font-size: 0.9rem;
            color: var(--neutral-700);
            font-weight: 500;
        }

        .control-input {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--neutral-300);
            border-radius: var(--border-radius-sm);
            font-family: var(--font-family-primary);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        .control-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(74, 109, 124, 0.2);
        }

        .control-select {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--neutral-300);
            border-radius: var(--border-radius-sm);
            font-family: var(--font-family-primary);
            background-color: var(--neutral-100);
            transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
        }

        .control-select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(74, 109, 124, 0.2);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
            animation: modalBackgroundFadeIn 0.3s ease;
        }

        @keyframes modalBackgroundFadeIn {
            from {
                background-color: rgba(0, 0, 0, 0);
            }
            to {
                background-color: rgba(0, 0, 0, 0.5);
            }
        }

        .modal-content {
            background-color: var(--neutral-100);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-xl);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalFadeIn 0.3s ease;
            box-shadow: var(--shadow-lg);
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: var(--spacing-md);
            right: var(--spacing-md);
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--neutral-700);
            cursor: pointer;
            transition: color var(--transition-fast);
        }

        .modal-close:hover {
            color: var(--error);
        }

        .modal-close:focus {
            outline: none;
            color: var(--error);
        }

        .modal-header {
            margin-bottom: var(--spacing-lg);
        }

        .modal-title {
            font-size: 1.4rem;
        }

        .modal-body {
            margin-bottom: var(--spacing-lg);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
        }

        .summary-item {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--neutral-300);
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            color: var(--neutral-700);
        }

        .summary-value {
            color: var(--neutral-800);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--neutral-800);
            color: var(--neutral-100);
            text-align: center;
            border-radius: var(--border-radius-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity var(--transition-fast);
            font-size: 0.85rem;
            box-shadow: var(--shadow-md);
        }

        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--neutral-800) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--neutral-800);
            color: var(--neutral-100);
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            transform: translateY(100px);
            opacity: 0;
            transition: transform var(--transition-medium), opacity var(--transition-medium);
        }

        .toast.success {
            background-color: var(--success);
        }

        .toast.error {
            background-color: var(--error);
        }

        .toast.warning {
            background-color: var(--warning);
            color: var(--neutral-900);
        }

        .toast.info {
            background-color: var(--info);
        }

        .toast.active {
            transform: translateY(0);
            opacity: 1;
        }

        .toast-icon {
            font-size: 1.2rem;
        }

        .toast-message {
            flex: 1;
        }

        .toast-close {
            background: none;
            border: none;
            color: inherit;
            font-size: 1.2rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity var(--transition-fast);
        }

        .toast-close:hover {
            opacity: 1;
        }

        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary);
            color: var(--neutral-100);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            z-index: 90;
            border: none;
            transition: background-color var(--transition-fast), transform var(--transition-fast);
        }

        .theme-toggle:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }

        .theme-toggle:active {
            transform: translateY(0);
        }

        .theme-toggle:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(141, 47, 35, 0.3);
        }

        .help-button {
            position: fixed;
            bottom: 70px;
            right: 20px;
            background-color: var(--secondary);
            color: var(--neutral-100);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            z-index: 90;
            border: none;
            transition: background-color var(--transition-fast), transform var(--transition-fast);
        }

        .help-button:hover {
            background-color: var(--secondary-light);
            transform: translateY(-2px);
        }

        .help-button:active {
            transform: translateY(0);
        }

        .help-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 109, 124, 0.3);
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: fixed;
                left: -280px;
                height: 100%;
                z-index: 100;
            }

            .sidebar.active {
                left: 0;
                transform: translateX(0);
            }

            .sidebar-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .main-content {
                padding: var(--spacing-lg) var(--spacing-md);
            }

            .swot-grid {
                grid-template-columns: 1fr;
            }

            .card-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
            }

            .header-actions {
                width: 100%;
                justify-content: space-between;
            }
        }

        @media (max-width: 768px) {
            .header-actions {
                flex-direction: column;
                width: 100%;
            }

            .header-actions .btn {
                width: 100%;
            }

            .section-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        @media print {
            .sidebar, .theme-toggle, .help-button, .floating-controls, .sidebar-toggle {
                display: none !important;
            }

            .container {
                display: block;
            }

            .main-content {
                padding: 0;
            }

            .section {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid var(--neutral-300);
                margin-bottom: 20px;
            }

            .btn {
                display: none;
            }

            body {
                background-color: white;
                font-size: 12pt;
            }

            h1 {
                font-size: 18pt;
            }

            h2 {
                font-size: 16pt;
            }

            h3 {
                font-size: 14pt;
            }

            .chart-container {
                height: 300px;
                page-break-inside: avoid;
            }

            .card-grid {
                display: block;
            }

            .card {
                box-shadow: none;
                border: 1px solid var(--neutral-300);
                margin-bottom: 15px;
                page-break-inside: avoid;
            }

            .brainstorm-container {
                display: block;
            }

            .brainstorm-note {
                box-shadow: none;
                border: 1px solid var(--neutral-300);
                margin-bottom: 15px;
                page-break-inside: avoid;
            }

            .brainstorm-add, .swot-add-btn, .swot-item-delete, .brainstorm-note-delete {
                display: none;
            }
        }

        /* Dark mode support */
        .dark-mode {
            --neutral-100: #1a1a1a;
            --neutral-200: #2a2a2a;
            --neutral-300: #3a3a3a;
            --neutral-400: #4a4a4a;
            --neutral-500: #858585;
            --neutral-600: #a0a0a0;
            --neutral-700: #c0c0c0;
            --neutral-800: #e0e0e0;
            --neutral-900: #f5f5f5;
            --primary: #e05d4d;
            --primary-light: #e87d6d;
            --primary-dark: #c04d3d;
            --secondary: #6a8d9c;
            --secondary-light: #8aadbc;
            --secondary-dark: #4a6d7c;
            --accent: #f4cf57;
            --accent-light: #f7df77;
            --accent-dark: #d4af37;
            --success: #4caf50;
            --warning: #ffb74d;
            --error: #f44336;
            --info: #42a5f5;
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle navigation">
        <span class="material-symbols-rounded">menu</span>
    </button>

    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="logo-container">
                <div class="logo">Revitalize<span>Plan</span></div>
            </div>
            <nav>
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#overview" class="nav-link active" tabindex="0" aria-current="page">
                            <span class="material-symbols-rounded icon">dashboard</span>
                            Overview
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#data-analysis" class="nav-link" tabindex="0">
                            <span class="material-symbols-rounded icon">insights</span>
                            Data Analysis
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#swot" class="nav-link" tabindex="0">
                            <span class="material-symbols-rounded icon">grid_view</span>
                            SWOT Analysis
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#market-analysis" class="nav-link" tabindex="0">
                            <span class="material-symbols-rounded icon">groups</span>
                            Market Analysis
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#strategy" class="nav-link" tabindex="0">
                            <span class="material-symbols-rounded icon">lightbulb</span>
                            Strategy Development
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#action-plan" class="nav-link" tabindex="0">
                            <span class="material-symbols-rounded icon">checklist</span>
                            Action Plan
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#financial" class="nav-link" tabindex="0">
                            <span class="material-symbols-rounded icon">payments</span>
                            Financial Projections
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#summary" class="nav-link" tabindex="0">
                            <span class="material-symbols-rounded icon">summarize</span>
                            Plan Summary
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="progress-container">
                <div class="progress-title">Plan Completion</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-stats">
                    <span>35% Complete</span>
                    <span>3/8 Sections</span>
                </div>
            </div>
        </aside>
        <main class="main-content">
            <div class="header">
                <h1 class="page-title">Restaurant Revitalization Plan</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="save-progress-btn" aria-label="Save progress">
                        <span class="material-symbols-rounded icon">save</span>
                        Save Progress
                    </button>
                    <button class="btn btn-primary" id="export-plan-btn" aria-label="Export plan">
                        <span class="material-symbols-rounded icon">download</span>
                        Export Plan
                    </button>
                </div>
            </div>

            <section class="section" id="overview">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">dashboard</span>
                        Overview
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">info</span>
                        Welcome to Your Restaurant Revitalization Plan
                    </h3>
                    <div class="info-panel-content">
                        <p>This interactive planner will guide you through the process of developing a comprehensive business revitalization plan for your family's Italian restaurant. You'll analyze your current situation, identify opportunities, develop strategies, and create an actionable plan to respect your heritage while attracting new customers.</p>
                        <p>Complete each section at your own pace. Your progress will be saved automatically, and you can export the final plan when you're ready.</p>
                    </div>
                </div>
                <div class="card-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-symbols-rounded">history</span>
                            </div>
                            <h3 class="card-title">Restaurant Background</h3>
                        </div>
                        <div class="card-content">
                            <p>Document your restaurant's history, core values, and current positioning in the market.</p>
                            <button class="btn btn-secondary" data-section="background">Start Section</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-symbols-rounded">trending_down</span>
                            </div>
                            <h3 class="card-title">Revenue Challenges</h3>
                        </div>
                        <div class="card-content">
                            <p>Identify and analyze factors contributing to declining revenue and customer engagement.</p>
                            <button class="btn btn-secondary" data-section="challenges">Start Section</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-symbols-rounded">diversity_3</span>
                            </div>
                            <h3 class="card-title">Changing Demographics</h3>
                        </div>
                        <div class="card-content">
                            <p>Understand the evolving neighborhood demographics and their implications for your business.</p>
                            <button class="btn btn-secondary" data-section="demographics">Start Section</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-icon">
                                <span class="material-symbols-rounded">restaurant_menu</span>
                            </div>
                            <h3 class="card-title">Italian Heritage</h3>
                        </div>
                        <div class="card-content">
                            <p>Explore ways to honor your culinary heritage while evolving your offerings for new audiences.</p>
                            <button class="btn btn-secondary" data-section="heritage">Start Section</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section" id="data-analysis">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">insights</span>
                        Data Analysis
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">analytics</span>
                        Understanding Your Data
                    </h3>
                    <div class="info-panel-content">
                        <p>In this section, you'll upload and analyze your sales data and customer feedback to identify trends, patterns, and areas for improvement. This analysis will provide a foundation for your revitalization strategy.</p>
                        <p>You can upload data from your POS system or enter it manually. The tool will help you visualize and interpret the information.</p>
                    </div>
                </div>
                <div class="tab-container">
                    <div class="tab-nav" role="tablist">
                        <button class="tab-btn active" id="sales-data-tab" data-tab="sales-data" role="tab" aria-selected="true" aria-controls="sales-data">Sales Data</button>
                        <button class="tab-btn" id="customer-feedback-tab" data-tab="customer-feedback" role="tab" aria-selected="false" aria-controls="customer-feedback">Customer Feedback</button>
                        <button class="tab-btn" id="menu-performance-tab" data-tab="menu-performance" role="tab" aria-selected="false" aria-controls="menu-performance">Menu Performance</button>
                    </div>
                    <div class="tab-content active" id="sales-data" role="tabpanel" aria-labelledby="sales-data-tab">
                        <div class="data-upload" id="sales-data-upload">
                            <span class="material-symbols-rounded data-upload-icon">upload_file</span>
                            <p class="data-upload-text">Drag and drop your sales data file here, or click to browse</p>
                            <button class="data-upload-btn">Upload Sales Data</button>
                            <input type="file" class="data-input" id="sales-data-input" accept=".csv,.xlsx,.xls">
                        </div>
                        <div class="chart-container">
                            <canvas id="salesChart" aria-label="Monthly revenue trend chart" role="img"></canvas>
                            <div class="floating-controls" id="salesChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="salesTimePeriod">Time Period</label>
                                    <select class="control-select" id="salesTimePeriod">
                                        <option value="monthly">Monthly</option>
                                        <option value="quarterly">Quarterly</option>
                                        <option value="yearly">Yearly</option>
                                        <option value="weekly">Weekly</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="salesChartType">Chart Type</label>
                                    <select class="control-select" id="salesChartType">
                                        <option value="line">Line</option>
                                        <option value="bar">Bar</option>
                                        <option value="area">Area</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="salesChartColor">Data Series Color</label>
                                    <input type="color" class="control-input" id="salesChartColor" value="#8D2F23">
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="salesDataRange">Date Range</label>
                                    <select class="control-select" id="salesDataRange">
                                        <option value="12">Last 12 Months</option>
                                        <option value="6">Last 6 Months</option>
                                        <option value="24">Last 24 Months</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <button class="btn btn-secondary" id="salesChartExport">
                                        <span class="material-symbols-rounded">download</span>
                                        Export Chart
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="salesByDayChart" aria-label="Average sales by day of week chart" role="img"></canvas>
                            <div class="floating-controls" id="salesByDayChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="salesByDayChartType">Chart Type</label>
                                    <select class="control-select" id="salesByDayChartType">
                                        <option value="bar">Bar</option>
                                        <option value="line">Line</option>
                                        <option value="radar">Radar</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="salesByDayChartColor">Data Series Color</label>
                                    <input type="color" class="control-input" id="salesByDayChartColor" value="#4A6D7C">
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="salesByDayDataPeriod">Time Period</label>
                                    <select class="control-select" id="salesByDayDataPeriod">
                                        <option value="all">All Time</option>
                                        <option value="quarter">Last Quarter</option>
                                        <option value="year">Last Year</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="salesByDaySegment">Customer Segment</label>
                                    <select class="control-select" id="salesByDaySegment">
                                        <option value="all">All Customers</option>
                                        <option value="repeat">Repeat Customers</option>
                                        <option value="new">New Customers</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <button class="btn btn-secondary" id="salesByDayChartExport">
                                        <span class="material-symbols-rounded">download</span>
                                        Export Chart
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-content" id="customer-feedback" role="tabpanel" aria-labelledby="customer-feedback-tab">
                        <div class="data-upload" id="feedback-data-upload">
                            <span class="material-symbols-rounded data-upload-icon">comment</span>
                            <p class="data-upload-text">Drag and drop your customer feedback data here, or click to browse</p>
                            <button class="data-upload-btn">Upload Feedback Data</button>
                            <input type="file" class="data-input" id="feedback-data-input" accept=".csv,.xlsx,.xls,.json">
                        </div>
                        <div class="chart-container">
                            <canvas id="feedbackChart" aria-label="Customer satisfaction ratings chart" role="img"></canvas>
                            <div class="floating-controls" id="feedbackChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="feedbackCategory">Feedback Category</label>
                                    <select class="control-select" id="feedbackCategory">
                                        <option value="all">All Categories</option>
                                        <option value="food">Food Quality</option>
                                        <option value="service">Service</option>
                                        <option value="ambiance">Ambiance</option>
                                        <option value="value">Value</option>
                                        <option value="cleanliness">Cleanliness</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="feedbackChartType">Chart Type</label>
                                    <select class="control-select" id="feedbackChartType">
                                        <option value="pie">Pie</option>
                                        <option value="bar">Bar</option>
                                        <option value="doughnut">Doughnut</option>
                                        <option value="polarArea">Polar Area</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="feedbackTimePeriod">Time Period</label>
                                    <select class="control-select" id="feedbackTimePeriod">
                                        <option value="6">Last 6 Months</option>
                                        <option value="3">Last 3 Months</option>
                                        <option value="12">Last 12 Months</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="feedbackPalette">Color Palette</label>
                                    <select class="control-select" id="feedbackPalette">
                                        <option value="default">Default</option>
                                        <option value="monochrome">Monochrome</option>
                                        <option value="pastel">Pastel</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <button class="btn btn-secondary" id="feedbackChartExport">
                                        <span class="material-symbols-rounded">download</span>
                                        Export Chart
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="feedbackTrends">Key Feedback Trends</label>
                            <textarea class="form-control" id="feedbackTrends" placeholder="Note any recurring themes or patterns in customer feedback..."></textarea>
                        </div>
                    </div>
                    <div class="tab-content" id="menu-performance" role="tabpanel" aria-labelledby="menu-performance-tab">
                        <div class="data-upload" id="menu-data-upload">
                            <span class="material-symbols-rounded data-upload-icon">restaurant_menu</span>
                            <p class="data-upload-text">Drag and drop your menu performance data here, or click to browse</p>
                            <button class="data-upload-btn">Upload Menu Data</button>
                            <input type="file" class="data-input" id="menu-data-input" accept=".csv,.xlsx,.xls,.json">
                        </div>
                        <div class="chart-container">
                            <canvas id="menuChart" aria-label="Menu items revenue chart" role="img"></canvas>
                            <div class="floating-controls" id="menuChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="menuSortBy">Sort By</label>
                                    <select class="control-select" id="menuSortBy">
                                        <option value="revenue">Revenue</option>
                                        <option value="quantity">Quantity Sold</option>
                                        <option value="profit">Profit Margin</option>
                                        <option value="growth">Growth Rate</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="menuTopItems">Top Items</label>
                                    <select class="control-select" id="menuTopItems">
                                        <option value="5">Top 5</option>
                                        <option value="10">Top 10</option>
                                        <option value="15">Top 15</option>
                                        <option value="all">All Items</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="menuChartType">Chart Type</label>
                                    <select class="control-select" id="menuChartType">
                                        <option value="bar">Bar</option>
                                        <option value="horizontalBar">Horizontal Bar</option>
                                        <option value="pie">Pie</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="menuCategory">Category</label>
                                    <select class="control-select" id="menuCategory">
                                        <option value="all">All Categories</option>
                                        <option value="appetizers">Appetizers</option>
                                        <option value="pasta">Pasta</option>
                                        <option value="pizza">Pizza</option>
                                        <option value="desserts">Desserts</option>
                                        <option value="beverages">Beverages</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <button class="btn btn-secondary" id="menuChartExport">
                                        <span class="material-symbols-rounded">download</span>
                                        Export Chart
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="menuInsights">Menu Performance Insights</label>
                            <textarea class="form-control" id="menuInsights" placeholder="Note key insights about your menu's performance (popular items, underperforming dishes, etc.)..."></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section" id="swot">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">grid_view</span>
                        SWOT Analysis
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">help_outline</span>
                        What is a SWOT Analysis?
                    </h3>
                    <div class="info-panel-content">
                        <p>SWOT stands for Strengths, Weaknesses, Opportunities, and Threats. This analysis helps you identify internal factors (strengths and weaknesses) and external factors (opportunities and threats) that affect your business.</p>
                        <p>By completing this analysis, you'll gain a clearer understanding of your restaurant's current position and the factors that could influence its future success.</p>
                        <p>Click on the <span class="tooltip">question mark icons<span class="tooltip-text">Hover over these icons for helpful tips and examples</span></span> for examples and guidance.</p>
                    </div>
                </div>
                <div class="swot-grid">
                    <div class="swot-card swot-card-strength">
                        <h3 class="swot-title">
                            Strengths
                            <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                                <span class="tooltip-text">Examples: Authentic Italian recipes, loyal customer base, prime location, skilled chef, family atmosphere, signature dishes</span>
                            </span>
                        </h3>
                        <p>What does your restaurant do well? What unique resources do you have? What do customers see as your strengths?</p>
                        <ul class="swot-items" id="strengths-list">
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a strength..." aria-label="Add a strength">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a strength..." aria-label="Add a strength">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a strength..." aria-label="Add a strength">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                        </ul>
                        <button class="swot-add-btn" id="add-strength">
                            <span class="material-symbols-rounded icon">add</span>
                            Add Strength
                        </button>
                    </div>
                    <div class="swot-card swot-card-weakness">
                        <h3 class="swot-title">
                            Weaknesses
                            <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                                <span class="tooltip-text">Examples: Outdated decor, limited menu options, high staff turnover, inconsistent food quality, limited marketing, aging customer base</span>
                            </span>
                        </h3>
                        <p>What could your restaurant improve? What do competitors do better? What resources are you lacking?</p>
                        <ul class="swot-items" id="weaknesses-list">
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a weakness..." aria-label="Add a weakness">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a weakness..." aria-label="Add a weakness">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a weakness..." aria-label="Add a weakness">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                        </ul>
                        <button class="swot-add-btn" id="add-weakness">
                            <span class="material-symbols-rounded icon">add</span>
                            Add Weakness
                        </button>
                    </div>
                    <div class="swot-card swot-card-opportunity">
                        <h3 class="swot-title">
                            Opportunities
                            <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                                <span class="tooltip-text">Examples: Growing interest in authentic cuisine, younger demographic moving in, online delivery platforms, outdoor dining potential, food tourism</span>
                            </span>
                        </h3>
                        <p>What neighborhood changes could benefit your restaurant? What trends could you leverage? New markets to explore?</p>
                        <ul class="swot-items" id="opportunities-list">
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add an opportunity..." aria-label="Add an opportunity">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add an opportunity..." aria-label="Add an opportunity">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add an opportunity..." aria-label="Add an opportunity">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                        </ul>
                        <button class="swot-add-btn" id="add-opportunity">
                            <span class="material-symbols-rounded icon">add</span>
                            Add Opportunity
                        </button>
                    </div>
                    <div class="swot-card swot-card-threat">
                        <h3 class="swot-title">
                            Threats
                            <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                                <span class="tooltip-text">Examples: New restaurant competitors, rising food costs, changing consumer preferences, economic downturn, staffing challenges</span>
                            </span>
                        </h3>
                        <p>What obstacles do you face? What are competitors doing? Are there changing regulations or economic factors?</p>
                        <ul class="swot-items" id="threats-list">
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a threat..." aria-label="Add a threat">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a threat..." aria-label="Add a threat">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                            <li class="swot-item">
                                <input type="text" class="swot-item-input" placeholder="Add a threat..." aria-label="Add a threat">
                                <button class="swot-item-delete" aria-label="Delete item">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </li>
                        </ul>
                        <button class="swot-add-btn" id="add-threat">
                            <span class="material-symbols-rounded icon">add</span>
                            Add Threat
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="swot-conclusions">SWOT Analysis Conclusions</label>
                    <textarea class="form-control" id="swot-conclusions" placeholder="Summarize the key insights from your SWOT analysis and how they might inform your revitalization strategy..."></textarea>
                </div>
            </section>

            <section class="section" id="market-analysis">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">groups</span>
                        Market Analysis
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">search</span>
                        Understanding Your Market
                    </h3>
                    <div class="info-panel-content">
                        <p>Market analysis helps you understand your target customers, competitors, and industry trends. By analyzing these factors, you can identify opportunities to better serve your customers and differentiate your restaurant from competitors.</p>
                        <p>In this section, you'll define your target market segments, analyze competitors, and identify industry trends that could impact your business.</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="neighborhood-demographics">
                        Neighborhood Demographics
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Consider age ranges, income levels, cultural backgrounds, family sizes, and lifestyle preferences of the neighborhood population</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="neighborhood-demographics" placeholder="Describe the changing demographics of your neighborhood (age, income, ethnicity, lifestyle preferences, etc.)..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="target-segments">
                        Target Customer Segments
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Example segments: Young professionals (25-40), Families with children, Culinary enthusiasts, Business lunch crowd</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="target-segments" placeholder="Define 2-3 primary customer segments you want to target (e.g., young professionals, families, etc.)..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="competitor-analysis">
                        Competitor Analysis
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Consider direct competitors (other Italian restaurants) and indirect competitors (other dining options). Analyze their pricing, menu, ambiance, marketing, and customer experience.</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="competitor-analysis" placeholder="List your main competitors and their strengths/weaknesses..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="industry-trends">
                        Industry Trends
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Examples: Plant-based options, sustainable practices, fusion cuisine, experiential dining, online ordering, ghost kitchens</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="industry-trends" placeholder="Identify current trends in the restaurant industry that could impact your business..."></textarea>
                </div>
            </section>

            <section class="section" id="strategy">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">lightbulb</span>
                        Strategy Development
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">psychology</span>
                        Developing Your Revitalization Strategy
                    </h3>
                    <div class="info-panel-content">
                        <p>Based on your SWOT and market analyses, you'll now develop strategies to revitalize your restaurant while honoring its Italian heritage. This section will help you brainstorm and organize ideas for menu innovation, marketing, operations, and customer experience.</p>
                        <p>Use the brainstorming area below to generate ideas, then organize them into cohesive strategies.</p>
                    </div>
                </div>
                <h3>Brainstorming Area</h3>
                <p>Click on a note to edit it, or add new notes with your ideas. You can drag and rearrange notes to organize your thoughts.</p>
                <div class="brainstorm-container" id="brainstorm-container">
                    <div class="brainstorm-note" draggable="true">
                        <textarea class="brainstorm-note-content" placeholder="Your idea here..." aria-label="Brainstorm note"></textarea>
                        <button class="brainstorm-note-delete" aria-label="Delete note">
                            <span class="material-symbols-rounded">close</span>
                        </button>
                    </div>
                    <div class="brainstorm-note" draggable="true">
                        <textarea class="brainstorm-note-content" placeholder="Your idea here..." aria-label="Brainstorm note"></textarea>
                        <button class="brainstorm-note-delete" aria-label="Delete note">
                            <span class="material-symbols-rounded">close</span>
                        </button>
                    </div>
                    <div class="brainstorm-note" draggable="true">
                        <textarea class="brainstorm-note-content" placeholder="Your idea here..." aria-label="Brainstorm note"></textarea>
                        <button class="brainstorm-note-delete" aria-label="Delete note">
                            <span class="material-symbols-rounded">close</span>
                        </button>
                    </div>
                    <div class="brainstorm-add" id="add-brainstorm-note" tabindex="0" role="button" aria-label="Add new idea">
                        <span class="material-symbols-rounded icon">add</span>
                        <span class="brainstorm-add-text">Add New Idea</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="menu-strategy">
                        Menu Strategy
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Consider: Signature dishes to keep, new items to introduce, modern twists on classics, seasonal specials, dietary accommodations</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="menu-strategy" placeholder="How will you evolve your menu while respecting Italian traditions? What new items or concepts will you introduce?"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="marketing-strategy">
                        Marketing Strategy
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Consider: Social media presence, website updates, local partnerships, loyalty programs, special events, targeted promotions</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="marketing-strategy" placeholder="How will you promote your restaurant to both existing and new customers? What channels will you use?"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="operational-improvements">
                        Operational Improvements
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Consider: Service processes, kitchen efficiency, staff training, technology integration, inventory management</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="operational-improvements" placeholder="What operational changes will you implement to improve efficiency and customer experience?"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="customer-experience">
                        Customer Experience
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Consider: Ambiance updates, service standards, special touches, personalization, feedback mechanisms</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="customer-experience" placeholder="How will you enhance the overall customer experience to increase satisfaction and loyalty?"></textarea>
                </div>
            </section>

            <section class="section" id="action-plan">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">checklist</span>
                        Action Plan
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">calendar_month</span>
                        Creating Your Implementation Plan
                    </h3>
                    <div class="info-panel-content">
                        <p>An action plan breaks down your strategy into specific, actionable steps with timelines and responsibilities. This section will help you create a detailed implementation plan for your restaurant revitalization.</p>
                        <p>Define specific actions, assign responsibilities, set deadlines, and identify resources needed for each task.</p>
                    </div>
                </div>
                <div class="tab-container">
                    <div class="tab-nav" role="tablist">
                        <button class="tab-btn active" id="short-term-tab" data-tab="short-term" role="tab" aria-selected="true" aria-controls="short-term">Short-Term (0-3 months)</button>
                        <button class="tab-btn" id="medium-term-tab" data-tab="medium-term" role="tab" aria-selected="false" aria-controls="medium-term">Medium-Term (3-6 months)</button>
                        <button class="tab-btn" id="long-term-tab" data-tab="long-term" role="tab" aria-selected="false" aria-controls="long-term">Long-Term (6-12 months)</button>
                    </div>
                    <div class="tab-content active" id="short-term" role="tabpanel" aria-labelledby="short-term-tab">
                        <div class="form-group">
                            <label class="form-label" for="short-term-actions">
                                Short-Term Actions (0-3 months)
                                <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                                    <span class="tooltip-text">Focus on quick wins and immediate improvements: menu tweaks, staff training, social media setup, minor decor updates</span>
                                </span>
                            </label>
                            <textarea class="form-control" id="short-term-actions" placeholder="List specific actions to implement in the next 3 months..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="short-term-resources">Resources Needed</label>
                            <textarea class="form-control" id="short-term-resources" placeholder="What budget, people, tools, or other resources will you need for these short-term actions?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="short-term-metrics">Success Metrics</label>
                            <textarea class="form-control" id="short-term-metrics" placeholder="How will you measure the success of these short-term actions?"></textarea>
                        </div>
                    </div>
                    <div class="tab-content" id="medium-term" role="tabpanel" aria-labelledby="medium-term-tab">
                        <div class="form-group">
                            <label class="form-label" for="medium-term-actions">
                                Medium-Term Actions (3-6 months)
                                <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                                    <span class="tooltip-text">Focus on more substantial changes: menu redesign, marketing campaigns, technology upgrades, customer loyalty program</span>
                                </span>
                            </label>
                            <textarea class="form-control" id="medium-term-actions" placeholder="List specific actions to implement in months 3-6..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="medium-term-resources">Resources Needed</label>
                            <textarea class="form-control" id="medium-term-resources" placeholder="What budget, people, tools, or other resources will you need for these medium-term actions?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="medium-term-metrics">Success Metrics</label>
                            <textarea class="form-control" id="medium-term-metrics" placeholder="How will you measure the success of these medium-term actions?"></textarea>
                        </div>
                    </div>
                    <div class="tab-content" id="long-term" role="tabpanel" aria-labelledby="long-term-tab">
                        <div class="form-group">
                            <label class="form-label" for="long-term-actions">
                                Long-Term Actions (6-12 months)
                                <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                                    <span class="tooltip-text">Focus on major initiatives: significant renovations, expansion, new service lines, advanced technology implementation</span>
                                </span>
                            </label>
                            <textarea class="form-control" id="long-term-actions" placeholder="List specific actions to implement in months 6-12..."></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="long-term-resources">Resources Needed</label>
                            <textarea class="form-control" id="long-term-resources" placeholder="What budget, people, tools, or other resources will you need for these long-term actions?"></textarea>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="long-term-metrics">Success Metrics</label>
                            <textarea class="form-control" id="long-term-metrics" placeholder="How will you measure the success of these long-term actions?"></textarea>
                        </div>
                    </div>
                </div>
            </section>

            <section class="section" id="financial">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">payments</span>
                        Financial Projections
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">monitoring</span>
                        Projecting Financial Impact
                    </h3>
                    <div class="info-panel-content">
                        <p>Financial projections help you estimate the potential impact of your revitalization plan on revenue, costs, and profitability. This section will guide you through creating basic financial projections for your restaurant.</p>
                        <p>You'll estimate implementation costs, projected revenue increases, and overall financial impact over a 12-month period.</p>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="implementation-costs">
                        Implementation Costs
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Include costs for menu redesign, marketing, renovations, staff training, technology, etc.</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="implementation-costs" placeholder="Estimate costs for implementing your revitalization plan (menu redesign, marketing, renovations, training, etc.)..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="revenue-projections">
                        Revenue Projections
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Consider current revenue baseline and projected increases from your revitalization efforts</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="revenue-projections" placeholder="Estimate monthly revenue projections for the next 12 months based on your revitalization plan..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="break-even-analysis">
                        Break-Even Analysis
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Calculate when increased revenue will cover the costs of your revitalization efforts</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="break-even-analysis" placeholder="Estimate how long it will take to recoup your implementation costs..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="financial-metrics">
                        Key Financial Metrics
                        <span class="material-symbols-rounded tooltip" style="font-size: 1rem; vertical-align: middle; cursor: help;">help_outline
                            <span class="tooltip-text">Examples: Average check size, customer count, food cost percentage, labor cost percentage, profit margin</span>
                        </span>
                    </label>
                    <textarea class="form-control" id="financial-metrics" placeholder="Identify key financial metrics you'll track to measure success (average check size, customer count, profit margin, etc.)..."></textarea>
                </div>
            </section>

            <section class="section" id="summary">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="material-symbols-rounded icon">summarize</span>
                        Plan Summary
                    </h2>
                </div>
                <div class="info-panel">
                    <h3 class="info-panel-title">
                        <span class="material-symbols-rounded icon">description</span>
                        Summarizing Your Revitalization Plan
                    </h3>
                    <div class="info-panel-content">
                        <p>This section provides a comprehensive summary of your restaurant revitalization plan. Review each component to ensure it accurately reflects your vision and strategy.</p>
                        <p>Once you're satisfied with your plan, you can export it for implementation and sharing with stakeholders.</p>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Executive Summary</div>
                    <div class="summary-value">
                        <p>This plan outlines a comprehensive strategy to revitalize our 30-year-old Italian restaurant by honoring our heritage while adapting to changing neighborhood demographics and customer preferences.</p>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Key Findings from Data Analysis</div>
                    <div class="summary-value">
                        <p>[This section will summarize key insights from your data analysis]</p>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">SWOT Analysis Summary</div>
                    <div class="summary-value">
                        <p>[This section will summarize your SWOT analysis]</p>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Market Analysis Summary</div>
                    <div class="summary-value">
                        <p>[This section will summarize your market analysis]</p>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Strategy Overview</div>
                    <div class="summary-value">
                        <p>[This section will summarize your revitalization strategy]</p>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Implementation Timeline</div>
                    <div class="summary-value">
                        <p>[This section will provide a timeline of key implementation milestones]</p>
                    </div>
                </div>
                <div class="summary-item">
                    <div class="summary-label">Financial Summary</div>
                    <div class="summary-value">
                        <p>[This section will summarize your financial projections]</p>
                    </div>
                </div>
                <button class="btn btn-primary" id="export-complete-plan">
                    <span class="material-symbols-rounded icon">download</span>
                    Export Complete Plan
                </button>
            </section>
        </main>
    </div>

    <div class="modal" id="help-modal">
        <div class="modal-content">
            <button class="modal-close" id="close-help-modal" aria-label="Close modal">
                <span class="material-symbols-rounded">close</span>
            </button>
            <div class="modal-header">
                <h2 class="modal-title">Business Concept Guide</h2>
            </div>
            <div class="modal-body">
                <h3>SWOT Analysis</h3>
                <p>SWOT stands for Strengths, Weaknesses, Opportunities, and Threats. It's a strategic planning tool that helps businesses identify internal and external factors that may impact their success.</p>
                <ul>
                    <li><strong>Strengths:</strong> Internal positive attributes or resources that give your restaurant an advantage (e.g., authentic recipes, loyal customer base).</li>
                    <li><strong>Weaknesses:</strong> Internal negative attributes or limitations that put your restaurant at a disadvantage (e.g., outdated decor, limited menu options).</li>
                    <li><strong>Opportunities:</strong> External factors or trends that your restaurant could capitalize on (e.g., growing interest in authentic cuisine, neighborhood demographic changes).</li>
                    <li><strong>Threats:</strong> External factors that could negatively impact your restaurant (e.g., new competitors, economic downturn).</li>
                </ul>
                <h3>Market Segmentation</h3>
                <p>Market segmentation is the process of dividing a broad consumer market into sub-groups of consumers based on shared characteristics. For restaurants, common segmentation approaches include:</p>
                <ul>
                    <li><strong>Demographic:</strong> Age, income, education, family status</li>
                    <li><strong>Geographic:</strong> Neighborhood, distance from restaurant</li>
                    <li><strong>Psychographic:</strong> Lifestyle, values, attitudes</li>
                    <li><strong>Behavioral:</strong> Dining frequency, spending habits, cuisine preferences</li>
                </ul>
                <h3>Customer Lifetime Value (CLV)</h3>
                <p>CLV represents the total revenue a business can expect from a customer during their relationship. For restaurants, it helps prioritize customer retention efforts.</p>
                <p>Simple CLV calculation: (Average Check × Visits per Month × 12 months × Years as Customer) - Customer Acquisition Cost</p>
                <h3>Break-Even Analysis</h3>
                <p>Break-even analysis determines when your restaurant will generate enough revenue to cover all costs.</p>
                <p>Break-even point = Fixed Costs ÷ (Average Revenue per Customer - Variable Cost per Customer)</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="close-help-button">Got It</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">
        <span class="material-symbols-rounded toast-icon" id="toast-icon"></span>
        <div class="toast-message" id="toast-message"></div>
        <button class="toast-close" id="toast-close" aria-label="Close notification">
            <span class="material-symbols-rounded">close</span>
        </button>
    </div>

    <button class="help-button" id="help-button" aria-label="Get help">
        <span class="material-symbols-rounded">help</span>
    </button>

    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
        <span class="material-symbols-rounded">dark_mode</span>
    </button>

    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // DOM elements
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const helpButton = document.getElementById('help-button');
        const helpModal = document.getElementById('help-modal');
        const closeHelpModal = document.getElementById('close-help-modal');
        const closeHelpButton = document.getElementById('close-help-button');
        const themeToggle = document.getElementById('theme-toggle');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        const toastIcon = document.getElementById('toast-icon');
        const toastClose = document.getElementById('toast-close');
        const saveProgressBtn = document.getElementById('save-progress-btn');
        const exportPlanBtn = document.getElementById('export-plan-btn');
        const exportCompletePlanBtn = document.getElementById('export-complete-plan');

        // State management
        let planData = {
            currentSection: 'overview',
            completedSections: ['overview', 'data-analysis', 'swot'],
            lastSaved: new Date()
        };

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            initNavigation();
            initTabs();
            initSWOTAnalysis();
            initBrainstorming();
            initDataUpload();
            initCharts();
            initThemeToggle();
            initHelpModal();
            initToast();
            initSaveAndExport();
            loadSavedData();
            updateProgress();

            // Add keyboard navigation support
            document.addEventListener('keydown', handleKeyboardNavigation);
        });

        // Navigation functionality
        function initNavigation() {
            // Toggle sidebar on mobile
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('active');
            });

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', (e) => {
                if (window.innerWidth <= 1024 && 
                    !e.target.closest('.sidebar') && 
                    !e.target.closest('#sidebar-toggle') &&
                    sidebar.classList.contains('active')) {
                    sidebar.classList.remove('active');
                }
            });

            // Section navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active link
                    document.querySelectorAll('.nav-link').forEach(item => {
                        item.classList.remove('active');
                        item.setAttribute('aria-current', 'false');
                    });
                    this.classList.add('active');
                    this.setAttribute('aria-current', 'page');
                    
                    // Scroll to section
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        targetSection.scrollIntoView({ behavior: 'smooth' });
                        planData.currentSection = targetId;
                        saveData();
                    }

                    // Close sidebar on mobile after navigation
                    if (window.innerWidth <= 1024) {
                        sidebar.classList.remove('active');
                    }
                });
            });

            // Card section navigation
            document.querySelectorAll('.card-content .btn').forEach(button => {
                button.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    if (section) {
                        // Logic to navigate to specific section
                        showToast('Navigating to section...', 'info');
                    }
                });
            });
        }

        // Tab functionality
        function initTabs() {
            document.querySelectorAll('.tab-btn').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabContainer = this.closest('.tab-container');
                    const tabId = this.getAttribute('data-tab');
                    
                    // Update active tab
                    tabContainer.querySelectorAll('.tab-btn').forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-selected', 'false');
                    });
                    this.classList.add('active');
                    this.setAttribute('aria-selected', 'true');
                    
                    // Show active content
                    tabContainer.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(tabId).classList.add('active');
                });

                // Keyboard navigation for tabs
                tab.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        this.click();
                    }
                });
            });
        }

        // SWOT Analysis functionality
        function initSWOTAnalysis() {
            const addSwotItem = (listId, buttonId) => {
                const button = document.getElementById(buttonId);
                const list = document.getElementById(listId);
                
                button.addEventListener('click', () => {
                    const newItem = document.createElement('li');
                    newItem.className = 'swot-item';
                    newItem.innerHTML = `
                        <input type="text" class="swot-item-input" placeholder="Add an item..." aria-label="Add an item">
                        <button class="swot-item-delete" aria-label="Delete item">
                            <span class="material-symbols-rounded">delete</span>
                        </button>
                    `;
                    list.appendChild(newItem);
                    
                    // Add delete functionality to new item
                    const deleteButton = newItem.querySelector('.swot-item-delete');
                    deleteButton.addEventListener('click', () => {
                        newItem.remove();
                        saveData();
                    });

                    // Focus the new input
                    const input = newItem.querySelector('.swot-item-input');
                    input.focus();

                    // Save data when input changes
                    input.addEventListener('blur', saveData);
                    input.addEventListener('keydown', function(e) {
                        if (e.key === 'Enter') {
                            e.preventDefault();
                            button.click();
                        }
                    });

                    saveData();
                });
            };

            // Initialize delete buttons for existing SWOT items
            document.querySelectorAll('.swot-item-delete').forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.swot-item').remove();
                    saveData();
                });
            });

            // Initialize input save on blur
            document.querySelectorAll('.swot-item-input').forEach(input => {
                input.addEventListener('blur', saveData);
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        const swotType = this.closest('.swot-card').classList[1].split('-')[2];
                        document.getElementById(`add-${swotType}`).click();
                    }
                });
            });

            addSwotItem('strengths-list', 'add-strength');
            addSwotItem('weaknesses-list', 'add-weakness');
            addSwotItem('opportunities-list', 'add-opportunity');
            addSwotItem('threats-list', 'add-threat');

            // Save SWOT conclusions
            document.getElementById('swot-conclusions').addEventListener('blur', saveData);
        }

        // Brainstorming functionality
        function initBrainstorming() {
            const brainstormContainer = document.getElementById('brainstorm-container');
            const addBrainstormButton = document.getElementById('add-brainstorm-note');
            
            // Add new note
            addBrainstormButton.addEventListener('click', addNewNote);
            addBrainstormButton.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    addNewNote();
                }
            });

            function addNewNote() {
                const newNote = document.createElement('div');
                newNote.className = 'brainstorm-note';
                newNote.setAttribute('draggable', 'true');
                newNote.innerHTML = `
                    <textarea class="brainstorm-note-content" placeholder="Your idea here..." aria-label="Brainstorm note"></textarea>
                    <button class="brainstorm-note-delete" aria-label="Delete note">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                `;
                brainstormContainer.insertBefore(newNote, addBrainstormButton);
                
                // Add delete functionality to new note
                const deleteButton = newNote.querySelector('.brainstorm-note-delete');
                deleteButton.addEventListener('click', () => {
                    newNote.remove();
                    saveData();
                });
                
                // Add drag functionality to new note
                setupDragAndDrop(newNote);

                // Save data when note content changes
                const textarea = newNote.querySelector('.brainstorm-note-content');
                textarea.addEventListener('blur', saveData);
                
                // Focus the new textarea
                textarea.focus();

                saveData();
            }

            // Add delete functionality to existing notes
            document.querySelectorAll('.brainstorm-note-delete').forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.brainstorm-note').remove();
                    saveData();
                });
            });

            // Save note content on blur
            document.querySelectorAll('.brainstorm-note-content').forEach(textarea => {
                textarea.addEventListener('blur', saveData);
            });

            // Drag and drop functionality for brainstorming notes
            function setupDragAndDrop(note) {
                note.addEventListener('dragstart', function(e) {
                    this.classList.add('dragging');
                    e.dataTransfer.setData('text/plain', 'dragging');
                    e.dataTransfer.effectAllowed = 'move';
                });
                
                note.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                    saveData();
                });
            }
            
            brainstormContainer.addEventListener('dragover', function(e) {
                e.preventDefault();
                const draggingElement = document.querySelector('.dragging');
                if (!draggingElement) return;
                
                const afterElement = getDragAfterElement(this, e.clientY);
                if (afterElement) {
                    this.insertBefore(draggingElement, afterElement);
                } else {
                    this.insertBefore(draggingElement, addBrainstormButton);
                }
            });

            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('.brainstorm-note:not(.dragging)')];
                
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }

            // Setup drag and drop for existing notes
            document.querySelectorAll('.brainstorm-note').forEach(note => {
                setupDragAndDrop(note);
            });

            // Save strategy form fields
            document.querySelectorAll('#menu-strategy, #marketing-strategy, #operational-improvements, #customer-experience').forEach(textarea => {
                textarea.addEventListener('blur', saveData);
            });
        }

        // Data upload functionality
        function initDataUpload() {
            const setupFileUpload = (uploadId, inputId) => {
                const uploadArea = document.getElementById(uploadId);
                const fileInput = document.getElementById(inputId);
                
                if (!uploadArea || !fileInput) return;
                
                uploadArea.addEventListener('click', () => {
                    fileInput.click();
                });
                
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('drag-over');
                });
                
                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('drag-over');
                });
                
                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('drag-over');
                    
                    if (e.dataTransfer.files.length) {
                        fileInput.files = e.dataTransfer.files;
                        handleFileUpload(fileInput.files[0], uploadId);
                    }
                });
                
                fileInput.addEventListener('change', () => {
                    if (fileInput.files.length) {
                        handleFileUpload(fileInput.files[0], uploadId);
                    }
                });
            };

            function handleFileUpload(file, uploadId) {
                // In a real app, this would process the file
                // Here we'll just simulate success
                setTimeout(() => {
                    // Update UI to show upload success
                    const uploadArea = document.getElementById(uploadId);
                    uploadArea.innerHTML = `
                        <span class="material-symbols-rounded data-upload-icon" style="color: var(--success);">check_circle</span>
                        <p class="data-upload-text">File "${file.name}" uploaded successfully!</p>
                        <button class="data-upload-btn">Replace File</button>
                    `;
                    
                    // Re-initialize the upload area
                    const inputId = uploadId.replace('-upload', '-input');
                    setupFileUpload(uploadId, inputId);
                    
                    // Show success toast
                    showToast('File uploaded successfully!', 'success');
                    
                    // Update charts with "new" data
                    updateChartsWithDummyData();
                    
                    // Save data
                    saveData();
                }, 1000);
            }

            setupFileUpload('sales-data-upload', 'sales-data-input');
            setupFileUpload('feedback-data-upload', 'feedback-data-input');
            setupFileUpload('menu-data-upload', 'menu-data-input');

            // Save form fields
            document.querySelectorAll('#feedbackTrends, #menuInsights, #neighborhood-demographics, #target-segments, #competitor-analysis, #industry-trends, #short-term-actions, #short-term-resources, #short-term-metrics, #medium-term-actions, #medium-term-resources, #medium-term-metrics, #long-term-actions, #long-term-resources, #long-term-metrics, #implementation-costs, #revenue-projections, #break-even-analysis, #financial-metrics').forEach(textarea => {
                textarea.addEventListener('blur', saveData);
            });
        }

        // Chart initialization
        function initCharts() {
            // Monthly Sales Chart
            const salesChartCtx = document.getElementById('salesChart').getContext('2d');
            const salesChart = new Chart(salesChartCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Monthly Revenue',
                        data: [42000, 39000, 44000, 41000, 38000, 36000, 37000, 35000, 33000, 32000, 30000, 28000],
                        backgroundColor: 'rgba(141, 47, 35, 0.2)',
                        borderColor: 'rgba(141, 47, 35, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        pointBackgroundColor: 'rgba(141, 47, 35, 1)',
                        pointHoverRadius: 6,
                        pointHoverBackgroundColor: 'rgba(141, 47, 35, 1)',
                        pointHoverBorderColor: 'rgba(255, 255, 255, 1)',
                        pointHoverBorderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Revenue: $' + context.parsed.y.toLocaleString();
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Monthly Revenue Trend (Last 12 Months)',
                            font: {
                                size: 16
                            }
                        }
                    },
                    onClick: function() {
                        const controls = document.getElementById('salesChartControls');
                        controls.classList.toggle('active');
                    }
                }
            });

            // Sales by Day Chart
            const salesByDayChartCtx = document.getElementById('salesByDayChart').getContext('2d');
            const salesByDayChart = new Chart(salesByDayChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                    datasets: [{
                        label: 'Average Daily Sales',
                        data: [1200, 1400, 1600, 2100, 3500, 4200, 2800],
                        backgroundColor: 'rgba(74, 109, 124, 0.7)',
                        borderColor: 'rgba(74, 109, 124, 1)',
                        borderWidth: 1,
                        hoverBackgroundColor: 'rgba(74, 109, 124, 0.9)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Average Sales: $' + context.parsed.y.toLocaleString();
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Average Sales by Day of Week',
                            font: {
                                size: 16
                            }
                        }
                    },
                    onClick: function() {
                        const controls = document.getElementById('salesByDayChartControls');
                        controls.classList.toggle('active');
                    }
                }
            });

            // Feedback Chart
            const feedbackChartCtx = document.getElementById('feedbackChart').getContext('2d');
            const feedbackChart = new Chart(feedbackChartCtx, {
                type: 'pie',
                data: {
                    labels: ['Excellent', 'Good', 'Average', 'Poor', 'Very Poor'],
                    datasets: [{
                        data: [35, 45, 15, 4, 1],
                        backgroundColor: [
                            'rgba(46, 125, 50, 0.7)',
                            'rgba(56, 142, 60, 0.7)',
                            'rgba(249, 168, 37, 0.7)',
                            'rgba(230, 81, 0, 0.7)',
                            'rgba(198, 40, 40, 0.7)'
                        ],
                        borderColor: [
                            'rgba(46, 125, 50, 1)',
                            'rgba(56, 142, 60, 1)',
                            'rgba(249, 168, 37, 1)',
                            'rgba(230, 81, 0, 1)',
                            'rgba(198, 40, 40, 1)'
                        ],
                        borderWidth: 1,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + context.parsed + '%';
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Overall Customer Satisfaction Ratings',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'right'
                        }
                    },
                    onClick: function() {
                        const controls = document.getElementById('feedbackChartControls');
                        controls.classList.toggle('active');
                    }
                }
            });

            // Menu Performance Chart
            const menuChartCtx = document.getElementById('menuChart').getContext('2d');
            const menuChart = new Chart(menuChartCtx, {
                type: 'bar',
                data: {
                    labels: ['Spaghetti Carbonara', 'Margherita Pizza', 'Chicken Parmesan', 'Lasagna', 'Fettuccine Alfredo', 'Tiramisu', 'Risotto', 'Bruschetta'],
                    datasets: [{
                        label: 'Revenue ($)',
                        data: [12500, 11200, 9800, 8600, 7400, 6200, 5800, 4900],
                        backgroundColor: 'rgba(212, 175, 55, 0.7)',
                        borderColor: 'rgba(212, 175, 55, 1)',
                        borderWidth: 1,
                        hoverBackgroundColor: 'rgba(212, 175, 55, 0.9)'
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value.toLocaleString();
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return 'Revenue: $' + context.parsed.x.toLocaleString();
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'Top Menu Items by Revenue (Last 3 Months)',
                            font: {
                                size: 16
                            }
                        }
                    },
                    onClick: function() {
                        const controls = document.getElementById('menuChartControls');
                        controls.classList.toggle('active');
                    }
                }
            });

            // Chart Controls
            document.getElementById('salesTimePeriod').addEventListener('change', function() {
                // Update chart data based on selected time period
                const period = this.value;
                let labels, data;
                
                switch(period) {
                    case 'quarterly':
                        labels = ['Q1', 'Q2', 'Q3', 'Q4'];
                        data = [125000, 115000, 105000, 90000];
                        break;
                    case 'yearly':
                        labels = ['2018', '2019', '2020', '2021', '2022'];
                        data = [520000, 490000, 420000, 435000, 405000];
                        break;
                    case 'weekly':
                        labels = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
                        data = [9800, 10200, 9500, 8900];
                        break;
                    default: // monthly
                        labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                        data = [42000, 39000, 44000, 41000, 38000, 36000, 37000, 35000, 33000, 32000, 30000, 28000];
                }
                
                salesChart.data.labels = labels;
                salesChart.data.datasets[0].data = data;
                salesChart.update();
            });

            document.getElementById('salesChartType').addEventListener('change', function() {
                const chartType = this.value;
                salesChart.config.type = chartType;
                
                // Special settings for area chart
                if (chartType === 'area') {
                    salesChart.config.type = 'line';
                    salesChart.data.datasets[0].fill = true;
                } else {
                    salesChart.data.datasets[0].fill = false;
                }
                
                salesChart.update();
            });

            document.getElementById('salesChartColor').addEventListener('change', function() {
                const color = this.value;
                salesChart.data.datasets[0].borderColor = color;
                salesChart.data.datasets[0].backgroundColor = color + '33'; // Add transparency
                salesChart.data.datasets[0].pointBackgroundColor = color;
                salesChart.data.datasets[0].pointHoverBackgroundColor = color;
                salesChart.update();
            });

            document.getElementById('salesDataRange').addEventListener('change', function() {
                // This would update the date range in a real app
                showToast('Date range updated', 'info');
            });

            document.getElementById('salesChartExport').addEventListener('click', function() {
                // This would export the chart in a real app
                showToast('Chart exported to PNG', 'success');
            });

            document.getElementById('salesByDayChartType').addEventListener('change', function() {
                const chartType = this.value;
                salesByDayChart.config.type = chartType;
                
                // Special settings for radar chart
                if (chartType === 'radar') {
                    salesByDayChart.data.datasets[0].pointBackgroundColor = salesByDayChart.data.datasets[0].borderColor;
                }
                
                salesByDayChart.update();
            });

            document.getElementById('salesByDayChartColor').addEventListener('change', function() {
                const color = this.value;
                salesByDayChart.data.datasets[0].borderColor = color;
                salesByDayChart.data.datasets[0].backgroundColor = color + 'B3'; // Add transparency
                salesByDayChart.data.datasets[0].hoverBackgroundColor = color + 'E6'; // More opacity on hover
                if (salesByDayChart.config.type === 'radar') {
                    salesByDayChart.data.datasets[0].pointBackgroundColor = color;
                }
                salesByDayChart.update();
            });

            document.getElementById('salesByDayDataPeriod').