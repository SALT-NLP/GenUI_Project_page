<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quant-Qual Data Synthesis Tool</title>
    <style>
        :root {
            --primary: #4a6fa5;
            --primary-light: #6b8cbb;
            --primary-dark: #345a8c;
            --secondary: #6b8cbb;
            --accent: #e76f51;
            --accent-light: #f4a261;
            --accent-dark: #cc5a3d;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #2a9d8f;
            --warning: #e9c46a;
            --danger: #e63946;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-400: #ced4da;
            --gray-500: #adb5bd;
            --gray-600: #6c757d;
            --gray-700: #495057;
            --gray-800: #343a40;
            --gray-900: #212529;
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --border-radius-sm: 4px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --box-shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            --font-size-base: 1rem;
            --font-size-lg: 1.25rem;
            --font-size-sm: 0.875rem;
            --font-size-xs: 0.75rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            line-height: 1.6;
            color: var(--gray-800);
            background-color: var(--gray-100);
        }

        .container {
            display: grid;
            grid-template-columns: 240px 1fr;
            grid-template-rows: 60px 1fr;
            height: 100vh;
        }

        header {
            grid-column: 1 / -1;
            background-color: white;
            box-shadow: var(--box-shadow);
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            font-family: var(--font-family);
            font-size: var(--font-size-base);
        }

        .btn:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-primary:active {
            transform: translateY(1px);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--gray-300);
            color: var(--gray-700);
        }

        .btn-outline:hover {
            background-color: var(--gray-200);
            border-color: var(--gray-400);
        }

        .btn-outline.active {
            background-color: var(--primary-light);
            border-color: var(--primary);
            color: white;
        }

        .btn-outline:active {
            transform: translateY(1px);
        }

        .btn-icon {
            width: 36px;
            height: 36px;
            padding: 0;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .sidebar {
            background-color: white;
            box-shadow: var(--box-shadow);
            padding: 20px 0;
            overflow-y: auto;
            transition: var(--transition);
        }

        .nav-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--gray-700);
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .nav-item:hover, .nav-item.active {
            background-color: var(--gray-100);
            color: var(--primary);
        }

        .nav-item.active {
            border-left-color: var(--primary);
            font-weight: 500;
        }

        .nav-item-icon {
            font-size: 1.2rem;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-content {
            padding: 20px;
            overflow-y: auto;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            margin-bottom: 20px;
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--box-shadow-lg);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--gray-800);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::after {
            content: "";
            flex: 1;
            height: 1px;
            background-color: var(--gray-300);
            margin-left: 10px;
        }

        .upload-area {
            border: 2px dashed var(--gray-300);
            border-radius: var(--border-radius);
            padding: 40px;
            text-align: center;
            transition: var(--transition);
            margin-bottom: 20px;
            cursor: pointer;
            position: relative;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background-color: var(--gray-100);
        }

        .upload-area.dragover {
            border-color: var(--primary);
            background-color: rgba(74, 111, 165, 0.05);
        }

        .upload-icon {
            font-size: 48px;
            color: var(--gray-400);
            margin-bottom: 16px;
        }

        .file-input {
            display: none;
        }

        .upload-details {
            background-color: var(--gray-100);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 15px;
        }

        .upload-success {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .upload-info {
            margin-top: 10px;
            color: var(--gray-700);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }

        .data-table th {
            background-color: var(--gray-100);
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-table tbody tr {
            transition: var(--transition);
        }

        .data-table tbody tr:hover {
            background-color: var(--gray-100);
        }

        .data-table-container {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 16px;
            text-align: center;
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--box-shadow-lg);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }

        .stat-label {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        .chart-container {
            height: 400px;
            margin-top: 20px;
            position: relative;
        }

        .chart-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: var(--border-radius);
            padding: 10px;
            box-shadow: var(--box-shadow);
            display: flex;
            gap: 10px;
            z-index: 100;
            opacity: 0;
            transform: translateY(-10px);
            transition: var(--transition);
            pointer-events: none;
        }

        .chart-container:hover .chart-controls {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .qual-transcript {
            background-color: var(--gray-100);
            padding: 16px;
            border-radius: var(--border-radius);
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: monospace;
            white-space: pre-wrap;
            line-height: 1.5;
            position: relative;
        }

        .transcript-toolbar {
            position: sticky;
            top: 0;
            background-color: var(--gray-100);
            padding: 10px 0;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
            border-bottom: 1px solid var(--gray-300);
        }

        .code-toolbar {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .code-tag {
            padding: 6px 12px;
            background-color: var(--gray-200);
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            user-select: none;
        }

        .code-tag:hover {
            background-color: var(--primary-light);
            color: white;
        }

        .code-tag.active {
            background-color: var(--primary);
            color: white;
        }

        .synthesis-workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .synthesis-panel {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 16px;
            max-height: 600px;
            overflow-y: auto;
        }

        .panel-title {
            font-size: 1.2rem;
            margin-bottom: 16px;
            color: var(--gray-700);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .panel-actions {
            display: flex;
            gap: 8px;
        }

        .panel-action {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--gray-100);
            cursor: pointer;
            transition: var(--transition);
        }

        .panel-action:hover {
            background-color: var(--gray-200);
        }

        .writing-area {
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            padding: 16px;
            min-height: 400px;
            font-family: var(--font-family);
            line-height: 1.6;
            outline: none;
            resize: none;
            width: 100%;
            transition: var(--transition);
        }

        .writing-area:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
        }

        .method-selector {
            display: flex;
            gap: 16px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .method-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 16px;
            flex: 1;
            min-width: 200px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .method-card:hover {
            transform: translateY(-5px);
        }

        .method-card.active {
            border-color: var(--primary);
        }

        .method-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .method-desc {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .export-options {
            display: flex;
            gap: 16px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .export-option {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
            flex: 1;
            min-width: 200px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .export-option:hover {
            transform: translateY(-5px);
            background-color: var(--primary);
            color: white;
        }

        .export-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--gray-800);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .correlation-matrix {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 2px;
            margin-top: 20px;
        }

        .matrix-cell {
            padding: 10px;
            text-align: center;
            font-size: 0.9rem;
        }

        .matrix-header {
            background-color: var(--gray-200);
            font-weight: 600;
        }

        .highlight-positive {
            background-color: rgba(42, 157, 143, 0.2);
        }

        .highlight-negative {
            background-color: rgba(230, 57, 70, 0.2);
        }

        .highlight-strong {
            font-weight: 600;
        }

        .theme-matrix {
            margin-top: 20px;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            overflow: hidden;
        }

        .theme-row {
            display: flex;
            border-bottom: 1px solid var(--gray-300);
        }

        .theme-row:last-child {
            border-bottom: none;
        }

        .theme-cell {
            padding: 12px;
            flex: 1;
            border-right: 1px solid var(--gray-300);
        }

        .theme-cell:last-child {
            border-right: none;
        }

        .theme-header {
            background-color: var(--gray-200);
            font-weight: 600;
        }

        .theme-evidence {
            font-size: 0.9rem;
            color: var(--gray-600);
            margin-top: 4px;
        }

        .highlighted-text {
            padding: 2px 0;
            border-radius: 2px;
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background-color: var(--gray-200);
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid var(--gray-200);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .search-input {
            padding: 8px 12px;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            width: 100%;
            font-family: var(--font-family);
            transition: var(--transition);
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }

        .filter-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .select-input {
            padding: 8px 12px;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            background-color: white;
            font-family: var(--font-family);
            transition: var(--transition);
            cursor: pointer;
        }

        .select-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
            outline: none;
        }

        .tab-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--gray-300);
            padding-bottom: 10px;
        }

        .tab-control {
            padding: 8px 16px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .tab-control:hover {
            background-color: var(--gray-100);
        }

        .tab-control.active {
            background-color: var(--primary);
            color: white;
        }

        /* Accessibility focus styles */
        a:focus, button:focus, input:focus, select:focus, textarea:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* Keyboard navigation indicator */
        body:not(.using-mouse) :focus {
            outline: 2px solid var(--primary) !important;
            outline-offset: 2px !important;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .synthesis-workspace {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: fixed;
                top: 60px;
                left: -240px;
                bottom: 0;
                width: 240px;
                z-index: 90;
            }

            .sidebar.active {
                left: 0;
            }

            .mobile-menu-toggle {
                display: block !important;
            }

            .main-content {
                grid-column: 1;
            }
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--primary);
        }

        /* Modal styles */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }

        .modal-backdrop.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-600);
            transition: var(--transition);
        }

        .modal-close:hover {
            color: var(--danger);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* Notification styles */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow-lg);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .notification.active {
            transform: translateY(0);
            opacity: 1;
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--success);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .notification-message {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--gray-600);
            cursor: pointer;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <button class="mobile-menu-toggle">☰</button>
            <div class="logo">
                <div class="logo-icon">QS</div>
                <span>Quant-Qual Synthesis Tool</span>
            </div>
            <div class="user-menu">
                <button class="btn btn-outline" id="helpBtn">
                    <span>Help</span>
                </button>
                <button class="btn btn-primary" id="saveBtn">
                    <span>Save Progress</span>
                </button>
            </div>
        </header>

        <div class="sidebar">
            <div class="nav-item" data-tab="upload">
                <div class="nav-item-icon">📤</div>
                <span>Data Upload</span>
            </div>
            <div class="nav-item" data-tab="quant">
                <div class="nav-item-icon">📊</div>
                <span>Quantitative Analysis</span>
            </div>
            <div class="nav-item" data-tab="qual">
                <div class="nav-item-icon">💬</div>
                <span>Qualitative Analysis</span>
            </div>
            <div class="nav-item" data-tab="synthesis">
                <div class="nav-item-icon">🔄</div>
                <span>Data Synthesis</span>
            </div>
            <div class="nav-item" data-tab="method">
                <div class="nav-item-icon">📝</div>
                <span>Methodological Approach</span>
            </div>
            <div class="nav-item" data-tab="export">
                <div class="nav-item-icon">📋</div>
                <span>Export Results</span>
            </div>
        </div>

        <div class="main-content">
            <!-- Upload Tab -->
            <div class="tab-content active" id="upload">
                <h2 class="section-title">Data Upload</h2>
                <div class="card">
                    <h3>Quantitative Survey Data (n=500)</h3>
                    <div class="upload-area" id="quant-upload">
                        <div class="upload-icon">📊</div>
                        <h4>Upload Survey Data</h4>
                        <p>Drag and drop your CSV file here or click to browse</p>
                        <button class="btn btn-primary">Select CSV File</button>
                        <input type="file" class="file-input" accept=".csv">
                    </div>
                    <div class="upload-details" style="display: none;" id="quant-details">
                        <div class="upload-success">
                            <span style="color: var(--success); font-weight: 600;">✓</span>
                            <span>social_media_survey_data.csv successfully uploaded</span>
                        </div>
                        <div class="upload-info">
                            <p><strong>500 records</strong> with <strong>24 variables</strong> detected</p>
                            <div class="progress-container">
                                <div class="progress-bar" style="width: 100%;"></div>
                            </div>
                            <p>Variables detected: Age, Gender, Daily Usage, Platform Preference, Anxiety Score, Depression Score, Self-Esteem Score, Sleep Quality, Academic Performance...</p>
                        </div>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-outline">Preview Data</button>
                            <button class="btn btn-outline">Re-upload</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Qualitative Interview Data (n=20)</h3>
                    <div class="upload-area" id="qual-upload">
                        <div class="upload-icon">💬</div>
                        <h4>Upload Interview Transcripts</h4>
                        <p>Drag and drop your text files here or click to browse</p>
                        <button class="btn btn-primary">Select Text Files</button>
                        <input type="file" class="file-input" accept=".txt,.docx" multiple>
                    </div>
                    <div class="upload-details" style="display: none;" id="qual-details">
                        <div class="upload-success">
                            <span style="color: var(--success); font-weight: 600;">✓</span>
                            <span>20 interview files successfully uploaded</span>
                        </div>
                        <div class="upload-info">
                            <p><strong>20 transcripts</strong> with approximately <strong>85,000 words</strong> detected</p>
                            <div class="progress-container">
                                <div class="progress-bar" style="width: 100%;"></div>
                            </div>
                            <p>Participant demographics: 11 female, 9 male; Ages 13-19; Average interview length: 4,250 words</p>
                        </div>
                        <div style="margin-top: 15px;">
                            <button class="btn btn-outline">Browse Transcripts</button>
                            <button class="btn btn-outline">Re-upload</button>
                        </div>
                    </div>
                </div>
                
                <div class="card" id="upload-next-steps" style="display: none;">
                    <h3>Next Steps</h3>
                    <p>Both quantitative and qualitative data have been successfully uploaded. You can now proceed to analyze each dataset separately before integrating them.</p>
                    <div style="display: flex; gap: 15px; margin-top: 20px;">
                        <button class="btn btn-primary" data-navigate="quant">Begin Quantitative Analysis</button>
                        <button class="btn btn-outline" data-navigate="qual">Begin Qualitative Analysis</button>
                    </div>
                </div>
            </div>

            <!-- Quantitative Analysis Tab -->
            <div class="tab-content" id="quant">
                <h2 class="section-title">Quantitative Analysis</h2>
                
                <div class="tab-controls">
                    <div class="tab-control active" data-subtab="overview">Overview</div>
                    <div class="tab-control" data-subtab="correlations">Correlations</div>
                    <div class="tab-control" data-subtab="data-table">Data Table</div>
                </div>
                
                <div class="subtab active" id="overview">
                    <div class="card">
                        <h3>Survey Data Overview</h3>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">Total Participants</div>
                                <div class="stat-value">500</div>
                                <div class="stat-label">Ages 13-19</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Gender Distribution</div>
                                <div class="stat-value">52% / 46%</div>
                                <div class="stat-label">Female / Male</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Avg. Daily Usage</div>
                                <div class="stat-value">4.2h</div>
                                <div class="stat-label">Social Media</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Anxiety Score</div>
                                <div class="stat-value">3.7/5</div>
                                <div class="stat-label">Average Rating</div>
                            </div>
                        </div>

                        <div class="chart-container">
                            <canvas id="usageChart"></canvas>
                            <div class="chart-controls">
                                <select class="select-input" id="chartTypeSelector">
                                    <option value="bar">Bar Chart</option>
                                    <option value="line">Line Chart</option>
                                    <option value="radar">Radar Chart</option>
                                </select>
                                <button class="btn btn-outline btn-icon" id="downloadChartBtn" title="Download Chart">
                                    <span>⬇️</span>
                                </button>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Key Findings</h4>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li>Higher social media usage (>4 hours daily) is associated with increased anxiety scores</li>
                                <li>Female participants report higher image-based platform use (Instagram, TikTok)</li>
                                <li>Older teens (17-19) show the highest average daily usage (4.9 hours)</li>
                                <li>42% of participants report social media interfering with sleep</li>
                                <li>Self-esteem scores inversely related to both usage time and anxiety</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="subtab" id="correlations">
                    <div class="card">
                        <h3>Correlation Analysis</h3>
                        <p>Correlation between key variables in the survey data:</p>

                        <div class="correlation-matrix">
                            <div class="matrix-cell matrix-header"></div>
                            <div class="matrix-cell matrix-header">Usage Time</div>
                            <div class="matrix-cell matrix-header">Anxiety</div>
                            <div class="matrix-cell matrix-header">Depression</div>
                            <div class="matrix-cell matrix-header">Self-Esteem</div>

                            <div class="matrix-cell matrix-header">Usage Time</div>
                            <div class="matrix-cell">1.00</div>
                            <div class="matrix-cell highlight-positive highlight-strong">0.68</div>
                            <div class="matrix-cell highlight-positive">0.54</div>
                            <div class="matrix-cell highlight-negative">-0.42</div>

                            <div class="matrix-cell matrix-header">Anxiety</div>
                            <div class="matrix-cell highlight-positive highlight-strong">0.68</div>
                            <div class="matrix-cell">1.00</div>
                            <div class="matrix-cell highlight-positive highlight-strong">0.72</div>
                            <div class="matrix-cell highlight-negative highlight-strong">-0.65</div>

                            <div class="matrix-cell matrix-header">Depression</div>
                            <div class="matrix-cell highlight-positive">0.54</div>
                            <div class="matrix-cell highlight-positive highlight-strong">0.72</div>
                            <div class="matrix-cell">1.00</div>
                            <div class="matrix-cell highlight-negative highlight-strong">-0.78</div>

                            <div class="matrix-cell matrix-header">Self-Esteem</div>
                            <div class="matrix-cell highlight-negative">-0.42</div>
                            <div class="matrix-cell highlight-negative highlight-strong">-0.65</div>
                            <div class="matrix-cell highlight-negative highlight-strong">-0.78</div>
                            <div class="matrix-cell">1.00</div>
                        </div>
                        
                        <div class="chart-container">
                            <canvas id="correlationChart"></canvas>
                            <div class="chart-controls">
                                <select class="select-input" id="correlationVar1">
                                    <option value="usage">Usage Time</option>
                                    <option value="anxiety">Anxiety</option>
                                    <option value="depression">Depression</option>
                                    <option value="esteem">Self-Esteem</option>
                                </select>
                                <select class="select-input" id="correlationVar2">
                                    <option value="usage">Usage Time</option>
                                    <option value="anxiety" selected>Anxiety</option>
                                    <option value="depression">Depression</option>
                                    <option value="esteem">Self-Esteem</option>
                                </select>
                                <button class="btn btn-outline btn-icon" id="downloadCorrelationBtn" title="Download Chart">
                                    <span>⬇️</span>
                                </button>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4>Statistical Significance</h4>
                            <p>All correlations shown are statistically significant (p<0.001)</p>
                            <ul style="margin-top: 10px; padding-left: 20px;">
                                <li><strong>Strong correlations</strong> (r>0.6): Anxiety-Usage, Anxiety-Depression, Self-Esteem-Depression</li>
                                <li><strong>Moderate correlations</strong> (0.4<r<0.6): Usage-Depression, Usage-Self-Esteem</li>
                                <li>Linear regression model: Usage time and platform type account for 47% of variance in anxiety scores</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="subtab" id="data-table">
                    <div class="card">
                        <h3>Survey Data Table</h3>
                        <div class="filter-group">
                            <input type="text" class="search-input" placeholder="Search records..." id="tableSearch">
                            <select class="select-input" id="genderFilter">
                                <option value="all">All Genders</option>
                                <option value="female">Female</option>
                                <option value="male">Male</option>
                                <option value="other">Other/Non-binary</option>
                            </select>
                            <select class="select-input" id="ageFilter">
                                <option value="all">All Ages</option>
                                <option value="13-14">13-14</option>
                                <option value="15-16">15-16</option>
                                <option value="17-19">17-19</option>
                            </select>
                            <button class="btn btn-outline" id="resetFilters">Reset Filters</button>
                        </div>
                        
                        <div class="data-table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Age</th>
                                        <th>Gender</th>
                                        <th>Usage (hrs/day)</th>
                                        <th>Anxiety Score</th>
                                        <th>Depression Score</th>
                                        <th>Self-Esteem Score</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>P001</td>
                                        <td>17</td>
                                        <td>F</td>
                                        <td>5.2</td>
                                        <td>4.2</td>
                                        <td>3.8</td>
                                        <td>2.4</td>
                                    </tr>
                                    <tr>
                                        <td>P002</td>
                                        <td>15</td>
                                        <td>M</td>
                                        <td>3.8</td>
                                        <td>3.5</td>
                                        <td>2.9</td>
                                        <td>3.2</td>
                                    </tr>
                                    <tr>
                                        <td>P003</td>
                                        <td>18</td>
                                        <td>F</td>
                                        <td>6.5</td>
                                        <td>4.7</td>
                                        <td>4.3</td>
                                        <td>2.1</td>
                                    </tr>
                                    <tr>
                                        <td>P004</td>
                                        <td>14</td>
                                        <td>M</td>
                                        <td>2.5</td>
                                        <td>2.8</td>
                                        <td>2.2</td>
                                        <td>3.8</td>
                                    </tr>
                                    <tr>
                                        <td>P005</td>
                                        <td>16</td>
                                        <td>F</td>
                                        <td>4.1</td>
                                        <td>3.9</td>
                                        <td>3.5</td>
                                        <td>2.7</td>
                                    </tr>
                                    <tr>
                                        <td>P006</td>
                                        <td>19</td>
                                        <td>M</td>
                                        <td>4.8</td>
                                        <td>4.0</td>
                                        <td>3.7</td>
                                        <td>2.5</td>
                                    </tr>
                                    <tr>
                                        <td>P007</td>
                                        <td>13</td>
                                        <td>F</td>
                                        <td>3.2</td>
                                        <td>3.1</td>
                                        <td>2.8</td>
                                        <td>3.4</td>
                                    </tr>
                                    <tr>
                                        <td>P008</td>
                                        <td>17</td>
                                        <td>X</td>
                                        <td>5.9</td>
                                        <td>4.5</td>
                                        <td>4.1</td>
                                        <td>2.3</td>
                                    </tr>
                                    <tr>
                                        <td>P009</td>
                                        <td>15</td>
                                        <td>M</td>
                                        <td>4.2</td>
                                        <td>3.6</td>
                                        <td>3.2</td>
                                        <td>2.9</td>
                                    </tr>
                                    <tr>
                                        <td>P010</td>
                                        <td>16</td>
                                        <td>F</td>
                                        <td>4.7</td>
                                        <td>4.1</td>
                                        <td>3.6</td>
                                        <td>2.6</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div style="text-align: center; margin-top: 10px; color: var(--gray-600);">
                            Showing 10 of 500 records
                            <div style="margin-top: 10px;">
                                <button class="btn btn-outline">Previous</button>
                                <span style="margin: 0 10px;">Page 1 of 50</span>
                                <button class="btn btn-outline">Next</button>
                            </div>
                        </div>
                        <div style="margin-top: 20px; display: flex; justify-content: flex-end;">
                            <button class="btn btn-outline" id="exportTableBtn">
                                <span>Export Table Data</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Qualitative Analysis Tab -->
            <div class="tab-content" id="qual">
                <h2 class="section-title">Qualitative Analysis</h2>
                <div class="card">
                    <h3>Interview Transcripts</h3>
                    <div class="filter-group">
                        <select class="select-input" id="transcriptSelector">
                            <option>Interview 1 - Female, 17</option>
                            <option>Interview 2 - Male, 15</option>
                            <option>Interview 3 - Female, 16</option>
                            <option>Interview 4 - Male, 18</option>
                            <option>Interview 5 - Female, 14</option>
                        </select>
                        <input type="text" class="search-input" placeholder="Search transcripts..." id="transcriptSearch">
                        <button class="btn btn-outline" id="searchTranscriptsBtn">Search</button>
                    </div>

                    <div class="qual-transcript">
                        <div class="transcript-toolbar">
                            <div>
                                <button class="btn btn-outline btn-icon" title="Previous transcript">
                                    <span>←</span>
                                </button>
                                <button class="btn btn-outline btn-icon" title="Next transcript">
                                    <span>→</span>
                                </button>
                            </div>
                            <div>
                                <button class="btn btn-outline btn-icon" title="Add code to selection" id="addCodeBtn">
                                    <span>🏷️</span>
                                </button>
                                <button class="btn btn-outline btn-icon" title="Export transcript" id="exportTranscriptBtn">
                                    <span>⬇️</span>
                                </button>
                            </div>
                        </div>
INTERVIEWER: Can you tell me about your typical social media usage?

PARTICIPANT: I'm on it pretty much all day. I wake up and check Instagram first thing, then throughout the day I'm checking notifications. I probably spend most time on TikTok and Instagram, maybe 5-6 hours total? It's just part of my routine now.

INTERVIEWER: How do you feel social media affects your mood or mental state?

PARTICIPANT: <span style="background-color: rgba(255, 235, 59, 0.4);" class="highlighted-text" data-code="ANXIETY">It definitely affects me. Sometimes I feel really good when I get likes or comments, but other times I feel terrible when I see everyone else having fun or looking perfect.</span> It's like a rollercoaster. <span style="background-color: rgba(79, 195, 247, 0.4);" class="highlighted-text" data-code="SELF-COMPARISON">One minute I'm happy, the next I'm comparing myself to these unrealistic standards.</span> 

INTERVIEWER: Have you noticed any specific effects on your anxiety levels?

PARTICIPANT: <span style="background-color: rgba(255, 235, 59, 0.4);" class="highlighted-text" data-code="FOMO">Yeah, I get really anxious about missing out on things. When I see my friends hanging out without me, it makes me feel really bad.</span> And I'm constantly checking to see if people have seen my stories or liked my posts. <span style="background-color: rgba(255, 235, 59, 0.4);" class="highlighted-text" data-code="VALIDATION-SEEKING">If I post something and it doesn't get many likes, I sometimes delete it and feel really embarrassed.</span>

INTERVIEWER: What about effects on your sleep or daily activities?

PARTICIPANT: <span style="background-color: rgba(255, 138, 101, 0.4);" class="highlighted-text" data-code="SLEEP DISRUPTION">My sleep is terrible. I'm on my phone until like 2 AM most nights, just scrolling.</span> And sometimes I realize I've spent hours just mindlessly looking at videos when I should be doing homework. <span style="background-color: rgba(255, 138, 101, 0.4);" class="highlighted-text" data-code="ACADEMIC IMPACT">I've definitely missed assignments because I got distracted.</span>

INTERVIEWER: Have you ever tried to reduce your social media use?

PARTICIPANT: I've tried a few times. <span style="background-color: rgba(129, 199, 132, 0.4);" class="highlighted-text" data-code="POSITIVE DETOX">Once I deleted Instagram for a week, and I actually felt better after a few days. I was less stressed and more present.</span> But then I got worried about missing important messages, so I reinstalled it. <span style="background-color: rgba(255, 235, 59, 0.4);" class="highlighted-text" data-code="SOCIAL NECESSITY">It's hard because everyone communicates through these apps now.</span>
                    </div>

                    <h3 style="margin-top: 30px;">Coding Tools</h3>
                    <div class="code-toolbar">
                        <div class="code-tag active">ANXIETY</div>
                        <div class="code-tag">SELF-COMPARISON</div>
                        <div class="code-tag">FOMO</div>
                        <div class="code-tag">VALIDATION-SEEKING</div>
                        <div class="code-tag">SLEEP DISRUPTION</div>
                        <div class="code-tag">ACADEMIC IMPACT</div>
                        <div class="code-tag">POSITIVE DETOX</div>
                        <div class="code-tag">SOCIAL NECESSITY</div>
                        <button class="btn btn-outline" id="addNewCodeBtn">+ Add Code</button>
                        <button class="btn btn-outline" id="manageCodesBtn">Manage Codes</button>
                    </div>

                    <h3 style="margin-top: 30px;">Theme Analysis</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Total Codes</div>
                            <div class="stat-value">42</div>
                            <div class="stat-label">Unique Themes</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Most Common</div>
                            <div class="stat-value">ANXIETY</div>
                            <div class="stat-label">78 Occurrences</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Co-occurrence</div>
                            <div class="stat-value">65%</div>
                            <div class="stat-label">Anxiety + Validation</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Saturation</div>
                            <div class="stat-value">94%</div>
                            <div class="stat-label">Achieved</div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <canvas id="themeChart"></canvas>
                        <div class="chart-controls">
                            <select class="select-input" id="themeChartType">
                                <option value="bar">Bar Chart</option>
                                <option value="pie">Pie Chart</option>
                                <option value="radar">Radar Chart</option>
                            </select>
                            <button class="btn btn-outline btn-icon" id="downloadThemeChartBtn" title="Download Chart">
                                <span>⬇️</span>
                            </button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Theme Co-occurrence Network</h4>
                        <div class="chart-container">
                            <canvas id="networkChart"></canvas>
                        </div>
                        <p style="margin-top: 10px; color: var(--gray-600);">
                            This network visualization shows how different themes co-occur within the same interview segments. Thicker lines indicate stronger co-occurrence relationships.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Synthesis Tab -->
            <div class="tab-content" id="synthesis">
                <h2 class="section-title">Data Synthesis</h2>
                <div class="card">
                    <h3>Integration Matrix</h3>
                    <p>Connect quantitative variables with qualitative themes:</p>

                    <div class="theme-matrix">
                        <div class="theme-row">
                            <div class="theme-cell theme-header">Quant Variable</div>
                            <div class="theme-cell theme-header">Qual Theme</div>
                            <div class="theme-cell theme-header">Relationship</div>
                            <div class="theme-cell theme-header">Evidence</div>
                        </div>
                        <div class="theme-row">
                            <div class="theme-cell">Anxiety Score</div>
                            <div class="theme-cell">ANXIETY, VALIDATION-SEEKING</div>
                            <div class="theme-cell">Strong convergence</div>
                            <div class="theme-cell">
                                <strong>Quant:</strong> High anxiety scores (3.7/5 avg) correlate with usage time (r=0.68)
                                <div class="theme-evidence"><strong>Qual:</strong> "It definitely affects me...I feel terrible when I see everyone else having fun or looking perfect."</div>
                            </div>
                        </div>
                        <div class="theme-row">
                            <div class="theme-cell">Usage Time</div>
                            <div class="theme-cell">SLEEP DISRUPTION</div>
                            <div class="theme-cell">Causal relationship</div>
                            <div class="theme-cell">
                                <strong>Quant:</strong> Higher usage (>4hrs) associated with sleep quality decrease (42% report poor sleep)
                                <div class="theme-evidence"><strong>Qual:</strong> "My sleep is terrible. I'm on my phone until like 2 AM most nights, just scrolling."</div>
                            </div>
                        </div>
                        <div class="theme-row">
                            <div class="theme-cell">Self-Esteem Score</div>
                            <div class="theme-cell">SELF-COMPARISON</div>
                            <div class="theme-cell">Explanatory relationship</div>
                            <div class="theme-cell">
                                <strong>Quant:</strong> Self-esteem negatively correlates with usage (r=-0.42) and anxiety (r=-0.65)
                                <div class="theme-evidence"><strong>Qual:</strong> "One minute I'm happy, the next I'm comparing myself to these unrealistic standards."</div>
                            </div>
                        </div>
                        <div class="theme-row">
                            <div class="theme-cell">Platform Preference</div>
                            <div class="theme-cell">SOCIAL NECESSITY</div>
                            <div class="theme-cell">Complementary insight</div>
                            <div class="theme-cell">
                                <strong>Quant:</strong> 86% report "social connection" as primary reason for use
                                <div class="theme-evidence"><strong>Qual:</strong> "It's hard because everyone communicates through these apps now."</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px; text-align: right;">
                        <button class="btn btn-outline" id="addMatrixRowBtn">+ Add Row</button>
                        <button class="btn btn-outline" id="exportMatrixBtn">Export Matrix</button>
                    </div>
                </div>

                <div class="card">
                    <h3>Synthesis Workspace</h3>
                    <div class="synthesis-workspace">
                        <div class="synthesis-panel">
                            <div class="panel-title">
                                <span>Quantitative Findings</span>
                                <div class="panel-actions">
                                    <div class="panel-action tooltip" id="filterQuantBtn">
                                        <span>🔍</span>
                                        <span class="tooltiptext">Filter data</span>
                                    </div>
                                    <div class="panel-action tooltip" id="copyQuantBtn">
                                        <span>📋</span>
                                        <span class="tooltiptext">Copy to writing area</span>
                                    </div>
                                </div>
                            </div>
                            <ul style="list-style-type: disc; padding-left: 20px;">
                                <li>Strong positive correlation between daily social media usage time and anxiety scores (r=0.68, p<0.001)</li>
                                <li>Participants with >5 hours daily usage showed significantly higher anxiety scores (mean diff=1.2, p<0.001)</li>
                                <li>Gender differences in usage patterns: females reported higher image-based platform use (Instagram, TikTok)</li>
                                <li>Self-esteem scores inversely related to both usage time (r=-0.42) and anxiety (r=-0.65)</li>
                                <li>42% reported social media use interfering with sleep (average bedtime delay of 1.3 hours)</li>
                                <li>Linear regression model: Usage time and platform type account for 47% of variance in anxiety scores</li>
                            </ul>
                        </div>
                        <div class="synthesis-panel">
                            <div class="panel-title">
                                <span>Qualitative Themes</span>
                                <div class="panel-actions">
                                    <div class="panel-action tooltip" id="filterQualBtn">
                                        <span>🏷️</span>
                                        <span class="tooltiptext">Filter by code</span>
                                    </div>
                                    <div class="panel-action tooltip" id="copyQualBtn">
                                        <span>📋</span>
                                        <span class="tooltiptext">Copy to writing area</span>
                                    </div>
                                </div>
                            </div>
                            <ul style="list-style-type: disc; padding-left: 20px;">
                                <li><strong>ANXIETY</strong> (78 occurrences): Participants described feelings of worry, stress, and unease related to social media interactions and content</li>
                                <li><strong>VALIDATION-SEEKING</strong> (65 occurrences): Strong desire for peer approval through likes, comments, and followers</li>
                                <li><strong>SELF-COMPARISON</strong> (61 occurrences): Frequent comparisons to peers and influencers leading to negative self-perception</li>
                                <li><strong>SLEEP DISRUPTION</strong> (54 occurrences): Reports of delayed sleep onset and reduced sleep quality due to nighttime usage</li>
                                <li><strong>FOMO</strong> (Fear Of Missing Out) (49 occurrences): Anxiety about missing social events or being excluded</li>
                                <li><strong>ACADEMIC IMPACT</strong> (43 occurrences): Descriptions of distraction and procrastination affecting schoolwork</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 20px;">Writing Area</h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <button class="btn btn-outline btn-icon" title="Bold" id="boldBtn">
                            <span style="font-weight: bold;">B</span>
                        </button>
                        <button class="btn btn-outline btn-icon" title="Italic" id="italicBtn">
                            <span style="font-style: italic;">I</span>
                        </button>
                        <button class="btn btn-outline btn-icon" title="Underline" id="underlineBtn">
                            <span style="text-decoration: underline;">U</span>
                        </button>
                        <button class="btn btn-outline" title="Insert Citation" id="citationBtn">
                            <span>Insert Citation</span>
                        </button>
                        <button class="btn btn-outline" title="Save Draft" id="saveDraftBtn">
                            <span>Save Draft</span>
                        </button>
                    </div>
                    <textarea class="writing-area" placeholder="Begin synthesizing your quantitative and qualitative findings here..." id="synthesisText">The integration of quantitative survey data (n=500) and qualitative interview data (n=20) reveals several consistent patterns regarding the psychological effects of social media use among teenagers. 

The quantitative analysis demonstrates a strong positive correlation between daily social media usage time and anxiety scores (r=0.68, p<0.001), which is substantiated by qualitative themes of ANXIETY and VALIDATION-SEEKING that emerged across multiple interviews. As one 17-year-old female participant stated, "It definitely affects me. Sometimes I feel really good when I get likes or comments, but other times I feel terrible when I see everyone else having fun or looking perfect."

This mixed-methods approach provides both breadth and depth to the understanding of these relationships. While the survey data establishes the statistical significance and magnitude of the correlation, the interview data offers explanatory mechanisms through which this relationship manifests in teenagers' lived experiences.

[Continue developing your synthesis here, integrating statistical findings with illustrative quotes and thematic analysis...]</textarea>
                </div>

                <div class="card">
                    <h3>Visualization of Integrated Findings</h3>
                    <div class="chart-container">
                        <canvas id="integratedChart"></canvas>
                        <div class="chart-controls">
                            <select class="select-input" id="integratedChartType">
                                <option value="bubble">Bubble Chart</option>
                                <option value="scatter">Scatter Plot</option>
                                <option value="matrix">Heatmap</option>
                            </select>
                            <button class="btn btn-outline btn-icon" id="downloadIntegratedBtn" title="Download Chart">
                                <span>⬇️</span>
                            </button>
                            <button class="btn btn-outline" id="customizeChartBtn">
                                <span>Customize</span>
                            </button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <h4>Interpretation Guide</h4>
                        <p>This visualization integrates quantitative metrics with qualitative theme frequency. The x-axis represents daily social media usage (hours), the y-axis shows anxiety scores (1-5 scale), and the bubble size indicates the frequency of qualitative theme occurrence.</p>
                        <p style="margin-top: 10px;">Key observations:</p>
                        <ul style="margin-top: 5px; padding-left: 20px;">
                            <li>Anxiety-related themes (yellow) show the strongest relationship with both usage time and anxiety scores</li>
                            <li>Self-comparison themes (blue) are more prevalent at moderate-to-high usage levels</li>
                            <li>Sleep disruption themes (orange) appear across all usage levels but are larger at higher usage times</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Methodological Approach Tab -->
            <div class="tab-content" id="method">
                <h2 class="section-title">Methodological Approach</h2>
                <div class="card">
                    <h3>Select a Mixed Methods Approach</h3>
                    <p>Choose the most appropriate methodological framework for your dissertation:</p>

                    <div class="method-selector">
                        <div class="method-card active" data-method="convergent">
                            <div class="method-title">Convergent Parallel Design</div>
                            <div class="method-desc">Collect and analyze quantitative and qualitative data separately, then merge the results during interpretation. Best when both datasets have equal priority and address similar concepts.</div>
                        </div>
                        <div class="method-card" data-method="explanatory">
                            <div class="method-title">Explanatory Sequential Design</div>
                            <div class="method-desc">Begin with quantitative data collection and analysis, then use results to inform qualitative phase. Qualitative data helps explain quantitative findings in depth.</div>
                        </div>
                        <div class="method-card" data-method="exploratory">
                            <div class="method-title">Exploratory Sequential Design</div>
                            <div class="method-desc">Start with qualitative exploration, then use findings to develop quantitative measures or interventions. Useful when variables are unknown or instruments need development.</div>
                        </div>
                    </div>

                    <div id="methodDetails">
                        <h3 style="margin-top: 30px;">Convergent Parallel Design Implementation</h3>
                        <div style="margin-top: 20px;">
                            <div style="display: flex; align-items: flex-start; gap: 30px; flex-wrap: wrap;">
                                <div style="flex: 1; min-width: 300px;">
                                    <h4 style="margin-bottom: 10px;">Key Characteristics:</h4>
                                    <ul style="list-style-type: disc; padding-left: 20px;">
                                        <li>Concurrent data collection of both quantitative and qualitative data</li>
                                        <li>Equal priority given to both data types</li>
                                        <li>Independent analysis of each dataset using appropriate techniques</li>
                                        <li>Integration occurs during interpretation phase</li>
                                        <li>Allows for direct comparison and triangulation of findings</li>
                                    </ul>
                                </div>
                                <div style="flex: 1; min-width: 300px;">
                                    <h4 style="margin-bottom: 10px;">Implementation Steps:</h4>
                                    <ol style="list-style-type: decimal; padding-left: 20px;">
                                        <li>Analyze survey data using descriptive and inferential statistics</li>
                                        <li>Independently analyze interview data using thematic analysis</li>
                                        <li>Identify areas of convergence and divergence between datasets</li>
                                        <li>Create joint displays (tables/matrices) showing relationships</li>
                                        <li>Develop integrated conclusions addressing research questions</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px;">Integration Techniques</h3>
                    <div class="method-selector">
                        <div class="method-card active" data-technique="joint">
                            <div class="method-title">Joint Displays</div>
                            <div class="method-desc">Create tables, matrices, or diagrams that directly compare quantitative results with qualitative themes, showing how they relate, confirm, or contradict each other.</div>
                        </div>
                        <div class="method-card" data-technique="transform">
                            <div class="method-title">Data Transformation</div>
                            <div class="method-desc">Convert qualitative themes into quantitative variables (quantitizing) or transform quantitative data into narratives (qualitizing) to facilitate comparison.</div>
                        </div>
                        <div class="method-card" data-technique="triangulation">
                            <div class="method-title">Triangulation Protocol</div>
                            <div class="method-desc">Systematically compare findings from each method to identify convergence, complementarity, or discrepancy, enhancing validity through multiple perspectives.</div>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px;">Academic Rigor Considerations</h3>
                    <div style="margin-top: 20px;">
                        <div style="display: flex; align-items: flex-start; gap: 30px; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 300px;">
                                <h4 style="margin-bottom: 10px;">Quantitative Validity:</h4>
                                <ul style="list-style-type: disc; padding-left: 20px;">
                                    <li>Statistical conclusion validity through appropriate tests</li>
                                    <li>Internal validity addressing potential confounding variables</li>
                                    <li>Construct validity through validated measurement scales</li>
                                    <li>External validity considering generalizability</li>
                                    <li>Reliability through consistent measurement</li>
                                </ul>
                            </div>
                            <div style="flex: 1; min-width: 300px;">
                                <h4 style="margin-bottom: 10px;">Qualitative Trustworthiness:</h4>
                                <ul style="list-style-type: disc; padding-left: 20px;">
                                    <li>Credibility through member checking and thick description</li>
                                    <li>Transferability through detailed contextual information</li>
                                    <li>Dependability through audit trails and reflexivity</li>
                                    <li>Confirmability through transparent analytical procedures</li>
                                    <li>Authenticity representing multiple perspectives</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px;">Methodological References</h3>
                    <div style="margin-top: 10px; line-height: 1.6;">
                        <p>Creswell, J. W., & Plano Clark, V. L. (2018). <em>Designing and conducting mixed methods research</em> (3rd ed.). SAGE Publications.</p>
                        <p>Fetters, M. D., Curry, L. A., & Creswell, J. W. (2013). Achieving integration in mixed methods designs—principles and practices. <em>Health Services Research, 48</em>(6pt2), 2134-2156.</p>
                        <p>Guetterman, T. C., Fetters, M. D., & Creswell, J. W. (2015). Integrating quantitative and qualitative results in health science mixed methods research through joint displays. <em>Annals of Family Medicine, 13</em>(6), 554-561.</p>
                        <p>Teddlie, C., & Tashakkori, A. (2009). <em>Foundations of mixed methods research: Integrating quantitative and qualitative approaches in the social and behavioral sciences</em>. SAGE Publications.</p>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: right;">
                        <button class="btn btn-outline" id="addReferencesBtn">Add References</button>
                        <button class="btn btn-primary" id="generateMethodSectionBtn">Generate Method Section</button>
                    </div>
                </div>
            </div>

            <!-- Export Tab -->
            <div class="tab-content" id="export">
                <h2 class="section-title">Export Results</h2>
                <div class="card">
                    <h3>Available Outputs</h3>
                    <div class="export-options">
                        <div class="export-option" data-export="quant">
                            <div class="export-icon">📊</div>
                            <h4>Quantitative Analysis</h4>
                            <p>Statistical tables, correlation matrices, and charts</p>
                        </div>
                        <div class="export-option" data-export="qual">
                            <div class="export-icon">📝</div>
                            <h4>Qualitative Analysis</h4>
                            <p>Coded transcripts, theme analysis, and code frequency</p>
                        </div>
                        <div class="export-option" data-export="integrated">
                            <div class="export-icon">🔄</div>
                            <h4>Integrated Findings</h4>
                            <p>Joint displays, integrated visualizations, and synthesis text</p>
                        </div>
                        <div class="export-option" data-export="method">
                            <div class="export-icon">📋</div>
                            <h4>Methodology Section</h4>
                            <p>Mixed methods approach description with references</p>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px;">Export Format</h3>
                    <div class="filter-group">
                        <button class="btn btn-outline active" data-format="docx">Word Document (.docx)</button>
                        <button class="btn btn-outline" data-format="pdf">PDF Report</button>
                        <button class="btn btn-outline" data-format="csv">Raw Data (.csv/.txt)</button>
                        <button class="btn btn-outline" data-format="spss">SPSS/NVivo Compatible</button>
                    </div>

                    <h3 style="margin-top: 30px;">Citation Style</h3>
                    <div class="filter-group">
                        <button class="btn btn-outline active" data-citation="apa">APA 7th Edition</button>
                        <button class="btn btn-outline" data-citation="chicago">Chicago</button>
                        <button class="btn btn-outline" data-citation="mla">MLA</button>
                        <button class="btn btn-outline" data-citation="harvard">Harvard</button>
                    </div>
                    
                    <h3 style="margin-top: 30px;">Customization Options</h3>
                    <div style="margin-top: 15px;">
                        <label style="display: block; margin-bottom: 5px;">Include in Export:</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Raw Data Tables
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Charts & Visualizations
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Statistical Analysis
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Coded Transcripts
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Integration Matrices
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Synthesis Text
                            </label>
                        </div>
                        
                        <label style="display: block; margin-bottom: 5px;">Document Structure:</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Include Table of Contents
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Include Executive Summary
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" checked> Include Appendices
                            </label>
                        </div>
                    </div>

                    <div style="margin-top: 30px; text-align: center;">
                        <button class="btn btn-primary" style="padding: 12px 24px; font-size: 1.1rem;" id="generateExportBtn">Generate Complete Export Package</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for adding a new code -->
    <div class="modal-backdrop" id="addCodeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Code</h3>
                <button class="modal-close" id="closeCodeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 15px;">
                    <label for="codeName" style="display: block; margin-bottom: 5px;">Code Name:</label>
                    <input type="text" id="codeName" class="search-input" placeholder="Enter code name (e.g., ANXIETY)">
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="codeDescription" style="display: block; margin-bottom: 5px;">Description:</label>
                    <textarea id="codeDescription" class="writing-area" style="min-height: 100px;" placeholder="Enter a brief description of what this code represents"></textarea>
                </div>
                <div style="margin-bottom: 15px;">
                    <label for="codeColor" style="display: block; margin-bottom: 5px;">Color:</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="color" id="codeColor" value="#ffeb3b" style="width: 50px; height: 30px;">
                        <div style="flex: 1;">
                            <select class="select-input" id="presetColors">
                                <option value="">Select a preset color</option>
                                <option value="#ffeb3b">Yellow (Anxiety/Emotional)</option>
                                <option value="#4fc3f7">Blue (Comparative/Social)</option>
                                <option value="#ff8a65">Orange (Behavioral/Habit)</option>
                                <option value="#81c784">Green (Positive/Coping)</option>
                                <option value="#ce93d8">Purple (Identity/Self)</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div>
                    <label for="codeCategory" style="display: block; margin-bottom: 5px;">Category:</label>
                    <select id="codeCategory" class="select-input">
                        <option value="emotional">Emotional Response</option>
                        <option value="behavioral">Behavioral Pattern</option>
                        <option value="social">Social Interaction</option>
                        <option value="cognitive">Cognitive Process</option>
                        <option value="coping">Coping Strategy</option>
                        <option value="other">Other</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelCodeBtn">Cancel</button>
                <button class="btn btn-primary" id="saveCodeBtn">Save Code</button>
            </div>
        </div>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification">
        <div class="notification-icon">✓</div>
        <div class="notification-content">
            <div class="notification-title">Success</div>
            <div class="notification-message">Your changes have been saved.</div>
        </div>
        <button class="notification-close" id="closeNotification">&times;</button>
    </div>

    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // Tab Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                // Remove active class from all tabs and content
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                item.classList.add('active');
                const tabId = item.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Subtab Navigation
        document.querySelectorAll('.tab-control').forEach(control => {
            control.addEventListener('click', () => {
                // Remove active class from all controls and subtabs
                document.querySelectorAll('.tab-control').forEach(c => c.classList.remove('active'));
                document.querySelectorAll('.subtab').forEach(s => s.classList.remove('active'));
                
                // Add active class to clicked control and corresponding subtab
                control.classList.add('active');
                const subtabId = control.getAttribute('data-subtab');
                document.getElementById(subtabId).classList.add('active');
            });
        });

        // Upload area functionality
        document.querySelectorAll('.upload-area').forEach(area => {
            area.addEventListener('click', () => {
                const fileInput = area.querySelector('.file-input');
                fileInput.click();
            });

            area.addEventListener('dragover', e => {
                e.preventDefault();
                area.classList.add('dragover');
            });

            area.addEventListener('dragleave', () => {
                area.classList.remove('dragover');
            });

            area.addEventListener('drop', e => {
                e.preventDefault();
                area.classList.remove('dragover');
                
                // Simulate successful upload
                simulateUpload(area);
            });

            const fileInput = area.querySelector('.file-input');
            fileInput.addEventListener('change', () => {
                // Simulate successful upload
                simulateUpload(area);
            });
        });
        
        function simulateUpload(area) {
            const loadingNotification = showNotification('Uploading...', 'Please wait while your files are being processed.', '⏳');
            
            setTimeout(() => {
                // Hide upload area and show details
                area.style.display = 'none';
                const details = area.nextElementSibling;
                details.style.display = 'block';
                
                // Hide loading notification
                loadingNotification.classList.remove('active');
                
                // Show success notification
                showNotification('Upload Complete', 'Your files have been successfully uploaded and processed.', '✓');
                
                // If both uploads are complete, show next steps
                if (document.getElementById('quant-details').style.display === 'block' && 
                    document.getElementById('qual-details').style.display === 'block') {
                    document.getElementById('upload-next-steps').style.display = 'block';
                }
            }, 1500);
        }

        // Code tag selection
        document.querySelectorAll('.code-tag').forEach(tag => {
            tag.addEventListener('click', () => {
                tag.classList.toggle('active');
            });
        });

        // Method card selection
        document.querySelectorAll('.method-card').forEach(card => {
            card.addEventListener('click', () => {
                const sectionType = card.parentElement.getAttribute('class');
                
                // Remove active class from all cards in this section
                document.querySelectorAll(`.${sectionType} .method-card`).forEach(c => {
                    c.classList.remove('active');
                });
                
                // Add active class to clicked card
                card.classList.add('active');
                
                // If it's a methodology card, update the details section
                if (card.hasAttribute('data-method')) {
                    const method = card.getAttribute('data-method');
                    updateMethodDetails(method);
                }
            });
        });
        
        function updateMethodDetails(method) {
            const detailsContainer = document.getElementById('methodDetails');
            let title, characteristics, steps;
            
            switch(method) {
                case 'convergent':
                    title = 'Convergent Parallel Design Implementation';
                    characteristics = [
                        'Concurrent data collection of both quantitative and qualitative data',
                        'Equal priority given to both data types',
                        'Independent analysis of each dataset using appropriate techniques',
                        'Integration occurs during interpretation phase',
                        'Allows for direct comparison and triangulation of findings'
                    ];
                    steps = [
                        'Analyze survey data using descriptive and inferential statistics',
                        'Independently analyze interview data using thematic analysis',
                        'Identify areas of convergence and divergence between datasets',
                        'Create joint displays (tables/matrices) showing relationships',
                        'Develop integrated conclusions addressing research questions'
                    ];
                    break;
                case 'explanatory':
                    title = 'Explanatory Sequential Design Implementation';
                    characteristics = [
                        'Sequential approach: quantitative phase followed by qualitative phase',
                        'Quantitative results inform qualitative data collection',
                        'Qualitative data explains quantitative findings in depth',
                        'Typically gives priority to quantitative data',
                        'Integration occurs primarily at the data collection stage'
                    ];
                    steps = [
                        'Conduct and analyze quantitative survey data first',
                        'Identify significant results, unexpected findings, or outliers',
                        'Design qualitative phase to explore these findings in depth',
                        'Conduct interviews with participants selected based on quant results',
                        'Interpret how qualitative findings explain quantitative results'
                    ];
                    break;
                case 'exploratory':
                    title = 'Exploratory Sequential Design Implementation';
                    characteristics = [
                        'Sequential approach: qualitative phase followed by quantitative phase',
                        'Qualitative findings inform quantitative instrument development',
                        'Useful when variables are unknown or measures need development',
                        'Typically gives priority to qualitative data',
                        'Integration occurs primarily at the instrument development stage'
                    ];
                    steps = [
                        'Conduct and analyze qualitative interview data first',
                        'Identify key themes, patterns, and potential variables',
                        'Develop quantitative instrument based on qualitative findings',
                        'Administer survey to a larger sample',
                        'Interpret how quantitative results generalize qualitative findings'
                    ];
                    break;
            }
            
            detailsContainer.innerHTML = `
                <h3 style="margin-top: 30px;">${title}</h3>
                <div style="margin-top: 20px;">
                    <div style="display: flex; align-items: flex-start; gap: 30px; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 300px;">
                            <h4 style="margin-bottom: 10px;">Key Characteristics:</h4>
                            <ul style="list-style-type: disc; padding-left: 20px;">
                                ${characteristics.map(item => `<li>${item}</li>`).join('')}
                            </ul>
                        </div>
                        <div style="flex: 1; min-width: 300px;">
                            <h4 style="margin-bottom: 10px;">Implementation Steps:</h4>
                            <ol style="list-style-type: decimal; padding-left: 20px;">
                                ${steps.map(item => `<li>${item}</li>`).join('')}
                            </ol>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Export format and citation style selection
        document.querySelectorAll('[data-format]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('[data-format]').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
        
        document.querySelectorAll('[data-citation]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('[data-citation]').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });
        
        // Export option selection with visual feedback
        document.querySelectorAll('.export-option').forEach(option => {
            option.addEventListener('click', () => {
                option.classList.toggle('selected');
                showNotification('Selection Updated', `${option.querySelector('h4').textContent} ${option.classList.contains('selected') ? 'added to' : 'removed from'} export package.`);
            });
        });
        
        // Modal functionality
        const addCodeModal = document.getElementById('addCodeModal');
        
        document.getElementById('addNewCodeBtn').addEventListener('click', () => {
            addCodeModal.classList.add('active');
        });
        
        document.getElementById('closeCodeModal').addEventListener('click', () => {
            addCodeModal.classList.remove('active');
        });
        
        document.getElementById('cancelCodeBtn').addEventListener('click', () => {
            addCodeModal.classList.remove('active');
        });
        
        document.getElementById('saveCodeBtn').addEventListener('click', () => {
            const codeName = document.getElementById('codeName').value;
            if (codeName.trim() === '') {
                showNotification('Error', 'Code name cannot be empty.', '⚠️');
                return;
            }
            
            // Add the new code to the toolbar
            const codeToolbar = document.querySelector('.code-toolbar');
            const newCodeTag = document.createElement('div');
            newCodeTag.className = 'code-tag';
            newCodeTag.textContent = codeName.toUpperCase();
            newCodeTag.addEventListener('click', () => {
                newCodeTag.classList.toggle('active');
            });
            
            // Insert before the Add Code button
            codeToolbar.insertBefore(newCodeTag, document.getElementById('addNewCodeBtn'));
            
            // Close modal and show notification
            addCodeModal.classList.remove('active');
            showNotification('Code Added', `The code "${codeName.toUpperCase()}" has been added successfully.`);
            
            // Reset form
            document.getElementById('codeName').value = '';
            document.getElementById('codeDescription').value = '';
        });
        
        // Notification functionality
        function showNotification(title, message, icon = '✓') {
            const notification = document.getElementById('notification');
            notification.querySelector('.notification-title').textContent = title;
            notification.querySelector('.notification-message').textContent = message;
            notification.querySelector('.notification-icon').textContent = icon;
            
            notification.classList.add('active');
            
            setTimeout(() => {
                notification.classList.remove('active');
            }, 3000);
            
            return notification;
        }
        
        document.getElementById('closeNotification').addEventListener('click', () => {
            document.getElementById('notification').classList.remove('active');
        });
        
        // Save button functionality
        document.getElementById('saveBtn').addEventListener('click', () => {
            showNotification('Progress Saved', 'Your work has been saved successfully.');
        });
        
        // Help button functionality
        document.getElementById('helpBtn').addEventListener('click', () => {
            showNotification('Help', 'The help documentation will open in a new window.', '?');
        });
        
        // Navigation from upload to analysis
        document.querySelectorAll('[data-navigate]').forEach(btn => {
            btn.addEventListener('click', () => {
                const targetTab = btn.getAttribute('data-navigate');
                
                // Simulate clicking on the appropriate nav item
                document.querySelector(`.nav-item[data-tab="${targetTab}"]`).click();
            });
        });

        // Chart.js implementation for usage chart
        const usageCtx = document.getElementById('usageChart');
        if (usageCtx) {
            const usageChart = new Chart(usageCtx, {
                type: 'bar',
                data: {
                    labels: ['13-14', '15-16', '17-19'],
                    datasets: [
                        {
                            label: 'Average Daily Usage (hours)',
                            data: [3.2, 4.5, 4.9],
                            backgroundColor: 'rgba(74, 111, 165, 0.7)',
                            borderColor: 'rgba(74, 111, 165, 1)',
                            borderWidth: 1
                        },
                        {
                            label: 'Average Anxiety Score (1-5)',
                            data: [3.1, 3.8, 4.2],
                            backgroundColor: 'rgba(231, 111, 81, 0.7)',
                            borderColor: 'rgba(231, 111, 81, 1)',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Social Media Usage and Anxiety by Age Group',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Value'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Age Group'
                            }
                        }
                    }
                }
            });
            
            // Chart type selector functionality
            document.getElementById('chartTypeSelector').addEventListener('change', (e) => {
                usageChart.config.type = e.target.value;
                usageChart.update();
            });
            
            // Download chart button
            document.getElementById('downloadChartBtn').addEventListener('click', () => {
                // In a real implementation, this would save the chart as an image
                showNotification('Chart Downloaded', 'The chart has been downloaded as an image.');
            });
        }
        
        // Chart.js implementation for correlation chart
        const correlationCtx = document.getElementById('correlationChart');
        if (correlationCtx) {
            const correlationData = {
                usage: {
                    anxiety: [
                        {x: 2.1, y: 2.5}, {x: 2.5, y: 2.8}, {x: 3.2, y: 3.1}, 
                        {x: 3.8, y: 3.5}, {x: 4.2, y: 3.9}, {x: 4.7, y: 4.0}, 
                        {x: 5.2, y: 4.3}, {x: 5.8, y: 4.5}, {x: 6.5, y: 4.8}
                    ],
                    depression: [
                        {x: 2.1, y: 2.0}, {x: 2.5, y: 2.2}, {x: 3.2, y: 2.8}, 
                        {x: 3.8, y: 3.1}, {x: 4.2, y: 3.3}, {x: 4.7, y: 3.6}, 
                        {x: 5.2, y: 3.8}, {x: 5.8, y: 4.0}, {x: 6.5, y: 4.3}
                    ],
                    esteem: [
                        {x: 2.1, y: 3.9}, {x: 2.5, y: 3.7}, {x: 3.2, y: 3.5}, 
                        {x: 3.8, y: 3.2}, {x: 4.2, y: 2.9}, {x: 4.7, y: 2.7}, 
                        {x: 5.2, y: 2.5}, {x: 5.8, y: 2.3}, {x: 6.5, y: 2.0}
                    ]
                },
                anxiety: {
                    depression: [
                        {x: 2.5, y: 2.1}, {x: 2.8, y: 2.4}, {x: 3.1, y: 2.8}, 
                        {x: 3.5, y: 3.2}, {x: 3.9, y: 3.5}, {x: 4.2, y: 3.8}, 
                        {x: 4.5, y: 4.0}, {x: 4.8, y: 4.3}
                    ],
                    esteem: [
                        {x: 2.5, y: 3.8}, {x: 2.8, y: 3.6}, {x: 3.1, y: 3.3}, 
                        {x: 3.5, y: 3.0}, {x: 3.9, y: 2.7}, {x: 4.2, y: 2.4}, 
                        {x: 4.5, y: 2.2}, {x: 4.8, y: 1.9}
                    ]
                },
                depression: {
                    esteem: [
                        {x: 2.0, y: 3.9}, {x: 2.4, y: 3.7}, {x: 2.8, y: 3.4}, 
                        {x: 3.2, y: 3.0}, {x: 3.5, y: 2.7}, {x: 3.8, y: 2.4}, 
                        {x: 4.1, y: 2.1}, {x: 4.5, y: 1.8}
                    ]
                }
            };
            
            const variableLabels = {
                usage: 'Usage Time (hours/day)',
                anxiety: 'Anxiety Score (1-5)',
                depression: 'Depression Score (1-5)',
                esteem: 'Self-Esteem Score (1-5)'
            };
            
            const correlationChart = new Chart(correlationCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Correlation',
                        data: correlationData.usage.anxiety,
                        backgroundColor: 'rgba(74, 111, 165, 0.7)',
                        borderColor: 'rgba(74, 111, 165, 1)',
                        borderWidth: 1,
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Correlation: Usage Time vs Anxiety Score',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            title: {
                                display: true,
                                text: 'Anxiety Score (1-5)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Usage Time (hours/day)'
                            }
                        }
                    }
                }
            });
            
            // Update correlation chart when variables change
            function updateCorrelationChart() {
                const var1 = document.getElementById('correlationVar1').value;
                const var2 = document.getElementById('correlationVar2').value;
                
                // Prevent selecting the same variable
                if (var1 === var2) {
                    showNotification('Error', 'Please select two different variables.', '⚠️');
                    return;
                }
                
                // Get the correct dataset
                let data;
                if (correlationData[var1] && correlationData[var1][var2]) {
                    data = correlationData[var1][var2];
                } else if (correlationData[var2] && correlationData[var2][var1]) {
                    // Swap x and y for reverse relationships
                    data = correlationData[var2][var1].map(point => ({ x: point.y, y: point.x }));
                } else {
                    showNotification('Error', 'Data not available for this combination.', '⚠️');
                    return;
                }
                
                correlationChart.data.datasets[0].data = data;
                correlationChart.options.plugins.title.text = `Correlation: ${variableLabels[var1]} vs ${variableLabels[var2]}`;
                correlationChart.options.scales.x.title.text = variableLabels[var1];
                correlationChart.options.scales.y.title.text = variableLabels[var2];
                correlationChart.update();
            }
            
            document.getElementById('correlationVar1').addEventListener('change', updateCorrelationChart);
            document.getElementById('correlationVar2').addEventListener('change', updateCorrelationChart);
            
            // Download correlation chart button
            document.getElementById('downloadCorrelationBtn').addEventListener('click', () => {
                showNotification('Chart Downloaded', 'The correlation chart has been downloaded as an image.');
            });
        }

        // Chart.js implementation for theme chart
        const themeCtx = document.getElementById('themeChart');
        if (themeCtx) {
            const themeData = {
                labels: ['ANXIETY', 'VALIDATION-SEEKING', 'SELF-COMPARISON', 'SLEEP DISRUPTION', 'FOMO', 'ACADEMIC IMPACT'],
                datasets: [{
                    label: 'Theme Frequency',
                    data: [78, 65, 61, 54, 49, 43],
                    backgroundColor: [
                        'rgba(255, 235, 59, 0.7)',
                        'rgba(255, 235, 59, 0.7)',
                        'rgba(79, 195, 247, 0.7)',
                        'rgba(255, 138, 101, 0.7)',
                        'rgba(255, 235, 59, 0.7)',
                        'rgba(255, 138, 101, 0.7)'
                    ],
                    borderColor: [
                        'rgba(255, 235, 59, 1)',
                        'rgba(255, 235, 59, 1)',
                        'rgba(79, 195, 247, 1)',
                        'rgba(255, 138, 101, 1)',
                        'rgba(255, 235, 59, 1)',
                        'rgba(255, 138, 101, 1)'
                    ],
                    borderWidth: 1
                }]
            };
            
            const themeChart = new Chart(themeCtx, {
                type: 'bar',
                data: themeData,
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Qualitative Theme Frequency',
                            font: {
                                size: 16
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Frequency (occurrences)'
                            }
                        }
                    }
                }
            });
            
            // Theme chart type selector
            document.getElementById('themeChartType').addEventListener('change', (e) => {
                const chartType = e.target.value;
                themeChart.config.type = chartType;
                
                // Adjust axis based on chart type
                if (chartType === 'bar') {
                    themeChart.options.indexAxis = 'y';
                    themeChart.options.scales.x.title.text = 'Frequency (occurrences)';
                    themeChart.options.scales.y.title = { display: false };
                } else if (chartType === 'pie' || chartType === 'doughnut') {
                    // For pie charts, remove scales
                    themeChart.options.scales.x.display = false;
                    themeChart.options.scales.y.display = false;
                } else {
                    themeChart.options.indexAxis = 'x';
                    themeChart.options.scales.x.display = true;
                    themeChart.options.scales.y.display = true;
                    themeChart.options.scales.y.title = { 
                        display: true,
                        text: 'Frequency (occurrences)'
                    };
                    themeChart.options.scales.x.title = { display: false };
                }
                
                themeChart.update();
            });
            
            // Download theme chart button
            document.getElementById('downloadThemeChartBtn').addEventListener('click', () => {
                showNotification('Chart Downloaded', 'The theme frequency chart has been downloaded as an image.');
            });
        }
        
        // Chart.js implementation for network chart
        const networkCtx = document.getElementById('networkChart');
        if (networkCtx) {
            // This is a simplified network visualization using a bubble chart
            // A real implementation would use a proper network visualization library
            const networkChart = new Chart(networkCtx, {
                type: 'bubble',
                data: {
                    datasets: [
                        {
                            label: 'Anxiety Cluster',
                            data: [
                                { x: 2, y: 2, r: 25 }, // ANXIETY
                                { x: 2.5, y: 2.5, r: 20 }, // VALIDATION-SEEKING
                                { x: 3, y: 1.5, r: 18 }  // FOMO
                            ],
                            backgroundColor: 'rgba(255, 235, 59, 0.5)',
                            borderColor: 'rgba(255, 235, 59, 1)'
                        },
                        {
                            label: 'Behavioral Cluster',
                            data: [
                                { x: 5, y: 2, r: 17 }, // SLEEP DISRUPTION
                                { x: 6, y: 2.5, r: 15 }  // ACADEMIC IMPACT
                            ],
                            backgroundColor: 'rgba(255, 138, 101, 0.5)',
                            borderColor: 'rgba(255, 138, 101, 1)'
                        },
                        {
                            label: 'Comparative Cluster',
                            data: [
                                { x: 4, y: 4, r: 19 }  // SELF-COMPARISON
                            ],
                            backgroundColor: 'rgba(79, 195, 247, 0.5)',
                            borderColor: 'rgba(79, 195, 247, 1)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Theme Relationship Network',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const themes = [
                                        'ANXIETY', 'VALIDATION-SEEKING', 'FOMO',
                                        'SLEEP DISRUPTION', 'ACADEMIC IMPACT',
                                        'SELF-COMPARISON'
                                    ];
                                    const datasetIndex = context.datasetIndex;
                                    const index = context.dataIndex;
                                    let themeIndex = 0;
                                    
                                    if (datasetIndex === 0) themeIndex = index;
                                    else if (datasetIndex === 1) themeIndex = index + 3;
                                    else themeIndex = 5;
                                    
                                    return `${themes[themeIndex]}: ${context.raw.r} connections`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: false
                        },
                        y: {
                            display: false
                        }
                    }
                }
            });
        }

        // Chart.js implementation for integrated chart
        const integratedCtx = document.getElementById('integratedChart');
        if (integratedCtx) {
            const integratedChart = new Chart(integratedCtx, {
                type: 'bubble',
                data: {
                    datasets: [
                        {
                            label: 'ANXIETY',
                            data: [
                                {x: 3.2, y: 3.1, r: 15},
                                {x: 4.5, y: 3.8, r: 20},
                                {x: 5.8, y: 4.4, r: 25}
                            ],
                            backgroundColor: 'rgba(255, 235, 59, 0.5)',
                            borderColor: 'rgba(255, 235, 59, 1)'
                        },
                        {
                            label: 'SELF-COMPARISON',
                            data: [
                                {x: 3.0, y: 3.2, r: 12},
                                {x: 4.2, y: 3.9, r: 18},
                                {x: 5.5, y: 4.2, r: 22}
                            ],
                            backgroundColor: 'rgba(79, 195, 247, 0.5)',
                            borderColor: 'rgba(79, 195, 247, 1)'
                        },
                        {
                            label: 'SLEEP DISRUPTION',
                            data: [
                                {x: 3.5, y: 2.8, r: 10},
                                {x: 4.8, y: 3.5, r: 15},
                                {x: 6.0, y: 4.0, r: 20}
                            ],
                            backgroundColor: 'rgba(255, 138, 101, 0.5)',
                            borderColor: 'rgba(255, 138, 101, 1)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Integrated View: Usage Time, Anxiety Score, and Qualitative Themes',
                            font: {
                                size: 16
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw.r} occurrences`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Daily Usage Time (hours)'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Anxiety Score (1-5)'
                            }
                        }
                    }
                }
            });
            
            // Integrated chart type selector
            document.getElementById('integratedChartType').addEventListener('change', (e) => {
                const chartType = e.target.value;
                
                if (chartType === 'bubble') {
                    integratedChart.config.type = 'bubble';
                } else if (chartType === 'scatter') {
                    integratedChart.config.type = 'scatter';
                    // Adjust point sizes for scatter plot
                    integratedChart.data.datasets.forEach(dataset => {
                        dataset.pointRadius = 8;
                        dataset.pointHoverRadius = 10;
                    });
                } else if (chartType === 'matrix') {
                    // This would ideally be a heatmap, but we're simulating it with a bubble chart
                    integratedChart.config.type = 'bubble';
                    integratedChart.options.scales.x.type = 'category';
                    integratedChart.options.scales.y.type = 'category';
                }
                
                integratedChart.update();
            });
            
            // Download integrated chart button
            document.getElementById('downloadIntegratedBtn').addEventListener('click', () => {
                showNotification('Chart Downloaded', 'The integrated visualization has been downloaded as an image.');
            });
            
            // Customize chart button
            document.getElementById('customizeChartBtn').addEventListener('click', () => {
                showNotification('Customize Chart', 'Chart customization options would appear in a modal dialog.', '🎨');
            });
        }
        
        // Generate export button
        document.getElementById('generateExportBtn').addEventListener('click', () => {
            const loadingNotification = showNotification('Generating Export', 'Please wait while your export package is being prepared...', '⏳');
            
            setTimeout(() => {
                loadingNotification.classList.remove('active');
                showNotification('Export Ready', 'Your export package has been generated and is ready to download.', '✓');
            }, 2000);
        });
        
        // Generate method section button
        document.getElementById('generateMethodSectionBtn').addEventListener('click', () => {
            const loadingNotification = showNotification('Generating', 'Creating your methodology section...', '⏳');
            
            setTimeout(() => {
                loadingNotification.classList.remove('active');
                showNotification('Method Section Ready', 'Your methodology section has been generated and added to the synthesis workspace.', '✓');
            }, 1500);
        });
        
        // Text editing buttons
        document.getElementById('boldBtn').addEventListener('click', () => {
            const textarea = document.getElementById('synthesisText');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            if (selectedText) {
                const replacement = `**${selectedText}**`;
                textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
                textarea.setSelectionRange(start, start + replacement.length);
                textarea.focus();
            }
        });
        
        document.getElementById('italicBtn').addEventListener('click', () => {
            const textarea = document.getElementById('synthesisText');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            if (selectedText) {
                const replacement = `*${selectedText}*`;
                textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
                textarea.setSelectionRange(start, start + replacement.length);
                textarea.focus();
            }
        });
        
        document.getElementById('underlineBtn').addEventListener('click', () => {
            const textarea = document.getElementById('synthesisText');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const selectedText = textarea.value.substring(start, end);
            
            if (selectedText) {
                const replacement = `_${selectedText}_`;
                textarea.value = textarea.value.substring(0, start) + replacement + textarea.value.substring(end);
                textarea.setSelectionRange(start, start + replacement.length);
                textarea.focus();
            }
        });
        
        document.getElementById('citationBtn').addEventListener('click', () => {
            const textarea = document.getElementById('synthesisText');
            const cursorPos = textarea.selectionStart;
            
            const citation = ' (Author et al., 2023) ';
            textarea.value = textarea.value.substring(0, cursorPos) + citation + textarea.value.substring(cursorPos);
            textarea.setSelectionRange(cursorPos + citation.length, cursorPos + citation.length);
            textarea.focus();
            
            showNotification('Citation Added', 'A placeholder citation has been added. Edit it with the correct details.');
        });
        
        document.getElementById('saveDraftBtn').addEventListener('click', () => {
            showNotification('Draft Saved', 'Your synthesis draft has been saved successfully.');
        });
        
        // Copy buttons for synthesis panels
        document.getElementById('copyQuantBtn').addEventListener('click', () => {
            const quantContent = document.querySelector('.synthesis-panel:first-child ul').innerText;
            const textarea = document.getElementById('synthesisText');
            
            textarea.value += '\n\nQuantitative Findings:\n' + quantContent;
            textarea.scrollTop = textarea.scrollHeight;
            
            showNotification('Content Copied', 'Quantitative findings have been added to the writing area.');
        });
        
        document.getElementById('copyQualBtn').addEventListener('click', () => {
            const qualContent = document.querySelector('.synthesis-panel:nth-child(2) ul').innerText;
            const textarea = document.getElementById('synthesisText');
            
            textarea.value += '\n\nQualitative Findings:\n' + qualContent;
            textarea.scrollTop = textarea.scrollHeight;
            
            showNotification('Content Copied', 'Qualitative themes have been added to the writing area.');
        });
        
        // Add matrix row button
        document.getElementById('addMatrixRowBtn').addEventListener('click', () => {
            const matrix = document.querySelector('.theme-matrix');
            const newRow = document.createElement('div');
            newRow.className = 'theme-row';
            newRow.innerHTML = `
                <div class="theme-cell" contenteditable="true">Click to edit</div>
                <div class="theme-cell" contenteditable="true">Click to edit</div>
                <div class="theme-cell" contenteditable="true">Click to edit</div>
                <div class="theme-cell" contenteditable="true">Click to edit</div>
            `;
            matrix.appendChild(newRow);
            
            showNotification('Row Added', 'A new row has been added to the integration matrix.');
        });
        
        // Add code to selection button
        document.getElementById('addCodeBtn').addEventListener('click', () => {
            const selection = window.getSelection();
            
            if (selection.toString().trim() === '') {
                showNotification('No Text Selected', 'Please select text in the transcript to add a code.', '⚠️');
                return;
            }
            
            // Open add code modal
            document.getElementById('addCodeModal').classList.add('active');
        });
        
        // Table search functionality
        document.getElementById('tableSearch').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const tableRows = document.querySelectorAll('.data-table tbody tr');
            
            tableRows.forEach(row => {
                const text = row.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
        
        // Reset filters button
        document.getElementById('resetFilters').addEventListener('click', () => {
            document.getElementById('tableSearch').value = '';
            document.getElementById('genderFilter').value = 'all';
            document.getElementById('ageFilter').value = 'all';
            
            // Show all rows
            document.querySelectorAll('.data-table tbody tr').forEach(row => {
                row.style.display = '';
            });
            
            showNotification('Filters Reset', 'All table filters have been reset.');
        });
        
        // Mobile menu toggle
        document.querySelector('.mobile-menu-toggle').addEventListener('click', () => {
            document.querySelector('.sidebar').classList.toggle('active');
        });
        
        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                document.body.classList.remove('using-mouse');
            }
        });
        
        document.addEventListener('mousedown', () => {
            document.body.classList.add('using-mouse');
        });
        
        // Preset colors for code creation
        document.getElementById('presetColors').addEventListener('change', (e) => {
            if (e.target.value) {
                document.getElementById('codeColor').value = e.target.value;
            }
        });
        
        // Initialize the application
        function init() {
            // Set the first tab as active
            document.querySelector('.nav-item[data-tab="upload"]').classList.add('active');
            document.getElementById('upload').classList.add('active');
            
            // Check for previously uploaded data
            const hasUploadedData = localStorage.getItem('hasUploadedData');
            if (hasUploadedData) {
                document.getElementById('quant-upload').style.display = 'none';
                document.getElementById('quant-details').style.display = 'block';
                document.getElementById('qual-upload').style.display = 'none';
                document.getElementById('qual-details').style.display = 'block';
                document.getElementById('upload-next-steps').style.display = 'block';
            }
        }
        
        // Call init function
        init();
    </script>
</body>
</html>