<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Travel Phrases</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-color: #f8f9fa;
            --surface-color: #ffffff;
            --text-color: #212529;
            --text-light-color: #6c757d;
            --border-color: #dee2e6;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --spacing-unit: 8px;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            display: grid;
            grid-template-rows: auto 1fr auto;
            min-height: 100vh;
        }

        header {
            background-color: var(--surface-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
            position: sticky;
            top: 0;
        }

        header h1 {
            margin: 0;
            font-size: 1.8em;
            color: var(--primary-color);
        }

        main {
            display: grid;
            grid-template-columns: 250px 1fr; /* Desktop sidebar */
            gap: calc(var(--spacing-unit) * 3);
            padding: calc(var(--spacing-unit) * 3);
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        nav {
            background-color: var(--surface-color);
            border-radius: 8px;
            padding: calc(var(--spacing-unit) * 2);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: calc(56px + var(--spacing-unit) * 3); /* Adjust top position based on header height */
            align-self: start; /* Stick to the top of the grid cell */
            max-height: calc(100vh - 56px - var(--spacing-unit) * 6); /* Limit height */
            overflow-y: auto; /* Add scroll if categories exceed height */
        }

        nav h2 {
            margin-top: 0;
            margin-bottom: var(--spacing-unit) * 2;
            font-size: 1.2em;
            color: var(--text-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-unit);
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        nav li {
            margin-bottom: var(--spacing-unit);
        }

        nav button {
            display: block;
            width: 100%;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5);
            border: none;
            background-color: transparent;
            text-align: left;
            cursor: pointer;
            font-size: 1em;
            color: var(--text-color);
            border-radius: 4px;
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        nav button:hover {
            background-color: var(--background-color);
        }

        nav button.active {
            background-color: var(--primary-color);
            color: var(--surface-color);
            font-weight: bold;
        }

        .content {
            display: flex;
            flex-direction: column;
            gap: calc(var(--spacing-unit) * 3);
        }

        .search-bar {
            background-color: var(--surface-color);
            border-radius: 8px;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: var(--spacing-unit);
        }

        .search-bar input[type="text"] {
            flex-grow: 1;
            padding: var(--spacing-unit);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1em;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .search-bar input[type="text"]:focus {
            border-color: var(--primary-color);
        }

        .search-bar .material-symbols-rounded {
            color: var(--secondary-color);
        }

        .phrase-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Responsive grid */
            gap: calc(var(--spacing-unit) * 2);
        }

        .phrase-card {
            background-color: var(--surface-color);
            border-radius: 8px;
            padding: calc(var(--spacing-unit) * 2);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-unit);
            border: 1px solid var(--border-color);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .phrase-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        .phrase-card h3 {
            margin: 0;
            font-size: 1.5em;
            color: var(--primary-color);
            word-break: break-word;
        }

        .phrase-card .romaji {
            font-size: 1em;
            color: var(--text-light-color);
            font-style: italic;
            word-break: break-word;
        }

        .phrase-card .english {
            font-size: 1em;
            color: var(--text-color);
            margin-top: var(--spacing-unit);
            padding-top: var(--spacing-unit);
            border-top: 1px dashed var(--border-color);
            word-break: break-word;
        }

        .phrase-card .english.hidden {
            display: none;
        }

        .phrase-actions {
            display: flex;
            gap: var(--spacing-unit);
            margin-top: var(--spacing-unit);
        }

        .phrase-actions button {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: var(--spacing-unit);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--spacing-unit) / 2;
            font-size: 0.9em;
            color: var(--text-color);
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }

        .phrase-actions button:hover {
            background-color: var(--border-color);
        }

        .phrase-actions button .material-symbols-rounded {
            font-size: 1.2em;
        }

        footer {
            background-color: var(--text-color);
            color: var(--surface-color);
            text-align: center;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 3);
            margin-top: calc(var(--spacing-unit) * 3);
        }

        /* Accessibility */
        [aria-hidden="true"] {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            main {
                grid-template-columns: 1fr; /* Stack on small screens */
                padding: var(--spacing-unit) * 2;
                gap: var(--spacing-unit) * 2;
            }

            nav {
                position: static; /* Remove sticky on small screens */
                max-height: none; /* Remove height limit */
                overflow-y: visible; /* Remove scroll */
                margin-bottom: var(--spacing-unit) * 2;
            }

            .phrase-list {
                grid-template-columns: 1fr; /* Single column on small screens */
            }

            header {
                 padding: var(--spacing-unit) * 2;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>üáØüáµ Japanese Travel Phrases</h1>
        <!-- Optional: Settings/Help icon -->
        <!-- <button aria-label="Settings"><span class="material-symbols-rounded">settings</span></button> -->
    </header>

    <main>
        <nav aria-label="Phrase Categories">
            <h2>Categories</h2>
            <ul id="category-list">
                <!-- Categories will be populated here by JS -->
            </ul>
        </nav>

        <section class="content">
            <div class="search-bar">
                <span class="material-symbols-rounded" aria-hidden="true">search</span>
                <label for="phrase-search" class="visually-hidden">Search phrases</label>
                <input type="text" id="phrase-search" placeholder="Search phrases...">
            </div>

            <div id="phrase-list" class="phrase-list">
                <!-- Phrase cards will be populated here by JS -->
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Learn Japanese</p>
    </footer>

    <script>
        // Simple polyfill for visually-hidden class
        const style = document.createElement('style');
        style.innerHTML = '.visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }';
        document.head.appendChild(style);

        const phrases = [
            {
                category: 'Greetings',
                japanese: '„Åì„Çì„Å´„Å°„ÅØ',
                romaji: 'Konnichiwa',
                english: 'Hello / Good afternoon'
            },
            {
                category: 'Greetings',
                japanese: '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô',
                romaji: 'Ohayou gozaimasu',
                english: 'Good morning'
            },
            {
                category: 'Greetings',
                japanese: '„Åì„Çì„Å∞„Çì„ÅØ',
                romaji: 'Konbanwa',
                english: 'Good evening'
            },
            {
                category: 'Greetings',
                japanese: '„Åï„Çà„ÅÜ„Å™„Çâ',
                romaji: 'Sayounara',
                english: 'Goodbye'
            },
            {
                category: 'Greetings',
                japanese: '„Åä„ÇÑ„Åô„Åø„Å™„Åï„ÅÑ',
                romaji: 'Oyasuminasai',
                english: 'Good night (formal)'
            },
            {
                category: 'Basic Courtesy',
                japanese: '„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô',
                romaji: 'Arigatou gozaimasu',
                english: 'Thank you (formal)'
            },
            {
                category: 'Basic Courtesy',
                japanese: '„Åô„Åø„Åæ„Åõ„Çì',
                romaji: 'Sumimasen',
                english: 'Excuse me / Sorry'
            },
            {
                category: 'Basic Courtesy',
                japanese: '„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ',
                romaji: 'Gomen nasai',
                english: 'I am sorry'
            },
            {
                category: 'Basic Courtesy',
                japanese: '„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô',
                romaji: 'Onegai shimasu',
                english: 'Please (when asking for something)'
            },
            {
                category: 'Basic Courtesy',
                japanese: '„Å©„ÅÜ„ÅÑ„Åü„Åó„Åæ„Åó„Å¶',
                romaji: 'Dou itashimashite',
                english: 'You\'re welcome'
            },
            {
                category: 'Getting Around',
                japanese: '„Åà„Åç„ÅÆ„Å°„Åã„Åè„Åß„Åô„ÅãÔºü',
                romaji: 'Eki no chikaku desu ka?',
                english: 'Is it near the station?'
            },
            {
                category: 'Getting Around',
                japanese: '„Éà„Ç§„É¨„ÅØ„Å©„Åì„Åß„Åô„ÅãÔºü',
                romaji: 'Toire wa doko desu ka?',
                english: 'Where is the restroom?'
            },
            {
                category: 'Getting Around',
                japanese: '„Åì„Çå„ÅØ„ÅÑ„Åè„Çâ„Åß„Åô„ÅãÔºü',
                romaji: 'Kore wa ikura desu ka?',
                english: 'How much is this?'
            },
            {
                category: 'Getting Around',
                japanese: 'Êó•Êú¨Ë™û„ÅåÂàÜ„Åã„Çä„Åæ„Åõ„Çì',
                romaji: 'Nihongo ga wakarimasen',
                english: 'I don\'t understand Japanese'
            },
            {
                category: 'Getting Around',
                japanese: 'Ëã±Ë™û„ÇíË©±„Åõ„Åæ„Åô„ÅãÔºü',
                romaji: 'Eigo o hanasemasu ka?',
                english: 'Do you speak English?'
            },
            {
                category: 'Getting Around',
                japanese: 'Âä©„Åë„Å¶„Åè„Å†„Åï„ÅÑ',
                romaji: 'Tasukete kudasai',
                english: 'Please help me'
            },
             {
                category: 'Eating Out',
                japanese: '„É°„Éã„É•„Éº„Çí„Åè„Å†„Åï„ÅÑ',
                romaji: 'Menyuu o kudasai',
                english: 'Menu, please'
            },
            {
                category: 'Eating Out',
                japanese: '„Åä‰ºöË®à„Çí„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô',
                romaji: 'Okaikei o onegai shimasu',
                english: 'Check, please'
            },
            {
                category: 'Eating Out',
                japanese: '„Åä„ÅÑ„Åó„ÅÑ„Åß„Åô',
                romaji: 'Oishii desu',
                english: 'It is delicious'
            },
            {
                category: 'Eating Out',
                japanese: '„Åî„Å°„Åù„ÅÜ„Åï„Åæ„Åß„Åó„Åü',
                romaji: 'Gochisousama deshita',
                english: 'Thank you for the meal (after eating)'
            },
             {
                category: 'Shopping',
                japanese: '„Åì„Çå„Çí„Åè„Å†„Åï„ÅÑ',
                romaji: 'Kore o kudasai',
                english: 'I\'ll take this'
            },
            {
                category: 'Shopping',
                japanese: '„ÇØ„É¨„Ç∏„ÉÉ„Éà„Ç´„Éº„Éâ„ÅØ‰Ωø„Åà„Åæ„Åô„ÅãÔºü',
                romaji: 'Kurejitto kaado wa tsukaemasu ka?',
                english: 'Can I use a credit card?'
            },
            {
                category: 'Shopping',
                japanese: '„Åµ„Åè„Çç„ÅØ„ÅÑ„Çä„Åæ„Åô„ÅãÔºü',
                romaji: 'Fukuro wa irimasu ka?',
                english: 'Do you need a bag?'
            }
        ];

        const phraseListContainer = document.getElementById('phrase-list');
        const categoryListContainer = document.getElementById('category-list');
        const searchInput = document.getElementById('phrase-search');

        let currentCategory = 'All';

        // --- Render Functions ---

        function renderPhraseCard(phrase) {
            const card = document.createElement('article');
            card.classList.add('phrase-card');
            card.setAttribute('aria-label', `Japanese phrase: ${phrase.japanese}`);

            card.innerHTML = `
                <h3>${phrase.japanese}</h3>
                <p class="romaji">${phrase.romaji}</p>
                <p class="english">${phrase.english}</p>
                <div class="phrase-actions">
                    <button class="pronounce-btn" aria-label="Listen to pronunciation" data-text="${phrase.japanese}">
                        <span class="material-symbols-rounded">volume_up</span> Pronounce
                    </button>
                    <button class="toggle-english-btn" aria-label="Toggle English translation">
                         <span class="material-symbols-rounded">visibility</span> Toggle English
                    </button>
                </div>
            `;

            // Add event listeners to the buttons
            card.querySelector('.pronounce-btn').addEventListener('click', handlePronounce);
            card.querySelector('.toggle-english-btn').addEventListener('click', handleToggleEnglish);

            return card;
        }

        function renderPhraseList(phrasesToRender) {
            phraseListContainer.innerHTML = ''; // Clear current list
            if (phrasesToRender.length === 0) {
                phraseListContainer.innerHTML = '<p>No phrases found matching your criteria.</p>';
                return;
            }
            phrasesToRender.forEach(phrase => {
                phraseListContainer.appendChild(renderPhraseCard(phrase));
            });
        }

        function renderCategories() {
            const categories = ['All', ...new Set(phrases.map(p => p.category))].sort();
            categoryListContainer.innerHTML = ''; // Clear current categories

            categories.forEach(category => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                button.textContent = category;
                button.setAttribute('data-category', category);
                button.setAttribute('role', 'tab');
                button.setAttribute('aria-controls', 'phrase-list');

                if (category === currentCategory) {
                    button.classList.add('active');
                    button.setAttribute('aria-selected', 'true');
                } else {
                     button.setAttribute('aria-selected', 'false');
                }

                button.addEventListener('click', handleCategoryClick);
                li.appendChild(button);
                categoryListContainer.appendChild(li);
            });
        }

        // --- Event Handlers ---

        function handleCategoryClick(event) {
            const category = event.target.getAttribute('data-category');
            currentCategory = category;
            filterAndRenderPhrases();
            renderCategories(); // Re-render to update active state
        }

        function handleSearchInput() {
            filterAndRenderPhrases();
        }

        function handlePronounce(event) {
            const text = event.currentTarget.getAttribute('data-text');
            console.log(`Pronouncing: "${text}"`); // Placeholder for TTS
            // In a real app, you would use a Web Speech API or a TTS library/API here
            // Example using Web Speech API (browser support varies):
            // const utterance = new SpeechSynthesisUtterance(text);
            // utterance.lang = 'ja-JP';
            // window.speechSynthesis.speak(utterance);

            // Add temporary visual feedback
            const button = event.currentTarget;
            button.classList.add('active'); // Add a temporary class for styling feedback
            setTimeout(() => {
                button.classList.remove('active');
            }, 500); // Remove class after 500ms
        }

        function handleToggleEnglish(event) {
            const card = event.target.closest('.phrase-card');
            const englishElement = card.querySelector('.english');
            const isHidden = englishElement.classList.toggle('hidden');
            const button = event.currentTarget;
            const icon = button.querySelector('.material-symbols-rounded');

            if (isHidden) {
                button.setAttribute('aria-label', 'Show English translation');
                icon.textContent = 'visibility_off';
            } else {
                button.setAttribute('aria-label', 'Hide English translation');
                 icon.textContent = 'visibility';
            }
        }

        // --- Filtering Logic ---

        function filterAndRenderPhrases() {
            const searchTerm = searchInput.value.toLowerCase();

            const filteredPhrases = phrases.filter(phrase => {
                const categoryMatch = currentCategory === 'All' || phrase.category === currentCategory;
                const searchMatch = phrase.japanese.toLowerCase().includes(searchTerm) ||
                                    phrase.romaji.toLowerCase().includes(searchTerm) ||
                                    phrase.english.toLowerCase().includes(searchTerm);
                return categoryMatch && searchMatch;
            });

            renderPhraseList(filteredPhrases);
        }

        // --- Initialization ---

        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            filterAndRenderPhrases(); // Initial render
            searchInput.addEventListener('input', handleSearchInput);

             // Add keyboard navigation for category buttons
            categoryListContainer.addEventListener('keydown', (event) => {
                const buttons = categoryListContainer.querySelectorAll('button');
                const currentButton = event.target.closest('button');
                if (!currentButton) return;

                const currentIndex = Array.from(buttons).indexOf(currentButton);
                let nextIndex = -1;

                if (event.key === 'ArrowDown' || event.key === 'ArrowRight') {
                    nextIndex = (currentIndex + 1) % buttons.length;
                    event.preventDefault(); // Prevent scrolling
                } else if (event.key === 'ArrowUp' || event.key === 'ArrowLeft') {
                    nextIndex = (currentIndex - 1 + buttons.length) % buttons.length;
                     event.preventDefault(); // Prevent scrolling
                } else if (event.key === 'Home') {
                    nextIndex = 0;
                     event.preventDefault();
                } else if (event.key === 'End') {
                    nextIndex = buttons.length - 1;
                     event.preventDefault();
                }

                if (nextIndex !== -1) {
                    buttons[nextIndex].focus();
                }
            });

             // Add keyboard navigation for phrase card buttons (example for first button in actions)
             phraseListContainer.addEventListener('keydown', (event) => {
                const targetButton = event.target.closest('.phrase-actions button');
                if (!targetButton) return;

                const actions = targetButton.parentElement.querySelectorAll('button');
                const currentIndex = Array.from(actions).indexOf(targetButton);
                let nextIndex = -1;

                 if (event.key === 'ArrowRight') {
                    nextIndex = (currentIndex + 1) % actions.length;
                    event.preventDefault();
                } else if (event.key === 'ArrowLeft') {
                    nextIndex = (currentIndex - 1 + actions.length) % actions.length;
                    event.preventDefault();
                }

                if (nextIndex !== -1) {
                    actions[nextIndex].focus();
                }
             });
        });

    </script>

</body>
</html>
