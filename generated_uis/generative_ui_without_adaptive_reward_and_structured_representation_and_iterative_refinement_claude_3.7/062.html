<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mixed-Methods Study Designer</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <style>
        :root {
            --primary-color: #007acc; /* VSCode blue, clean and vibrant */
            --secondary-color: #e0e0e0; /* Light grey for backgrounds */
            --text-color: #333;
            --text-color-light: #666;
            --background-color: #ffffff; /* Pure white */
            --border-color: #ddd;
            --success-color: #4CAF50;
            --error-color: #f44336;
            --spacing-unit: 8px;
            --border-radius: 8px;
            --box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--secondary-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: var(--spacing-unit) * 4;
        }

        .container {
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: var(--spacing-unit) * 4;
            max-width: 960px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-unit) * 4;
        }

        header h1 {
            color: var(--primary-color);
            margin-bottom: var(--spacing-unit) * 2;
            font-weight: 600;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: var(--spacing-unit) * 1.5;
            background-color: var(--border-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: var(--spacing-unit) * 4;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            width: 0%; /* Initial width */
            transition: width 0.4s ease-in-out;
            border-radius: var(--border-radius);
        }

        .step-section {
            display: none; /* Hidden by default */
            animation: fadeIn 0.5s ease-in-out;
        }

        .step-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: var(--spacing-unit) * 3;
            font-weight: 500;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-unit) * 2;
        }

        .form-group {
            margin-bottom: var(--spacing-unit) * 3;
        }

        label {
            display: block;
            margin-bottom: var(--spacing-unit);
            font-weight: 500;
            color: var(--text-color-light);
        }

        input[type="text"],
        textarea {
            width: 100%;
            padding: var(--spacing-unit) * 1.5;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            color: var(--text-color);
            box-sizing: border-box; /* Include padding and border in element's total width and height */
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        input[type="text"]:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 122, 204, 0.2);
        }

        textarea {
            min-height: 150px;
            resize: vertical;
        }

        .data-type-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-unit) * 3;
        }

        .data-type-card {
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: var(--spacing-unit) * 3;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-unit) * 2;
        }

        .data-type-card h3 {
            margin-top: 0;
            color: var(--primary-color);
            font-weight: 500;
            margin-bottom: var(--spacing-unit) * 2;
            padding-bottom: var(--spacing-unit);
            border-bottom: 1px dashed var(--border-color);
        }

        .checkbox-group label {
            display: flex;
            align-items: center;
            margin-bottom: var(--spacing-unit) * 1.5;
            cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: var(--spacing-unit);
            width: 18px;
            height: 18px;
            accent-color: var(--primary-color);
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: var(--spacing-unit) * 4;
            gap: var(--spacing-unit) * 2;
        }

        button {
            padding: var(--spacing-unit) * 1.5 var(--spacing-unit) * 3;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background-color 0.2s ease-in-out, opacity 0.2s ease-in-out;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        button.primary {
            background-color: var(--primary-color);
            color: var(--background-color);
        }

        button.primary:not(:disabled):hover {
            background-color: #005f99; /* Darker shade */
        }

        button.secondary {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }

        button.secondary:not(:disabled):hover {
            background-color: #f0f0f0; /* Lighter shade */
        }

        button.save {
            background-color: var(--success-color);
            color: var(--background-color);
        }

        button.save:not(:disabled):hover {
            background-color: #45a049; /* Darker shade */
        }

        .button-left {
            display: flex;
            gap: var(--spacing-unit) * 2;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mixed-Methods Study Design Wizard</h1>
        </header>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div id="wizardForm">
            <!-- Step 1: Study Overview -->
            <section class="step-section active" data-step="1">
                <h2>Step 1: Study Overview</h2>
                <div class="form-group">
                    <label for="studyTitle">Study Title</label>
                    <input type="text" id="studyTitle" placeholder="e.g., Urban Green Space and Community Well-being">
                </div>
                <div class="form-group">
                    <label for="studyObjectives">Study Objectives</label>
                    <textarea id="studyObjectives" placeholder="Clearly state the main goals of your research."></textarea>
                </div>
                <div class="form-group">
                    <label for="researchQuestions">Research Questions</label>
                    <textarea id="researchQuestions" placeholder="List the specific questions your study aims to answer."></textarea>
                </div>
            </section>

            <!-- Step 2: Data Types & Sources -->
            <section class="step-section" data-step="2">
                <h2>Step 2: Data Types & Sources</h2>
                <p style="margin-bottom: var(--spacing-unit) * 3; color: var(--text-color-light);">Describe the types of data you will collect and their sources.</p>
                <div class="data-type-sections">
                    <div class="data-type-card">
                        <h3>GIS Data</h3>
                        <div class="form-group">
                            <label for="gisDescription">Description</label>
                            <textarea id="gisDescription" placeholder="e.g., Spatial data on park locations, census tracts, environmental layers."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="gisSource">Source</label>
                            <input type="text" id="gisSource" placeholder="e.g., City planning department, national census data.">
                        </div>
                        <div class="form-group">
                            <label for="gisFormat">Format</label>
                            <input type="text" id="gisFormat" placeholder="e.g., Shapefiles, GeoJSON, Raster data.">
                        </div>
                    </div>

                    <div class="data-type-card">
                        <h3>Public Health Data</h3>
                        <div class="form-group">
                            <label for="phDescription">Description</label>
                            <textarea id="phDescription" placeholder="e.g., Health outcomes data, survey results on well-being indicators."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="phSource">Source</label>
                            <input type="text" id="phSource" placeholder="e.g., Local health department, national health surveys.">
                        </div>
                        <div class="form-group">
                            <label for="phFormat">Format</label>
                            <input type="text" id="phFormat" placeholder="e.g., CSV, Excel, Database records.">
                        </div>
                    </div>

                    <div class="data-type-card">
                        <h3>Qualitative Data</h3>
                        <div class="form-group">
                            <label for="qualDescription">Description</label>
                            <textarea id="qualDescription" placeholder="e.g., Interview transcripts, focus group notes."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="qualSource">Source</label>
                            <input type="text" id="qualSource" placeholder="e.g., Semi-structured interviews with residents.">
                        </div>
                        <div class="form-group">
                            <label for="qualFormat">Format</label>
                            <input type="text" id="qualFormat" placeholder="e.g., Text files, Audio recordings.">
                        </div>
                    </div>

                    <div class="data-type-card">
                        <h3>Participatory Data</h3>
                        <div class="form-group">
                            <label for="partDescription">Description</label>
                            <textarea id="partDescription" placeholder="e.g., Data generated from participatory mapping workshops, community feedback."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="partSource">Source</label>
                            <input type="text" id="partSource" placeholder="e.g., Community workshops, citizen science initiatives.">
                        </div>
                        <div class="form-group">
                            <label for="partFormat">Format</label>
                            <input type="text" id="partFormat" placeholder="e.g., Maps, Drawings, Workshop notes, Survey responses.">
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 3: Environmental Justice Considerations -->
            <section class="step-section" data-step="3">
                <h2>Step 3: Environmental Justice Considerations</h2>
                <p style="margin-bottom: var(--spacing-unit) * 3; color: var(--text-color-light);">How does your study address environmental justice principles?</p>
                <div class="form-group">
                    <label for="ejRelevance">Describe the relevance of environmental justice to your study:</label>
                    <textarea id="ejRelevance" placeholder="Explain how your research connects to issues of equity, distribution, and participation regarding environmental factors."></textarea>
                </div>
                <div class="form-group checkbox-group">
                    <label>Considerations:</label>
                    <label><input type="checkbox" value="distributional-equity"> Distributional Equity (Fair distribution of environmental benefits/burdens)</label>
                    <label><input type="checkbox" value="procedural-justice"> Procedural Justice (Fair participation in decision-making)</label>
                    <label><input type="checkbox" value="recognition-justice"> Recognition Justice (Respecting diverse cultures, knowledge, and values)</label>
                    <label><input type="checkbox" value="restorative-justice"> Restorative Justice (Addressing historical harms and inequities)</label>
                    <label><input type="checkbox" value="data-equity"> Data Equity (Ensuring data collection and analysis are equitable and representative)</label>
                </div>
                <div class="form-group">
                     <label for="ejIntegrationPlan">How will EJ considerations be integrated into your methodology and analysis?</label>
                     <textarea id="ejIntegrationPlan" placeholder="Describe specific steps to ensure EJ principles guide your study design, data collection, analysis, and dissemination."></textarea>
                </div>
            </section>

             <!-- Step 4: Data Integration Planning (Placeholder) -->
            <section class="step-section" data-step="4">
                <h2>Step 4: Data Integration Planning</h2>
                <p style="margin-bottom: var(--spacing-unit) * 3; color: var(--text-color-light);">Plan how you will integrate your different data types.</p>
                 <div class="form-group">
                    <label for="integrationStrategy">Integration Strategy</label>
                    <textarea id="integrationStrategy" placeholder="Describe your planned approach for integrating data (e.g., sequential, concurrent, transformative)."></textarea>
                </div>
                 <div class="form-group">
                    <label for="integrationChallenges">Potential Challenges & Solutions</label>
                    <textarea id="integrationChallenges" placeholder="Identify challenges in integrating diverse data and propose solutions."></textarea>
                </div>
                <!-- Placeholder for future interactive diagram/tool -->
                <div style="border: 1px dashed var(--border-color); padding: var(--spacing-unit) * 4; text-align: center; color: var(--text-color-light); border-radius: var(--border-radius);">
                    Interactive Data Integration Visualizer Placeholder
                </div>
            </section>

             <!-- Step 5: Analysis Plan (Placeholder) -->
            <section class="step-section" data-step="5">
                <h2>Step 5: Analysis Plan</h2>
                 <p style="margin-bottom: var(--spacing-unit) * 3; color: var(--text-color-light);">Outline your plan for analyzing the integrated data.</p>
                 <div class="form-group">
                    <label for="analysisMethods">Analytical Methods</label>
                    <textarea id="analysisMethods" placeholder="Describe the specific methods for analyzing each data type and the integrated dataset."></textarea>
                </div>
                 <div class="form-group">
                    <label for="softwareTools">Software & Tools</label>
                    <input type="text" id="softwareTools" placeholder="List software (e.g., ArcGIS, R, NVivo) and tools you will use.">
                </div>
            </section>

        </div>

        <div class="navigation-buttons">
            <div class="button-left">
                 <button class="secondary" id="prevBtn" disabled>Previous</button>
                 <button class="save" id="saveBtn">Save Design</button>
            </div>
            <button class="primary" id="nextBtn">Next</button>
        </div>
    </div>

    <script>
        const wizardForm = document.getElementById('wizardForm');
        const steps = wizardForm.querySelectorAll('.step-section');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const saveBtn = document.getElementById('saveBtn');
        const progressFill = document.getElementById('progressFill');

        let currentStep = 0;
        const totalSteps = steps.length;

        function showStep(stepIndex) {
            steps.forEach((step, index) => {
                step.classList.toggle('active', index === stepIndex);
            });
            updateNavigationButtons();
            updateProgressBar();
        }

        function updateNavigationButtons() {
            prevBtn.disabled = currentStep === 0;
            nextBtn.disabled = currentStep === totalSteps - 1;
            saveBtn.style.display = currentStep === totalSteps - 1 ? 'inline-block' : 'inline-block'; // Always show save for now
        }

        function updateProgressBar() {
            const progress = ((currentStep + 1) / totalSteps) * 100;
            progressFill.style.width = `${progress}%`;
        }

        function nextStep() {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                showStep(currentStep);
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function saveDesign() {
            // Placeholder for saving logic
            const studyDesign = {};
            steps.forEach((step, stepIndex) => {
                const stepData = {};
                step.querySelectorAll('input, textarea').forEach(input => {
                    if (input.type === 'checkbox') {
                        if (!stepData[input.name]) {
                            stepData[input.name] = [];
                        }
                        if (input.checked) {
                             stepData[input.name].push(input.value);
                        }
                    } else {
                         stepData[input.id] = input.value;
                    }
                });
                 step.querySelectorAll('.checkbox-group').forEach(group => {
                     const groupName = 'ejConsiderations'; // Example name for EJ checkboxes
                     stepData[groupName] = [];
                     group.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
                         stepData[groupName].push(checkbox.value);
                     });
                 });

                studyDesign[`step${stepIndex + 1}`] = stepData;
            });

            console.log("Saving Study Design:", studyDesign);
            alert("Study design saved to console (placeholder).");
            // In a real application, you would send this data to a server or save locally
        }

        // Event Listeners
        nextBtn.addEventListener('click', nextStep);
        prevBtn.addEventListener('click', prevStep);
        saveBtn.addEventListener('click', saveDesign);

        // Initialize the wizard
        showStep(currentStep);
    </script>
</body>
</html>
