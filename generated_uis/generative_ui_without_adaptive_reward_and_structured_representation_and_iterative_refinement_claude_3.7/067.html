<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Skills Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #007acc; /* VSCode blue - clean and professional */
            --secondary-color: #f0f0f0; /* Light grey for backgrounds */
            --text-color: #333; /* Dark grey for readability */
            --text-color-light: #fff; /* White for contrast on dark backgrounds */
            --border-color: #ccc; /* Light grey for borders */
            --hover-color: #005f99; /* Darker blue for hover states */
            --active-color: #004c80; /* Even darker blue for active states */
            --spacing-unit: 8px;
            --header-height: 60px;
            --sidebar-width: 250px;
            --box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            --border-radius: 4px;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--secondary-color);
            color: var(--text-color);
            line-height: 1.6;
            display: grid;
            grid-template-areas:
                "sidebar header"
                "sidebar main";
            grid-template-columns: var(--sidebar-width) 1fr;
            grid-template-rows: var(--header-height) 1fr;
            height: 100vh;
            overflow: hidden; /* Prevent main body scroll */
        }

        header {
            grid-area: header;
            background-color: var(--text-color-light);
            color: var(--text-color);
            padding: 0 var(--spacing-unit) 0 calc(var(--spacing-unit) * 3); /* Adjust padding */
            box-shadow: var(--box-shadow);
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
        }

        header h1 {
            margin: 0;
            font-size: 1.5em;
            font-weight: 600;
        }

        .language-switcher select {
            padding: var(--spacing-unit);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1em;
            cursor: pointer;
            background-color: var(--text-color-light);
            color: var(--text-color);
            outline: none;
            transition: border-color 0.2s ease;
        }

        .language-switcher select:hover {
            border-color: var(--primary-color);
        }

        nav {
            grid-area: sidebar;
            background-color: var(--primary-color);
            color: var(--text-color-light);
            padding: calc(var(--spacing-unit) * 2) 0;
            box-shadow: var(--box-shadow);
            overflow-y: auto; /* Enable scrolling for long menus */
            z-index: 20;
        }

        nav h2 {
            font-size: 1.2em;
            padding: 0 calc(var(--spacing-unit) * 2);
            margin-top: 0;
            margin-bottom: var(--spacing-unit);
            font-weight: 600;
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        nav li {
            margin-bottom: var(--spacing-unit);
        }

        nav a {
            display: block;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            color: var(--text-color-light);
            text-decoration: none;
            transition: background-color 0.2s ease, color 0.2s ease;
            font-weight: 400;
        }

        nav a:hover {
            background-color: var(--hover-color);
        }

        nav a.active {
            background-color: var(--active-color);
            font-weight: 700;
        }

        main {
            grid-area: main;
            padding: calc(var(--spacing-unit) * 3);
            overflow-y: auto; /* Enable scrolling for content */
        }

        .content-section {
            background-color: var(--text-color-light);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: calc(var(--spacing-unit) * 3);
            display: none; /* Hidden by default */
        }

        .content-section.active {
            display: block; /* Show active section */
        }

        .content-section h2 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-size: 1.8em;
            font-weight: 700;
        }

        .content-section p {
            margin-bottom: var(--spacing-unit);
        }

        /* Placeholder Styles */
        .placeholder-image {
            display: block;
            max-width: 100%;
            height: auto;
            margin: calc(var(--spacing-unit) * 2) 0;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
        }

        .assessment-form label {
            display: block;
            margin-bottom: var(--spacing-unit);
            font-weight: 600;
        }

        .assessment-form input[type="text"],
        .assessment-form input[type="number"],
        .assessment-form textarea {
            width: calc(100% - var(--spacing-unit) * 2);
            padding: var(--spacing-unit);
            margin-bottom: var(--spacing-unit) * 2;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1em;
        }

        .assessment-form .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin-top: calc(var(--spacing-unit) * 2);
            overflow: hidden;
        }

        .assessment-form .progress {
            height: 100%;
            width: 0%;
            background-color: #4CAF50; /* Green */
            transition: width 0.4s ease;
        }

        .flowchart-diagram {
            width: 100%;
            height: 400px; /* Placeholder height */
            background-color: #f9f9f9;
            border: 1px dashed var(--border-color);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
            color: #666;
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        /* Modal Styles for Glossary/Cultural Notes */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.visible {
            visibility: visible;
            opacity: 1;
        }

        .modal-content {
            background-color: var(--text-color-light);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            max-width: 500px;
            width: 90%;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }

        .modal-overlay.visible .modal-content {
            transform: translateY(0);
        }

        .modal-content h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .modal-close-button {
            position: absolute;
            top: var(--spacing-unit);
            right: var(--spacing-unit);
            background: none;
            border: none;
            font-size: 1.5em;
            cursor: pointer;
            color: var(--text-color);
            transition: color 0.2s ease;
        }

        .modal-close-button:hover {
            color: var(--primary-color);
        }

        /* Interactive elements */
        button {
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            background-color: var(--primary-color);
            color: var(--text-color-light);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease, box-shadow 0.2s ease;
            outline: none;
        }

        button:hover {
            background-color: var(--hover-color);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        button:active {
            background-color: var(--active-color);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        button:focus-visible {
             outline: 2px solid var(--active-color);
             outline-offset: 2px;
        }

        a, button, select, input, textarea {
            /* Ensure focus indicator for accessibility */
            outline: none;
        }

         a:focus-visible, button:focus-visible, select:focus-visible, input:focus-visible, textarea:focus-visible {
             outline: 2px solid var(--active-color);
             outline-offset: 2px;
        }

        /* Accessibility */
        [aria-hidden="true"] {
            display: none;
        }
    </style>
</head>
<body>

    <nav aria-label="Main Navigation">
        <h2>Training Modules</h2>
        <ul>
            <li><a href="#guide" class="nav-link active" data-module="guide">Illustrated Guides</a></li>
            <li><a href="#assessment" class="nav-link" data-module="assessment">Patient Assessment</a></li>
            <li><a href="#flowchart" class="nav-link" data-module="flowchart">Treatment Flowcharts</a></li>
        </ul>
    </nav>

    <header>
        <h1>Medical Skills Training Platform</h1>
        <div class="language-switcher">
            <label for="language-select" class="visually-hidden">Select Language:</label>
            <select id="language-select" aria-label="Language Selector">
                <option value="en">English</option>
                <option value="es">Español</option>
                <option value="my">Guatemalan Mayan (Placeholder)</option>
                <option value="ho">Honduran Indigenous (Placeholder)</option>
            </select>
        </div>
    </header>

    <main>
        <section id="guide" class="content-section active" role="region" aria-labelledby="guide-heading">
            <h2 id="guide-heading" data-lang-key="guide-title">Illustrated Guides</h2>
            <p data-lang-key="guide-intro">Select a guide from the navigation to view step-by-step illustrations and instructions.</p>

            <!-- Placeholder for a specific guide -->
            <article class="guide-step">
                <h3 data-lang-key="guide-step1-title">Step 1: Preparation</h3>
                <p data-lang-key="guide-step1-text">Gather all necessary materials and ensure a clean workspace. Wash hands thoroughly.</p>
                <img src="https://placehold.co/600x400?text=Illustration+Step+1" alt="Illustration showing step 1 preparation" class="placeholder-image">
                <button class="glossary-trigger" data-term="sterile" aria-label="Explain term sterile">What does "sterile" mean?</button>
                <button class="cultural-notes-trigger" data-note="handwashing" aria-label="View cultural notes on handwashing">Cultural Notes</button>
            </article>

             <article class="guide-step">
                <h3 data-lang-key="guide-step2-title">Step 2: Procedure</h3>
                <p data-lang-key="guide-step2-text">Follow the illustrated steps carefully, maintaining sterile technique.</p>
                <img src="https://placehold.co/600x400?text=Illustration+Step+2" alt="Illustration showing step 2 of the procedure" class="placeholder-image">
                 <button class="glossary-trigger" data-term="technique" aria-label="Explain term technique">What does "technique" mean?</button>
            </article>

            <!-- More steps would follow -->

        </section>

        <section id="assessment" class="content-section" role="region" aria-labelledby="assessment-heading" aria-hidden="true">
            <h2 id="assessment-heading" data-lang-key="assessment-title">Patient Assessment Tool</h2>
            <p data-lang-key="assessment-intro">Use this tool to guide you through a patient assessment.</p>

            <form class="assessment-form">
                <div class="form-group">
                    <label for="patient-name" data-lang-key="assessment-name-label">Patient Name:</label>
                    <input type="text" id="patient-name" data-lang-key="assessment-name-placeholder" placeholder="Enter patient name" aria-required="true">
                </div>

                <div class="form-group">
                     <label for="patient-age" data-lang-key="assessment-age-label">Patient Age:</label>
                    <input type="number" id="patient-age" data-lang-key="assessment-age-placeholder" placeholder="Enter age" min="0" aria-required="true">
                </div>

                <div class="form-group">
                    <p data-lang-key="assessment-symptoms-label">Main Symptoms:</p>
                    <label>
                        <input type="checkbox" name="symptom" value="fever"> <span data-lang-key="symptom-fever">Fever</span>
                    </label><br>
                    <label>
                        <input type="checkbox" name="symptom" value="cough"> <span data-lang-key="symptom-cough">Cough</span>
                    </label><br>
                     <label>
                        <input type="checkbox" name="symptom" value="pain"> <span data-lang-key="symptom-pain">Pain</span>
                    </label>
                </div>

                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress"></div>
                </div>

                <button type="submit" data-lang-key="assessment-submit">Complete Assessment</button>
            </form>
        </section>

        <section id="flowchart" class="content-section" role="region" aria-labelledby="flowchart-heading" aria-hidden="true">
            <h2 id="flowchart-heading" data-lang-key="flowchart-title">Treatment Flowcharts</h2>
            <p data-lang-key="flowchart-intro">Follow the steps in the interactive flowchart to determine the appropriate treatment protocol.</p>

            <div class="flowchart-diagram">
                <p data-lang-key="flowchart-placeholder">Interactive Flowchart Diagram Placeholder</p>
                <!-- Placeholder for interactive flowchart -->
            </div>

             <button class="cultural-notes-trigger" data-note="protocol" aria-label="View cultural notes on treatment protocols">Cultural Notes on Protocols</button>
        </section>
    </main>

    <!-- Glossary Modal -->
    <div id="glossary-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="glossary-modal-title">
        <div class="modal-content">
            <button class="modal-close-button" aria-label="Close glossary">×</button>
            <h3 id="glossary-modal-title" data-lang-key="glossary-modal-title">Medical Term Glossary</h3>
            <div id="glossary-content">
                <!-- Glossary term and definition will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Cultural Notes Modal -->
     <div id="cultural-notes-modal" class="modal-overlay" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="cultural-notes-modal-title">
        <div class="modal-content">
            <button class="modal-close-button" aria-label="Close cultural notes">×</button>
            <h3 id="cultural-notes-modal-title" data-lang-key="cultural-notes-modal-title">Cultural Considerations</h3>
            <div id="cultural-notes-content">
                <!-- Cultural notes will be loaded here -->
            </div>
        </div>
    </div>


    <script>
        const content = {
            en: {
                "guide-title": "Illustrated Guides",
                "guide-intro": "Select a guide from the navigation to view step-by-step illustrations and instructions.",
                "guide-step1-title": "Step 1: Preparation",
                "guide-step1-text": "Gather all necessary materials and ensure a clean workspace. Wash hands thoroughly.",
                "guide-step2-title": "Step 2: Procedure",
                "guide-step2-text": "Follow the illustrated steps carefully, maintaining sterile technique.",
                "assessment-title": "Patient Assessment Tool",
                "assessment-intro": "Use this tool to guide you through a patient assessment.",
                "assessment-name-label": "Patient Name:",
                "assessment-name-placeholder": "Enter patient name",
                "assessment-age-label": "Patient Age:",
                "assessment-age-placeholder": "Enter age",
                "assessment-symptoms-label": "Main Symptoms:",
                "symptom-fever": "Fever",
                "symptom-cough": "Cough",
                "symptom-pain": "Pain",
                "assessment-submit": "Complete Assessment",
                "flowchart-title": "Treatment Flowcharts",
                "flowchart-intro": "Follow the steps in the interactive flowchart to determine the appropriate treatment protocol.",
                "flowchart-placeholder": "Interactive Flowchart Diagram Placeholder",
                "glossary-modal-title": "Medical Term Glossary",
                "cultural-notes-modal-title": "Cultural Considerations",
                "glossary-sterile-term": "Sterile",
                "glossary-sterile-def": "Free from bacteria or other living microorganisms; totally clean.",
                 "glossary-technique-term": "Technique",
                "glossary-technique-def": "A way of carrying out a particular task, especially the execution or performance of an artistic work or a scientific procedure.",
                "cultural-notes-handwashing-title": "Handwashing Practices",
                "cultural-notes-handwashing-text": "In some cultures, specific rituals or beliefs may be associated with cleansing. Ensure explanations respect local practices while emphasizing the medical necessity of thorough handwashing.",
                 "cultural-notes-protocol-title": "Following Protocols",
                "cultural-notes-protocol-text": "Community beliefs about illness causation or traditional healing methods may influence adherence to medical protocols. Discuss protocols with sensitivity, explaining the 'why' behind each step in simple terms."
            },
            es: {
                "guide-title": "Guías Ilustradas",
                "guide-intro": "Seleccione una guía de la navegación para ver ilustraciones e instrucciones paso a paso.",
                "guide-step1-title": "Paso 1: Preparación",
                "guide-step1-text": "Reúna todos los materiales necesarios y asegure un espacio de trabajo limpio. Lávese bien las manos.",
                "guide-step2-title": "Paso 2: Procedimiento",
                "guide-step2-text": "Siga cuidadosamente los pasos ilustrados, manteniendo la técnica estéril.",
                "assessment-title": "Herramienta de Evaluación del Paciente",
                "assessment-intro": "Utilice esta herramienta para guiarle a través de una evaluación del paciente.",
                "assessment-name-label": "Nombre del Paciente:",
                "assessment-name-placeholder": "Ingrese el nombre del paciente",
                "assessment-age-label": "Edad del Paciente:",
                "assessment-age-placeholder": "Ingrese la edad",
                "assessment-symptoms-label": "Síntomas Principales:",
                "symptom-fever": "Fiebre",
                "symptom-cough": "Tos",
                "symptom-pain": "Dolor",
                "assessment-submit": "Completar Evaluación",
                "flowchart-title": "Diagramas de Flujo de Tratamiento",
                "flowchart-intro": "Siga los pasos en el diagrama de flujo interactivo para determinar el protocolo de tratamiento adecuado.",
                "flowchart-placeholder": "Marcador de Posición para Diagrama de Flujo Interactivo",
                "glossary-modal-title": "Glosario de Términos Médicos",
                "cultural-notes-modal-title": "Consideraciones Culturales",
                "glossary-sterile-term": "Estéril",
                "glossary-sterile-def": "Libre de bacterias u otros microorganismos vivos; totalmente limpio.",
                "glossary-technique-term": "Técnica",
                "glossary-technique-def": "Una forma de llevar a cabo una tarea particular, especialmente la ejecución o realización de una obra artística o un procedimiento científico.",
                "cultural-notes-handwashing-title": "Prácticas de Lavado de Manos",
                "cultural-notes-handwashing-text": "En algunas culturas, pueden existir rituales o creencias específicas asociadas con la limpieza. Asegure que las explicaciones respeten las prácticas locales mientras enfatizan la necesidad médica de un lavado de manos exhaustivo.",
                "cultural-notes-protocol-title": "Seguimiento de Protocolos",
                "cultural-notes-protocol-text": "Las creencias comunitarias sobre la causa de la enfermedad o los métodos de curación tradicionales pueden influir en la adherencia a los protocolos médicos. Discuta los protocolos con sensibilidad, explicando el 'por qué' detrás de cada paso en términos sencillos."
            },
             my: { /* Placeholder for Mayan */
                "guide-title": "Guías Ilustradas (Mayan)",
                "guide-intro": "Seleccione una guía de la navegación para ver ilustraciones e instrucciones paso a paso. (Mayan)",
                "guide-step1-title": "Paso 1: Preparación (Mayan)",
                "guide-step1-text": "Reúna todos los materiales necesarios y asegure un espacio de trabajo limpio. Lávese bien las manos. (Mayan)",
                "guide-step2-title": "Paso 2: Procedimiento (Mayan)",
                "guide-step2-text": "Siga cuidadosamente los pasos ilustrados, manteniendo la técnica estéril. (Mayan)",
                "assessment-title": "Herramienta de Evaluación del Paciente (Mayan)",
                "assessment-intro": "Utilice esta herramienta para guiarle a través de una evaluación del paciente. (Mayan)",
                "assessment-name-label": "Nombre del Paciente: (Mayan)",
                "assessment-name-placeholder": "Ingrese el nombre del paciente (Mayan)",
                "assessment-age-label": "Edad del Paciente: (Mayan)",
                "assessment-age-placeholder": "Ingrese la edad (Mayan)",
                "assessment-symptoms-label": "Síntomas Principales: (Mayan)",
                "symptom-fever": "Fiebre (Mayan)",
                "symptom-cough": "Tos (Mayan)",
                "symptom-pain": "Dolor (Mayan)",
                "assessment-submit": "Completar Evaluación (Mayan)",
                "flowchart-title": "Diagramas de Flujo de Tratamiento (Mayan)",
                "flowchart-intro": "Siga los pasos en el diagrama de flujo interactivo para determinar el protocolo de tratamiento adecuado. (Mayan)",
                "flowchart-placeholder": "Marcador de Posición para Diagrama de Flujo Interactivo (Mayan)",
                "glossary-modal-title": "Glosario de Términos Médicos (Mayan)",
                "cultural-notes-modal-title": "Consideraciones Culturales (Mayan)",
                 "glossary-sterile-term": "Estéril (Mayan)",
                "glossary-sterile-def": "Libre de bacterias u otros microorganismos vivos; totalmente limpio. (Mayan)",
                 "glossary-technique-term": "Técnica (Mayan)",
                "glossary-technique-def": "Una forma de llevar a cabo una tarea particular, especialmente la ejecución o realización de una obra artística o un procedimiento científico. (Mayan)",
                "cultural-notes-handwashing-title": "Prácticas de Lavado de Manos (Mayan)",
                "cultural-notes-handwashing-text": "En algunas culturas, pueden existir rituales o creencias específicas asociadas con la limpieza. Asegure que las explicaciones respeten las prácticas locales mientras enfatizan la necesidad médica de un lavado de manos exhaustivo. (Mayan)",
                 "cultural-notes-protocol-title": "Seguimiento de Protocolos (Mayan)",
                "cultural-notes-protocol-text": "Las creencias comunitarias sobre la causa de la enfermedad o los métodos de curación tradicionales pueden influir en la adherencia a los protocolos médicos. Discuta los protocolos con sensibilidad, explicando el 'por qué' detrás de cada paso en términos sencillos. (Mayan)"
            },
             ho: { /* Placeholder for Honduran Indigenous */
                "guide-title": "Illustrated Guides (Honduran Indigenous)",
                "guide-intro": "Select a guide from the navigation to view step-by-step illustrations and instructions. (Honduran Indigenous)",
                "guide-step1-title": "Step 1: Preparation (Honduran Indigenous)",
                "guide-step1-text": "Gather all necessary materials and ensure a clean workspace. Wash hands thoroughly. (Honduran Indigenous)",
                 "guide-step2-title": "Step 2: Procedure (Honduran Indigenous)",
                "guide-step2-text": "Follow the illustrated steps carefully, maintaining sterile technique. (Honduran Indigenous)",
                "assessment-title": "Patient Assessment Tool (Honduran Indigenous)",
                "assessment-intro": "Use this tool to guide you through a patient assessment. (Honduran Indigenous)",
                "assessment-name-label": "Patient Name: (Honduran Indigenous)",
                "assessment-name-placeholder": "Enter patient name (Honduran Indigenous)",
                "assessment-age-label": "Patient Age: (Honduran Indigenous)",
                "assessment-age-placeholder": "Enter age (Honduran Indigenous)",
                "assessment-symptoms-label": "Main Symptoms: (Honduran Indigenous)",
                "symptom-fever": "Fever (Honduran Indigenous)",
                "symptom-cough": "Cough (Honduran Indigenous)",
                "symptom-pain": "Pain (Honduran Indigenous)",
                "assessment-submit": "Complete Assessment (Honduran Indigenous)",
                "flowchart-title": "Treatment Flowcharts (Honduran Indigenous)",
                "flowchart-intro": "Follow the steps in the interactive flowchart to determine the appropriate treatment protocol. (Honduran Indigenous)",
                "flowchart-placeholder": "Interactive Flowchart Diagram Placeholder (Honduran Indigenous)",
                "glossary-modal-title": "Medical Term Glossary (Honduran Indigenous)",
                "cultural-notes-modal-title": "Cultural Considerations (Honduran Indigenous)",
                 "glossary-sterile-term": "Sterile (Honduran Indigenous)",
                "glossary-sterile-def": "Free from bacteria or other living microorganisms; totally clean. (Honduran Indigenous)",
                 "glossary-technique-term": "Technique (Honduran Indigenous)",
                "glossary-technique-def": "A way of carrying out a particular task, especially the execution or performance of an artistic work or a scientific procedure. (Honduran Indigenous)",
                "cultural-notes-handwashing-title": "Handwashing Practices (Honduran Indigenous)",
                "cultural-notes-handwashing-text": "In some cultures, specific rituals or beliefs may be associated with cleansing. Ensure explanations respect local practices while emphasizing the medical necessity of thorough handwashing. (Honduran Indigenous)",
                 "cultural-notes-protocol-title": "Following Protocols (Honduran Indigenous)",
                "cultural-notes-protocol-text": "Community beliefs about illness causation or traditional healing methods may influence adherence to medical protocols. Discuss protocols with sensitivity, explaining the 'why' behind each step in simple terms. (Honduran Indigenous)"
            }
        };

        const languageSelect = document.getElementById('language-select');
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        const glossaryModal = document.getElementById('glossary-modal');
        const culturalNotesModal = document.getElementById('cultural-notes-modal');
        const modalCloseButtons = document.querySelectorAll('.modal-close-button');
        const glossaryTriggers = document.querySelectorAll('.glossary-trigger');
        const culturalNotesTriggers = document.querySelectorAll('.cultural-notes-trigger');
        const glossaryContent = document.getElementById('glossary-content');
        const culturalNotesContent = document.getElementById('cultural-notes-content');
        const assessmentForm = document.querySelector('.assessment-form');
        const progressDiv = assessmentForm ? assessmentForm.querySelector('.progress') : null;
        const progressBar = assessmentForm ? assessmentForm.querySelector('.progress-bar') : null;
        const formInputs = assessmentForm ? assessmentForm.querySelectorAll('input, textarea') : null;


        // Function to update content based on language
        function updateContent(lang) {
            const elements = document.querySelectorAll('[data-lang-key]');
            elements.forEach(el => {
                const key = el.getAttribute('data-lang-key');
                if (content[lang] && content[lang][key]) {
                    // Handle placeholder attribute specifically
                    if (el.tagName === 'INPUT' && el.hasAttribute('placeholder')) {
                         el.setAttribute('placeholder', content[lang][key]);
                    } else {
                         el.textContent = content[lang][key];
                    }
                }
            });
        }

        // Function to navigate between sections
        function navigateTo(module) {
            navLinks.forEach(link => {
                if (link.getAttribute('data-module') === module) {
                    link.classList.add('active');
                    link.setAttribute('aria-current', 'page');
                } else {
                    link.classList.remove('active');
                    link.removeAttribute('aria-current');
                }
            });

            contentSections.forEach(section => {
                if (section.id === module) {
                    section.classList.add('active');
                    section.setAttribute('aria-hidden', 'false');
                    // Set focus to the heading of the active section for accessibility
                    const heading = section.querySelector('h2');
                    if (heading) {
                        heading.focus();
                    }
                } else {
                    section.classList.remove('active');
                    section.setAttribute('aria-hidden', 'true');
                }
            });
        }

        // Function to show modal
        function showModal(modalElement, contentHTML) {
            const modalContentDiv = modalElement.querySelector('.modal-content > div');
            if (modalContentDiv) {
                 modalContentDiv.innerHTML = contentHTML;
            }
            modalElement.classList.add('visible');
            modalElement.setAttribute('aria-hidden', 'false');
            // Set focus to the modal content or close button
            const closeButton = modalElement.querySelector('.modal-close-button');
            if (closeButton) {
                closeButton.focus();
            }
        }

        // Function to hide modal
        function hideModal(modalElement) {
            modalElement.classList.remove('visible');
            modalElement.setAttribute('aria-hidden', 'true');
             // Return focus to the element that opened the modal (requires tracking)
             // For simplicity here, we won't track, but in a real app, store event.target on showModal
        }

        // Event Listeners

        // Language switcher
        languageSelect.addEventListener('change', (event) => {
            updateContent(event.target.value);
        });

        // Navigation
        navLinks.forEach(link => {
            link.addEventListener('click', (event) => {
                event.preventDefault();
                const module = event.target.getAttribute('data-module');
                navigateTo(module);
            });
        });

        // Modal close buttons
        modalCloseButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const modal = event.target.closest('.modal-overlay');
                if (modal) {
                    hideModal(modal);
                }
            });
        });

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target.classList.contains('modal-overlay')) {
                hideModal(event.target);
            }
        });

         // Close modal on Escape key
        window.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                if (glossaryModal.classList.contains('visible')) {
                    hideModal(glossaryModal);
                }
                 if (culturalNotesModal.classList.contains('visible')) {
                    hideModal(culturalNotesModal);
                }
            }
        });


        // Glossary triggers (using event delegation for potential future elements)
        document.addEventListener('click', (event) => {
            if (event.target.classList.contains('glossary-trigger')) {
                const termKey = event.target.getAttribute('data-term');
                const currentLang = languageSelect.value;
                const term = content[currentLang][`glossary-${termKey}-term`] || termKey;
                const definition = content[currentLang][`glossary-${termKey}-def`] || 'Definition not available.';
                const contentHTML = `<h4>${term}</h4><p>${definition}</p>`;
                showModal(glossaryModal, contentHTML);
            }
        });

        // Cultural Notes triggers (using event delegation)
         document.addEventListener('click', (event) => {
            if (event.target.classList.contains('cultural-notes-trigger')) {
                const noteKey = event.target.getAttribute('data-note');
                const currentLang = languageSelect.value;
                const title = content[currentLang][`cultural-notes-${noteKey}-title`] || 'Cultural Note';
                const text = content[currentLang][`cultural-notes-${noteKey}-text`] || 'Cultural note not available.';
                const contentHTML = `<h4>${title}</h4><p>${text}</p>`;
                showModal(culturalNotesModal, contentHTML);
            }
        });


        // Assessment Form Progress (Placeholder logic)
        if (assessmentForm && formInputs && progressDiv && progressBar) {
            formInputs.forEach(input => {
                input.addEventListener('input', updateAssessmentProgress);
                input.addEventListener('change', updateAssessmentProgress); // For checkboxes/radios
            });

            function updateAssessmentProgress() {
                let completed = 0;
                const total = formInputs.length;

                formInputs.forEach(input => {
                    if (input.type === 'checkbox' || input.type === 'radio') {
                        if (input.checked) {
                            completed++;
                        }
                    } else if (input.value.trim() !== '') {
                        completed++;
                    }
                });

                // Avoid dividing by zero if no inputs
                const percentage = total > 0 ? (completed / total) * 100 : 0;
                progressDiv.style.width = percentage + '%';
                progressBar.setAttribute('aria-valuenow', percentage.toFixed(0));
            }

            // Initial progress update
            updateAssessmentProgress();
        }


        // Initialize
        updateContent(languageSelect.value);
        // navigateTo('guide'); // Already active by default in HTML
    </script>

</body>
</html>
