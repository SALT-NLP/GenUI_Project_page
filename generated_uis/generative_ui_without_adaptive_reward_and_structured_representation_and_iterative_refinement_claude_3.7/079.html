<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Theater</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6200EE; /* A vibrant purple */
            --primary-color-dark: #3700B3;
            --accent-color: #03DAC6; /* A contrasting teal */
            --background-color: #FFFFFF;
            --surface-color: #F5F5F5; /* Light grey for cards/sections */
            --text-color: #212121; /* Dark grey */
            --text-color-light: #616161; /* Medium grey */
            --error-color: #B00020; /* Red */
            --success-color: #4CAF50; /* Green */

            --spacing-unit: 8px;
            --border-radius: 8px;
            --transition-duration: 0.3s;

            --header-height: 60px;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding-top: var(--header-height); /* Space for fixed header */
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            color: var(--primary-color-dark);
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        header {
            background-color: var(--surface-color);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 4);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 100;
            height: var(--header-height);
            box-sizing: border-box;
        }

        .logo {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            margin-right: calc(var(--spacing-unit) * 4);
        }

        nav {
            display: flex;
            align-items: center;
        }

        .nav-links {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: calc(var(--spacing-unit) * 3);
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 600;
            padding: var(--spacing-unit) 0;
            transition: color var(--transition-duration) ease;
        }

        .nav-links a:hover,
        .nav-links a:focus {
            color: var(--primary-color);
        }

        .hamburger {
            display: none; /* Hidden on desktop */
            cursor: pointer;
            font-size: 1.8em;
            background: none;
            border: none;
            color: var(--text-color);
            padding: 0;
            margin-left: calc(var(--spacing-unit) * 3);
        }

        main {
            padding: calc(var(--spacing-unit) * 4);
            max-width: 1200px;
            margin: 0 auto;
        }

        section {
            margin-bottom: calc(var(--spacing-unit) * 8);
            padding: calc(var(--spacing-unit) * 4);
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        #performances h2 {
             text-align: center;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: calc(var(--spacing-unit) * 4);
        }

        .performance-card {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform var(--transition-duration) ease, box-shadow var(--transition-duration) ease;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: var(--text-color);
        }

        .performance-card:hover,
        .performance-card:focus {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        .performance-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        .performance-card-content {
            padding: calc(var(--spacing-unit) * 2);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .performance-card h3 {
            margin-top: 0;
            margin-bottom: var(--spacing-unit);
            font-size: 1.3em;
            color: var(--primary-color-dark);
        }

        .performance-card p {
            margin-bottom: var(--spacing-unit);
            font-size: 0.9em;
            color: var(--text-color-light);
            flex-grow: 1;
        }

        .performance-card .dates {
            font-size: 0.8em;
            font-weight: 600;
            color: var(--primary-color);
        }

        /* Performance Detail Page */
        #performance-detail {
            display: none; /* Hidden by default */
        }

        .detail-container {
            display: flex;
            gap: calc(var(--spacing-unit) * 6);
            flex-wrap: wrap;
        }

        .detail-image {
            flex: 1 1 300px;
            max-width: 400px;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .detail-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        .detail-content {
            flex: 2 1 400px;
        }

        .detail-content h2 {
            margin-top: 0;
        }

        .performance-schedule {
            margin-top: calc(var(--spacing-unit) * 4);
        }

        .schedule-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .schedule-item {
            background-color: var(--surface-color);
            padding: calc(var(--spacing-unit) * 2);
            margin-bottom: var(--spacing-unit);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .schedule-item span {
            font-weight: 600;
        }

        .schedule-item button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color var(--transition-duration) ease;
        }

        .schedule-item button:hover,
        .schedule-item button:focus {
            background-color: var(--primary-color-dark);
        }

        /* Ticket Purchase Workflow */
        #ticket-purchase {
            display: none; /* Hidden by default */
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: calc(var(--spacing-unit) * 4);
            position: relative;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--surface-color);
            transform: translateY(-50%);
            z-index: 0;
        }

        .step-indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--surface-color);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 700;
            color: var(--text-color-light);
            position: relative;
            z-index: 1;
            transition: background-color var(--transition-duration) ease, color var(--transition-duration) ease;
        }

        .step-indicator.active {
            background-color: var(--primary-color);
            color: white;
        }
         .step-indicator.completed {
            background-color: var(--success-color);
            color: white;
        }

        .step-label {
            text-align: center;
            font-size: 0.9em;
            color: var(--text-color-light);
            margin-top: var(--spacing-unit);
        }

        .step-indicator.active + .step-label,
        .step-indicator.completed + .step-label {
             color: var(--primary-color-dark);
        }


        .step-content {
            border: 1px solid var(--surface-color);
            padding: calc(var(--spacing-unit) * 4);
            border-radius: var(--border-radius);
            margin-top: calc(var(--spacing-unit) * 4);
        }

        .step-content h3 {
            margin-top: 0;
        }

        .step-content > div {
            display: none; /* Hide all step content divs initially */
        }

        .step-content > div.active {
            display: block; /* Show active step content */
        }

        /* Seat Selection */
        .seat-selection-layout {
            display: flex;
            gap: calc(var(--spacing-unit) * 4);
            flex-wrap: wrap;
        }

        .seat-map-container {
            flex: 2 1 400px;
            background-color: var(--surface-color);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius);
            overflow: auto; /* Enable scrolling if map is large */
            position: relative; /* Needed for potential zoom/pan */
        }

        .seat-map {
            display: grid;
            gap: var(--spacing-unit);
            /* Example grid - this would be dynamic based on theater layout */
            grid-template-columns: repeat(15, 30px);
            grid-template-rows: repeat(10, 30px);
            justify-content: center; /* Center the map */
        }

        .seat {
            width: 30px;
            height: 30px;
            background-color: #E0E0E0; /* Available */
            border-radius: var(--border-radius);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.7em;
            cursor: pointer;
            transition: background-color var(--transition-duration) ease, transform 0.1s ease;
            user-select: none;
            border: 1px solid #BDBDBD;
        }

        .seat:hover:not(.sold):not(.selected) {
            background-color: #C5E1A5; /* Light green hover */
            transform: scale(1.05);
        }

        .seat.selected {
            background-color: var(--accent-color); /* Teal selected */
            color: white;
            border-color: var(--accent-color);
            transform: scale(1.05);
        }

        .seat.sold {
            background-color: #EF9A9A; /* Light red sold */
            cursor: not-allowed;
            opacity: 0.7;
            border-color: #E57373;
        }

        .seat-summary {
            flex: 1 1 250px;
            background-color: var(--surface-color);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: var(--border-radius);
            align-self: flex-start; /* Align to top */
        }

        .seat-summary h4 {
            margin-top: 0;
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        #selected-seats-list {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 150px;
            overflow-y: auto;
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        #selected-seats-list li {
            background-color: var(--background-color);
            padding: var(--spacing-unit);
            margin-bottom: var(--spacing-unit);
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
        }

        #selected-seats-list li button {
            background: none;
            border: none;
            color: var(--error-color);
            cursor: pointer;
            font-size: 1.2em;
            padding: 0 var(--spacing-unit);
        }

        #total-price {
            font-size: 1.2em;
            font-weight: 700;
            margin-top: calc(var(--spacing-unit) * 2);
            border-top: 1px solid #E0E0E0;
            padding-top: var(--spacing-unit) * 2;
        }

        /* Checkout Form */
        .checkout-form label {
            display: block;
            margin-bottom: var(--spacing-unit);
            font-weight: 600;
            color: var(--text-color-light);
        }

        .checkout-form input[type="text"],
        .checkout-form input[type="email"],
        .checkout-form input[type="tel"] {
            width: 100%;
            padding: var(--spacing-unit) * 1.5;
            margin-bottom: calc(var(--spacing-unit) * 3);
            border: 1px solid #BDBDBD;
            border-radius: var(--border-radius);
            font-size: 1em;
            box-sizing: border-box;
        }

        .checkout-form input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(98, 0, 238, 0.2);
        }

        .form-group {
            margin-bottom: calc(var(--spacing-unit) * 4);
        }

        /* Payment Integration Placeholder */
        .payment-placeholder {
            background-color: #FFF9C4; /* Light yellow */
            padding: calc(var(--spacing-unit) * 3);
            border: 1px dashed #FBC02D;
            border-radius: var(--border-radius);
            color: #F57F17; /* Darker yellow */
            margin-top: calc(var(--spacing-unit) * 4);
        }

        /* Navigation Buttons */
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: calc(var(--spacing-unit) * 4);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: background-color var(--transition-duration) ease, opacity var(--transition-duration) ease;
        }

        button:hover,
        button:focus {
            background-color: var(--primary-color-dark);
        }

        button:disabled {
            background-color: #BDBDBD;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .button-secondary {
            background-color: var(--surface-color);
            color: var(--text-color);
            border: 1px solid #BDBDBD;
        }

        .button-secondary:hover,
        .button-secondary:focus {
            background-color: #E0E0E0;
        }


        /* Confirmation Page Placeholder */
        #order-confirmation {
             display: none; /* Hidden by default */
             text-align: center;
        }

        #order-confirmation h3 {
            color: var(--success-color);
        }

        /* Digital Ticket Placeholder */
        #digital-ticket {
            display: none; /* Hidden by default */
            text-align: center;
        }

        #digital-ticket h3 {
            margin-bottom: calc(var(--spacing-unit) * 3);
        }

        .qr-code-placeholder {
            width: 150px;
            height: 150px;
            background-color: #E0E0E0;
            margin: calc(var(--spacing-unit) * 3) auto;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9em;
            color: var(--text-color-light);
            border-radius: var(--border-radius);
        }

        /* Admin Dashboard Placeholder */
        #admin-dashboard {
            display: none; /* Hidden by default */
        }

        /* Mobile Ticket Scanner Placeholder */
        #ticket-scanner {
            display: none; /* Hidden by default */
            text-align: center;
        }

        .scanner-viewfinder {
            width: 250px;
            height: 250px;
            border: 2px solid var(--accent-color);
            margin: calc(var(--spacing-unit) * 4) auto;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color-light);
            font-size: 0.9em;
        }

        .scan-result {
            margin-top: calc(var(--spacing-unit) * 3);
            font-size: 1.1em;
            font-weight: 600;
        }

        .scan-result.valid {
            color: var(--success-color);
        }

        .scan-result.invalid {
            color: var(--error-color);
        }


        footer {
            background-color: var(--surface-color);
            padding: calc(var(--spacing-unit) * 4);
            text-align: center;
            color: var(--text-color-light);
            margin-top: calc(var(--spacing-unit) * 8);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .nav-links {
                display: none; /* Hide desktop nav */
                flex-direction: column;
                position: absolute;
                top: var(--header-height);
                left: 0;
                width: 100%;
                background-color: var(--surface-color);
                box-shadow: 0 4px 4px rgba(0, 0, 0, 0.1);
                padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
                gap: var(--spacing-unit) * 2;
                transform: translateY(-100%);
                transition: transform var(--transition-duration) ease-in-out;
            }

            .nav-links.active {
                display: flex; /* Show mobile nav */
                transform: translateY(0);
            }

            .hamburger {
                display: block; /* Show hamburger */
            }

            header {
                 padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            }

            main {
                padding: calc(var(--spacing-unit) * 2);
            }

            section {
                 padding: calc(var(--spacing-unit) * 2);
                 margin-bottom: calc(var(--spacing-unit) * 4);
            }

            .detail-container {
                flex-direction: column;
            }

            .detail-image {
                max-width: 100%;
            }

            .seat-selection-layout {
                flex-direction: column;
            }

            .seat-summary {
                width: 100%;
                box-sizing: border-box;
            }

            .seat-map-container {
                 width: 100%;
                 box-sizing: border-box;
            }

            .seat-map {
                 grid-template-columns: repeat(auto-fit, 30px); /* Adjust columns for smaller screens */
            }

            .button-group {
                 flex-direction: column;
                 gap: var(--spacing-unit) * 2;
            }

            .button-group button {
                 width: 100%;
                 text-align: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <a href="#" class="logo">Community Theater</a>
        <nav>
            <ul class="nav-links" id="navLinks">
                <li><a href="#" data-section="performances">Shows</a></li>
                <li><a href="#" data-section="ticket-purchase">Buy Tickets</a></li>
                <li><a href="#" data-section="admin-dashboard">Admin (Placeholder)</a></li>
                <li><a href="#" data-section="ticket-scanner">Scanner (Placeholder)</a></li>
            </ul>
            <button class="hamburger" id="hamburger">☰</button>
        </nav>
    </header>

    <main>
        <!-- Performances Listing Section -->
        <section id="performances">
            <h2>Upcoming Performances</h2>
            <div class="performance-grid">
                <!-- Example Performance Card -->
                <a href="#" class="performance-card" data-section="performance-detail">
                    <img src="https://placehold.co/400x200?text=Play+Title+1" alt="Placeholder image for Play Title 1">
                    <div class="performance-card-content">
                        <h3>Play Title 1</h3>
                        <p>A brief, engaging description of Play Title 1. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                        <div class="dates">Dates: Oct 10 - Oct 20, 2023</div>
                    </div>
                </a>
                <!-- Repeat for other performances -->
                 <a href="#" class="performance-card" data-section="performance-detail">
                    <img src="https://placehold.co/400x200?text=Play+Title+2" alt="Placeholder image for Play Title 2">
                    <div class="performance-card-content">
                        <h3>Play Title 2</h3>
                        <p>Another exciting production! Suspendisse potenti. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                         <div class="dates">Dates: Nov 5 - Nov 15, 2023</div>
                    </div>
                </a>
                <a href="#" class="performance-card" data-section="performance-detail">
                    <img src="https://placehold.co/400x200?text=Play+Title+3" alt="Placeholder image for Play Title 3">
                    <div class="performance-card-content">
                        <h3>Play Title 3</h3>
                        <p>A classic reborn. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                         <div class="dates">Dates: Dec 1 - Dec 10, 2023</div>
                    </div>
                </a>
            </div>
        </section>

        <!-- Performance Detail Section -->
        <section id="performance-detail">
            <button class="button-secondary" onclick="showSection('performances')">← Back to Shows</button>
            <div class="detail-container">
                <div class="detail-image">
                    <img src="https://placehold.co/600x400?text=Play+Detail+Image" alt="Placeholder image for detailed play view">
                </div>
                <div class="detail-content">
                    <h2>Detailed Play Title</h2>
                    <p>This is a more detailed synopsis of the play. It includes information about the plot, themes, and maybe some background on the playwright. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
                    <p><strong>Cast & Crew:</strong> Lorem ipsum, Dolor sit amet, Consectetur adipiscing, etc.</p>

                    <div class="performance-schedule">
                        <h3>Performance Dates & Times</h3>
                        <ul class="schedule-list">
                            <!-- Example schedule items -->
                            <li class="schedule-item">
                                <span>Oct 15, 2023 - 7:30 PM</span>
                                <button class="buy-tickets-btn">Buy Tickets</button>
                            </li>
                             <li class="schedule-item">
                                <span>Oct 16, 2023 - 2:00 PM (Matinee)</span>
                                <button class="buy-tickets-btn">Buy Tickets</button>
                            </li>
                             <li class="schedule-item">
                                <span>Oct 16, 2023 - 7:30 PM</span>
                                <button class="buy-tickets-btn">Buy Tickets</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ticket Purchase Workflow Section -->
        <section id="ticket-purchase">
            <h2>Buy Tickets</h2>
            <div class="progress-steps">
                <div style="display: flex; flex-direction: column; align-items: center;">
                    <div class="step-indicator active" data-step="1">1</div>
                    <div class="step-label">Performance</div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: center;">
                     <div class="step-indicator" data-step="2">2</div>
                     <div class="step-label">Seats</div>
                </div>
                 <div style="display: flex; flex-direction: column; align-items: center;">
                     <div class="step-indicator" data-step="3">3</div>
                     <div class="step-label">Checkout</div>
                </div>
                 <div style="display: flex; flex-direction: column; align-items: center;">
                     <div class="step-indicator" data-step="4">4</div>
                     <div class="step-label">Confirmation</div>
                </div>
            </div>

            <div class="step-content">
                <div class="step-1 active">
                    <h3>Select Performance</h3>
                    <p>Choose a date and time from the list below.</p>
                    <!-- This would dynamically load performance times for the selected play -->
                     <ul class="schedule-list">
                            <!-- Example schedule items - similar to detail page -->
                            <li class="schedule-item">
                                <span>Oct 15, 2023 - 7:30 PM</span>
                                <button class="select-performance-btn">Select</button>
                            </li>
                             <li class="schedule-item">
                                <span>Oct 16, 2023 - 2:00 PM (Matinee)</span>
                                <button class="select-performance-btn">Select</button>
                            </li>
                             <li class="schedule-item">
                                <span>Oct 16, 2023 - 7:30 PM</span>
                                <button class="select-performance-btn">Select</button>
                            </li>
                        </ul>
                     <div class="button-group">
                         <button class="button-secondary" onclick="showSection('performances')">← Back to Shows</button>
                         <!-- Button to proceed to next step - enabled by JS after selection -->
                         <button id="next-step-1" disabled>Next: Select Seats →</button>
                     </div>
                </div>

                <div class="step-2">
                    <h3>Select Your Seats</h3>
                     <div class="seat-selection-layout">
                         <div class="seat-map-container">
                             <h4>Stage is Here ↑</h4>
                             <div class="seat-map" id="seatMap">
                                 <!-- Seats will be dynamically generated here -->
                                 <!-- Example Seat: -->
                                 <!-- <div class="seat" data-seat-id="A1" data-price="25">A1</div> -->
                             </div>
                         </div>
                         <div class="seat-summary">
                             <h4>Your Selection</h4>
                             <ul id="selected-seats-list">
                                 <!-- Selected seats will appear here -->
                             </ul>
                             <div id="total-price">Total: $0.00</div>
                             <div class="button-group" style="margin-top: calc(var(--spacing-unit) * 3);">
                                <button class="button-secondary" onclick="prevStep()">← Previous</button>
                                <button id="next-step-2" disabled onclick="nextStep()">Next: Checkout →</button>
                             </div>
                         </div>
                     </div>
                </div>

                <div class="step-3">
                    <h3>Checkout</h3>
                    <p>Please provide your contact and payment information.</p>
                    <form class="checkout-form">
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" name="fullName" required>
                        </div>
                         <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                         <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone">
                        </div>

                        <h4>Payment Information</h4>
                        <div class="payment-placeholder">
                            <p>Payment Gateway Integration Placeholder</p>
                            <p>Secure payment fields would appear here (e.g., provided by Stripe, PayPal, etc.).</p>
                            <p><strong>Note:</strong> This is a placeholder. Real payment processing requires a secure backend integration.</p>
                        </div>
                         <div class="button-group">
                            <button class="button-secondary" onclick="prevStep()">← Previous</button>
                            <button type="submit">Complete Purchase</button>
                         </div>
                    </form>
                </div>

                <div class="step-4">
                    <h3>Order Confirmation</h3>
                    <p>Thank you for your purchase!</p>
                    <p>Your order has been confirmed. A confirmation email with your digital tickets will be sent shortly.</p>
                    <p><strong>Order Number:</strong> [Placeholder Order Number]</p>
                    <div class="button-group">
                        <button onclick="showSection('performances')">Back to Shows</button>
                        <button onclick="showSection('digital-ticket')">View Digital Ticket (Placeholder)</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Order Confirmation Section (Direct Link/Email) -->
        <section id="order-confirmation">
             <h3>Order Confirmed!</h3>
             <p>Your tickets are on their way to your email address.</p>
             <p>Thank you for supporting our community theater!</p>
             <button onclick="showSection('performances')">Return to Shows</button>
        </section>


        <!-- Digital Ticket Display Section (Placeholder) -->
        <section id="digital-ticket">
            <h3>Your Digital Ticket</h3>
            <p>Present this code for scanning at the door.</p>
            <div class="qr-code-placeholder">
                QR Code Placeholder
            </div>
            <p><strong>Play:</strong> [Play Title]</p>
            <p><strong>Date:</strong> [Date & Time]</p>
            <p><strong>Seat(s):</strong> [Seat Numbers]</p>
            <p><strong>Ticket Holder:</strong> [Name]</p>
             <div class="button-group">
                <button onclick="showSection('performances')">Back to Shows</button>
             </div>
        </section>

        <!-- Admin Dashboard Section (Placeholder) -->
        <section id="admin-dashboard">
            <h2>Admin Dashboard (Placeholder)</h2>
            <p>This area would be for managing shows, performances, orders, etc.</p>
            <p>Requires user authentication and backend implementation.</p>
             <div class="button-group">
                <button onclick="showSection('performances')">Back to Public Site</button>
             </div>
        </section>

        <!-- Mobile Ticket Scanner Section (Placeholder) -->
        <section id="ticket-scanner">
            <h2>Ticket Scanner (Placeholder)</h2>
            <p>For volunteer ushers to scan digital tickets.</p>
            <div class="scanner-viewfinder">
                Camera Viewfinder Placeholder
            </div>
            <button>Activate Scanner</button>
            <div class="scan-result">Scan result will appear here...</div>
             <div class="button-group">
                <button onclick="showSection('performances')">Back to Public Site</button>
             </div>
        </section>

    </main>

    <footer>
        <p>&copy; 2023 Community Theater. All rights reserved.</p>
    </footer>

    <script>
        const navLinks = document.getElementById('navLinks');
        const hamburger = document.getElementById('hamburger');
        const sections = document.querySelectorAll('main section');
        const performanceCards = document.querySelectorAll('.performance-card');
        const buyTicketsBtns = document.querySelectorAll('.buy-tickets-btn, .select-performance-btn');
        const ticketPurchaseSection = document.getElementById('ticket-purchase');
        const stepIndicators = document.querySelectorAll('.step-indicator');
        const stepContents = document.querySelectorAll('.step-content > div');
        const nextStep1Btn = document.getElementById('next-step-1');
        const nextStep2Btn = document.getElementById('next-step-2');
        const seatMap = document.getElementById('seatMap');
        const selectedSeatsList = document.getElementById('selected-seats-list');
        const totalPriceElement = document.getElementById('total-price');

        let currentStep = 1;
        let selectedSeats = [];
        const seatPrice = 25; // Example price per seat

        // --- Navigation and Section Switching ---

        // Toggle mobile navigation
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // Hide mobile nav when a link is clicked
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
            });
        });

        // Function to show a specific section and hide others
        function showSection(id) {
            sections.forEach(section => {
                section.style.display = 'none';
            });
            const targetSection = document.getElementById(id);
            if (targetSection) {
                targetSection.style.display = 'block';
            }

            // Reset ticket purchase flow if navigating away
            if (id !== 'ticket-purchase') {
                resetTicketPurchaseFlow();
            }
        }

        // Initial view: Show performances
        showSection('performances');

        // Handle navigation links
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('data-section');
                showSection(targetId);
            });
        });

        // Handle clicks on performance cards to show detail
        performanceCards.forEach(card => {
            card.addEventListener('click', (e) => {
                e.preventDefault();
                // In a real app, you'd load specific play data here
                showSection('performance-detail');
            });
        });

        // Handle clicks on "Buy Tickets" buttons on detail page
        document.querySelectorAll('.buy-tickets-btn').forEach(btn => {
             btn.addEventListener('click', (e) => {
                e.preventDefault();
                // In a real app, you'd pass the selected performance ID
                showSection('ticket-purchase');
                // Automatically advance to step 2 if performance is selected
                // For this placeholder, we'll just show step 1
                // nextStep(); // Uncomment this if you want to skip step 1 after clicking buy on detail
             });
        });

         // Handle clicks on "Select" buttons in step 1
        document.querySelectorAll('.select-performance-btn').forEach(btn => {
             btn.addEventListener('click', (e) => {
                // Visually indicate selection (optional)
                document.querySelectorAll('.schedule-item').forEach(item => item.style.backgroundColor = 'var(--surface-color)');
                e.target.closest('.schedule-item').style.backgroundColor = '#D1C4E9'; // Light purple highlight
                nextStep1Btn.disabled = false; // Enable next button
             });
        });

         nextStep1Btn.addEventListener('click', () => {
             if (!nextStep1Btn.disabled) {
                 nextStep();
             }
         });


        // --- Ticket Purchase Workflow ---

        function updateProgressIndicators() {
            stepIndicators.forEach(indicator => {
                const step = parseInt(indicator.getAttribute('data-step'));
                indicator.classList.remove('active', 'completed');
                if (step < currentStep) {
                    indicator.classList.add('completed');
                } else if (step === currentStep) {
                    indicator.classList.add('active');
                }
            });
        }

        function updateStepContent() {
            stepContents.forEach(content => {
                content.classList.remove('active');
            });
            document.querySelector(`.step-${currentStep}`).classList.add('active');
        }

        function nextStep() {
            if (currentStep < 4) {
                currentStep++;
                updateProgressIndicators();
                updateStepContent();
                // Scroll to the top of the section for better UX on step change
                ticketPurchaseSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgressIndicators();
                updateStepContent();
                 // Scroll to the top of the section for better UX on step change
                ticketPurchaseSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function resetTicketPurchaseFlow() {
            currentStep = 1;
            updateProgressIndicators();
            updateStepContent();
            // Reset step 1 selection
            document.querySelectorAll('.schedule-item').forEach(item => item.style.backgroundColor = 'var(--surface-color)');
            nextStep1Btn.disabled = true;
            // Reset seat selection
            selectedSeats = [];
            renderSeatMap(); // Re-render seat map to clear selections
            updateSeatSummary();
            nextStep2Btn.disabled = true;
            // Reset form (optional)
            const checkoutForm = document.querySelector('.checkout-form');
            if (checkoutForm) checkoutForm.reset();
        }


        // --- Seat Map Interaction ---

        // Example seat map data (simple grid)
        const rows = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'];
        const seatsPerRow = 15;
        const soldSeats = ['A5', 'A6', 'B10', 'C1', 'C2', 'J15']; // Example sold seats

        function renderSeatMap() {
            seatMap.innerHTML = ''; // Clear existing seats
            seatMap.style.gridTemplateColumns = `repeat(${seatsPerRow}, 30px)`; // Set grid columns

            rows.forEach(row => {
                for (let i = 1; i <= seatsPerRow; i++) {
                    const seatId = `${row}${i}`;
                    const seatDiv = document.createElement('div');
                    seatDiv.classList.add('seat');
                    seatDiv.textContent = i; // Show seat number
                    seatDiv.setAttribute('data-seat-id', seatId);
                    seatDiv.setAttribute('data-price', seatPrice);
                    seatDiv.setAttribute('aria-label', `Seat ${seatId} - Available`); // Accessibility

                    if (soldSeats.includes(seatId)) {
                        seatDiv.classList.add('sold');
                        seatDiv.setAttribute('aria-label', `Seat ${seatId} - Sold`);
                    } else if (selectedSeats.some(seat => seat.id === seatId)) {
                         seatDiv.classList.add('selected');
                         seatDiv.setAttribute('aria-label', `Seat ${seatId} - Selected`);
                    } else {
                         seatDiv.addEventListener('click', handleSeatClick);
                         seatDiv.setAttribute('tabindex', '0'); // Make available seats focusable
                         seatDiv.addEventListener('keydown', (e) => {
                             if (e.key === 'Enter' || e.key === ' ') {
                                 handleSeatClick(e);
                             }
                         });
                    }

                    seatMap.appendChild(seatDiv);
                }
            });
        }

        function handleSeatClick(event) {
            const seatElement = event.target;
            const seatId = seatElement.getAttribute('data-seat-id');
            const price = parseFloat(seatElement.getAttribute('data-price'));

            if (seatElement.classList.contains('sold')) {
                return; // Cannot select sold seats
            }

            const isSelected = seatElement.classList.contains('selected');

            if (isSelected) {
                // Deselect seat
                seatElement.classList.remove('selected');
                selectedSeats = selectedSeats.filter(seat => seat.id !== seatId);
                 seatElement.setAttribute('aria-label', `Seat ${seatId} - Available`);
            } else {
                // Select seat
                 if (selectedSeats.length >= 10) { // Limit to 10 seats for example
                     alert('You can select a maximum of 10 seats.');
                     return;
                 }
                seatElement.classList.add('selected');
                selectedSeats.push({ id: seatId, price: price });
                 seatElement.setAttribute('aria-label', `Seat ${seatId} - Selected`);
            }

            updateSeatSummary();
        }

        function updateSeatSummary() {
            selectedSeatsList.innerHTML = '';
            let total = 0;

            if (selectedSeats.length === 0) {
                 selectedSeatsList.innerHTML = '<li>No seats selected yet.</li>';
                 nextStep2Btn.disabled = true;
            } else {
                selectedSeats.forEach(seat => {
                    const listItem = document.createElement('li');
                    listItem.innerHTML = `Seat ${seat.id} ($${seat.price.toFixed(2)}) <button data-seat-id="${seat.id}" aria-label="Remove seat ${seat.id}">×</button>`;
                    selectedSeatsList.appendChild(listItem);
                    total += seat.price;
                });
                 nextStep2Btn.disabled = false; // Enable next button if seats are selected
            }

            totalPriceElement.textContent = `Total: $${total.toFixed(2)}`;

            // Add event listeners to remove buttons
            selectedSeatsList.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', handleRemoveSeat);
            });
        }

        function handleRemoveSeat(event) {
            const seatIdToRemove = event.target.getAttribute('data-seat-id');
            selectedSeats = selectedSeats.filter(seat => seat.id !== seatIdToRemove);

            // Update visual seat map
            const seatElement = seatMap.querySelector(`.seat[data-seat-id="${seatIdToRemove}"]`);
            if (seatElement) {
                seatElement.classList.remove('selected');
                 seatElement.setAttribute('aria-label', `Seat ${seatIdToRemove} - Available`);
            }

            updateSeatSummary();
        }

        // Initialize seat map when the page loads or when step 2 is shown
        // For this simple version, we'll render on page load.
        // In a real app, this would happen when the user selects a performance and moves to step 2.
        renderSeatMap();
        updateSeatSummary(); // Initialize summary


        // --- Checkout Form Submission (Placeholder) ---
        const checkoutForm = document.querySelector('.checkout-form');
        if (checkoutForm) {
            checkoutForm.addEventListener('submit', (e) => {
                e.preventDefault();
                // Basic form validation (more robust validation needed)
                const fullName = document.getElementById('fullName').value;
                const email = document.getElementById('email').value;

                if (!fullName || !email) {
                    alert('Please fill in required fields.');
                    return;
                }

                // In a real app:
                // 1. Collect form data (name, email, phone)
                // 2. Collect selectedSeats data
                // 3. Process payment via integrated gateway (client-side tokenization, then server-side charge)
                // 4. Send data to backend to create order, generate tickets, update seat availability
                // 5. On successful backend response:
                //    - Show confirmation page
                //    - Send digital ticket via email

                alert('Checkout submitted (placeholder). Proceeding to confirmation.'); // Placeholder action
                nextStep(); // Move to confirmation step
            });
        }


        // --- Initial Setup ---
        updateProgressIndicators(); // Set initial step indicator state

    </script>
</body>
</html>
