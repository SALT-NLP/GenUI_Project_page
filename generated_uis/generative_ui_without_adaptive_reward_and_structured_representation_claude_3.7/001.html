<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish Verb Conjugation Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4CAF50; /* Green */
            --primary-dark: #388E3C; /* Darker Green */
            --secondary-color: #FF9800; /* Orange */
            --accent-color: #2196F3; /* Blue */
            --background-color: #f4f6f8; /* Light Grey */
            --surface-color: #ffffff; /* White */
            --text-color-primary: #212121; /* Dark Grey */
            --text-color-secondary: #757575; /* Medium Grey */
            --divider-color: #e0e0e0; /* Light Grey */
            --success-color: #4CAF50;
            --error-color: #F44336;
            --warning-color: #FFC107;
            --border-radius: 8px;
            --spacing-unit: 8px;
            --spacing-xs: calc(var(--spacing-unit) * 0.5); /* 4px */
            --spacing-sm: var(--spacing-unit); /* 8px */
            --spacing-md: calc(var(--spacing-unit) * 2); /* 16px */
            --spacing-lg: calc(var(--spacing-unit) * 3); /* 24px */
            --spacing-xl: calc(var(--spacing-unit) * 4); /* 32px */
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color-primary);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
            flex-direction: column;
            font-size: 16px; /* Base font size for desktop */
        }

        /* Accessibility: Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--accent-color);
            color: var(--surface-color);
            padding: var(--spacing-sm);
            z-index: 2000;
            text-decoration: none;
            transition: top 0.3s ease;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }

        .skip-link:focus {
            top: 0;
            outline: none;
            box-shadow: 0 0 0 3px var(--secondary-color);
        }

        header {
            background-color: var(--primary-color);
            color: var(--surface-color);
            padding: var(--spacing-md) var(--spacing-lg);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            flex-wrap: wrap;
        }

        header h1 {
            margin: 0;
            font-size: 1.8em;
            font-weight: 500;
        }

        .search-bar {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .search-bar input[type="text"] {
            padding: var(--spacing-sm);
            border: none;
            border-radius: var(--border-radius);
            font-size: 1em;
            background-color: rgba(255, 255, 255, 0.9); /* Slightly more opaque */
            color: var(--text-color-primary);
            transition: all 0.3s ease;
            min-width: 200px;
            min-height: 44px; /* Ensure minimum touch target size */
        }

        .search-bar input[type="text"]::placeholder {
            color: var(--text-color-secondary);
        }

        .search-bar input[type="text"]:focus {
            outline: none;
            box-shadow: 0 0 0 3px var(--secondary-color); /* Use secondary for focus */
            background-color: var(--surface-color);
        }

        button {
             padding: var(--spacing-sm) var(--spacing-md);
             background-color: var(--primary-dark);
             color: var(--surface-color);
             border: none;
             border-radius: var(--border-radius);
             cursor: pointer;
             font-size: 1em;
             transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.2s ease;
             min-height: 44px; /* Ensure minimum touch target size */
             min-width: 44px; /* Ensure minimum touch target size */
             font-weight: 500;
        }

        button:hover {
            background-color: var(--secondary-color);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: scale(0.98);
            background-color: color-mix(in srgb, var(--secondary-color) 90%, black); /* Darken on active */
        }

        button:focus {
            outline: none;
            box-shadow: 0 0 0 3px var(--secondary-color);
        }

        .container {
            display: grid;
            grid-template-columns: 250px 1fr; /* Sidebar and main content */
            gap: var(--spacing-lg);
            padding: var(--spacing-lg);
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            flex: 1;
        }

        nav {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); /* Match card shadow */
            padding: var(--spacing-md);
            flex-shrink: 0;
            align-self: start; /* Stick to the top */
            position: sticky; /* Make navigation sticky */
            /* top will be set by JS */
            max-height: calc(100vh - var(--spacing-lg) * 2); /* Limit height */
            overflow-y: auto; /* Add scroll if content overflows */
        }

        nav h2 {
            margin-top: 0;
            font-size: 1.2em;
            color: var(--primary-color);
            border-bottom: 1px solid var(--divider-color);
            padding-bottom: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }

        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        nav li {
            margin-bottom: var(--spacing-xs);
        }

        nav a {
            text-decoration: none;
            color: var(--text-color-primary);
            display: block;
            padding: var(--spacing-sm);
            border-radius: var(--border-radius);
            transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease, box-shadow 0.2s ease;
            font-size: 0.95em;
        }

        nav a:hover {
            background-color: var(--background-color);
            color: var(--primary-dark);
            transform: translateX(var(--spacing-xs)); /* Subtle hover effect */
        }

         nav a:focus {
            outline: none;
            box-shadow: 0 0 0 3px var(--secondary-color);
            background-color: var(--background-color);
            color: var(--primary-dark);
        }

        nav a.active {
            background-color: var(--primary-color);
            color: var(--surface-color);
            font-weight: 500;
            box-shadow: 4px 0 0 0 var(--secondary-color) inset; /* Visual indicator */
        }

        nav a[disabled] {
            color: var(--text-color-secondary);
            cursor: not-allowed;
            opacity: 0.7;
            pointer-events: none; /* Disable click */
            background-color: transparent;
            transform: none;
            box-shadow: none;
        }


        main {
            flex-grow: 1;
        }

        .card {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); /* Subtle shadow */
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
             transform: translateY(-3px); /* Subtle lift effect */
             box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }


        .card h2 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.6em;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--divider-color);
        }

        .card h3 {
            color: var(--accent-color);
            font-size: 1.3em;
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        .card p {
            margin-bottom: var(--spacing-md);
            color: var(--text-color-secondary);
        }

        .card ul {
            margin: var(--spacing-md) 0;
            padding-left: var(--spacing-xl);
        }

        .card li {
            margin-bottom: var(--spacing-sm);
            color: var(--text-color-secondary);
        }

        .card li code {
             font-weight: bold;
             color: var(--primary-dark);
        }

        .card code {
            background-color: var(--background-color);
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            color: var(--text-color-primary);
            font-size: 0.9em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--spacing-md) 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            overflow-x: auto; /* Allow horizontal scrolling on small screens */
            display: block; /* Needed for overflow-x to work */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on touch devices */
        }

        table caption {
            caption-side: top;
            text-align: left;
            font-weight: bold;
            margin-bottom: var(--spacing-sm);
            color: var(--text-color-primary);
            padding: var(--spacing-sm) 0;
        }

        table thead {
             /* Ensure header is visible when scrolling horizontally */
            display: table-header-group;
        }

        th, td {
            padding: var(--spacing-sm) var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--divider-color);
            min-width: 120px; /* Prevent columns from becoming too narrow */
        }

        th {
            background-color: var(--primary-color);
            color: var(--surface-color);
            font-weight: 500;
            white-space: nowrap; /* Prevent header text wrapping */
        }

        tbody tr:nth-child(even) {
            background-color: var(--background-color);
        }

        tbody tr:hover {
            background-color: #eef;
        }

        .pronoun {
            font-weight: bold;
            color: var(--primary-dark);
        }

        .example-sentence {
            font-style: italic;
            color: var(--text-color-secondary);
            margin-top: var(--spacing-md);
            padding-left: var(--spacing-md);
            border-left: 3px solid var(--accent-color);
        }

        /* Interactive Tool Styles */
        .conjugation-tool {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .conjugation-tool .input-group {
            display: flex;
            gap: var(--spacing-sm);
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .conjugation-tool .form-field {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
            min-width: 150px;
        }

        .conjugation-tool label {
            font-size: 0.9em;
            color: var(--text-color-secondary);
            margin-bottom: var(--spacing-xs);
            font-weight: 500;
        }

        .conjugation-tool input[type="text"],
        .conjugation-tool select {
            padding: var(--spacing-sm);
            border: 1px solid var(--divider-color);
            border-radius: var(--border-radius);
            font-size: 1em;
            background-color: var(--background-color);
            color: var(--text-color-primary);
            transition: all 0.3s ease;
             min-height: 44px; /* Ensure minimum touch target size */
             box-sizing: border-box; /* Include padding and border in element's total width and height */
        }

         .conjugation-tool select {
             appearance: none; /* Remove default dropdown arrow */
             background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23757575%22%20d%3D%22M287%2C114.7L159.2%2C242.5c-8.3%2C8.3-21.7%2C8.3-30%2C0L5.4%2C114.7c-8.3-8.3-8.3-21.7%2C0-30l17.7-17.7%20c8.3-8.3%2C21.7-8.3%2C30%2C0l104.4%2C104.6L239.3%2C67c8.3-8.3%2C21.7-8.3%2C30%2C0l17.7%2C17.7C295.3%2C93%2C295.3%2C106.5%2C287%2C114.7z%22%2F%3E%3C%2Fsvg%3E');
             background-repeat: no-repeat;
             background-position: right var(--spacing-sm) center;
             background-size: 12px;
             padding-right: var(--spacing-lg); /* Make space for the arrow */
         }


        .conjugation-tool input[type="text"]:focus,
        .conjugation-tool select:focus {
            outline: none;
            border-color: var(--accent-color);
            background-color: var(--surface-color);
             box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2); /* Accent color shadow */
        }

        .conjugation-tool button {
             flex-shrink: 0; /* Prevent button from shrinking */
        }

        .conjugation-results {
            margin-top: var(--spacing-lg);
            border-top: 1px solid var(--divider-color);
            padding-top: var(--spacing-lg);
            opacity: 0; /* Start hidden for animation */
            transform: translateY(20px); /* Start slightly below for animation */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out; /* Animation */
        }

        .conjugation-results.visible {
             opacity: 1;
             transform: translateY(0);
        }

        .conjugation-results h3 {
            margin-top: 0;
            margin-bottom: var(--spacing-md);
            color: var(--primary-dark);
        }

        .conjugation-results table {
            /* Table styles already defined */
        }

        .conjugation-results table th {
            background-color: var(--accent-color);
            color: var(--surface-color);
        }

        .conjugation-results table tbody tr:hover {
            background-color: #eef;
        }

        .conjugation-results .error-message,
        .conjugation-results .warning-message {
            font-weight: bold;
            margin-top: var(--spacing-md);
            padding: var(--spacing-sm);
            border-radius: var(--border-radius);
        }
         .conjugation-results .error-message {
             color: var(--error-color);
             background-color: rgba(244, 67, 54, 0.1);
             border: 1px solid var(--error-color);
         }
         .conjugation-results .warning-message {
             color: var(--warning-color);
             background-color: rgba(255, 193, 7, 0.1);
             border: 1px solid var(--warning-color);
         }


        /* Practice Exercise Styles */
        .practice-exercise {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .practice-exercise .exercise-prompt {
            font-size: 1.1em;
            color: var(--text-color-primary);
            background-color: var(--background-color);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            border: 1px dashed var(--divider-color);
        }

        .practice-exercise .input-area {
             display: flex;
             gap: var(--spacing-sm);
             align-items: flex-end;
             flex-wrap: wrap;
        }

        .practice-exercise input[type="text"] {
             padding: var(--spacing-sm);
             border: 1px solid var(--divider-color);
             border-radius: var(--border-radius);
             font-size: 1em;
             background-color: var(--background-color);
             color: var(--text-color-primary);
             transition: all 0.3s ease;
             flex-grow: 1;
             min-width: 150px;
             min-height: 44px; /* Ensure minimum touch target size */
             box-sizing: border-box;
        }

         .practice-exercise input[type="text"]:focus {
            outline: none;
            border-color: var(--accent-color);
            background-color: var(--surface-color);
             box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2); /* Accent color shadow */
        }

        .practice-exercise button {
             flex-shrink: 0;
        }

        .practice-exercise .feedback-area {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            min-height: 50px;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
            font-weight: 500;
        }

        .practice-exercise .feedback-area.success {
            background-color: rgba(76, 175, 80, 0.1); /* Green with opacity */
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

         .practice-exercise .feedback-area.error {
            background-color: rgba(244, 67, 54, 0.1); /* Red with opacity */
            color: var(--error-color);
            border: 1px solid var(--error-color);
        }

         .practice-exercise .feedback-area.warning {
            background-color: rgba(255, 193, 7, 0.1); /* Amber with opacity */
            color: var(--warning-color);
            border: 1px solid var(--warning-color);
        }

        /* Tooltip styles */
        .tooltip-trigger {
            text-decoration: underline dotted var(--text-color-secondary);
            cursor: help;
            position: relative;
            display: inline-block; /* Needed for relative positioning */
            outline: none; /* Remove default outline */
        }

         .tooltip-trigger:focus {
             outline: none; /* Ensure outline is removed */
             box-shadow: 0 0 0 2px var(--accent-color); /* Custom focus indicator */
             border-radius: 2px; /* Apply border-radius to focus indicator */
         }

        .tooltip-content {
            visibility: hidden; /* Use visibility for smooth transition */
            opacity: 0;
            position: absolute;
            bottom: 125%; /* Position above the trigger */
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-color-primary);
            color: var(--surface-color);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--border-radius);
            font-size: 0.9em;
            white-space: nowrap;
            z-index: 10;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            pointer-events: none; /* Allows clicking through the tooltip */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%; /* Position the arrow below the tooltip */
            left: 50%;
            margin-left: -5px; /* Center the arrow */
            border-width: 5px;
            border-style: solid;
            border-color: var(--text-color-primary) transparent transparent transparent;
        }

        .tooltip-trigger:hover .tooltip-content,
        .tooltip-trigger:focus .tooltip-content { /* Add focus state for accessibility */
            visibility: visible;
            opacity: 1;
        }

        /* Visually hidden class for accessibility */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            margin: -1px;
            padding: 0;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) { /* Tablet breakpoint */
             .container {
                grid-template-columns: 200px 1fr; /* Slightly smaller sidebar */
                gap: var(--spacing-md);
                padding: var(--spacing-md);
            }

            nav {
                width: 200px; /* Match grid column */
                padding: var(--spacing-md);
                /* top will be set by JS */
                max-height: calc(100vh - var(--spacing-md) * 2); /* Adjust max height */
            }

            header {
                 padding: var(--spacing-md);
            }

             header h1 {
                font-size: 1.6em;
            }

            .search-bar input[type="text"] {
                min-width: 150px;
            }

            .card {
                padding: var(--spacing-md);
                margin-bottom: var(--spacing-md);
            }

            .card h2 {
                font-size: 1.4em;
            }

             .card h3 {
                font-size: 1.1em;
            }

            table th, table td {
                padding: var(--spacing-sm) var(--spacing-md);
            }

            .conjugation-tool .input-group,
            .practice-exercise .input-area {
                 flex-direction: column; /* Stack inputs on tablet */
                 align-items: stretch;
            }

             .conjugation-tool .form-field,
             .practice-exercise input[type="text"],
             .conjugation-tool button,
             .practice-exercise button {
                 width: 100%; /* Make fields and buttons full width */
                 min-width: auto;
             }

        }


        @media (max-width: 768px) { /* Mobile breakpoint */
            header {
                flex-direction: column;
                align-items: flex-start;
                padding: var(--spacing-md);
            }

            header h1 {
                font-size: 1.5em;
            }

            .search-bar {
                margin-top: var(--spacing-sm);
                width: 100%;
                flex-direction: column;
                align-items: stretch;
                gap: var(--spacing-sm);
            }

            .search-bar input[type="text"] {
                width: 100%;
                min-width: auto;
            }

            .search-bar button {
                 width: 100%;
            }

            .container {
                grid-template-columns: 1fr; /* Stacked layout */
                padding: var(--spacing-md);
                gap: var(--spacing-md);
            }

            nav {
                width: 100%;
                order: -1; /* Place navigation above main content */
                position: static; /* Remove sticky on mobile */
                max-height: none; /* Remove max height */
                overflow-y: visible; /* Remove scroll */
                box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* Lighter shadow on mobile */
            }

            nav h2 {
                margin-bottom: var(--spacing-sm);
            }

            nav ul {
                display: flex; /* Use flex for horizontal list on mobile */
                flex-wrap: wrap; /* Allow items to wrap */
                gap: var(--spacing-sm); /* Add gap between items */
            }

            nav li {
                margin-bottom: 0; /* Remove bottom margin */
            }

            nav a {
                 padding: var(--spacing-xs) var(--spacing-sm); /* Smaller padding */
                 font-size: 1em;
                 transform: none; /* Remove hover transform */
            }

             nav a:hover {
                 transform: none;
             }

             nav a.active {
                box-shadow: 0 2px 0 0 var(--secondary-color) inset; /* Use bottom inset shadow */
             }

            .card {
                padding: var(--spacing-md);
                margin-bottom: var(--spacing-md);
            }

            .card:hover {
                transform: none; /* Remove lift effect on mobile */
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08); /* Keep base shadow */
            }

            .card h2 {
                font-size: 1.3em;
            }

             .card h3 {
                font-size: 1em;
            }

            table {
                /* Table overflow handled by display: block and overflow-x: auto */
            }

             table th, table td {
                padding: var(--spacing-sm);
                min-width: 100px;
            }

            .tooltip-content {
                /* Adjust tooltip positioning for smaller screens if needed */
                bottom: auto;
                top: 125%; /* Position below trigger */
                left: 0;
                transform: translateX(0);
                white-space: normal; /* Allow text wrapping */
                width: 150px; /* Set a max width */
            }

             .tooltip-content::after {
                top: auto;
                bottom: 100%; /* Position arrow above tooltip */
                left: 10px; /* Adjust arrow position */
                margin-left: 0;
                border-color: transparent transparent var(--text-color-primary) transparent;
            }

             .conjugation-tool .input-group,
            .practice-exercise .input-area {
                 flex-direction: column; /* Stack inputs on mobile */
                 align-items: stretch;
            }

             .conjugation-tool .form-field,
             .practice-exercise input[type="text"],
             .conjugation-tool button,
             .practice-exercise button {
                 width: 100%; /* Make fields and buttons full width */
                 min-width: auto;
             }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <header>
        <h1>Spanish Verb Conjugation</h1>
        <div class="search-bar">
            <label for="verb-search" class="visually-hidden">Search Verb or Topic</label>
            <input type="text" id="verb-search" placeholder="Search for a verb or topic...">
            <button aria-label="Search">Search</button>
        </div>
    </header>

    <div class="container">
        <nav aria-label="Main Navigation">
            <h2>Topics</h2>
            <ul>
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#regular-verbs">Regular Verbs</a></li>
                <li><a href="#ar-verbs">-AR Verbs</a></li>
                <li><a href="#er-verbs">-ER Verbs</a></li>
                <li><a href="#ir-verbs">-IR Verbs</a></li>
                <li><a href="#present-indicative">Present Indicative</a></li>
                <li><a href="#preterite">Preterite</a></li>
                <li><a href="#imperfect">Imperfect</a></li>
                <li><a href="#future">Future</a></li>
                <li><a href="#conditional">Conditional</a></li>
                <li><a href="#subjunctive">Subjunctive Mood</a></li>
                <li><a href="#imperative">Imperative Mood</a></li>
                <li><a href="#irregular-verbs" disabled>Irregular Verbs (Coming Soon)</a></li>
                <li><a href="#interactive-tool">Conjugation Tool</a></li>
                <li><a href="#practice" disabled>Practice Exercises (Coming Soon)</a></li>
            </ul>
        </nav>

        <main id="main-content">
            <section id="introduction" class="card" role="region" aria-labelledby="introduction-heading">
                <h2 id="introduction-heading">Understanding Spanish Verb Conjugation</h2>
                <p>Spanish verbs change their ending depending on who is doing the action (the subject pronoun) and when the action happens (the tense or mood).</p>
                <p>This process of changing the verb ending is called <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-conjugation">conjugation<span id="tooltip-conjugation" class="tooltip-content" role="tooltip">The process of changing a verb's form to reflect person, number, tense, mood, etc.</span></span>. It's a fundamental part of speaking and understanding Spanish.</p>
                <p>Every Spanish verb has an <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-infinitive">infinitive<span id="tooltip-infinitive" class="tooltip-content" role="tooltip">The basic, unconjugated form of a verb (e.g., "to speak" in English, "hablar" in Spanish).</span></span> form, which is the base form of the verb before any changes are made. Spanish infinitives always end in -ar, -er, or -ir.</p>
                <ul>
                    <li>-AR verbs: <code>hablar</code> (to speak), <code>cantar</code> (to sing), <code>bailar</code> (to dance)</li>
                    <li>-ER verbs: <code>comer</code> (to eat), <code>beber</code> (to drink), <code>aprender</code> (to learn)</li>
                    <li>-IR verbs: <code>vivir</code> (to live), <code>escribir</code> (to write), <code>abrir</code> (to open)</li>
                </ul>
                <p>To conjugate a regular verb, you remove the -ar, -er, or -ir ending to find the <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-stem">stem<span id="tooltip-stem" class="tooltip-content" role="tooltip">The base part of a verb that remains after removing the infinitive ending.</span></span> (also called the root), and then add the appropriate ending for the subject pronoun and tense.</p>
                <p>For example, the stem of <code>hablar</code> is <code>habl-</code>. The stem of <code>comer</code> is <code>com-</code>. The stem of <code>vivir</code> is <code>viv-</code>.</p>
            </section>

             <section id="regular-verbs" class="card" role="region" aria-labelledby="regular-verbs-heading">
                <h2 id="regular-verbs-heading">Regular Verbs: The Basics</h2>
                <p>Regular verbs follow predictable patterns for conjugation. Once you learn the endings for -ar, -er, and -ir verbs in a specific tense, you can conjugate thousands of regular verbs.</p>
                <p>While irregular verbs exist and are very common, mastering the regular patterns is the essential first step.</p>
                <p>The following sections detail the conjugation patterns for regular -ar, -er, and -ir verbs in common tenses.</p>
            </section>

            <section id="ar-verbs" class="card" role="region" aria-labelledby="ar-verbs-heading">
                <h2 id="ar-verbs-heading">Regular -AR Verbs</h2>
                <p>Regular verbs ending in -AR follow a specific pattern. Let's look at the verb <code>hablar</code> (to speak) in the Present Indicative tense.</p>
                <table>
                    <caption>Conjugation of Hablar (to speak) - Present Indicative</caption>
                    <thead>
                        <tr>
                            <th>Subject Pronoun</th>
                            <th>Ending</th>
                            <th>Conjugated Verb</th>
                            <th>English Translation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-o</td>
                            <td>habl<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablo">o<span id="tooltip-hablo" class="tooltip-content" role="tooltip">Ending for Yo in Present Indicative (-AR)</span></span></td>
                            <td>I speak</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-as</td>
                            <td>habl<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablas">as<span id="tooltip-hablas" class="tooltip-content" role="tooltip">Ending for Tú in Present Indicative (-AR)</span></span></td>
                            <td>You speak (informal)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-a</td>
                            <td>habl<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-habla">a<span id="tooltip-habla" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Present Indicative (-AR)</span></span></td>
                            <td>He/She speaks, You speak (formal)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-amos</td>
                            <td>habl<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablamos">amos<span id="tooltip-hablamos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Present Indicative (-AR)</span></span></td>
                            <td>We speak</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-áis</td>
                            <td>habl<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablais">áis<span id="tooltip-hablais" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Present Indicative (-AR)</span></span></td>
                            <td>You speak (informal plural, Spain)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-an</td>
                            <td>habl<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablan">an<span id="tooltip-hablan" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Present Indicative (-AR)</span></span></td>
                            <td>They speak, You speak (formal plural)</td>
                        </tr>
                    </tbody>
                </table>
                <p class="example-sentence">Example: Yo <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablo-example">hablo<span id="tooltip-hablo-example" class="tooltip-content" role="tooltip">I speak</span></span> español. (I speak Spanish.)</p>
            </section>

            <section id="er-verbs" class="card" role="region" aria-labelledby="er-verbs-heading">
                <h2 id="er-verbs-heading">Regular -ER Verbs</h2>
                <p>Regular verbs ending in -ER have a different set of endings. Let's use <code>comer</code> (to eat) in the Present Indicative.</p>
                 <table>
                     <caption>Conjugation of Comer (to eat) - Present Indicative</caption>
                    <thead>
                        <tr>
                            <th>Subject Pronoun</th>
                            <th>Ending</th>
                            <th>Conjugated Verb</th>
                            <th>English Translation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-o</td>
                            <td>com<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-como">o<span id="tooltip-como" class="tooltip-content" role="tooltip">Ending for Yo in Present Indicative (-ER)</span></span></td>
                            <td>I eat</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-es</td>
                            <td>com<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comes">es<span id="tooltip-comes" class="tooltip-content" role="tooltip">Ending for Tú in Present Indicative (-ER)</span></span></td>
                            <td>You eat (informal)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-e</td>
                            <td>com<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-come">e<span id="tooltip-come" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Present Indicative (-ER)</span></span></td>
                            <td>He/She eats, You eat (formal)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-emos</td>
                            <td>com<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comemos">emos<span id="tooltip-comemos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Present Indicative (-ER)</span></span></td>
                            <td>We eat</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-éis</td>
                            <td>com<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeis">éis<span id="tooltip-comeis" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Present Indicative (-ER)</span></span></td>
                            <td>You eat (informal plural, Spain)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-en</td>
                            <td>com<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comen">en<span id="tooltip-comen" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Present Indicative (-ER)</span></span></td>
                            <td>They eat, You eat (formal plural)</td>
                        </tr>
                    </tbody>
                </table>
                <p class="example-sentence">Example: Nosotros <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comemos-example">comemos<span id="tooltip-comemos-example" class="tooltip-content" role="tooltip">We eat</span></span> pizza. (We eat pizza.)</p>
            </section>

            <section id="ir-verbs" class="card" role="region" aria-labelledby="ir-verbs-heading">
                <h2 id="ir-verbs-heading">Regular -IR Verbs</h2>
                <p>Regular verbs ending in -IR share some endings with -ER verbs but differ in others. Let's look at <code>vivir</code> (to live) in the Present Indicative.</p>
                 <table>
                     <caption>Conjugation of Vivir (to live) - Present Indicative</caption>
                    <thead>
                        <tr>
                            <th>Subject Pronoun</th>
                            <th>Ending</th>
                            <th>Conjugated Verb</th>
                            <th>English Translation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-o</td>
                            <td>viv<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivo">o<span id="tooltip-vivo" class="tooltip-content" role="tooltip">Ending for Yo in Present Indicative (-IR)</span></span></td>
                            <td>I live</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-es</td>
                            <td>viv<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vives">es<span id="tooltip-vives" class="tooltip-content" role="tooltip">Ending for Tú in Present Indicative (-IR)</span></span></td>
                            <td>You live (informal)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-e</td>
                            <td>viv<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vive">e<span id="tooltip-vive" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Present Indicative (-IR)</span></span></td>
                            <td>He/She lives, You live (formal)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-imos</td>
                            <td>viv<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivimos">imos<span id="tooltip-vivimos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Present Indicative (-IR)</span></span></td>
                            <td>We live</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-ís</td>
                            <td>viv<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivis">ís<span id="tooltip-vivis" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Present Indicative (-IR)</span></span></td>
                            <td>You live (informal plural, Spain)</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-en</td>
                            <td>viv<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viven">en<span id="tooltip-viven" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Present Indicative (-IR)</span></span></td>
                            <td>They live, You live (formal plural)</td>
                        </tr>
                    </tbody>
                </table>
                 <p class="example-sentence">Example: Ellos <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viven-example">viven<span id="tooltip-viven-example" class="tooltip-content" role="tooltip">They live</span></span> en Madrid. (They live in Madrid.)</p>
            </section>

            <section id="present-indicative" class="card" role="region" aria-labelledby="present-indicative-heading">
                <h2 id="present-indicative-heading">The Present Indicative Tense</h2>
                <p>The Present Indicative is used to describe actions happening now, habitual actions, general truths, and future actions that are planned or certain.</p>
                <p>It's one of the most common and important tenses to learn.</p>
                <h3>Endings for Regular Verbs in Present Indicative:</h3>
                <table>
                    <caption>Regular Verb Endings - Present Indicative</caption>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>-AR Verbs</th>
                            <th>-ER Verbs</th>
                            <th>-IR Verbs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-o</td>
                            <td>-o</td>
                            <td>-o</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-as</td>
                            <td>-es</td>
                            <td>-es</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-a</td>
                            <td>-e</td>
                            <td>-e</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-amos</td>
                            <td>-emos</td>
                            <td>-imos</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-áis</td>
                            <td>-éis</td>
                            <td>-ís</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-an</td>
                            <td>-en</td>
                            <td>-en</td>
                        </tr>
                    </tbody>
                </table>
                <p class="example-sentence">Example: Ella <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-aprende-example">aprende<span id="tooltip-aprende-example" class="tooltip-content" role="tooltip">She learns</span></span> español. (She learns Spanish.)</p>
            </section>

            <section id="preterite" class="card" role="region" aria-labelledby="preterite-heading">
                 <h2 id="preterite-heading">The Preterite Tense (Past Simple)</h2>
                <p>The Preterite tense is used to describe actions that were completed at a specific point in the past.</p>
                <h3>Endings for Regular Verbs in Preterite:</h3>
                 <table>
                     <caption>Regular Verb Endings - Preterite Tense</caption>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>-AR Verbs</th>
                            <th>-ER / -IR Verbs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-é</td>
                            <td>-í</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-aste</td>
                            <td>-iste</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-ó</td>
                            <td>-ió</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-amos</td>
                            <td>-imos</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-asteis</td>
                            <td>-isteis</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-aron</td>
                            <td>-ieron</td>
                        </tr>
                    </tbody>
                </table>
                 <p class="example-sentence">Example: Ayer <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hable-example">hablé<span id="tooltip-hable-example" class="tooltip-content" role="tooltip">I spoke</span></span> con mi amigo. (Yesterday I spoke with my friend.)</p>
                 <p class="example-sentence">Example: Ellos <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comieron-example">comieron<span id="tooltip-comieron-example" class="tooltip-content" role="tooltip">They ate</span></span> en el restaurante. (They ate in the restaurant.)</p>
            </section>

             <section id="imperfect" class="card" role="region" aria-labelledby="imperfect-heading">
                 <h2 id="imperfect-heading">The Imperfect Tense (Past Continuous/Habitual)</h2>
                <p>The Imperfect tense is used to describe ongoing, habitual, or continuous actions in the past, as well as descriptions, states of being, and telling time in the past.</p>
                <h3>Endings for Regular Verbs in Imperfect:</h3>
                 <table>
                     <caption>Regular Verb Endings - Imperfect Tense</caption>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>-AR Verbs</th>
                            <th>-ER / -IR Verbs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-aba</td>
                            <td>-ía</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-abas</td>
                            <td>-ías</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-aba</td>
                            <td>-ía</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-ábamos</td>
                            <td>-íamos</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-abais</td>
                            <td>-íais</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-aban</td>
                            <td>-ían</td>
                        </tr>
                    </tbody>
                </table>
                 <p class="example-sentence">Example: Cuando era niño, <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-jugaba-example">jugaba<span id="tooltip-jugaba-example" class="tooltip-content" role="tooltip">I used to play</span></span> fútbol. (When I was a child, I used to play soccer.)</p>
                 <p class="example-sentence">Example: Antes <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivian-example">vivían<span id="tooltip-vivian-example" class="tooltip-content" role="tooltip">They used to live</span></span> en una casa grande. (Before, they used to live in a big house.)</p>
            </section>

            <section id="future" class="card" role="region" aria-labelledby="future-heading">
                 <h2 id="future-heading">The Simple Future Tense</h2>
                <p>The Simple Future tense is used to talk about actions that will happen in the future.</p>
                <p>Unlike other tenses, the endings are added to the <strong>full infinitive</strong>, not the stem.</p>
                <h3>Endings for All Regular Verbs in Simple Future:</h3>
                 <table>
                     <caption>Regular Verb Endings - Simple Future Tense</caption>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Ending</th>
                            <th>Example (-AR: hablar)</th>
                             <th>Example (-ER: comer)</th>
                             <th>Example (-IR: vivir)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-é</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablare">é<span id="tooltip-hablare" class="tooltip-content" role="tooltip">Ending for Yo in Simple Future</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comere">é<span id="tooltip-comere" class="tooltip-content" role="tooltip">Ending for Yo in Simple Future</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivire">é<span id="tooltip-vivire" class="tooltip-content" role="tooltip">Ending for Yo in Simple Future</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-ás</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablaras">ás<span id="tooltip-hablaras" class="tooltip-content" role="tooltip">Ending for Tú in Simple Future</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeras">ás<span id="tooltip-comeras" class="tooltip-content" role="tooltip">Ending for Tú in Simple Future</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viviras">ás<span id="tooltip-viviras" class="tooltip-content" role="tooltip">Ending for Tú in Simple Future</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-á</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablara">á<span id="tooltip-hablara" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Simple Future</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comera">á<span id="tooltip-comera" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Simple Future</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivira">á<span id="tooltip-vivira" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Simple Future</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-emos</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablaremos">emos<span id="tooltip-hablaremos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Simple Future</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeremos">emos<span id="tooltip-comeremos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Simple Future</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viviremos">emos<span id="tooltip-viviremos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Simple Future</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-éis</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablareis">éis<span id="tooltip-hablareis" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Simple Future</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comereis">éis<span id="tooltip-comereis" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Simple Future</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivireis">éis<span id="tooltip-vivireis" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Simple Future</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-án</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablaran">án<span id="tooltip-hablaran" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Simple Future</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeran">án<span id="tooltip-comeran" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Simple Future</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viviran">án<span id="tooltip-viviran" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Simple Future</span></span></td>
                        </tr>
                    </tbody>
                </table>
                 <p class="example-sentence">Example: Mañana <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-bailaremos-example">bailaremos<span id="tooltip-bailaremos-example" class="tooltip-content" role="tooltip">We will dance</span></span>. (Tomorrow we will dance.)</p>
            </section>

            <section id="conditional" class="card" role="region" aria-labelledby="conditional-heading">
                 <h2 id="conditional-heading">The Conditional Tense</h2>
                <p>The Conditional tense is used to talk about hypothetical situations or actions that would happen, often dependent on a condition. It can also express probability or conjecture in the past.</p>
                <p>Like the future, the endings are added to the <strong>full infinitive</strong>.</p>
                <h3>Endings for All Regular Verbs in Conditional:</h3>
                 <table>
                     <caption>Regular Verb Endings - Conditional Tense</caption>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>Ending</th>
                            <th>Example (-AR: hablar)</th>
                             <th>Example (-ER: comer)</th>
                             <th>Example (-IR: vivir)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-ía</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablaria">ía<span id="tooltip-hablaria" class="tooltip-content" role="tooltip">Ending for Yo in Conditional</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeria">ía<span id="tooltip-comeria" class="tooltip-content" role="tooltip">Ending for Yo in Conditional</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viviria">ía<span id="tooltip-viviria" class="tooltip-content" role="tooltip">Ending for Yo in Conditional</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-ías</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablarias">ías<span id="tooltip-hablarias" class="tooltip-content" role="tooltip">Ending for Tú in Conditional</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comerias">ías<span id="tooltip-comerias" class="tooltip-content" role="tooltip">Ending for Tú in Conditional</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivirias">ías<span id="tooltip-vivirias" class="tooltip-content" role="tooltip">Ending for Tú in Conditional</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-ía</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablaria-el">ía<span id="tooltip-hablaria-el" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Conditional</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeria-el">ía<span id="tooltip-comeria-el" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Conditional</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viviria-el">ía<span id="tooltip-viviria-el" class="tooltip-content" role="tooltip">Ending for Él/Ella/Usted in Conditional</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-íamos</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablariamos">íamos<span id="tooltip-hablariamos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Conditional</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeriamos">íamos<span id="tooltip-comeriamos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Conditional</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viviriamos">íamos<span id="tooltip-viviriamos" class="tooltip-content" role="tooltip">Ending for Nosotros/Nosotras in Conditional</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-íais</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablariais">íais<span id="tooltip-hablariais" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Conditional</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeriais">íais<span id="tooltip-comeriais" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Conditional</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-viviriais">íais<span id="tooltip-viviriais" class="tooltip-content" role="tooltip">Ending for Vosotros/Vosotras in Conditional</span></span></td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-ían</td>
                            <td>hablar<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hablarian">ían<span id="tooltip-hablarian" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Conditional</span></span></td>
                             <td>comer<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comerian">ían<span id="tooltip-comerian" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Conditional</span></span></td>
                             <td>vivir<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-vivirian">ían<span id="tooltip-vivirian" class="tooltip-content" role="tooltip">Ending for Ellos/Ellas/Ustedes in Conditional</span></span></td>
                        </tr>
                    </tbody>
                </table>
                 <p class="example-sentence">Example: Yo <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comeria-example">comer<span class="tooltip-content" role="tooltip">I would eat</span></span>ía si tuviera hambre. (I would eat if I were hungry.)</p>
            </section>

             <section id="subjunctive" class="card" role="region" aria-labelledby="subjunctive-heading">
                 <h2 id="subjunctive-heading">The Subjunctive Mood (Present Subjunctive)</h2>
                <p>The Subjunctive mood is used to express desires, doubts, emotions, necessity, judgment, and other subjective or hypothetical situations, often in dependent clauses.</p>
                 <p>To form the present subjunctive of regular verbs, start with the "yo" form of the present indicative, drop the "-o", and add the opposite vowel endings:</p>
                 <ul>
                     <li>For -AR verbs, use -ER/-IR endings (-e, -es, -e, -emos, -éis, -en)</li>
                     <li>For -ER and -IR verbs, use -AR endings (-a, -as, -a, -amos, -áis, -an)</li>
                 </ul>
                 <h3>Endings for Regular Verbs in Present Subjunctive:</h3>
                 <table>
                     <caption>Regular Verb Endings - Present Subjunctive</caption>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>-AR Verbs</th>
                            <th>-ER / -IR Verbs</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Yo</td>
                            <td>-e</td>
                            <td>-a</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Tú</td>
                            <td>-es</td>
                            <td>-as</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Él/Ella/Usted</td>
                            <td>-e</td>
                            <td>-a</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras</td>
                            <td>-emos</td>
                            <td>-amos</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras</td>
                            <td>-éis</td>
                            <td>-áis</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ellos/Ellas/Ustedes</td>
                            <td>-en</td>
                            <td>-an</td>
                        </tr>
                    </tbody>
                </table>
                 <p class="example-sentence">Example: Espero que tú <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-hables-example">hables<span id="tooltip-hables-example" class="tooltip-content" role="tooltip">you speak (subjunctive)</span></span> español. (I hope that you speak Spanish.)</p>
                 <p class="example-sentence">Example: Es importante que nosotros <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comamos-example">comamos<span id="tooltip-comamos-example" class="tooltip-content" role="tooltip">we eat (subjunctive)</span></span> sano. (It's important that we eat healthily.)</p>
            </section>

             <section id="imperative" class="card" role="region" aria-labelledby="imperative-heading">
                 <h2 id="imperative-heading">The Imperative Mood (Commands)</h2>
                <p>The Imperative mood is used to give commands or orders.</p>
                 <p>Formal commands (Usted/Ustedes) use the Present Subjunctive forms.</p>
                 <p>Informal commands (Tú/Vosotros) have different forms, and negative informal commands use the Present Subjunctive forms.</p>
                 <h3>Forms for Regular Verbs in Imperative:</h3>
                 <table>
                     <caption>Regular Verb Forms - Imperative Mood</caption>
                    <thead>
                        <tr>
                            <th>Subject</th>
                            <th>-AR Verbs</th>
                            <th>-ER Verbs</th>
                             <th>-IR Verbs</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="pronoun">Tú (Affirmative)</td>
                            <td>-a (Drop -ar, add -a)</td>
                            <td>-e (Drop -er, add -e)</td>
                            <td>-e (Drop -ir, add -e)</td>
                            <td>Same as Él/Ella/Usted Present Indicative for -AR; Same as Él/Ella/Usted Present Indicative for -ER/-IR</td>
                        </tr>
                         <tr>
                            <td class="pronoun">Tú (Negative)</td>
                            <td>-es (Subjunctive)</td>
                            <td>-as (Subjunctive)</td>
                            <td>-as (Subjunctive)</td>
                            <td>Use Present Subjunctive form</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Usted (Affirmative & Negative)</td>
                            <td>-e (Subjunctive)</td>
                            <td>-a (Subjunctive)</td>
                            <td>-a (Subjunctive)</td>
                             <td>Use Present Subjunctive form</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Nosotros/Nosotras (Affirmative & Negative)</td>
                            <td>-emos (Subjunctive)</td>
                            <td>-amos (Subjunctive)</td>
                            <td>-amos (Subjunctive)</td>
                             <td>Use Present Subjunctive form</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Vosotros/Vosotras (Affirmative)</td>
                            <td>-ad (Drop -ar, add -ad)</td>
                            <td>-ed (Drop -er, add -ed)</td>
                            <td>-id (Drop -ir, add -id)</td>
                            <td>Specific ending</td>
                        </tr>
                         <tr>
                            <td class="pronoun">Vosotros/Vosotras (Negative)</td>
                            <td>-éis (Subjunctive)</td>
                            <td>-áis (Subjunctive)</td>
                            <td>-áis (Subjunctive)</td>
                            <td>Use Present Subjunctive form</td>
                        </tr>
                        <tr>
                            <td class="pronoun">Ustedes (Affirmative & Negative)</td>
                            <td>-en (Subjunctive)</td>
                            <td>-an (Subjunctive)</td>
                            <td>-an (Subjunctive)</td>
                             <td>Use Present Subjunctive form</td>
                        </tr>
                    </tbody>
                </table>
                 <p class="example-sentence">Example (Affirmative Tú): ¡<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-habla-example-imp">Habla<span id="tooltip-habla-example-imp" class="tooltip-content" role="tooltip">Speak! (informal command)</span></span> más alto! (Speak louder!)</p>
                 <p class="example-sentence">Example (Negative Tú): ¡No <span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-comas-example-imp">comas<span id="tooltip-comas-example-imp" class="tooltip-content" role="tooltip">Don't eat! (informal command)</span></span> eso! (Don't eat that!)</p>
                 <p class="example-sentence">Example (Formal Usted): ¡<span class="tooltip-trigger" tabindex="0" aria-describedby="tooltip-abra-example-imp">Abra<span id="tooltip-abra-example-imp" class="tooltip-content" role="tooltip">Open! (formal command)</span></span> la puerta, por favor. (Open the door, please.)</p>
            </section>


            <section id="interactive-tool" class="card" role="region" aria-labelledby="interactive-tool-heading">
                <h2 id="interactive-tool-heading">Verb Conjugation Tool</h2>
                <p>Use the tool below to look up the conjugation of any Spanish verb in different tenses and moods.</p>
                <div class="conjugation-tool">
                    <div class="input-group">
                        <div class="form-field">
                            <label for="verb-infinitive">Enter Regular Verb Infinitive:</label>
                            <input type="text" id="verb-infinitive" placeholder="e.g., hablar, comer, vivir">
                        </div>
                         <div class="form-field">
                             <label for="verb-tense">Select Tense/Mood:</label>
                             <select id="verb-tense">
                                 <option value="present-indicative">Present Indicative</option>
                                 <option value="preterite">Preterite</option>
                                 <option value="imperfect">Imperfect</option>
                                 <option value="future">Simple Future</option>
                                 <option value="conditional">Conditional</option>
                                 <option value="present-subjunctive">Present Subjunctive</option>
                                  <!-- Imperative is complex, maybe add later -->
                                  <!-- <option value="imperative">Imperative</option> -->
                                  <option value="coming-soon" disabled>Other Tenses (Coming Soon)</option>
                             </select>
                         </div>
                        <button id="conjugate-button">Conjugate</button>
                    </div>
                    <div id="conjugation-results" class="conjugation-results" aria-live="polite">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
            </section>

            <section id="practice" class="card" role="region" aria-labelledby="practice-heading">
                <h2 id="practice-heading">Practice Exercises</h2>
                <p>Test your knowledge with interactive exercises on different conjugation topics.</p>
                 <div class="practice-exercise">
                     <div class="exercise-prompt">
                         [Exercise Prompt Placeholder]<br>
                         Fill in the blank or choose the correct form.
                     </div>
                     <div class="input-area">
                         <input type="text" id="exercise-answer" placeholder="Your answer">
                         <button id="check-answer-button">Check Answer</button>
                     </div>
                     <div id="exercise-feedback" class="feedback-area" aria-live="polite">
                         <!-- Feedback will be displayed here -->
                     </div>
                 </div>
            </section>

             <section id="irregular-verbs" class="card" role="region" aria-labelledby="irregular-verbs-heading">
                 <h2 id="irregular-verbs-heading">Irregular Verbs</h2>
                <p>Many common Spanish verbs are irregular, meaning they do not follow the standard patterns shown above. These verbs must be learned individually or in groups with similar irregularities.</p>
                 <p>Common irregular verbs include <code>ser</code> (to be), <code>estar</code> (to be), <code>tener</code> (to have), <code>venir</code> (to come), <code>decir</code> (to say/tell), <code>hacer</code> (to do/make), <code>ir</code> (to go), <code>poder</code> (to be able to), <code>poner</code> (to put), <code>querer</code> (to want), <code>saber</code> (to know), <code>salir</code> (to leave), <code>traer</code> (to bring), <code>ver</code> (to see), <code>oír</code> (to hear).</p>
                 <p>Detailed guides and practice for irregular verbs will be available here soon!</p>
            </section>

        </main>
    </div>

    <script>
        // Basic script for navigation active state and smooth scrolling
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('nav a[href^="#"]'); // Select only internal links
            const sections = document.querySelectorAll('main section');
            const header = document.querySelector('header');
            const nav = document.querySelector('nav');
            let headerHeight = header.offsetHeight;

            // Update header height and sticky nav top position on window resize and load
            const updateHeaderHeightAndNavTop = () => {
                 headerHeight = header.offsetHeight;
                 if (window.innerWidth > 768) { // Only apply sticky on desktop/tablet
                     nav.style.top = `calc(${headerHeight}px + var(--spacing-lg))`;
                 } else {
                     nav.style.top = 'auto'; // Remove sticky on mobile
                 }
            };

            window.addEventListener('resize', updateHeaderHeightAndNavTop);
            updateHeaderHeightAndNavTop(); // Call initially

            // Add active class based on scroll position
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        // Deactivate all links first
                        navLinks.forEach(link => link.classList.remove('active'));
                        // Activate the link corresponding to the intersecting section
                        const activeLink = document.querySelector(`nav a[href="#${id}"]`);
                        if (activeLink) {
                             activeLink.classList.add('active');
                         }
                    }
                });
            }, {
                rootMargin: `-${headerHeight + 1}px 0px -50% 0px`, // Adjust sensitivity based on header height + a little buffer
                threshold: 0.1 // Trigger when 10% of the section is visible
            });

            sections.forEach(section => {
                observer.observe(section);
            });

             // Smooth scrolling for navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                         // Calculate target position considering header height
                        const offsetTop = targetSection.getBoundingClientRect().top + window.scrollY - headerHeight;
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                         // Update URL hash without triggering scroll
                         history.pushState(null, null, `#${targetId}`);

                         // Manually update active class for immediate feedback
                         navLinks.forEach(l => l.classList.remove('active'));
                         this.classList.add('active');
                    }
                });
            });

            // Set active link on page load based on URL hash
            const setActiveLinkFromHash = () => {
                 navLinks.forEach(link => link.classList.remove('active'));
                 const hash = window.location.hash;
                 if (hash && hash !== '#') {
                     const activeLink = document.querySelector(`nav a[href="${hash}"]`);
                     if (activeLink) {
                         activeLink.classList.add('active');
                          // Scroll to the section if hash is present on load
                          const targetId = hash.substring(1);
                          const targetSection = document.getElementById(targetId);
                           if (targetSection) {
                                // Use requestAnimationFrame to ensure layout is stable before scrolling
                                requestAnimationFrame(() => {
                                     const offsetTop = targetSection.getBoundingClientRect().top + window.scrollY - header.offsetHeight; // Recalculate header height
                                     window.scrollTo({
                                         top: offsetTop,
                                         behavior: 'smooth'
                                     });
                                });
                           }
                     } else {
                         // If hash doesn't match a link, activate the first one
                          const firstLink = document.querySelector('nav a[href^="#"]');
                          if (firstLink) {
                              firstLink.classList.add('active');
                          }
                     }
                 } else {
                     // If no hash, activate the first link
                     const firstLink = document.querySelector('nav a[href^="#"]');
                     if (firstLink) {
                         firstLink.classList.add('active');
                     }
                 }
            };

            setActiveLinkFromHash(); // Set active link on load

            // Handle back/forward button changes
            window.addEventListener('popstate', setActiveLinkFromHash);


        });

        // Basic placeholder for search functionality
        document.querySelector('.search-bar button').addEventListener('click', () => {
            const searchTerm = document.getElementById('verb-search').value.trim().toLowerCase();
            if (searchTerm) {
                // Basic search: scroll to section if ID matches or contains search term
                let targetId = searchTerm.replace(/\s+/g, '-'); // Simple ID matching
                let targetSection = document.getElementById(targetId);

                if (!targetSection) {
                    // Fallback: Search for section containing the term in its heading or text
                    for (const section of document.querySelectorAll('main section')) {
                        if (section.textContent.toLowerCase().includes(searchTerm)) {
                            targetSection = section;
                            targetId = section.id;
                            break;
                        }
                    }
                }


                if (targetSection) {
                    const headerHeight = document.querySelector('header').offsetHeight;
                    const offsetTop = targetSection.getBoundingClientRect().top + window.scrollY - headerHeight;
                     window.scrollTo({
                         top: offsetTop,
                         behavior: 'smooth'
                     });
                     // Update URL hash
                     history.pushState(null, null, `#${targetId}`);
                     // Manually update active nav link
                     document.querySelectorAll('nav a').forEach(link => link.classList.remove('active'));
                     const activeLink = document.querySelector(`nav a[href="#${targetId}"]`);
                     if (activeLink) {
                         activeLink.classList.add('active');
                     }

                } else {
                     alert(`Could not find information about "${searchTerm}". Try searching for an infinitive like "hablar" or a topic like "present-indicative".`);
                }
            } else {
                alert("Please enter a verb or topic to search.");
            }
        });

        // Add keyboard accessibility to tooltips
        document.querySelectorAll('.tooltip-trigger').forEach(trigger => {
            // ARIA attributes already added in HTML
            // Use focus/blur for keyboard accessibility
            trigger.addEventListener('focus', () => {
                // The CSS :focus pseudo-class handles visibility
            });
            trigger.addEventListener('blur', () => {
                 // The CSS :focus pseudo-class handles visibility
            });
             // Keep mouse enter/leave for robustness alongside CSS hover
             // CSS hover is sufficient, no need for JS classes here.
        });

        // --- Interactive Conjugation Tool Logic ---

        const conjugationEndings = {
            'present-indicative': {
                'ar': ['o', 'as', 'a', 'amos', 'áis', 'an'],
                'er': ['o', 'es', 'e', 'emos', 'éis', 'en'],
                'ir': ['o', 'es', 'e', 'imos', 'ís', 'en']
            },
             'preterite': {
                'ar': ['é', 'aste', 'ó', 'amos', 'asteis', 'aron'],
                'er': ['í', 'iste', 'ió', 'imos', 'isteis', 'ieron'],
                'ir': ['í', 'iste', 'ió', 'imos', 'isteis', 'ieron'] // Same as -er
            },
             'imperfect': {
                'ar': ['aba', 'abas', 'aba', 'ábamos', 'abais', 'aban'],
                'er': ['ía', 'ías', 'ía', 'íamos', 'íais', 'ían'],
                'ir': ['ía', 'ías', 'ía', 'íamos', 'íais', 'ían'] // Same as -er
            },
             'future': { // Added to infinitive
                'all': ['é', 'ás', 'á', 'emos', 'éis', 'án']
            },
             'conditional': { // Added to infinitive
                'all': ['ía', 'ías', 'ía', 'íamos', 'íais', 'ían']
            },
             'present-subjunctive': { // Based on yo form, opposite endings
                'ar': ['e', 'es', 'e', 'emos', 'éis', 'en'],
                'er': ['a', 'as', 'a', 'amos', 'áis', 'an'],
                'ir': ['a', 'as', 'a', 'amos', 'áis', 'an'] // Same as -er
            }
            // Imperative is more complex due to affirmative/negative and tú/vosotros exceptions
        };

        const subjectPronouns = ['Yo', 'Tú', 'Él/Ella/Usted', 'Nosotros/Nosotras', 'Vosotros/Vosotras', 'Ellos/Ellas/Ustedes'];
        // Basic English hints - these are not perfect translations but give context
        const subjectPronounsEnglish = ['I', 'You (informal)', 'He/She/You (formal)', 'We', 'You (informal plural, Spain)', 'They/You (formal plural)'];


        document.getElementById('conjugate-button').addEventListener('click', () => {
            const infinitiveInput = document.getElementById('verb-infinitive');
            const tenseSelect = document.getElementById('verb-tense');
            const resultsArea = document.getElementById('conjugation-results');

            const infinitive = infinitiveInput.value.trim().toLowerCase();
            const selectedTense = tenseSelect.value;
            const selectedTenseText = tenseSelect.options[tenseSelect.selectedIndex].text;

            // Clear previous results and hide for animation
            resultsArea.innerHTML = '';
            resultsArea.classList.remove('visible');


            if (!infinitive) {
                resultsArea.innerHTML = '<p class="error-message" role="alert">Please enter a verb infinitive.</p>';
                 resultsArea.classList.add('visible'); // Show message immediately
                return;
            }

            if (!infinitive.endsWith('ar') && !infinitive.endsWith('er') && !infinitive.endsWith('ir')) {
                 resultsArea.innerHTML = '<p class="error-message" role="alert">Please enter a valid Spanish infinitive ending in -ar, -er, or -ir.</p>';
                 resultsArea.classList.add('visible'); // Show message immediately
                 return;
            }

            if (selectedTense === 'coming-soon') {
                 resultsArea.innerHTML = '<p class="warning-message" role="status">Conjugation for this tense is coming soon.</p>';
                 resultsArea.classList.add('visible'); // Show message immediately
                 return;
            }

            const verbType = infinitive.slice(-2); // 'ar', 'er', or 'ir'
            const stem = infinitive.slice(0, -2);

            let conjugatedForms = [];
            let error = null;


            // Handle tenses added to the infinitive (Future, Conditional)
            if (selectedTense === 'future' || selectedTense === 'conditional') {
                 const endings = conjugationEndings[selectedTense]['all'];
                 if (endings) {
                     conjugatedForms = endings.map(ending => infinitive + ending);
                 } else {
                     error = `Endings not found for tense: ${selectedTenseText}`;
                 }
            }
            // Handle tenses added to the stem
            else if (conjugationEndings[selectedTense] && conjugationEndings[selectedTense][verbType]) {
                 const endings = conjugationEndings[selectedTense][verbType];
                 conjugatedForms = endings.map(ending => stem + ending);
            } else {
                 error = `Conjugation data not found for regular -${verbType} verbs in ${selectedTenseText}.`;
            }


            if (error) {
                resultsArea.innerHTML = `<p class="error-message" role="alert">${error}</p>`;
                 resultsArea.classList.add('visible'); // Show message immediately
            } else if (conjugatedForms.length === subjectPronouns.length) {
                let resultsHtml = `<h3>Conjugation of "${infinitive}" - ${selectedTenseText}</h3>`;
                resultsHtml += '<table>';
                resultsHtml += `<caption>Conjugation of ${infinitive} in ${selectedTenseText}</caption>`;
                resultsHtml += '<thead><tr><th>Subject</th><th>Conjugated Form</th><th>English</th></tr></thead>';
                resultsHtml += '<tbody>';
                conjugatedForms.forEach((form, index) => {
                    // Simple English hint logic: use infinitive for future/conditional, stem + ending for others
                    const englishHint = (selectedTense === 'future' || selectedTense === 'conditional')
                        ? `${subjectPronounsEnglish[index]} ${selectedTense === 'future' ? 'will' : 'would'} ${infinitive}`
                        : `${subjectPronounsEnglish[index]} ${form}`; // Very basic, doesn't handle nuances

                    resultsHtml += `
                        <tr>
                            <td class="pronoun">${subjectPronouns[index]}</td>
                            <td>${form}</td>
                            <td>${englishHint}</td>
                        </tr>
                    `;
                });
                resultsHtml += '</tbody></table>';
                resultsArea.innerHTML = resultsHtml;

                // Trigger animation
                resultsArea.classList.add('visible');

            } else {
                 resultsArea.innerHTML = '<p class="error-message" role="alert">Could not conjugate the verb. Please check the infinitive and selected tense.</p>';
                 resultsArea.classList.add('visible'); // Show message immediately
            }
        });

        // --- Practice Exercise Placeholder Logic ---
        document.getElementById('check-answer-button').addEventListener('click', () => {
             const answerInput = document.getElementById('exercise-answer');
             const feedbackArea = document.getElementById('exercise-feedback');
             const answer = answerInput.value.trim();

             feedbackArea.className = 'feedback-area'; // Reset classes
             feedbackArea.innerHTML = ''; // Clear previous feedback

             if (!answer) {
                 feedbackArea.innerHTML = 'Please enter an answer.';
                 feedbackArea.classList.add('warning');
                 return;
             }

             // Placeholder feedback - in a real app, this would check the answer
             feedbackArea.innerHTML = `Received answer: "${answer}". (Exercise checking coming soon!)`;
             feedbackArea.classList.add('warning'); // Use warning for placeholder feedback
        });


    </script>
</body>
</html>
