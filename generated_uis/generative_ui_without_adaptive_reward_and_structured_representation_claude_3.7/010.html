<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piano Learning Path</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #4A90E2; /* Subtle Blue */
            --primary-color-dark: #3A7BD5; /* Darker Primary */
            --primary-color-darker: #2C5DA8; /* Even Darker Primary */
            --accent-color: #50E3C2; /* Teal Accent */
            --accent-color-light: rgba(80, 227, 194, 0.1); /* Light Accent */
            --background-color: #F8F9FA; /* Light Gray Background */
            --surface-color: #FFFFFF; /* White Surface */
            --text-color: #343A40; /* Dark Gray Text */
            --secondary-text-color: #6C757D; /* Medium Gray Text */
            --border-color: #DEE2E6; /* Light Gray Border */
            --success-color: #28A745; /* Green for success */
            --success-color-light: rgba(40, 167, 69, 0.1); /* Light Success */
            --warning-color: #FFC107; /* Yellow for warning */
             --warning-color-light: rgba(255, 193, 7, 0.1); /* Light Warning */
            --error-color: #DC3545; /* Red for error */
            --error-color-light: rgba(220, 53, 69, 0.1); /* Light Error */
            --spacing-unit: 8px;
            --sidebar-width: 280px;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            display: grid;
            grid-template-rows: auto 1fr;
            grid-template-columns: var(--sidebar-width) 1fr;
            height: 100vh;
            overflow: hidden; /* Prevent body scroll */
        }

        header {
            grid-column: 1 / 3;
            background-color: var(--surface-color);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 3);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10;
        }

        .site-title {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary-color);
            letter-spacing: -0.02em;
        }

        .layout-container {
            grid-column: 1 / 3; /* Span across both columns below header */
            display: grid;
            grid-template-columns: var(--sidebar-width) 1fr;
            overflow: hidden; /* Contain scrolling within children */
        }

        aside {
            grid-column: 1 / 2;
            background-color: var(--surface-color);
            border-right: 1px solid var(--border-color);
            padding: calc(var(--spacing-unit) * 2) 0;
            overflow-y: auto; /* Scroll sidebar */
            scrollbar-width: thin;
            scrollbar-color: var(--border-color) var(--surface-color);
        }

         aside::-webkit-scrollbar {
             width: var(--spacing-unit);
         }

         aside::-webkit-scrollbar-track {
             background: var(--surface-color);
         }

         aside::-webkit-scrollbar-thumb {
             background-color: var(--border-color);
             border-radius: 6px;
             border: 3px solid var(--surface-color);
         }


        .sidebar-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-nav li {
            margin-bottom: var(--spacing-unit);
        }

        .sidebar-nav a {
            display: block;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 3);
            color: var(--secondary-text-color);
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.2s ease, color 0.2s ease, border-left-color 0.2s ease;
            border-left: 4px solid transparent;
            outline: none; /* Remove default focus outline */
        }

        .sidebar-nav a:hover {
            background-color: rgba(var(--primary-color), 0.05);
            color: var(--primary-color);
        }

         .sidebar-nav a:focus {
             outline: 2px solid var(--primary-color-dark);
             outline-offset: -2px;
         }

        .sidebar-nav a.active {
            background-color: rgba(74, 144, 226, 0.1); /* Using rgba with primary color */
            color: var(--primary-color);
            border-left-color: var(--primary-color);
        }

        main {
            grid-column: 2 / 3;
            padding: calc(var(--spacing-unit) * 3);
            overflow-y: auto; /* Scroll main content */
            display: flex;
            flex-direction: column;
            gap: calc(var(--spacing-unit) * 4);
            scrollbar-width: thin;
            scrollbar-color: var(--border-color) var(--background-color);
        }

         main::-webkit-scrollbar {
             width: var(--spacing-unit);
         }

         main::-webkit-scrollbar-track {
             background: var(--background-color);
         }

         main::-webkit-scrollbar-thumb {
             background-color: var(--border-color);
             border-radius: 6px;
             border: 3px solid var(--background-color);
         }


        .dashboard-section,
        .lesson-section,
        .exercise-section,
        .resource-section {
            background-color: var(--surface-color);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.03); /* Subtle shadow */
        }

        h1, h2, h3 {
            color: var(--text-color);
            margin-top: 0;
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        h1 { font-size: 2em; }
        h2 { font-size: 1.5em; border-bottom: 1px solid var(--border-color); padding-bottom: var(--spacing-unit); margin-bottom: calc(var(--spacing-unit) * 3);}
        h3 { font-size: 1.2em; }

        p {
            margin-bottom: var(--spacing-unit) * 2;
        }

        .button {
            display: inline-block;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 3);
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            text-decoration: none;
            transition: background-color 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease;
            outline: none;
        }

        .button:hover {
            background-color: var(--primary-color-dark);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .button:focus {
             outline: 2px solid var(--primary-color-darker);
             outline-offset: 2px;
        }

        .button:active {
            background-color: var(--primary-color-darker);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .button:disabled {
            background-color: var(--secondary-text-color);
            cursor: not-allowed;
            opacity: 0.7;
            box-shadow: none;
        }

        .button.secondary {
            background-color: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .button.secondary:hover {
            background-color: rgba(74, 144, 226, 0.05); /* Using rgba with primary color */
            color: var(--primary-color-dark);
            border-color: var(--primary-color-dark);
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .button.secondary:focus {
             outline: 2px solid var(--primary-color-darker);
             outline-offset: 2px;
        }

        .button.secondary:active {
             background-color: rgba(74, 144, 226, 0.1); /* Using rgba with primary color */
             color: var(--primary-color-darker);
             border-color: var(--primary-color-darker);
             box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

         .button-group {
             display: flex;
             gap: var(--spacing-unit) * 2;
             margin-top: var(--spacing-unit) * 3;
         }

        .progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            border-radius: 4px;
            margin-bottom: var(--spacing-unit) * 2;
            overflow: hidden;
        }

        .progress-bar {
            height: 10px;
            background-color: var(--accent-color);
            width: 0%; /* Controlled by JS */
            transition: width 0.5s ease-in-out;
            border-radius: 4px;
        }

        .progress-text {
            font-size: 0.9em;
            color: var(--secondary-text-color);
            margin-bottom: var(--spacing-unit);
        }

        .dashboard-summary {
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) * 4);
            margin-bottom: calc(var(--spacing-unit) * 3);
        }

        .completion-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: conic-gradient(var(--accent-color) 0%, var(--border-color) 0%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--text-color);
            box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
            transition: background 0.5s ease-in-out;
        }

        .dashboard-info {
            flex-grow: 1;
        }

        .dashboard-info h3 {
            margin-bottom: var(--spacing-unit);
        }

        .dashboard-actions {
             margin-top: calc(var(--spacing-unit) * 3);
        }


        /* Lesson Content Styling */
        .lesson-content img,
        .lesson-content video,
        .lesson-content audio {
            display: block;
            max-width: 100%;
            height: auto;
            margin: calc(var(--spacing-unit) * 3) auto;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .lesson-content audio {
            width: 100%;
            /* Basic custom styling for audio - more complex styling would require JS */
            -webkit-appearance: none;
            appearance: none;
            background-color: var(--background-color);
            border-radius: 8px;
            padding: var(--spacing-unit);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03);
        }

        /* Note: Custom styling for audio controls is inconsistent across browsers.
           Full custom controls require significant CSS/JS. Using default for now. */


        /* Interactive Exercise Styling */
        .exercise-panel {
            border: 1px dashed var(--border-color);
            padding: calc(var(--spacing-unit) * 3);
            border-radius: 8px;
            margin-top: calc(var(--spacing-unit) * 4);
            background-color: var(--accent-color-light); /* Light accent background */
        }

        .exercise-panel h3 {
            color: var(--primary-color);
            margin-bottom: calc(var(--spacing-unit) * 2);
        }

        .musical-notation {
            min-height: 100px; /* Placeholder height */
            border: 1px solid var(--border-color);
            background-color: var(--surface-color);
            margin-bottom: calc(var(--spacing-unit) * 2);
            border-radius: 4px;
            padding: var(--spacing-unit) * 2;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            color: var(--secondary-text-color);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .virtual-keyboard {
            min-height: 80px; /* Placeholder height */
            border: 1px solid var(--border-color);
            background-color: var(--surface-color);
            margin-bottom: calc(var(--spacing-unit) * 2);
            border-radius: 4px;
            padding: var(--spacing-unit) * 2;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            color: var(--secondary-text-color);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .feedback-message {
            min-height: 30px;
            padding: var(--spacing-unit);
            border-radius: 4px;
            text-align: center;
            font-weight: 600;
            margin-bottom: var(--spacing-unit) * 2;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .feedback-message.success {
            background-color: var(--success-color-light);
            color: var(--success-color);
        }
         .feedback-message.warning {
            background-color: var(--warning-color-light);
            color: var(--warning-color);
        }
         .feedback-message.error {
            background-color: var(--error-color-light);
            color: var(--error-color);
        }


        /* Resource Library Styling */
        .resource-list {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Adjusted min width */
            gap: calc(var(--spacing-unit) * 3);
        }

        .resource-item {
            background-color: var(--background-color);
            padding: calc(var(--spacing-unit) * 2);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-unit);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03);
        }

        .resource-item h4 {
            margin: 0;
            color: var(--primary-color);
        }

        .resource-item p {
            margin: 0 0 var(--spacing-unit);
            font-size: 0.9em;
            color: var(--secondary-text-color);
        }

        .resource-item img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin-bottom: var(--spacing-unit);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .resource-item audio {
             width: 100%;
             -webkit-appearance: none;
             appearance: none;
             background-color: var(--surface-color);
             border-radius: 4px;
             padding: var(--spacing-unit);
             box-shadow: 0 1px 3px rgba(0, 0, 0, 0.03);
        }


        /* Tooltip Styling */
        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dashed var(--secondary-text-color); /* Indicate hoverable text */
        }

        .tooltip {
            visibility: hidden;
            background-color: var(--text-color);
            color: var(--surface-color);
            text-align: center;
            border-radius: 4px;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position above the text */
            left: 50%;
            transform: translateX(-50%); /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            font-size: 0.8em;
            min-width: 120px; /* Minimum width */
            white-space: nowrap; /* Prevent text wrapping */
            pointer-events: none; /* Allow clicks on elements below */
        }

        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: var(--text-color) transparent transparent transparent;
        }

        .tooltip-container:hover .tooltip {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-5px); /* Slight lift on hover */
        }

        /* Modal Styling */
        .modal-overlay {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 20;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
             overflow-y: auto; /* Allow scrolling if modal content is tall */
        }

        .modal-overlay.visible {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background-color: var(--surface-color);
            padding: calc(var(--spacing-unit) * 4);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2), 0 6px 20px rgba(0, 0, 0, 0.15);
            max-width: 500px;
            width: 90%;
            transform: translateY(-20px);
            transition: transform 0.3s ease, opacity 0.3s ease;
            opacity: 0;
             margin: var(--spacing-unit) * 4 auto; /* Add margin for vertical centering with overflow */
        }

         .modal-overlay.visible .modal-content {
             transform: translateY(0);
             opacity: 1;
         }

        .modal-content h3 {
            margin-top: 0;
            margin-bottom: calc(var(--spacing-unit) * 2);
            color: var(--primary-color);
        }

        .modal-content p {
            margin-bottom: calc(var(--spacing-unit) * 3);
        }

        .modal-actions {
            text-align: right;
        }

    </style>
</head>
<body>

    <header>
        <div class="site-title">🎹 Piano Path</div>
        <!-- Mobile nav toggle could go here -->
    </header>

    <div class="layout-container">
        <aside>
            <nav class="sidebar-nav" aria-label="Main Navigation">
                <ul>
                    <li><a href="#dashboard" class="nav-link" data-section="dashboard">Dashboard</a></li>
                    <li><a href="#fundamentals" class="nav-link" data-section="fundamentals">1. Piano Fundamentals</a></li>
                    <li><a href="#posture" class="nav-link" data-section="posture">2. Posture & Hand Shape</a></li>
                    <li><a href="#notes" class="nav-link" data-section="notes">3. Finding Notes</a></li>
                    <li><a href="#rhythm" class="nav-link" data-section="rhythm">4. Basic Rhythm</a></li>
                    <li><a href="#chords" class="nav-link" data-section="chords">5. Simple Chords</a></li>
                    <li><a href="#scales" class="nav-link" data-section="scales">6. Major Scales</a></li>
                    <li><a href="#resources" class="nav-link" data-section="resources">Resource Library</a></li>
                </ul>
            </nav>
        </aside>

        <main id="main-content" aria-live="polite">
            <!-- Content will be loaded here -->
        </main>
    </div>

    <!-- Modal Structure -->
    <div id="infoModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modal-content">
            <h3 id="modalTitle">Modal Title</h3>
            <p id="modalContent">Modal content goes here.</p>
            <div class="modal-actions">
                <button class="button secondary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        const mainContent = document.getElementById('main-content');
        const navLinks = document.querySelectorAll('.sidebar-nav .nav-link');
        const infoModal = document.getElementById('infoModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalContent = document.getElementById('modalContent');

        // --- Content Data (Simulated) ---
        // Added data-exercise-id attributes to buttons for delegation
        const contentData = {
            dashboard: `
                <section class="dashboard-section" aria-labelledby="dashboard-heading">
                    <h2 id="dashboard-heading">Your Progress</h2>
                    <div class="dashboard-summary">
                        <div class="completion-circle" id="overall-progress-circle" aria-label="Overall completion percentage">0%</div>
                        <div class="dashboard-info">
                            <h3>Overall Completion</h3>
                            <div class="progress-text" id="overall-progress-text">Keep going! You're making great progress.</div>
                            <div class="progress-bar-container"><div class="progress-bar" id="overall-progress-bar" style="width: 0%;"></div></div>
                        </div>
                    </div>
                    <div class="dashboard-actions">
                        <button class="button" data-nav-to="fundamentals">Continue Lesson</button>
                    </div>
                </section>
                <section class="dashboard-section" aria-labelledby="recent-activity-heading">
                    <h2 id="recent-activity-heading">Recent Activity</h2>
                    <p>Lesson 3: Finding Notes - 75% Complete</p>
                     <p>Exercise: Identify C - Passed</p>
                </section>
            `,
            fundamentals: `
                <section class="lesson-section" aria-labelledby="fundamentals-heading">
                    <h2 id="fundamentals-heading">1. Piano Fundamentals</h2>
                    <div class="lesson-content">
                        <p>Welcome to your piano journey! This lesson covers the absolute basics: understanding the layout of the piano keys.</p>
                        <p>The piano keyboard is made up of white and black keys. The black keys are grouped in sets of two and three. These groups help you find your way around the keyboard.</p>
                        <img src="https://placehold.co/600x300?text=Piano+Keyboard+Layout" alt="Diagram showing the layout of piano keys with groups of 2 and 3 black keys.">
                        <h3>Finding Middle C</h3>
                        <p>Middle C is one of the most important notes. It's typically the C near the center of the piano. Look for the group of two black keys. The white key immediately to the left of the two black keys is C.</p>
                        <p>Let's <span class="tooltip-container" aria-label="Information about Middle C audio example">hear Middle C<span class="tooltip" role="tooltip">Click to play audio example.</span></span>.</p>
                         <audio controls aria-label="Audio example of Middle C" src="https://www.soundjay.com/human/applause-01.mp3"></audio> <!-- Placeholder audio -->
                        <p>Practice finding all the C notes on your piano keyboard. They are always to the left of a group of two black keys.</p>
                    </div>
                     <div class="exercise-panel" aria-labelledby="exercise-fundamentals-heading">
                        <h3 id="exercise-fundamentals-heading">Exercise: Identify C</h3>
                        <p>Locate and play all the C notes on your piano. Click "Check" when you think you've found them all.</p>
                        <div class="musical-notation" aria-label="Musical notation display area">Musical notation placeholder (e.g., a C note on a staff)</div>
                        <div class="virtual-keyboard" aria-label="Virtual piano keyboard area">Virtual keyboard placeholder</div>
                        <div class="feedback-message" id="exercise-feedback-fundamentals" role="status" aria-live="polite"></div>
                        <div class="button-group">
                            <button class="button" data-exercise-id="identify-c" data-action="start">Start Exercise</button>
                            <button class="button secondary" data-exercise-id="identify-c" data-action="check" disabled>Check</button>
                        </div>
                    </div>
                </section>
            `,
             posture: `
                <section class="lesson-section" aria-labelledby="posture-heading">
                    <h2 id="posture-heading">2. Posture & Hand Shape</h2>
                    <div class="lesson-content">
                        <p>Proper posture and hand shape are crucial for comfortable and efficient playing, preventing strain and injury.</p>
                        <h3>Sitting Position</h3>
                        <p>Sit on the bench at a height where your forearms are roughly parallel to the floor when your fingers are on the keys. Your feet should be flat on the floor or on a footrest.</p>
                        <img src="https://placehold.co/600x300?text=Correct+Piano+Posture" alt="Illustration of correct sitting posture at a piano.">
                        <h3>Hand Shape</h3>
                        <p>Imagine you are holding a ball gently in each hand. Your fingers should be curved, and your wrist should be relaxed and level with your forearm, not bent up or down.</p>
                        <img src="https://placehold.co/600x300?text=Proper+Hand+Shape" alt="Illustration of the proper curved hand shape for playing piano.">
                        <p>Keep your shoulders relaxed and avoid tension in your arms and hands. This allows for fluid movement across the keys.</p>
                    </div>
                     <div class="exercise-panel" aria-labelledby="exercise-posture-heading">
                        <h3 id="exercise-posture-heading">Exercise: Hand Shape Check</h3>
                        <p>Observe your hand shape and posture. Adjust as needed. This exercise is observational.</p>
                         <div class="feedback-message" id="exercise-feedback-posture" role="status" aria-live="polite"></div>
                         <div class="button-group">
                            <button class="button secondary" data-modal-title="Hand Shape Tip" data-modal-content="Remember to keep your wrist relaxed and your fingers gently curved, like holding a small ball.">Show Tip</button>
                            <button class="button" data-exercise-id="hand-shape" data-action="complete">Mark as Practiced</button>
                        </div>
                    </div>
                </section>
            `,
             notes: `
                <section class="lesson-section" aria-labelledby="notes-heading">
                    <h2 id="notes-heading">3. Finding Notes</h2>
                    <div class="lesson-content">
                        <p>Building on finding C, let's learn to identify other notes using the black key groups.</p>
                        <p>The white keys are named using the first seven letters of the alphabet: A, B, C, D, E, F, G. This sequence repeats across the keyboard.</p>
                        <p>Remember: C is always to the left of the two black keys. D is between the two black keys. E is to the right of the two black keys.</p>
                        <p>F is to the left of the three black keys. G is between the first two of the three black keys. A is between the last two of the three black keys. B is to the right of the three black keys.</p>
                        <img src="https://placehold.co/600x300?text=Notes+Around+Black+Keys" alt="Diagram showing the location of notes A through G relative to the black key groups.">
                        <p>Practice identifying these notes quickly. Use the black key groups as your landmarks.</p>
                    </div>
                     <div class="exercise-panel" aria-labelledby="exercise-notes-heading">
                        <h3 id="exercise-notes-heading">Exercise: Note Identification</h3>
                        <p>Identify the notes indicated on the staff and find them on the virtual keyboard.</p>
                        <div class="musical-notation" aria-label="Musical notation display area">Musical notation placeholder (e.g., random notes on a staff)</div>
                        <div class="virtual-keyboard" aria-label="Virtual piano keyboard area">Virtual keyboard placeholder</div>
                        <div class="feedback-message" id="exercise-feedback-notes" role="status" aria-live="polite"></div>
                        <div class="button-group">
                            <button class="button" data-exercise-id="identify-notes" data-action="start">Start Exercise</button>
                            <button class="button secondary" data-exercise-id="identify-notes" data-action="check" disabled>Check</button>
                        </div>
                    </div>
                </section>
            `,
             rhythm: `
                <section class="lesson-section" aria-labelledby="rhythm-heading">
                    <h2 id="rhythm-heading">4. Basic Rhythm</h2>
                    <div class="lesson-content">
                        <p>Music isn't just about which notes to play, but also when and for how long. This is rhythm.</p>
                        <p>We'll start with basic note values: whole notes, half notes, quarter notes, and eighth notes.</p>
                        <ul>
                            <li>Whole Note: Held for 4 beats.</li>
                            <li>Half Note: Held for 2 beats.</li>
                            <li>Quarter Note: Held for 1 beat.</li>
                            <li>Eighth Note: Held for 1/2 beat.</li>
                        </ul>
                        <img src="https://placehold.co/600x300?text=Basic+Note+Values" alt="Diagram illustrating different musical note values and their durations.">
                        <p>A <span class="tooltip-container" aria-label="Definition of Metronome">metronome<span class="tooltip" role="tooltip">A device that marks time at a steady pace.</span></span> is essential for practicing rhythm. You can use a physical one, an app, or an online metronome.</p>
                        <p>Try clapping or tapping your foot along to a metronome set at a slow tempo (e.g., 60 BPM), counting "1-2-3-4". Then try playing a single note, holding it for 4 beats (whole note), then 2 (half note), then 1 (quarter note).</p>
                    </div>
                     <div class="exercise-panel" aria-labelledby="exercise-rhythm-heading">
                        <h3 id="exercise-rhythm-heading">Exercise: Play with a Metronome</h3>
                        <p>Practice playing a single note (like Middle C) along with a metronome at 80 BPM. Play quarter notes for 16 beats.</p>
                         <div class="feedback-message" id="exercise-feedback-rhythm" role="status" aria-live="polite"></div>
                         <div class="button-group">
                            <button class="button secondary" data-modal-title="Metronome Practice Instructions" data-modal-content="Set a metronome to 80 BPM. Play Middle C repeatedly, hitting the key exactly on each click of the metronome. Focus on timing and consistency.">Get Instructions</button>
                             <button class="button" data-exercise-id="metronome-practice" data-action="complete">Mark as Practiced</button>
                         </div>
                    </div>
                </section>
            `,
             chords: `
                <section class="lesson-section" aria-labelledby="chords-heading">
                    <h2 id="chords-heading">5. Simple Chords</h2>
                    <div class="lesson-content">
                        <p>A chord is when you play three or more notes simultaneously. The simplest chords are triads, made of three notes.</p>
                        <p>A Major chord is typically built using the 1st, 3rd, and 5th notes of the corresponding major scale.</p>
                        <h3>The C Major Chord</h3>
                        <p>The C Major chord consists of the notes C, E, and G. Find Middle C, then E (to the right of the two black keys), and G (between the first two of the three black keys).</p>
                        <img src="https://placehold.co/600x300?text=C+Major+Chord" alt="Diagram showing the notes C, E, and G highlighted on a piano keyboard.">
                        <p>Try playing C, E, and G together with your right hand (thumb on C, index on E, pinky on G). Make sure all three notes sound at the same time.</p>
                         <p>Let's <span class="tooltip-container" aria-label="Information about C Major chord audio example">hear C Major<span class="tooltip" role="tooltip">Click to play audio example.</span></span>.</p>
                         <audio controls aria-label="Audio example of C Major chord" src="https://www.soundjay.com/human/applause-02.mp3"></audio> <!-- Placeholder audio -->
                        <p>Practice playing the C Major chord cleanly.</p>
                    </div>
                    <div class="exercise-panel" aria-labelledby="exercise-chords-heading">
                        <h3 id="exercise-chords-heading">Exercise: Play C Major</h3>
                        <p>Play the C Major chord (C-E-G) on your piano. The system will check if you played the correct notes.</p>
                        <div class="musical-notation" aria-label="Musical notation display area">Musical notation placeholder (C Major chord on staff)</div>
                        <div class="virtual-keyboard" aria-label="Virtual piano keyboard area">Virtual keyboard placeholder</div>
                        <div class="feedback-message" id="exercise-feedback-chords" role="status" aria-live="polite"></div>
                        <div class="button-group">
                            <button class="button" data-exercise-id="play-c-major" data-action="start">Start Exercise</button>
                            <button class="button secondary" data-exercise-id="play-c-major" data-action="check" disabled>Check</button>
                         </div>
                    </div>
                </section>
            `,
             scales: `
                <section class="lesson-section" aria-labelledby="scales-heading">
                    <h2 id="scales-heading">6. Major Scales</h2>
                    <div class="lesson-content">
                        <p>Scales are fundamental building blocks of music. A scale is a series of notes played in ascending or descending order.</p>
                        <p>A Major scale follows a specific pattern of whole steps (W) and half steps (H): W-W-H-W-W-W-H.</p>
                        <h3>The C Major Scale</h3>
                        <p>The C Major scale is the easiest to start with because it uses only white keys: C, D, E, F, G, A, B, C (the next C up).</p>
                        <img src="https://placehold.co/600x300?text=C+Major+Scale+Notes" alt="Diagram showing the notes of the C Major scale highlighted on a piano keyboard.">
                        <p>Try playing these notes in order, from the first C to the next C, and then back down. Use comfortable fingering (e.g., Right hand: 1-2-3-1-2-3-4-5, then 5-4-3-2-1-3-2-1 descending).</p>
                        <p>Let's <span class="tooltip-container" aria-label="Information about C Major scale audio example">hear the C Major Scale<span class="tooltip" role="tooltip">Click to play audio example.</span></span>.</p>
                         <audio controls aria-label="Audio example of C Major scale" src="https://www.soundjay.com/human/applause-03.mp3"></audio> <!-- Placeholder audio -->
                        <p>Practice playing the C Major scale smoothly and evenly.</p>
                    </div>
                    <div class="exercise-panel" aria-labelledby="exercise-scales-heading">
                        <h3 id="exercise-scales-heading">Exercise: Play C Major Scale</h3>
                        <p>Play the C Major scale ascending and descending using your right hand. The system will listen for the correct notes and timing.</p>
                        <div class="musical-notation" aria-label="Musical notation display area">Musical notation placeholder (C Major scale on staff)</div>
                        <div class="virtual-keyboard" aria-label="Virtual piano keyboard area">Virtual keyboard placeholder</div>
                        <div class="feedback-message" id="exercise-feedback-scales" role="status" aria-live="polite"></div>
                        <div class="button-group">
                            <button class="button" data-exercise-id="play-c-major-scale" data-action="start">Start Exercise</button>
                            <button class="button secondary" data-exercise-id="play-c-major-scale" data-action="check" disabled>Check</button>
                        </div>
                    </div>
                </section>
            `,
             resources: `
                <section class="resource-section" aria-labelledby="resources-heading">
                    <h2 id="resources-heading">Resource Library</h2>
                    <p>Explore useful resources for your piano learning journey.</p>
                    <h3>Common Chords</h3>
                    <ul class="resource-list" aria-label="List of common chords">
                        <li class="resource-item">
                            <h4>C Major</h4>
                            <p>Notes: C, E, G</p>
                            <img src="https://placehold.co/280x150?text=C+Major+Diagram" alt="Diagram showing notes C, E, G on a keyboard.">
                            <audio controls aria-label="Audio example of C Major chord" src="https://www.soundjay.com/human/applause-01.mp3"></audio> <!-- Placeholder audio -->
                        </li>
                         <li class="resource-item">
                            <h4>G Major</h4>
                            <p>Notes: G, B, D</p>
                            <img src="https://placehold.co/280x150?text=G+Major+Diagram" alt="Diagram showing notes G, B, D on a keyboard.">
                            <audio controls aria-label="Audio example of G Major chord" src="https://www.soundjay.com/human/applause-02.mp3"></audio> <!-- Placeholder audio -->
                        </li>
                         <li class="resource-item">
                            <h4>A Minor</h4>
                            <p>Notes: A, C, E</p>
                            <img src="https://placehold.co/280x150?text=A+Minor+Diagram" alt="Diagram showing notes A, C, E on a keyboard.">
                            <audio controls aria-label="Audio example of A Minor chord" src="https://www.soundjay.com/human/applause-03.mp3"></audio> <!-- Placeholder audio -->
                        </li>
                        <!-- Add more chords -->
                    </ul>
                    <h3>Major Scales</h3>
                     <ul class="resource-list" aria-label="List of major scales">
                        <li class="resource-item">
                            <h4>C Major Scale</h4>
                            <p>Notes: C, D, E, F, G, A, B, C</p>
                            <img src="https://placehold.co/280x150?text=C+Major+Scale+Diagram" alt="Diagram showing notes C, D, E, F, G, A, B, C on a keyboard.">
                            <audio controls aria-label="Audio example of C Major scale" src="https://www.soundjay.com/human/applause-01.mp3"></audio> <!-- Placeholder audio -->
                        </li>
                         <li class="resource-item">
                            <h4>G Major Scale</h4>
                            <p>Notes: G, A, B, C, D, E, F#, G</p>
                            <img src="https://placehold.co/280x150?text=G+Major+Scale+Diagram" alt="Diagram showing notes G, A, B, C, D, E, F#, G on a keyboard.">
                            <audio controls aria-label="Audio example of G Major scale" src="https://www.soundjay.com/human/applause-02.mp3"></audio> <!-- Placeholder audio -->
                        </li>
                         <li class="resource-item">
                            <h4>D Major Scale</h4>
                            <p>Notes: D, E, F#, G, A, B, C#, D</p>
                            <img src="https://placehold.co/280x150?text=D+Major+Scale+Diagram" alt="Diagram showing notes D, E, F#, G, A, B, C#, D on a keyboard.">
                            <audio controls aria-label="Audio example of D Major scale" src="https://www.soundjay.com/human/applause-03.mp3"></audio> <!-- Placeholder audio -->
                        </li>
                        <!-- Add more scales -->
                    </ul>
                </section>
            `
        };

        // --- State Management (Simulated) ---
        // Define the structure for exercises within each lesson
        const initialProgress = {
            fundamentals: { completed: false, exercises: { 'identify-c': { passed: false, attempts: 0 } } },
            posture: { completed: false, exercises: { 'hand-shape': { practiced: false } } }, // Observational exercise
            notes: { completed: false, exercises: { 'identify-notes': { passed: false, attempts: 0 } } },
            rhythm: { completed: false, exercises: { 'metronome-practice': { practiced: false } } }, // Practice exercise
            chords: { completed: false, exercises: { 'play-c-major': { passed: false, attempts: 0 } } },
            scales: { completed: false, exercises: { 'play-c-major-scale': { passed: false, attempts: 0 } } },
            overall: 0 // Calculated percentage
        };

        let userProgress = { ...initialProgress }; // Use spread to avoid modifying initial object

        const lessonKeys = ['fundamentals', 'posture', 'notes', 'rhythm', 'chords', 'scales']; // Lessons that contribute to overall progress

        // Load progress from local storage
        function loadProgress() {
            const savedProgress = localStorage.getItem('pianoProgress');
            if (savedProgress) {
                try {
                    userProgress = JSON.parse(savedProgress);
                    // Basic validation/migration if needed
                    if (!userProgress.overall && userProgress.overall !== 0) {
                         userProgress = { ...initialProgress, ...userProgress }; // Merge saved with initial if structure changes
                    }
                } catch (e) {
                    console.error("Failed to load progress from localStorage:", e);
                    userProgress = { ...initialProgress }; // Reset if parsing fails
                }
            }
             updateOverallProgress(); // Update dashboard display on load
        }

        // Save progress to local storage
        function saveProgress() {
            localStorage.setItem('pianoProgress', JSON.stringify(userProgress));
        }

        // Update overall progress calculation and display
        function updateOverallProgress() {
            let completedLessonCount = 0;
            lessonKeys.forEach(key => {
                const lesson = userProgress[key];
                if (lesson) {
                    const exercises = lesson.exercises;
                    const allExercisesComplete = Object.keys(exercises).length > 0 &&
                                                 Object.values(exercises).every(ex => ex.passed === true || ex.practiced === true);

                    if (allExercisesComplete) {
                        lesson.completed = true;
                        completedLessonCount++;
                    } else {
                         lesson.completed = false; // Ensure it's false if not all exercises are done
                    }
                }
            });

            const totalLessons = lessonKeys.length;
            const overallPercentage = totalLessons > 0 ? Math.round((completedLessonCount / totalLessons) * 100) : 0;
            userProgress.overall = overallPercentage;

            const circle = document.getElementById('overall-progress-circle');
            const bar = document.getElementById('overall-progress-bar');
            const progressText = document.getElementById('overall-progress-text');

            if (circle) {
                 circle.textContent = `${overallPercentage}%`;
                 // Update conic gradient for circle
                 // CSS variables need to be accessed via getComputedStyle for dynamic calculations
                 const accentColor = getComputedStyle(document.documentElement).getPropertyValue('--accent-color').trim();
                 const borderColor = getComputedStyle(document.documentElement).getPropertyValue('--border-color').trim();
                 circle.style.background = `conic-gradient(${accentColor} ${overallPercentage}%, ${borderColor} ${overallPercentage}%)`;
            }
            if (bar) {
                bar.style.width = `${overallPercentage}%`;
            }
             if (progressText) {
                 if (overallPercentage === 100) {
                     progressText.textContent = "Congratulations! You've completed all lessons.";
                 } else if (overallPercentage > 75) {
                     progressText.textContent = "Almost there! Keep up the great work.";
                 } else if (overallPercentage > 40) {
                     progressText.textContent = "Good progress! You're halfway there.";
                 } else if (overallPercentage > 0) {
                      progressText.textContent = "Keep going! You're making great progress.";
                 } else {
                      progressText.textContent = "Start your piano journey today!";
                 }
             }


            saveProgress();
        }

        // --- Navigation ---
        function navigateTo(sectionId) {
            const content = contentData[sectionId] || '<section><h2>Content Not Found</h2><p>The requested content could not be loaded.</p></section>';
            mainContent.innerHTML = content;

            // Update active link in sidebar
            navLinks.forEach(link => {
                link.classList.remove('active');
                link.removeAttribute('aria-current');
                if (link.getAttribute('data-section') === sectionId) {
                    link.classList.add('active');
                    link.setAttribute('aria-current', 'page');
                }
            });

            // Scroll to top of main content
            mainContent.scrollTop = 0;

            // Add event listeners for elements in the loaded content
            addContentEventListeners();
            // Update exercise button states based on current progress
            updateExerciseButtonStates();
        }

        // --- Event Listeners for Loaded Content ---
        function addContentEventListeners() {
            // Use event delegation on mainContent for buttons within loaded sections
            mainContent.removeEventListener('click', handleMainContentClick); // Prevent multiple listeners
            mainContent.addEventListener('click', handleMainContentClick);

            // Add any other specific listeners needed for elements *within* mainContent
            // (e.g., if custom audio controls or interactive notation were implemented)
        }

        function handleMainContentClick(event) {
            const target = event.target;

            // Handle navigation buttons within content (like "Continue Lesson")
            if (target.matches('.button[data-nav-to]')) {
                event.preventDefault();
                const sectionId = target.getAttribute('data-nav-to');
                navigateTo(sectionId);
            }

            // Handle exercise buttons
            if (target.matches('.exercise-panel .button[data-exercise-id]')) {
                 const exerciseId = target.getAttribute('data-exercise-id');
                 const action = target.getAttribute('data-action');
                 const lessonId = target.closest('.lesson-section, .exercise-section').id.replace('-heading', ''); // Get lesson ID from section ID
                 if (action === 'start') {
                     startExercise(lessonId, exerciseId);
                 } else if (action === 'check') {
                     checkExercise(lessonId, exerciseId);
                 } else if (action === 'complete') {
                      completeExercise(lessonId, exerciseId);
                 }
            }

            // Handle modal trigger buttons
            if (target.matches('.button[data-modal-title]')) {
                 const title = target.getAttribute('data-modal-title');
                 const content = target.getAttribute('data-modal-content');
                 showModal(title, content);
            }

            // Handle tooltip triggers if they needed JS interaction (currently CSS only)
            // if (target.matches('.tooltip-container')) {
            //     // Optional JS enhancement for tooltips
            // }
        }


        // --- Interactive Exercise Placeholders ---

        // Function to update the state of buttons in the current exercise panel
        function updateExerciseButtonStates() {
            const currentSection = mainContent.querySelector('.exercise-panel');
            if (!currentSection) return;

            const exerciseButtons = currentSection.querySelectorAll('.button[data-exercise-id]');

            exerciseButtons.forEach(button => {
                 const exerciseId = button.getAttribute('data-exercise-id');
                 const action = button.getAttribute('data-action');
                 const lessonId = button.closest('.lesson-section, .exercise-section').id.replace('-heading', '');

                 const exerciseState = userProgress[lessonId]?.exercises?.[exerciseId];

                 if (!exerciseState) {
                     // Should not happen if initialProgress is set correctly
                     button.disabled = true;
                     return;
                 }

                 // Basic logic:
                 // Start button is enabled unless check or complete button is enabled
                 // Check button is enabled only after start is clicked (simulated)
                 // Complete button is enabled unless already completed/passed

                 const startBtn = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="start"]`);
                 const checkBtn = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="check"]`);
                 const completeBtn = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="complete"]`);
                 const feedbackElement = document.getElementById(`exercise-feedback-${lessonId}`);

                 if (action === 'start') {
                     // Disable start if check or complete is active/available
                     button.disabled = checkBtn ? !checkBtn.disabled : (completeBtn ? exerciseState.practiced : false);
                 } else if (action === 'check') {
                     // Check button is initially disabled, enabled by startExercise
                     // Re-disabled after checkExercise
                     // This state is managed within start/check functions
                 } else if (action === 'complete') {
                     // Disable complete if already practiced or if there's a 'passed' state and it's passed
                     button.disabled = exerciseState.practiced || exerciseState.passed;
                 }

                 // Update feedback message on load if exercise is complete
                 if (exerciseState.passed) {
                     if (feedbackElement) {
                         feedbackElement.textContent = 'Exercise passed.';
                         feedbackElement.className = 'feedback-message success';
                     }
                 } else if (exerciseState.practiced) {
                      if (feedbackElement) {
                         feedbackElement.textContent = 'Exercise marked as practiced.';
                         feedbackElement.className = 'feedback-message success';
                      }
                 } else if (exerciseState.attempts > 0) {
                      if (feedbackElement) {
                         feedbackElement.textContent = `Exercise attempted ${exerciseState.attempts} times. Try again!`;
                         feedbackElement.className = 'feedback-message error';
                      }
                 } else {
                     if (feedbackElement) {
                         feedbackElement.textContent = 'Ready to start the exercise.';
                         feedbackElement.className = 'feedback-message'; // Neutral state
                     }
                 }

            });
        }


        function startExercise(lessonId, exerciseId) {
            console.log(`Starting exercise: ${exerciseId} for lesson: ${lessonId}`);
            const feedbackElement = document.getElementById(`exercise-feedback-${lessonId}`);
            const currentSection = mainContent.querySelector(`.exercise-panel .button[data-exercise-id="${exerciseId}"]`).closest('.exercise-panel');

            if (feedbackElement) {
                 feedbackElement.textContent = 'Exercise started. Perform the task.';
                 feedbackElement.className = 'feedback-message warning';
            }

            // In a real app, this would initialize the notation, keyboard, and listening logic
            // For simulation, just enable the check button and disable the start button
            const startButton = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="start"]`);
            const checkButton = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="check"]`);
            const completeButton = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="complete"]`);


            if (startButton) startButton.disabled = true;
            if (checkButton) checkButton.disabled = false;
            // Complete button state doesn't change on start
        }

        function checkExercise(lessonId, exerciseId) {
            console.log(`Checking exercise: ${exerciseId} for lesson: ${lessonId}`);
            const feedbackElement = document.getElementById(`exercise-feedback-${lessonId}`);
            const currentSection = mainContent.querySelector(`.exercise-panel .button[data-exercise-id="${exerciseId}"]`).closest('.exercise-panel');


            // Simulate exercise result
            const passed = Math.random() > 0.3; // 70% chance of passing for demo

            if (passed) {
                if (feedbackElement) {
                    feedbackElement.textContent = 'Correct! Exercise passed.';
                    feedbackElement.className = 'feedback-message success';
                }
                // Update user progress for this specific exercise
                if (userProgress[lessonId]?.exercises?.[exerciseId]) {
                     userProgress[lessonId].exercises[exerciseId].passed = true;
                }
            } else {
                 if (feedbackElement) {
                    feedbackElement.textContent = 'Incorrect. Try again!';
                    feedbackElement.className = 'feedback-message error';
                }
                 // Increment attempt count
                 if (userProgress[lessonId]?.exercises?.[exerciseId]) {
                     userProgress[lessonId].exercises[exerciseId].attempts = (userProgress[lessonId].exercises[exerciseId].attempts || 0) + 1;
                 }
            }

            // Re-enable start button, disable check button
            const startButton = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="start"]`);
            const checkButton = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="check"]`);

            if (startButton) startButton.disabled = false;
            if (checkButton) checkButton.disabled = true;

            updateOverallProgress(); // Check if lesson is now complete
            saveProgress();
        }

        function completeExercise(lessonId, exerciseId) {
             console.log(`Marking exercise as practiced: ${exerciseId} for lesson: ${lessonId}`);
             const feedbackElement = document.getElementById(`exercise-feedback-${lessonId}`);
             const currentSection = mainContent.querySelector(`.exercise-panel .button[data-exercise-id="${exerciseId}"]`).closest('.exercise-panel');

             if (feedbackElement) {
                 feedbackElement.textContent = 'Exercise marked as practiced.';
                 feedbackElement.className = 'feedback-message success';
             }

             if (userProgress[lessonId]?.exercises?.[exerciseId]) {
                  userProgress[lessonId].exercises[exerciseId].practiced = true;
             }

             // Disable the complete button after marking as practiced
             const completeButton = currentSection.querySelector(`.button[data-exercise-id="${exerciseId}"][data-action="complete"]`);
             if (completeButton) completeButton.disabled = true;


             updateOverallProgress(); // Check if lesson is now complete
             saveProgress();
        }


        // --- Modal Functions ---
        function showModal(title, content) {
            modalTitle.textContent = title;
            modalContent.textContent = content;
            infoModal.classList.add('visible');
            infoModal.setAttribute('aria-hidden', 'false');
            // Optional: Trap focus inside modal
            // Optional: Add event listener to close on Escape key
        }

        function closeModal() {
            infoModal.classList.remove('visible');
            infoModal.setAttribute('aria-hidden', 'true');
            // Optional: Restore focus to the element that opened the modal
        }

        // Close modal if clicking outside the content
        infoModal.addEventListener('click', (e) => {
            if (e.target === infoModal) {
                closeModal();
            }
        });

         // Close modal on Escape key
         document.addEventListener('keydown', (e) => {
             if (e.key === 'Escape' && infoModal.classList.contains('visible')) {
                 closeModal();
             }
         });


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            loadProgress(); // Load progress first

            // Set up navigation event listeners using delegation on the sidebar nav
            const sidebarNav = document.querySelector('.sidebar-nav');
             if (sidebarNav) {
                 sidebarNav.addEventListener('click', (e) => {
                     const target = e.target;
                     if (target.matches('.nav-link')) {
                         e.preventDefault();
                         const sectionId = target.getAttribute('data-section');
                         navigateTo(sectionId);
                     }
                 });
             }


            // Load the initial content (Dashboard)
            // Check hash in URL for deep linking, otherwise load dashboard
            const initialSection = window.location.hash ? window.location.hash.substring(1) : 'dashboard';
            // Validate initial section exists in contentData
            if (contentData[initialSection]) {
                 navigateTo(initialSection);
            } else {
                 navigateTo('dashboard'); // Fallback to dashboard
            }

            // Update URL hash on navigation (optional, for deep linking)
            mainContent.addEventListener('content-loaded', (event) => {
                 const sectionId = event.detail.sectionId;
                 if (sectionId !== 'dashboard') { // Don't add #dashboard to URL
                     window.history.pushState(null, '', `#${sectionId}`);
                 } else if (window.location.hash) {
                     window.history.pushState(null, '', window.location.pathname); // Remove hash if navigating back to dashboard
                 }
            });
             // Dispatch a custom event after content is loaded in navigateTo
             const originalNavigateTo = navigateTo;
             navigateTo = (sectionId) => {
                 originalNavigateTo(sectionId);
                 const event = new CustomEvent('content-loaded', { detail: { sectionId: sectionId } });
                 mainContent.dispatchEvent(event);
             };


        });

    </script>
</body>
</html>
