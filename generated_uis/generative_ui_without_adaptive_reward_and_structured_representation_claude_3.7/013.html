<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Ranking Improvement Tool</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
    <style>
        :root {
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #2196F3; /* Blue */
            --accent-color: #FF9800; /* Orange */
            --error-color: #f44336; /* Red */
            --background-color: #f4f7f6; /* Light Grey */
            --surface-color: #ffffff; /* White */
            --text-color-dark: #333;
            --text-color-light: #666;
            --border-color: #e0e0e0;
            --shadow-color: rgba(0, 0, 0, 0.1);
            --spacing-unit: 8px;
            --border-radius: 8px;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color-dark);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-y: auto; /* Enable scrolling on body */
        }

        header {
            background-color: var(--surface-color);
            box-shadow: 0 2px 4px var(--shadow-color);
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary-color);
        }

        .container {
            display: flex;
            flex: 1;
            padding: calc(var(--spacing-unit) * 3);
            gap: calc(var(--spacing-unit) * 3);
        }

        aside {
            width: 250px;
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px var(--shadow-color);
            padding: calc(var(--spacing-unit) * 2);
            flex-shrink: 0;
            height: fit-content; /* Adjust height to content */
            position: sticky; /* Make sidebar sticky */
            top: calc(var(--spacing-unit) * 10); /* Position below header */
        }

        aside nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        aside nav ul li {
            margin-bottom: var(--spacing-unit);
        }

        aside nav ul li a {
            display: flex;
            align-items: center;
            gap: var(--spacing-unit);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            color: var(--text-color-dark);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        aside nav ul li a:hover {
            background-color: var(--background-color);
        }

        aside nav ul li a.active {
            background-color: var(--primary-color);
            color: var(--surface-color);
            font-weight: 500;
        }

         aside nav ul li a .material-symbols-rounded {
            font-size: 1.2em;
         }

        main {
            flex-grow: 1;
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px var(--shadow-color);
            padding: calc(var(--spacing-unit) * 3);
            display: flex;
            flex-direction: column;
        }

        #initial-view {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            padding: calc(var(--spacing-unit) * 4);
        }

        #initial-view h2 {
            margin-bottom: calc(var(--spacing-unit) * 2);
            color: var(--primary-color);
            font-size: 2em;
        }

         #initial-view p {
            margin-bottom: calc(var(--spacing-unit) * 3);
            color: var(--text-color-light);
            max-width: 500px;
         }


        .url-input-form {
            display: flex;
            gap: var(--spacing-unit);
            width: 100%;
            max-width: 600px;
        }

        .url-input-form input[type="text"] {
            flex-grow: 1;
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1em;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .url-input-form input[type="text"]:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
        }

        .analyze-button {
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 3);
            background-color: var(--primary-color);
            color: var(--surface-color);
            border: none;
            border-radius: var(--border-radius);
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s ease, opacity 0.2s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-unit);
            min-width: 120px; /* Ensure button doesn't shrink too much */
        }

        .analyze-button:hover:not(:disabled) {
            background-color: #388E3C; /* Darker Green */
        }

        .analyze-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading-spinner {
            display: none; /* Hidden by default */
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid var(--surface-color);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }

         .analyze-button.loading .loading-spinner {
            display: inline-block;
         }

         .analyze-button.loading span:not(.loading-spinner) {
            visibility: hidden; /* Hide text while loading */
         }


        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #url-error {
            color: var(--error-color);
            margin-top: var(--spacing-unit);
            text-align: left;
            width: 100%;
            max-width: 600px;
            display: none; /* Hidden by default */
        }

        #analysis-results {
            display: none; /* Hidden initially */
            flex-direction: column;
            gap: calc(var(--spacing-unit) * 3);
        }

        .dashboard-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: calc(var(--spacing-unit) * 2);
            margin-bottom: calc(var(--spacing-unit) * 3);
        }

        .summary-card {
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 2);
            box-shadow: 0 1px 3px var(--shadow-color);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .summary-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        .summary-card h3 {
            margin-top: 0;
            margin-bottom: var(--spacing-unit);
            font-size: 1.2em;
            color: var(--text-color-dark);
        }

        .summary-card .score {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: var(--spacing-unit);
        }
         .summary-card .score.good { color: var(--primary-color); }
         .summary-card .score.average { color: var(--accent-color); }
         .summary-card .score.poor { color: var(--error-color); }


        .summary-card p {
            margin: 0;
            font-size: 0.9em;
            color: var(--text-color-light);
        }

        .report-section {
            display: none; /* Hidden initially */
            flex-direction: column;
            gap: calc(var(--spacing-unit) * 2);
        }

        .report-section.active {
            display: flex;
        }

        .report-section h2 {
            margin-top: 0;
            color: var(--secondary-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: var(--spacing-unit);
            margin-bottom: calc(var(--spacing-unit) * 2);
            font-size: 1.8em;
        }

        .report-item {
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 2);
            box-shadow: 0 1px 3px var(--shadow-color);
            transition: box-shadow 0.2s ease;
        }
         .report-item:hover {
             box-shadow: 0 2px 6px var(--shadow-color);
         }

        .report-item h3 {
            margin-top: 0;
            margin-bottom: var(--spacing-unit);
            font-size: 1.1em;
            color: var(--text-color-dark);
        }

        .report-item p {
            margin-bottom: var(--spacing-unit);
            color: var(--text-color-light);
        }

        .report-item .details {
            margin-top: var(--spacing-unit);
            padding-top: var(--spacing-unit);
            border-top: 1px solid var(--border-color);
            font-size: 0.9em;
            color: var(--text-color-dark);
        }

         .report-item .details ul {
            list-style: disc;
            padding-left: calc(var(--spacing-unit) * 2);
            margin: var(--spacing-unit) 0 0 0;
         }

         .report-item .details li {
            margin-bottom: var(--spacing-unit);
         }


        .task-list ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .task-list li {
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            margin-bottom: var(--spacing-unit);
            display: flex;
            align-items: center;
            gap: var(--spacing-unit);
            box-shadow: 0 1px 3px var(--shadow-color);
            transition: opacity 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer; /* Make list item clickable */
        }

         .task-list li:hover {
             box-shadow: 0 2px 6px var(--shadow-color);
         }

        .task-list li input[type="checkbox"] {
            cursor: pointer;
            min-width: 18px; /* Ensure clickable area */
            min-height: 18px;
        }

        .task-list li.completed {
            opacity: 0.7;
            text-decoration: line-through;
            color: var(--text-color-light);
        }

         .task-list li label {
             flex-grow: 1;
             cursor: pointer;
         }

        .progress-bar-container {
            width: 100%;
            background-color: var(--border-color);
            border-radius: var(--border-radius);
            margin-top: calc(var(--spacing-unit) * 2);
            overflow: hidden;
        }

        .progress-bar {
            height: calc(var(--spacing-unit) * 2);
            width: 0%;
            background-color: var(--primary-color);
            border-radius: var(--border-radius);
            transition: width 0.4s ease-in-out;
            text-align: center;
            line-height: calc(var(--spacing-unit) * 2);
            color: var(--surface-color);
            font-size: 0.8em;
            font-weight: 500;
        }

        .chart-container {
            background-color: var(--background-color);
            border-radius: var(--border-radius);
            padding: calc(var(--spacing-unit) * 2);
            box-shadow: 0 1px 3px var(--shadow-color);
            margin-bottom: calc(var(--spacing-unit) * 2);
            position: relative;
            min-height: 250px; /* Minimum height for charts */
        }

        .chart-container canvas {
             max-height: 300px; /* Max height for responsiveness */
        }

        .floating-controls {
            position: absolute;
            top: calc(var(--spacing-unit) * 2);
            right: calc(var(--spacing-unit) * 2);
            background: rgba(255, 255, 255, 0.95);
            padding: var(--spacing-unit);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px var(--shadow-color);
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 10;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-unit);
        }
         .floating-controls label {
             font-size: 0.9em;
             color: var(--text-color-light);
         }
         .floating-controls select,
         .floating-controls input[type="color"] {
             padding: var(--spacing-unit) * 0.5;
             border: 1px solid var(--border-color);
             border-radius: var(--border-radius) * 0.5;
             font-size: 0.9em;
         }


        .floating-controls.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

         /* Accordion styles */
        .accordion-item {
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-unit);
            overflow: hidden;
        }

        .accordion-header {
            background-color: var(--background-color);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            transition: background-color 0.2s ease;
        }

        .accordion-header:hover {
            background-color: #e9ecef;
        }

        .accordion-header .material-symbols-rounded {
            transition: transform 0.3s ease;
        }

        .accordion-header.active .material-symbols-rounded {
            transform: rotate(180deg);
        }

        .accordion-content {
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 2);
            background-color: var(--surface-color);
            display: none; /* Hidden by default */
            border-top: 1px solid var(--border-color);
        }

        .accordion-content p,
        .accordion-content ul {
            margin-bottom: var(--spacing-unit);
        }
         .accordion-content ul {
             list-style: disc;
             padding-left: calc(var(--spacing-unit) * 2);
         }

        footer {
            background-color: var(--surface-color);
            box-shadow: 0 -2px 4px var(--shadow-color);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 4);
            text-align: center;
            font-size: 0.9em;
            color: var(--text-color-light);
            margin-top: auto; /* Push footer to the bottom */
        }

        /* Tooltip styles */
        [data-tooltip] {
            position: relative;
            cursor: help;
        }

        [data-tooltip]:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%; /* Position above the element */
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-color-dark);
            color: var(--surface-color);
            padding: var(--spacing-unit);
            border-radius: var(--border-radius);
            font-size: 0.8em;
            white-space: nowrap;
            z-index: 20;
            margin-bottom: var(--spacing-unit); /* Space between element and tooltip */
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }

         [data-tooltip]:hover::before {
             content: '';
             position: absolute;
             bottom: 100%;
             left: 50%;
             transform: translateX(-50%) translateY(var(--spacing-unit)); /* Position below tooltip */
             border-width: var(--spacing-unit) * 0.75 var(--spacing-unit) * 0.5 0 var(--spacing-unit) * 0.5;
             border-style: solid;
             border-color: var(--text-color-dark) transparent transparent transparent;
             z-index: 21;
             opacity: 0;
             visibility: hidden;
             transition: opacity 0.2s ease, visibility 0.2s ease;
         }

        [data-tooltip]:hover::after,
        [data-tooltip]:hover::before {
            opacity: 1;
            visibility: visible;
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: calc(var(--spacing-unit) * 2);
                gap: calc(var(--spacing-unit) * 2);
            }

            aside {
                width: 100%;
                padding: calc(var(--spacing-unit) * 1.5);
                position: static; /* Remove sticky on mobile */
                top: auto;
            }

            aside nav ul {
                display: flex;
                flex-wrap: wrap;
                gap: var(--spacing-unit);
            }

            aside nav ul li {
                margin-bottom: 0;
            }

            aside nav ul li a {
                 padding: calc(var(--spacing-unit) * 1.5);
                 justify-content: center;
            }

            main {
                padding: calc(var(--spacing-unit) * 2);
            }

            .url-input-form {
                flex-direction: column;
                align-items: stretch;
            }

            .analyze-button {
                width: 100%;
            }

            .dashboard-summary {
                grid-template-columns: 1fr;
            }

            header {
                padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
            }

             footer {
                padding: calc(var(--spacing-unit) * 1.5) calc(var(--spacing-unit) * 2);
            }

            .floating-controls {
                 position: static; /* Remove absolute positioning on mobile */
                 transform: none;
                 opacity: 1;
                 pointer-events: all;
                 box-shadow: none;
                 background: transparent;
                 padding: 0;
                 margin-top: var(--spacing-unit);
            }
        }
    </style>
    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // Make Chart available globally for easier access in embedded script
        window.Chart = Chart;
    </script>
</head>
<body>
    <header>
        <div class="logo">SEO Pro</div>
        <!-- Navigation could go here for top-bar style -->
    </header>

    <div class="container">
        <aside id="sidebar-nav">
            <nav>
                <ul>
                    <li><a href="#" data-section="dashboard" class="active" aria-controls="dashboard-section" role="tab"><span class="material-symbols-rounded">dashboard</span> Dashboard</a></li>
                    <li><a href="#" data-section="onpage" aria-controls="onpage-section" role="tab"><span class="material-symbols-rounded">article</span> On-Page SEO</a></li>
                    <li><a href="#" data-section="technical" aria-controls="technical-section" role="tab"><span class="material-symbols-rounded">engineering</span> Technical SEO</a></li>
                    <li><a href="#" data-section="backlinks" aria-controls="backlinks-section" role="tab"><span class="material-symbols-rounded">link</span> Backlinks</a></li>
                    <li><a href="#" data-section="tasks" aria-controls="tasks-section" role="tab"><span class="material-symbols-rounded">task_alt</span> Actionable Tasks</a></li>
                </ul>
            </nav>
        </aside>

        <main>
            <div id="initial-view">
                <h2>Analyze Your Website's SEO</h2>
                <p>Enter your website URL below to get a comprehensive SEO analysis and actionable recommendations.</p>
                <div class="url-input-form">
                    <input type="text" id="website-url" placeholder="e.g., https://www.example.com" aria-label="Website URL">
                    <button id="analyze-btn" class="analyze-button" aria-label="Analyze Website">
                        <span>Analyze</span>
                        <span class="loading-spinner"></span>
                    </button>
                </div>
                <p id="url-error" role="alert"></p>
            </div>

            <div id="analysis-results">
                <div id="dashboard-section" class="report-section active" role="tabpanel">
                    <h2>Dashboard Summary</h2>
                    <div class="dashboard-summary">
                        <div class="summary-card" data-tooltip="Overall SEO health score based on all factors.">
                            <h3>Overall Score</h3>
                            <div class="score good" id="score-overall">--</div>
                            <p>Overall SEO Health</p>
                        </div>
                        <div class="summary-card" data-tooltip="Score based on content, meta tags, and keywords.">
                             <h3>On-Page Score</h3>
                            <div class="score average" id="score-onpage">--</div>
                            <p>Content & Meta Data</p>
                        </div>
                        <div class="summary-card" data-tooltip="Score based on site speed, mobile, crawlability, etc.">
                             <h3>Technical Score</h3>
                            <div class="score good" id="score-technical">--</div>
                            <p>Site Performance & Structure</p>
                        </div>
                         <div class="summary-card" data-tooltip="Score based on the quality and quantity of incoming links.">
                             <h3>Backlink Quality</h3>
                            <div class="score poor" id="score-backlinks">--</div>
                            <p>Incoming Links Analysis</p>
                        </div>
                    </div>

                    <div class="chart-container" id="ranking-trend-chart-container">
                         <h3>Ranking Trend (Simulated)</h3>
                         <canvas id="ranking-trend-chart"></canvas>
                         <div class="floating-controls" id="ranking-trend-chart-controls">
                              <div class="control-group">
                                <label for="ranking-trend-chart-type">Chart Type:</label>
                                <select id="ranking-trend-chart-type">
                                    <option value="line">Line</option>
                                    <option value="bar">Bar</option>
                                </select>
                            </div>
                             <div class="control-group">
                                <label for="ranking-trend-chart-color">Line Color:</label>
                                <input type="color" id="ranking-trend-chart-color" value="#4CAF50">
                            </div>
                         </div>
                    </div>

                     <div class="chart-container" id="page-speed-chart-container">
                         <h3>Page Speed Distribution (Simulated)</h3>
                         <canvas id="page-speed-chart"></canvas>
                          <div class="floating-controls" id="page-speed-chart-controls">
                              <div class="control-group">
                                <label for="page-speed-chart-type">Chart Type:</label>
                                <select id="page-speed-chart-type">
                                    <option value="bar">Bar</option>
                                    <option value="pie">Pie</option>
                                </select>
                            </div>
                             <div class="control-group">
                                <label for="page-speed-chart-color-good">Good Color:</label>
                                <input type="color" id="page-speed-chart-color-good" value="#4CAF50">
                            </div>
                            <div class="control-group">
                                <label for="page-speed-chart-color-average">Average Color:</label>
                                <input type="color" id="page-speed-chart-color-average" value="#FF9800">
                            </div>
                             <div class="control-group">
                                <label for="page-speed-chart-color-poor">Poor Color:</label>
                                <input type="color" id="page-speed-chart-color-poor" value="#f44336">
                            </div>
                         </div>
                    </div>

                </div>

                <div id="onpage-section" class="report-section" role="tabpanel">
                    <h2>On-Page SEO Report</h2>
                    <!-- Accordion for detailed items -->
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                            <h3>Title Tags</h3>
                             <span class="material-symbols-rounded">expand_more</span>
                        </div>
                        <div class="accordion-content">
                            <p>Analysis of your page titles. Ensure they are unique, descriptive, and include relevant keywords.</p>
                            <div class="details">
                                <h4>Findings:</h4>
                                <ul id="onpage-titles-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                             <h3>Meta Descriptions</h3>
                              <span class="material-symbols-rounded">expand_more</span>
                        </div>
                        <div class="accordion-content">
                            <p>Analysis of your meta descriptions. They should be compelling calls to action under 160 characters.</p>
                            <div class="details">
                                <h4>Findings:</h4>
                                <ul id="onpage-meta-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                             <h3>Content Quality & Keywords</h3>
                              <span class="material-symbols-rounded">expand_more</span>
                        </div>
                        <div class="accordion-content">
                            <p>Assessment of content length, keyword usage, and readability. Content should be valuable and relevant to the user's search intent.</p>
                            <div class="details">
                                <h4>Findings:</h4>
                                <ul id="onpage-content-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="technical-section" class="report-section" role="tabpanel">
                    <h2>Technical SEO Report</h2>
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                             <h3>Site Speed</h3>
                              <span class="material-symbols-rounded">expand_more</span>
                        </div>
                        <div class="accordion-content">
                            <p>Performance metrics for page loading speed. Faster sites improve user experience and ranking.</p>
                            <div class="details">
                                <h4>Findings:</h4>
                                <ul id="technical-speed-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                             <h3>Mobile Friendliness</h3>
                              <span class="material-symbols-rounded">expand_more</span>
                        </div>
                        <div class="accordion-content">
                            <p>How well your site works on mobile devices. Mobile-first indexing is crucial.</p>
                             <div class="details">
                                <h4>Findings:</h4>
                                <ul id="technical-mobile-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                             <h3>Crawlability & Indexability</h3>
                              <span class="material-symbols-rounded">expand_more</span>
                        </div>
                         <div class="accordion-content">
                            <p>Ensuring search engines can access and index your site. Check robots.txt, sitemaps, and meta robots tags.</p>
                             <div class="details">
                                <h4>Findings:</h4>
                                <ul id="technical-crawl-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="backlinks-section" class="report-section" role="tabpanel">
                    <h2>Backlinks Report</h2>
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                             <h3>Referring Domains</h3>
                              <span class="material-symbols-rounded">expand_more</span>
                        </div>
                         <div class="accordion-content">
                            <p>List of websites linking to yours. Focus on acquiring high-authority, relevant backlinks.</p>
                             <div class="details">
                                <h4>Findings:</h4>
                                <ul id="backlinks-domains-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                     <div class="accordion-item">
                        <div class="accordion-header" tabindex="0" role="button" aria-expanded="false">
                             <h3>Anchor Text Distribution</h3>
                              <span class="material-symbols-rounded">expand_more</span>
                        </div>
                         <div class="accordion-content">
                            <p>Analysis of the text used in backlinks. A natural mix of branded, exact match, partial match, and generic anchor text is best.</p>
                             <div class="details">
                                <h4>Findings:</h4>
                                <ul id="backlinks-anchor-details">
                                    <!-- Details populated by JS -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="tasks-section" class="report-section" role="tabpanel">
                    <h2>Actionable Tasks</h2>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="tasks-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                    </div>
                    <div class="task-list">
                        <ul id="task-list-items">
                            <!-- Tasks populated by JS -->
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer>
        &copy; 2023 SEO Pro. All rights reserved.
    </footer>

    <script>
        const urlInput = document.getElementById('website-url');
        const analyzeBtn = document.getElementById('analyze-btn');
        const loadingSpinner = analyzeBtn.querySelector('.loading-spinner');
        const urlError = document.getElementById('url-error');
        const initialView = document.getElementById('initial-view');
        const analysisResults = document.getElementById('analysis-results');
        const sidebarNav = document.getElementById('sidebar-nav');
        const navLinks = sidebarNav.querySelectorAll('a');
        const reportSections = document.querySelectorAll('.report-section');
        const tasksProgressBar = document.getElementById('tasks-progress');

        let rankingTrendChart = null;
        let pageSpeedChart = null;

        // Simulated analysis data (more detailed)
        const simulatedAnalysisData = {
            overallScore: 75,
            onpageScore: 80,
            technicalScore: 70,
            backlinksScore: 60,
            rankingTrend: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                data: [85, 82, 78, 75, 76, 75] // Simulated ranking position (lower is better)
            },
            pageSpeedDistribution: {
                 labels: ['Good (<2.5s)', 'Average (2.5-4s)', 'Poor (>4s)'],
                 data: [40, 35, 25] // Percentage of pages
            },
            onPageDetails: [
                { title: 'Title Tags', description: 'All pages have unique, optimized titles.', findings: ['Homepage title is perfect.', 'Blog post titles could be more engaging.', 'Product page titles are missing brand name.'] },
                { title: 'Meta Descriptions', description: 'Most pages have compelling meta descriptions.', findings: ['About page meta description is too short.', 'Category pages need unique meta descriptions.', 'Check character limits on contact page.'] },
                { title: 'Content Quality & Keywords', description: 'Content is relevant and engaging, but some pages are thin.', findings: ['Blog posts are high quality.', 'Service pages need more detailed content.', 'Keyword density is low on landing pages.'] }
            ],
            technicalDetails: [
                { title: 'Site Speed', description: 'Average page load time is 3.5s - needs improvement.', findings: ['Images are not optimized.', 'Leverage browser caching.', 'Reduce server response time.'] },
                { title: 'Mobile Friendliness', description: 'Site is fully responsive.', findings: ['All pages pass mobile-friendly test.', 'Touch elements are well-spaced.'] },
                { title: 'Crawlability & Indexability', description: 'Ensuring search engines can access and index your site.', findings: ['Robots.txt is correctly configured.', 'XML sitemap is up-to-date.', 'No broken internal links found.'] }
            ],
            backlinksDetails: [
                { title: 'Referring Domains', description: 'You have 50 referring domains, but some are low quality.', findings: ['Identify and disavow spammy links.', 'Focus on acquiring links from authoritative sites.', 'Track new referring domains regularly.'] },
                { title: 'Anchor Text Distribution', description: 'Analysis of the text used in backlinks.', findings: ['Anchor text is varied but needs more branded terms.', 'Avoid over-optimizing with exact match keywords.', 'Analyze competitor anchor text profiles.'] }
            ],
            tasks: [
                { id: 'task1', description: 'Optimize Title Tag for Homepage', completed: false, section: 'onpage' },
                { id: 'task2', description: 'Improve Page Speed for Key Landing Pages', completed: false, section: 'technical' },
                { id: 'task3', description: 'Add Alt Text to Images', completed: false, section: 'onpage' },
                { id: 'task4', description: 'Build 2 High-Quality Backlinks', completed: false, section: 'backlinks' },
                 { id: 'task5', description: 'Create unique Meta Descriptions for Category Pages', completed: false, section: 'onpage' },
                 { id: 'task6', description: 'Compress images on site', completed: false, section: 'technical' },
            ]
        };

        function isValidUrl(string) {
            try {
                const url = new URL(string);
                // Basic check for http/https protocols
                return url.protocol === 'http:' || url.protocol === 'https:';
            } catch (e) {
                return false;
            }
        }

        function getScoreClass(score) {
            if (score >= 70) return 'good';
            if (score >= 40) return 'average';
            return 'poor';
        }

        function populateReportSection(sectionId, details) {
            const section = document.getElementById(sectionId);
            // Find all accordion content areas within the section
            const accordionContents = section.querySelectorAll('.accordion-content');

            details.forEach(item => {
                // Find the corresponding accordion content by matching title
                const headerElement = Array.from(section.querySelectorAll('.accordion-header h3')).find(h3 => h3.textContent.trim() === item.title);
                if (headerElement) {
                    const accordionContent = headerElement.closest('.accordion-item').querySelector('.accordion-content');
                    const detailsList = accordionContent.querySelector('.details ul');
                    if (detailsList) {
                        detailsList.innerHTML = ''; // Clear existing items
                        item.findings.forEach(finding => {
                            const li = document.createElement('li');
                            li.textContent = finding;
                            detailsList.appendChild(li);
                        });
                    }
                }
            });
        }

        function populateTaskList(tasks) {
            const taskListUl = document.getElementById('task-list-items');
            taskListUl.innerHTML = ''; // Clear existing items

            tasks.forEach(task => {
                const li = document.createElement('li');
                li.classList.add('task-item'); // Add a class for easier selection
                if (task.completed) {
                    li.classList.add('completed');
                }
                 // Add data attribute to link task to report section
                li.setAttribute('data-section', task.section);
                 // Add ARIA attributes
                 li.setAttribute('role', 'listitem');


                li.innerHTML = `
                    <input type="checkbox" id="${task.id}" ${task.completed ? 'checked' : ''} aria-label="Mark task '${task.description}' as complete">
                    <label for="${task.id}">${task.description}</label>
                     <span class="material-symbols-rounded" style="font-size: 1.2em; color: var(--secondary-color);">info</span>
                `;
                taskListUl.appendChild(li);

                // Add event listener to the checkbox
                li.querySelector('input[type="checkbox"]').addEventListener('change', function() {
                    const isChecked = this.checked;
                    const taskItem = this.closest('.task-item');
                    if (isChecked) {
                        taskItem.classList.add('completed');
                    } else {
                        taskItem.classList.remove('completed');
                    }

                    // Simulate updating task status in data
                    const taskId = this.id;
                    const taskData = simulatedAnalysisData.tasks.find(t => t.id === taskId);
                    if (taskData) {
                        taskData.completed = isChecked;
                    }

                    // Update progress bar
                    updateTasksProgress();
                });

                 // Add click listener to the list item (excluding checkbox area) for potential future detail view or linking
                 li.addEventListener('click', function(event) {
                     // Prevent label click from triggering this if checkbox is clicked
                     if (event.target.tagName === 'INPUT' || event.target.tagName === 'LABEL') {
                         return;
                     }
                     // Optional: Implement logic to show task details or navigate to relevant report section
                     const section = this.getAttribute('data-section');
                     if (section) {
                         // Simulate navigating to the relevant section
                         const targetLink = document.querySelector(`aside nav ul li a[data-section="${section}"]`);
                         if (targetLink) {
                             targetLink.click(); // Trigger the navigation click
                         }
                     }
                 });
            });

            // Initial progress bar update
            updateTasksProgress();
        }

        function updateTasksProgress() {
            const completedTasks = simulatedAnalysisData.tasks.filter(task => task.completed).length;
            const totalTasks = simulatedAnalysisData.tasks.length;
            const progress = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;

            tasksProgressBar.style.width = progress + '%';
            tasksProgressBar.textContent = progress + '%';
            tasksProgressBar.setAttribute('aria-valuenow', progress);
        }


        function renderCharts(data) {
            // Destroy existing charts if they exist
            if (rankingTrendChart) rankingTrendChart.destroy();
            if (pageSpeedChart) pageSpeedChart.destroy();

            // Ranking Trend Chart
            const rankingCtx = document.getElementById('ranking-trend-chart').getContext('2d');
            rankingTrendChart = new Chart(rankingCtx, {
                type: 'line',
                data: {
                    labels: data.rankingTrend.labels,
                    datasets: [{
                        label: 'Ranking Position',
                        data: data.rankingTrend.data,
                        borderColor: "var(--primary-color)", // Use CSS variable
                        backgroundColor: "rgba(76, 175, 80, 0.2)", // Use CSS variable
                        tension: 0.3,
                        fill: true,
                        pointBackgroundColor: "var(--primary-color)",
                        pointBorderColor: "var(--surface-color)",
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            reverse: true, // Lower rank is better
                            title: {
                                display: true,
                                text: 'Ranking Position'
                            },
                            suggestedMin: Math.min(...data.rankingTrend.data) - 5,
                            suggestedMax: Math.max(...data.rankingTrend.data) + 5,
                        },
                        x: {
                             title: {
                                display: true,
                                text: 'Month'
                            }
                        }
                    },
                     plugins: {
                        legend: {
                            display: false
                        },
                         tooltip: {
                             callbacks: {
                                 label: function(context) {
                                     let label = context.dataset.label || '';
                                     if (label) {
                                         label += ': ';
                                     }
                                     if (context.parsed.y !== null) {
                                         label += `Rank ${context.parsed.y}`;
                                     }
                                     return label;
                                 }
                             }
                         }
                    }
                }
            });

             // Page Speed Distribution Chart
            const pageSpeedCtx = document.getElementById('page-speed-chart').getContext('2d');
             pageSpeedChart = new Chart(pageSpeedCtx, {
                type: 'bar',
                data: {
                    labels: data.pageSpeedDistribution.labels,
                    datasets: [{
                        label: 'Percentage of Pages',
                        data: data.pageSpeedDistribution.data,
                        backgroundColor: [
                            "var(--primary-color)", // Good
                            "var(--accent-color)", // Average
                            "var(--error-color)"  // Poor
                        ],
                        borderColor: "var(--surface-color)",
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Percentage (%)'
                            },
                            max: 100
                        },
                         x: {
                             title: {
                                display: true,
                                text: 'Speed Category'
                            }
                         }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                         tooltip: {
                             callbacks: {
                                 label: function(context) {
                                     let label = context.label || '';
                                     if (label) {
                                         label += ': ';
                                     }
                                     if (context.parsed.y !== null) {
                                         label += `${context.parsed.y}%`;
                                     }
                                     return label;
                                 }
                             }
                         }
                    }
                }
            });

             // Add floating controls logic
             setupChartControls('ranking-trend-chart', rankingTrendChart);
             setupChartControls('page-speed-chart', pageSpeedChart);
        }

         function setupChartControls(chartId, chartInstance) {
            const container = document.getElementById(`${chartId}-container`);
            const controls = document.getElementById(`${chartId}-controls`);

            // Toggle controls visibility on container click
            container.addEventListener('click', (e) => {
                // Prevent toggling if clicking inside controls
                if (!controls.contains(e.target)) {
                     controls.classList.toggle('active');
                }
            });

             // Close controls when clicking outside container and controls
            document.addEventListener('click', (e) => {
                if (!container.contains(e.target) && !controls.contains(e.target)) {
                    controls.classList.remove('active');
                }
            });


            // Add event listeners for controls
            const typeSelect = document.getElementById(`${chartId}-type`);
            if (typeSelect) {
                typeSelect.addEventListener('change', (e) => {
                    chartInstance.config.type = e.target.value;
                    chartInstance.update();
                });
            }

            // Specific color controls for each chart type
            if (chartId === 'ranking-trend-chart') {
                 const colorInput = document.getElementById(`${chartId}-color`);
                 if (colorInput) {
                     colorInput.addEventListener('input', (e) => { // Use input for real-time update
                         chartInstance.config.data.datasets[0].borderColor = e.target.value;
                         // Optionally update background color with some transparency
                         const hex = e.target.value;
                         const r = parseInt(hex.slice(1, 3), 16);
                         const g = parseInt(hex.slice(3, 5), 16);
                         const b = parseInt(hex.slice(5, 7), 16);
                         chartInstance.config.data.datasets[0].backgroundColor = `rgba(${r}, ${g}, ${b}, 0.2)`;
                         chartInstance.update();
                     });
                 }
            } else if (chartId === 'page-speed-chart') {
                 const goodColor = document.getElementById(`${chartId}-color-good`);
                 const averageColor = document.getElementById(`${chartId}-color-average`);
                 const poorColor = document.getElementById(`${chartId}-color-poor`);

                 if (goodColor) goodColor.addEventListener('input', (e) => { chartInstance.config.data.datasets[0].backgroundColor[0] = e.target.value; chartInstance.update(); });
                 if (averageColor) averageColor.addEventListener('input', (e) => { chartInstance.config.data.datasets[0].backgroundColor[1] = e.target.value; chartInstance.update(); });
                 if (poorColor) poorColor.addEventListener('input', (e) => { chartInstance.config.data.datasets[0].backgroundColor[2] = e.target.value; chartInstance.update(); });
            }

            // Add more controls as needed (e.g., filters, zoom, data range)
         }


        analyzeBtn.addEventListener('click', () => {
            const url = urlInput.value.trim();
            urlError.style.display = 'none';
            urlError.textContent = '';

            if (!url) {
                urlError.textContent = 'Please enter a website URL.';
                urlError.style.display = 'block';
                urlInput.setAttribute('aria-invalid', 'true');
                return;
            }

            if (!isValidUrl(url)) {
                 urlError.textContent = 'Please enter a valid URL (e.g., https://www.example.com).';
                 urlError.style.display = 'block';
                 urlInput.setAttribute('aria-invalid', 'true');
                 return;
            }

            urlInput.setAttribute('aria-invalid', 'false');

            // Simulate loading state
            analyzeBtn.disabled = true;
            analyzeBtn.classList.add('loading');
            // analyzeBtn.textContent = 'Analyzing...'; // Text is now hidden by CSS
            // loadingSpinner.style.display = 'inline-block'; // Display handled by CSS class

            // Simulate analysis delay
            setTimeout(() => {
                // Hide spinner and reset button
                analyzeBtn.classList.remove('loading');
                analyzeBtn.disabled = false;
                // loadingSpinner.style.display = 'none'; // Handled by CSS class
                // analyzeBtn.textContent = 'Analyze'; // Text is now visible by CSS class

                // Display simulated results
                displayAnalysisResults(simulatedAnalysisData);
                renderCharts(simulatedAnalysisData);

                // Activate dashboard link in sidebar
                navLinks.forEach(link => link.classList.remove('active'));
                document.querySelector('a[data-section="dashboard"]').classList.add('active');

            }, 2000); // Simulate 2-second analysis time
        });

        // Sidebar navigation logic
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetSectionId = e.target.getAttribute('data-section') + '-section';

                // Remove active class from all links and set aria-selected/aria-expanded
                navLinks.forEach(nav => {
                    nav.classList.remove('active');
                    nav.setAttribute('aria-selected', 'false');
                    // Assuming navigation links control tab panels, set aria-expanded accordingly
                    const controlsId = nav.getAttribute('aria-controls');
                     if(controlsId) document.getElementById(controlsId).setAttribute('aria-hidden', 'true');
                });
                // Add active class to the clicked link
                e.target.classList.add('active');
                 e.target.setAttribute('aria-selected', 'true');
                 const targetControlsId = e.target.getAttribute('aria-controls');
                 if(targetControlsId) document.getElementById(targetControlsId).setAttribute('aria-hidden', 'false');


                // Hide all report sections
                reportSections.forEach(section => section.classList.remove('active'));

                // Show the target section
                const targetSection = document.getElementById(targetSectionId);
                if (targetSection) {
                    targetSection.classList.add('active');
                }

                // Optional: Scroll to top of main content
                main.scrollTop = 0;
            });
        });

        // Accordion logic for report sections
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        accordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const accordionItem = header.closest('.accordion-item');
                const content = accordionItem.querySelector('.accordion-content');
                const isActive = header.classList.contains('active');

                // Close all other accordions in the same section
                header.closest('.report-section').querySelectorAll('.accordion-header').forEach(otherHeader => {
                     if (otherHeader !== header && otherHeader.classList.contains('active')) {
                         otherHeader.classList.remove('active');
                         otherHeader.setAttribute('aria-expanded', 'false');
                         otherHeader.nextElementSibling.style.display = 'none';
                     }
                });


                if (isActive) {
                    header.classList.remove('active');
                     content.style.display = 'none';
                     header.setAttribute('aria-expanded', 'false');
                } else {
                    header.classList.add('active');
                    content.style.display = 'block'; // Use block for simple toggle
                     header.setAttribute('aria-expanded', 'true');
                }
            });

             // Add keyboard support for accordion headers
             header.addEventListener('keydown', (event) => {
                 if (event.key === 'Enter' || event.key === ' ') {
                     event.preventDefault();
                     header.click(); // Trigger click event
                 }
             });
        });


        function displayAnalysisResults(data) {
            // Update Dashboard Scores
            document.getElementById('score-overall').textContent = data.overallScore;
            document.getElementById('score-onpage').textContent = data.onpageScore;
            document.getElementById('score-technical').textContent = data.technicalScore;
            document.getElementById('score-backlinks').textContent = data.backlinksScore;

            // Set score color classes
            document.getElementById('score-overall').className = 'score ' + getScoreClass(data.overallScore);
            document.getElementById('score-onpage').className = 'score ' + getScoreClass(data.onpageScore);
            document.getElementById('score-technical').className = 'score ' + getScoreClass(data.technicalScore);
            document.getElementById('score-backlinks').className = 'score ' + getScoreClass(data.backlinksScore);


            // Populate Report Sections (using accordions)
            populateReportSection('onpage-section', data.onPageDetails);
            populateReportSection('technical-section', data.technicalDetails);
            populateReportSection('backlinks-section', data.backlinksDetails);

            // Populate Tasks
            populateTaskList(data.tasks);

            // Show results, hide initial view
            initialView.style.display = 'none';
            analysisResults.style.display = 'flex';
            sidebarNav.style.display = 'block'; // Ensure sidebar is visible

             // Ensure initial dashboard section is active and sidebar link is selected
            document.getElementById('dashboard-section').classList.add('active');
            document.querySelector('a[data-section="dashboard"]').classList.add('active');
             document.querySelector('a[data-section="dashboard"]').setAttribute('aria-selected', 'true');
             document.getElementById('dashboard-section').setAttribute('aria-hidden', 'false');

             // Hide other sections initially for ARIA
             reportSections.forEach(section => {
                 if (section.id !== 'dashboard-section') {
                     section.setAttribute('aria-hidden', 'true');
                 }
             });
        }


        // Initial state: Hide sidebar and analysis results
        analysisResults.style.display = 'none';
        sidebarNav.style.display = 'none';
        initialView.style.display = 'flex'; // Ensure initial view is visible on load

    </script>
</body>
</html>
