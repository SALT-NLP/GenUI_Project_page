<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindCare Connect - Mental Wellness Platform</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Open+Sans:wght@400;600&display=swap">
    <style>
        :root {
            --primary-color: #5a67d8; /* Calming blue/purple */
            --secondary-color: #805ad5; /* Deeper purple */
            --accent-color: #63b3ed; /* Lighter blue accent */
            --background-color: #f7fafc; /* Light gray background */
            --text-color: #2d3748; /* Dark gray for text */
            --light-text-color: #4a5568; /* Slightly lighter gray */
            --border-color: #e2e8f0; /* Light gray border */
            --card-background: #ffffff; /* White card background */
            --shadow-color: rgba(0, 0, 0, 0.08);
            --hover-shadow: rgba(0, 0, 0, 0.12);
            --focus-outline-color: #63b3ed; /* Accent color for focus */
        }

        body {
            font-family: 'Open Sans', sans-serif;
            line-height: 1.7;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 8px var(--shadow-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        nav .logo {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            text-decoration: none;
            padding: 0.5rem 0;
        }

        nav ul {
            list-style: none;
            display: flex;
            gap: 1.5rem;
            margin: 0;
            padding: 0;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 0;
            transition: color 0.3s ease;
            position: relative;
        }

        nav ul li a::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s ease;
        }

        nav ul li a:hover::after,
        nav ul li a:focus::after {
            width: 100%;
        }

        nav ul li a:hover,
        nav ul li a:focus {
            color: var(--accent-color);
            outline: none;
        }

        main {
            flex-grow: 1;
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            width: 100%;
        }

        section {
            margin-bottom: 3rem;
            padding: 2.5rem;
            background-color: var(--card-background);
            border-radius: 12px;
            box-shadow: 0 6px 16px var(--shadow-color);
        }

        h1, h2, h3 {
            font-family: 'Roboto', sans-serif;
            color: var(--secondary-color);
            margin-bottom: 1.2rem;
            font-weight: 700;
        }

        h1 {
            font-size: 3rem;
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        h2 {
            font-size: 2.2rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.8rem;
            margin-bottom: 1.5rem;
        }

        h3 {
            font-size: 1.6rem;
            margin-top: 1.5rem;
            color: var(--primary-color);
        }

        p {
            margin-bottom: 1.2rem;
            color: var(--light-text-color);
        }

        ul {
            margin-bottom: 1.2rem;
            padding-left: 1.5rem;
            color: var(--light-text-color);
        }

        ul li {
            margin-bottom: 0.5rem;
        }

        .button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 0.9rem 2rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .button:hover,
        .button:focus {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            outline: none;
        }

         .button + .button {
            margin-left: 1.5rem;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .card {
            background-color: var(--card-background);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px var(--shadow-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 20px var(--hover-shadow);
        }

        .card h3 {
            margin-top: 0;
            margin-bottom: 0.8rem;
            color: var(--primary-color);
            font-size: 1.4rem;
        }

        .card p {
            margin-bottom: 0;
            font-size: 1rem;
        }

        /* Accordion Styles */
        .accordion {
            border-radius: 8px;
            overflow: hidden;
            margin-top: 2rem;
        }

        .accordion-item {
            border-bottom: 1px solid var(--border-color);
        }

        .accordion-item:last-child {
            border-bottom: none;
        }

        .accordion-header {
            background-color: var(--background-color);
            padding: 1.2rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease;
            font-size: 1.1rem;
            border: none;
            width: 100%;
            text-align: left;
        }

        .accordion-header:hover,
        .accordion-header:focus {
            background-color: #edf2f7; /* Light hover state */
            outline: none;
        }

        .accordion-header svg {
            transition: transform 0.3s ease;
        }

        .accordion-header[aria-expanded="true"] svg {
            transform: rotate(180deg);
        }

        .accordion-content {
            padding: 0 1.5rem;
            background-color: var(--card-background);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }

        .accordion-content p {
            padding-top: 1rem;
            padding-bottom: 1.5rem;
            margin-bottom: 0;
        }

        .accordion-header[aria-expanded="true"] + .accordion-content {
            max-height: 500px; /* Adjust based on expected content height */
            transition: max-height 0.5s ease-in, padding 0.3s ease-in;
        }

        /* Chart Styles */
        .chart-container {
            position: relative;
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: var(--card-background);
            border-radius: 10px;
            box-shadow: 0 3px 10px var(--shadow-color);
            height: 400px; /* Fixed height for chart */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .chart-canvas {
            max-width: 100%;
            max-height: 100%;
        }

        .floating-controls {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: rgba(255, 255, 255, 0.95);
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px var(--shadow-color);
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 10;
            min-width: 200px;
        }

        .floating-controls.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .control-group {
            margin-bottom: 0.8rem;
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }

        .control-group label {
            font-size: 0.9rem;
            color: var(--light-text-color);
            font-weight: 500;
        }

        .control-group input[type="color"],
        .control-group input[type="number"],
        .control-group select {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.9rem;
            color: var(--text-color);
            background-color: var(--background-color);
            width: 100%;
            box-sizing: border-box;
        }

        .control-group input[type="color"] {
            padding: 0.2rem;
            height: 36px; /* Match height of other inputs */
        }

        .control-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 6px var(--shadow-color);
            transition: background-color 0.2s ease, transform 0.1s ease;
            z-index: 11; /* Above controls */
        }

        .control-toggle:hover,
        .control-toggle:focus {
            background-color: var(--secondary-color);
            transform: scale(1.05);
            outline: none;
        }

        /* Accessibility */
        [tabindex="0"], a, button, input, select, textarea {
            outline-offset: 2px;
            outline-color: var(--focus-outline-color);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header {
                padding: 1rem;
            }

            nav {
                flex-direction: column;
                gap: 1rem;
            }

            nav ul {
                gap: 1rem;
                justify-content: center;
            }

            main {
                padding: 0 1rem;
                margin: 1.5rem auto;
            }

            section {
                padding: 1.5rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.8rem;
            }

            h3 {
                font-size: 1.4rem;
            }

            .button {
                padding: 0.75rem 1.5rem;
                font-size: 1rem;
            }

            .button + .button {
                 margin-left: 1rem;
            }

            .card-grid {
                gap: 1.5rem;
            }

            .card {
                padding: 1.5rem;
            }

            .accordion-header {
                padding: 1rem;
                font-size: 1rem;
            }

            .accordion-content {
                padding: 0 1rem;
            }

            .accordion-content p {
                padding-top: 0.8rem;
                padding-bottom: 1rem;
            }

            .chart-container {
                height: 300px;
                padding: 1rem;
            }

             .floating-controls {
                top: 0.5rem;
                right: 0.5rem;
                padding: 0.8rem;
                min-width: 180px;
            }
        }

        @media (max-width: 480px) {
             nav ul {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }
            .button {
                display: block;
                width: calc(100% - 3rem); /* Account for padding */
                text-align: center;
            }
            .button + .button {
                 margin-left: 0;
                 margin-top: 1rem;
            }
        }


        /* Dark Mode (Example - requires JS toggle) */
        /*
        body.dark-mode {
            --background-color: #1a202c;
            --text-color: #e2e8f0;
            --light-text-color: #a0aec0;
            --card-background: #2d3748;
            --border-color: #4a5568;
            --shadow-color: rgba(0, 0, 0, 0.3);
            --hover-shadow: rgba(0, 0, 0, 0.4);
            --primary-color: #9f7aea;
            --secondary-color: #b794f4;
            --accent-color: #fed7e2;
            --focus-outline-color: #fed7e2;
        }
        body.dark-mode header {
             background-color: var(--secondary-color);
             box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
        }
         body.dark-mode section {
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
         }
         body.dark-mode .card:hover {
             box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
         }
        body.dark-mode h1, body.dark-mode h2, body.dark-mode h3 {
            color: var(--primary-color);
        }
        body.dark-mode .accordion-header {
            background-color: #1a202c;
            color: var(--text-color);
        }
         body.dark-mode .accordion-header:hover,
         body.dark-mode .accordion-header:focus {
            background-color: #2d3748;
         }
         body.dark-mode .accordion-content {
             background-color: var(--card-background);
         }
         body.dark-mode .floating-controls {
             background: rgba(45, 55, 72, 0.95);
             box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
         }
         body.dark-mode .control-group input[type="color"],
         body.dark-mode .control-group input[type="number"],
         body.dark-mode .control-group select {
             background-color: #4a5568;
             border-color: #667085;
             color: var(--text-color);
         }
          body.dark-mode .control-group label {
              color: var(--light-text-color);
          }
        */

    </style>
</head>
<body>
    <header>
        <nav aria-label="Main navigation">
            <a href="#" class="logo">MindCare Connect</a>
            <ul>
                <li><a href="#about">About Us</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#patients">For Patients</a></li>
                <li><a href="#providers">For Providers</a></li>
                <li><a href="#stigma">Addressing Stigma</a></li>
                <li><a href="#faq">FAQ</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="hero">
            <h1>Your Partner in Mental Wellness</h1>
            <p style="text-align: center; font-size: 1.3rem; color: var(--text-color); max-width: 800px; margin: 0.5rem auto 2rem auto;">Accessible, confidential, and compassionate care, wherever you are. Connect with licensed therapists and psychiatrists online.</p>
            <div style="text-align: center; margin-top: 2rem;">
                <a href="#" class="button">Find a Therapist</a>
                <a href="#" class="button">Join as a Provider</a>
            </div>
        </section>

        <section id="about">
            <h2>About MindCare Connect</h2>
            <p>MindCare Connect is dedicated to making mental health support accessible to everyone. We connect individuals with licensed therapists and counselors through a secure, easy-to-use online platform. Our mission is to break down barriers to care, including stigma, cost, and geographical distance.</p>
            <p>Founded by a team of mental health professionals and technology experts, we prioritize clinical excellence, patient privacy, and a supportive user experience for both clients and providers. We believe that seeking help for mental health is a sign of strength, and we are here to support you every step of the way.</p>
            <h3>Our Values</h3>
            <ul>
                <li><strong>Accessibility & Equity:</strong> Mental healthcare for everyone, everywhere.</li>
                <li><strong>Confidentiality & Trust:</strong> Your privacy is our highest priority.</li>
                <li><strong>Clinical Excellence:</strong> Connecting you with highly qualified professionals.</li>
                <li><strong>Compassion & Empathy:</strong> A supportive and understanding environment.</li>
                <li><strong>Innovation in Care:</strong> Leveraging technology for better outcomes.</li>
            </ul>
        </section>

        <section id="services">
            <h2>Our Services</h2>
            <p>We offer a range of services tailored to meet diverse mental health needs, all delivered through our secure, HIPAA-compliant platform:</p>
            <div class="card-grid">
                <div class="card">
                    <h3>Individual Therapy</h3>
                    <p>Connect with a licensed therapist for one-on-one sessions via video, phone, or chat, tailored to your personal journey.</p>
                </div>
                <div class="card">
                    <h3>Couples Counseling</h3>
                    <p>Work with a therapist to improve communication, resolve conflicts, and strengthen your relationship together.</p>
                </div>
                <div class="card">
                    <h3>Psychiatry & Medication Management</h3>
                    <p>Consult with a board-certified psychiatrist for evaluation, diagnosis, and medication management if appropriate.</p>
                </div>
                <div class="card">
                    <h3>Specialized Programs</h3>
                    <p>Access structured programs and resources for specific conditions like anxiety, depression, trauma, stress management, and more.</p>
                </div>
            </div>
        </section>

        <section id="patients">
            <h2>For Patients</h2>
            <p>Finding the right mental health support should be simple and stress-free. MindCare Connect offers a seamless experience designed with your needs in mind:</p>
            <div class="card-grid">
                <div class="card">
                    <h3>Easy Matching</h3>
                    <p>Our intelligent system helps you find licensed therapists based on your specific needs, preferences, location, and insurance coverage.</p>
                </div>
                <div class="card">
                    <h3>Flexible Scheduling</h3>
                    <p>Book appointments that fit your busy life, with availability during the day, evenings, and weekends.</p>
                </div>
                <div class="card">
                    <h3>Affordable & Transparent</h3>
                    <p>We work with many major insurance providers and offer clear, upfront self-pay options. No hidden fees.</p>
                </div>
                <div class="card">
                    <h3>Confidential & Secure</h3>
                    <p>Your sessions and personal data are protected with the highest security standards, fully HIPAA compliant.</p>
                </div>
            </div>
            <p style="margin-top: 2rem; text-align: center;">Ready to take the first step towards better mental wellness? <a href="#" class="button">Get Started as a Patient</a></p>
        </section>

        <section id="providers">
            <h2>For Healthcare Providers</h2>
            <p>Expand your reach, manage your practice efficiently, and focus on what you do best – providing excellent patient care. MindCare Connect provides:</p>
            <div class="card-grid">
                <div class="card">
                    <h3>Seamless Platform</h3>
                    <p>An intuitive, secure, and HIPAA-compliant platform for conducting sessions, managing schedules, and handling billing and payments.</p>
                </div>
                <div class="card">
                    <h3>Flexible Practice</h3>
                    <p>Set your own hours, work from the comfort of your home or office, and achieve a better work-life balance.</p>
                </div>
                <div class="card">
                    <h3>Reduced Administration</h3>
                    <p>We handle the technical infrastructure, administrative tasks, and billing complexities, freeing up your time.</p>
                </div>
                <div class="card">
                    <h3>Supportive Community</h3>
                    <p>Join a growing network of dedicated mental health professionals and access resources for continued learning.</p>
                </div>
            </div>
            <p style="margin-top: 2rem; text-align: center;">Interested in joining our network and reaching more clients? <a href="#" class="button">Apply to Be a Provider</a></p>
        </section>

        <section id="stigma">
            <h2>Addressing Mental Health Stigma</h2>
            <p>Mental health challenges are common and treatable. We are committed to creating a platform and community that actively combats stigma by:</p>
            <ul>
                <li><strong>Normalizing Conversations:</strong> Providing resources and a safe space to talk openly about mental well-being.</li>
                <li><strong>Providing Information:</strong> Sharing accurate, evidence-based content about mental health conditions, treatment options, and self-care strategies.</li>
                <li><strong>Highlighting Recovery:</strong> Sharing inspiring stories (with consent and anonymity) that demonstrate the possibility of recovery and resilience.</li>
                <li><strong>Fostering Understanding:</strong> Educating the public and healthcare providers to build empathy and reduce prejudice.</li>
            </ul>
            <p>Seeking help is a sign of courage. We are here to support you without judgment.</p>
        </section>

         <section id="insights">
            <h2>Mental Wellness Insights</h2>
            <p>Understanding mental health is key to improving it. Here's a look at some trends in therapy engagement (Example Data):</p>
             <div class="chart-container" id="therapy-trends-chart-container">
                <canvas id="therapy-trends-chart" class="chart-canvas"></canvas>
                 <button class="control-toggle" aria-label="Toggle chart controls">⚙️</button>
                <div class="floating-controls" id="therapy-trends-chart-controls">
                    <div class="control-group">
                        <label for="therapy-trends-chart-type">Chart Type</label>
                        <select id="therapy-trends-chart-type">
                            <option value="bar">Bar</option>
                            <option value="line">Line</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label for="therapy-trends-chart-color">Bar Color</label>
                        <input type="color" id="therapy-trends-chart-color" value="#5a67d8">
                    </div>
                    <div class="control-group">
                        <label for="therapy-trends-chart-font-size">Font Size</label>
                        <input type="number" id="therapy-trends-chart-font-size" value="12" min="10" max="20">
                    </div>
                </div>
            </div>
        </section>

        <section id="trust-security">
            <h2>Trust & Security</h2>
            <p>Your privacy and security are paramount. MindCare Connect is built on a foundation of trust and adheres to strict regulations:</p>
            <ul>
                <li><strong>HIPAA Compliance:</strong> Our platform meets all requirements for protecting sensitive patient health information.</li>
                <li><strong>Data Encryption:</strong> All communications and data are encrypted using industry-leading standards to ensure confidentiality.</li>
                <li><strong>Licensed Professionals:</strong> We rigorously vet and verify the credentials and licenses of all providers on our platform.</li>
                <li><strong>Confidential Sessions:</strong> Your therapy sessions are private and confidential between you and your provider.</li>
            </ul>
            <p>We are committed to providing a safe and secure environment for your mental wellness journey.</p>
        </section>

        <section id="faq">
            <h2>Frequently Asked Questions</h2>
            <div class="accordion">
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" aria-controls="faq-content-1" id="faq-header-1">
                        What is telemedicine for mental health?
                         <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </button>
                    <div class="accordion-content" id="faq-content-1" role="region" aria-labelledby="faq-header-1">
                        <p>Telemedicine for mental health, also known as teletherapy or telemental health, involves receiving mental health services remotely using technology like video conferencing, phone calls, or secure messaging. It allows you to connect with a licensed therapist or psychiatrist from the comfort and privacy of your own home or another convenient location.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" aria-controls="faq-content-2" id="faq-header-2">
                        Is online therapy effective?
                         <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </button>
                    <div class="accordion-content" id="faq-content-2" role="region" aria-labelledby="faq-header-2">
                        <p>Numerous studies have shown that online therapy can be just as effective as in-person therapy for a wide range of mental health conditions, including anxiety, depression, and PTSD. Its effectiveness often depends on the individual's needs, the therapist's approach, and the therapeutic relationship built virtually.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" aria-controls="faq-content-3" id="faq-header-3">
                        How is my privacy protected?
                         <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </button>
                    <div class="accordion-content" id="faq-content-3" role="region" aria-labelledby="faq-header-3">
                        <p>MindCare Connect uses a HIPAA-compliant platform, which means it meets strict federal standards for protecting your sensitive health information. All communication and data are encrypted, and we have rigorous security measures in place to ensure your sessions and personal information remain confidential.</p>
                    </div>
                </div>
                 <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" aria-controls="faq-content-4" id="faq-header-4">
                        What types of conditions can be treated via telemedicine?
                         <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </button>
                    <div class="accordion-content" id="faq-content-4" role="region" aria-labelledby="faq-header-4">
                        <p>Many common mental health conditions can be effectively treated via telemedicine, including depression, anxiety disorders, panic disorders, phobias, PTSD, relationship issues, stress, and grief. For severe conditions or emergencies, in-person care may be more appropriate.</p>
                    </div>
                </div>
            </div>
        </section>


    </main>

    <footer>
        <p>&copy; 2023 MindCare Connect. All rights reserved.</p>
    </footer>

    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    const headerHeight = document.querySelector('header').offsetHeight || 0;
                    const targetPosition = targetElement.offsetTop - headerHeight - 20; // Add a little extra padding
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Accordion functionality
        const accordionHeaders = document.querySelectorAll('.accordion-header');

        accordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const expanded = header.getAttribute('aria-expanded') === 'true';

                // Close all other accordions
                accordionHeaders.forEach(otherHeader => {
                    if (otherHeader !== header && otherHeader.getAttribute('aria-expanded') === 'true') {
                        otherHeader.setAttribute('aria-expanded', 'false');
                        const otherContent = document.getElementById(otherHeader.getAttribute('aria-controls'));
                        if (otherContent) {
                             otherContent.style.maxHeight = null; // Reset max-height
                             otherContent.style.paddingTop = '0';
                             otherContent.style.paddingBottom = '0';
                        }
                    }
                });

                // Toggle current accordion
                header.setAttribute('aria-expanded', !expanded);
                const content = document.getElementById(header.getAttribute('aria-controls'));

                if (content) {
                    if (!expanded) {
                        // Open
                         content.style.maxHeight = content.scrollHeight + 30 + "px"; // Set max-height to scrollHeight + padding
                         content.style.paddingTop = '1rem';
                         content.style.paddingBottom = '1.5rem';
                    } else {
                        // Close
                        content.style.maxHeight = null;
                        content.style.paddingTop = '0';
                        content.style.paddingBottom = '0';
                    }
                }
            });

             // Add keyboard support for accordion headers
            header.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    header.click();
                }
            });
        });


        // Chart.js Visualization
        const chartContainer = document.getElementById('therapy-trends-chart-container');
        const ctx = document.getElementById('therapy-trends-chart').getContext('2d');
        const chartControls = document.getElementById('therapy-trends-chart-controls');
        const controlToggle = chartContainer.querySelector('.control-toggle');

        // Example data
        const chartData = {
             labels: ['Q1 2022', 'Q2 2022', 'Q3 2022', 'Q4 2022', 'Q1 2023', 'Q2 2023', 'Q3 2023', 'Q4 2023'],
             datasets: [{
                label: 'Therapy Sessions Completed',
                data: [1200, 1550, 1700, 1950, 2200, 2500, 2800, 3100],
                backgroundColor: "var('--primary-color')", // Use CSS variable via string
                borderColor: "var('--primary-color')",
                borderWidth: 2,
                tension: 0.3,
                fill: false
             }]
        };

        const chartConfig = {
            type: 'line', // Default type
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        labels: {
                             font: {
                                size: 12,
                                family: "'Open Sans', sans-serif"
                             },
                             color: "var('--text-color')" // Use CSS variable via string
                        }
                    },
                     tooltip: {
                        backgroundColor: "var('--text-color')", // Use CSS variable via string
                        titleFont: {
                            size: 14,
                            family: "'Open Sans', sans-serif",
                            weight: 'bold'
                        },
                        bodyFont: {
                            size: 12,
                            family: "'Open Sans', sans-serif"
                        },
                        padding: 10,
                        cornerRadius: 4,
                        displayColors: true,
                        boxPadding: 4
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Sessions',
                            font: {
                                size: 14,
                                family: "'Open Sans', sans-serif",
                                weight: 'bold'
                            },
                            color: "var('--light-text-color')" // Use CSS variable via string
                        },
                        ticks: {
                            font: {
                                size: 12,
                                family: "'Open Sans', sans-serif"
                            },
                             color: "var('--light-text-color')" // Use CSS variable via string
                        },
                        grid: {
                            color: "var('--border-color')" // Use CSS variable via string
                        }
                    },
                    x: {
                         title: {
                            display: true,
                            text: 'Quarter',
                            font: {
                                size: 14,
                                family: "'Open Sans', sans-serif",
                                weight: 'bold'
                            },
                            color: "var('--light-text-color')" // Use CSS variable via string
                        },
                        ticks: {
                            font: {
                                size: 12,
                                family: "'Open Sans', sans-serif"
                            },
                             color: "var('--light-text-color')" // Use CSS variable via string
                        },
                        grid: {
                            color: "var('--border-color')" // Use CSS variable via string
                        }
                    }
                }
            }
        };

        const therapyTrendsChart = new Chart(ctx, chartConfig);

        // Toggle controls visibility
        controlToggle.addEventListener('click', () => {
            chartControls.classList.toggle('active');
            controlToggle.setAttribute('aria-expanded', chartControls.classList.contains('active'));
        });

        // Close controls when clicking outside
        document.addEventListener('click', (e) => {
            if (!chartControls.contains(e.target) && !controlToggle.contains(e.target) && chartControls.classList.contains('active')) {
                chartControls.classList.remove('active');
                controlToggle.setAttribute('aria-expanded', 'false');
            }
        });


        // Update chart based on controls
        const chartTypeSelect = document.getElementById('therapy-trends-chart-type');
        const chartColorInput = document.getElementById('therapy-trends-chart-color');
        const chartFontSizeInput = document.getElementById('therapy-trends-chart-font-size');

        function updateChart() {
            const newChartType = chartTypeSelect.value;
            const newColor = chartColorInput.value;
            const newFontSize = parseInt(chartFontSizeInput.value);

            therapyTrendsChart.config.type = newChartType;
            therapyTrendsChart.data.datasets[0].backgroundColor = newColor;
            therapyTrendsChart.data.datasets[0].borderColor = newColor; // Keep border same as fill for simplicity

            // Update fonts
            const updateFont = (obj, size, family, weight, color) => {
                if (obj && obj.font) {
                    obj.font.size = size;
                    obj.font.family = family;
                    if (weight) obj.font.weight = weight;
                    if (color) obj.font.color = color;
                }
                 if (obj && obj.ticks && obj.ticks.font) {
                     obj.ticks.font.size = size;
                     obj.ticks.font.family = family;
                 }
                  if (obj && obj.title && obj.title.font) {
                     obj.title.font.size = size + 2; // Title slightly larger
                     obj.title.font.family = family;
                 }
            };

            const baseFontFamily = "'Open Sans', sans-serif";
            const baseColor = getComputedStyle(document.body).getPropertyValue('--text-color').trim();
            const lightColor = getComputedStyle(document.body).getPropertyValue('--light-text-color').trim();


            updateFont(therapyTrendsChart.options.plugins.legend.labels, newFontSize, baseFontFamily, null, baseColor);
            updateFont(therapyTrendsChart.options.scales.y, newFontSize, baseFontFamily, 'bold', lightColor);
            updateFont(therapyTrendsChart.options.scales.x, newFontSize, baseFontFamily, 'bold', lightColor);


            therapyTrendsChart.update();
        }

        chartTypeSelect.addEventListener('change', updateChart);
        chartColorInput.addEventListener('input', updateChart); // Use input for real-time color change
        chartFontSizeInput.addEventListener('change', updateChart);


        // Initial chart font update based on default input value
        updateChart();

    </script>
</body>
</html>
