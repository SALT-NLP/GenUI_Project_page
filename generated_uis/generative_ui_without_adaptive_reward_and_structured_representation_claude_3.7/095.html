<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post Guide</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,400;600;700,0..1,-25..200" />
    <style>
        :root {
            --primary-color: #4A90E2; /* Vibrant Blue */
            --secondary-color: #50E3C2; /* Teal */
            --text-color: #333;
            --background-color: #f4f7f6; /* Light Grey */
            --card-background: #ffffff; /* Pure White */
            --border-color: #ddd;
            --shadow-color: rgba(0, 0, 0, 0.08);
            --success-color: #7ED321; /* Green */
            --warning-color: #F5A623; /* Orange */
            --error-color: #D0021B; /* Red */
            --spacing-unit: 16px;
            --border-radius: 8px;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: var(--spacing-unit);
            font-display: swap; /* Improve font loading */
        }

        .container {
            width: 100%;
            max-width: 900px;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-unit);
        }

        header {
            background-color: var(--card-background);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px var(--shadow-color);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-unit);
            align-items: center;
        }

        header h1 {
            margin: 0;
            font-size: 2em;
            color: var(--primary-color);
            text-align: center;
        }

        .progress-container {
            width: 100%;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            margin-top: var(--spacing-unit);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--success-color);
            border-radius: 6px;
            transition: width 0.4s ease-in-out;
        }

        main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .section-card {
            background-color: var(--card-background);
            padding: var(--spacing-unit) calc(var(--spacing-unit) * 1.5);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 8px var(--shadow-color);
            display: none; /* Hidden by default */
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
            min-height: 400px; /* Ensure minimum height */
            will-change: opacity, transform; /* Optimize transitions */
        }

        .section-card.active {
            display: block; /* Or flex/grid depending on content */
            opacity: 1;
            transform: translateY(0);
        }

        .section-card h2 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: var(--spacing-unit);
            font-size: 1.8em;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: calc(var(--spacing-unit) / 2);
        }

        .section-card p {
            margin-bottom: var(--spacing-unit);
        }

        .example-box {
            background-color: #f9f9f9;
            border-left: 4px solid var(--secondary-color);
            padding: var(--spacing-unit);
            margin: var(--spacing-unit) 0;
            border-radius: 4px;
            font-style: italic;
            color: #555;
        }

        .example-box strong {
            color: var(--primary-color);
        }

        .exercise {
            margin: var(--spacing-unit) 0;
            padding: var(--spacing-unit);
            background-color: #eef5ff; /* Light Blue */
            border: 1px dashed var(--primary-color);
            border-radius: var(--border-radius);
        }

        .exercise h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .exercise textarea {
            width: 100%;
            min-height: 100px;
            padding: calc(var(--spacing-unit) / 2);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: 'Inter', sans-serif;
            font-size: 1em;
            resize: vertical;
            outline: none; /* Remove default outline */
        }

         .exercise textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2); /* Focus ring */
        }


        .tips {
            margin: var(--spacing-unit) 0;
            padding: var(--spacing-unit);
            background-color: #fffbe6; /* Light Yellow */
            border: 1px dashed var(--warning-color);
            border-radius: var(--border-radius);
            display: flex;
            align-items: flex-start;
            gap: calc(var(--spacing-unit) / 2);
            position: relative;
        }

        .tips .material-symbols-rounded {
            color: var(--warning-color);
            font-size: 24px;
            flex-shrink: 0;
        }

        .tips-content {
            flex-grow: 1;
        }

        .info-icon {
            position: relative;
            display: inline-block;
            cursor: pointer;
            margin-left: 5px;
            vertical-align: middle; /* Align icon with text */
        }

        .info-icon .material-symbols-rounded {
            font-size: 18px;
            color: var(--primary-color);
        }

        .tooltip {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 10; /* Ensure tooltip is above other content */
            bottom: 125%; /* Position the tooltip above the text */
            left: 50%;
            margin-left: -100px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none; /* Allow clicks through tooltip */
        }

        .tooltip::after {
            content: "";
            position: absolute;
            top: 100%; /* At the bottom of the tooltip */
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }

        .info-icon:hover .tooltip {
            visibility: visible;
            opacity: 1;
            pointer-events: auto; /* Enable pointer events when visible */
        }

        .completion-checkbox {
            margin-top: var(--spacing-unit);
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) / 2);
            cursor: pointer;
            user-select: none; /* Prevent text selection */
        }

        .completion-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--success-color);
            cursor: pointer;
            outline: none; /* Remove default outline */
        }

        .completion-checkbox input[type="checkbox"]:focus-visible {
             outline: 2px solid var(--primary-color); /* Custom focus indicator */
             outline-offset: 2px;
        }


        .completion-checkbox label {
            cursor: pointer;
        }


        .navigation {
            display: flex;
            justify-content: space-between;
            padding: var(--spacing-unit) 0;
        }

        button {
            padding: calc(var(--spacing-unit) / 1.5) var(--spacing-unit);
            font-size: 1em;
            cursor: pointer;
            border: none;
            border-radius: var(--border-radius);
            transition: background-color 0.3s ease, opacity 0.3s ease, box-shadow 0.2s ease;
            font-weight: 600;
            outline: none; /* Remove default outline */
        }

        button:focus-visible {
             outline: 2px solid var(--primary-color); /* Custom focus indicator */
             outline-offset: 2px;
        }


        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            box-shadow: none;
        }

        #prev-button {
            background-color: #ccc;
            color: var(--text-color);
        }

        #prev-button:not(:disabled):hover {
            background-color: #bbb;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #next-button {
            background-color: var(--primary-color);
            color: var(--card-background);
        }

        #next-button:not(:disabled):hover {
            background-color: #3a7bd5; /* Darker Primary */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .material-symbols-rounded {
            font-variation-settings:
                'FILL' 1,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: calc(var(--spacing-unit) / 2);
            }

            .container {
                gap: calc(var(--spacing-unit) / 2);
            }

            header, .section-card {
                padding: var(--spacing-unit);
            }

            header h1 {
                font-size: 1.5em;
            }

            .section-card h2 {
                font-size: 1.4em;
            }

            .navigation {
                flex-direction: column;
                gap: var(--spacing-unit);
            }

            button {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header role="banner">
            <h1>Mastering the Blog Post</h1>
            <div class="progress-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Blog post guide progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        </header>

        <main role="main" aria-live="polite">
            <!-- Section 1: Introduction -->
            <div id="section-intro" class="section-card active" role="region" aria-label="Introduction Section" aria-hidden="false">
                <h2>Welcome to the Guide!</h2>
                <p>Writing a compelling blog post can seem daunting, but it's a skill you can learn and master. This interactive guide will walk you through the essential elements of a great blog post, from crafting a catchy headline to writing a strong conclusion.</p>
                <p>We'll cover:</p>
                <ul>
                    <li>Captivating Headlines</li>
                    <li>Engaging Introductions</li>
                    <li>Structured Body Content</li>
                    <li>Powerful Conclusions</li>
                    <li>Effective Visuals</li>
                    <li>Basic SEO Optimization</li>
                    <li>Proofreading & Editing</li>
                </ul>
                <p>Each section includes explanations, tips, and exercises to help you practice. Let's get started!</p>
                <div class="completion-checkbox">
                    <input type="checkbox" id="complete-intro">
                    <label for="complete-intro">Mark as Complete</label>
                </div>
            </div>

            <!-- Section 2: Headline -->
            <div id="section-headline" class="section-card" role="region" aria-label="Headline Section" aria-hidden="true">
                <h2>Crafting a Killer Headline</h2>
                <p>Your headline is the first thing readers see. It needs to grab attention and tell them what your post is about. A good headline can be the difference between a click and a scroll.</p>
                <div class="tips">
                    <span class="material-symbols-rounded">lightbulb</span>
                    <div class="tips-content">
                        <strong>Tips for Great Headlines:</strong>
                        <ul>
                            <li>Use strong keywords relevant to your topic.</li>
                            <li>Promise a benefit or solution to a problem.</li>
                            <li>Create curiosity (but don't be clickbait).</li>
                            <li>Keep it concise (around 6-8 words is often ideal).</li>
                            <li>Use numbers or lists (e.g., "5 Ways to...", "The 10 Best...").</li>
                        </ul>
                    </div>
                </div>
                <div class="example-box">
                    <strong>Good Example:</strong> "10 Proven Strategies to Write Headlines That Get Clicks"
                    <br><strong>Bad Example:</strong> "Writing Headlines"
                </div>
                <div class="exercise">
                    <h3>Exercise: Write Your Headline</h3>
                    <p>Think about a topic you'd like to blog about. Write a few potential headlines below, trying to incorporate the tips above.</p>
                    <textarea id="exercise-headline" placeholder="Write your headlines here..." aria-label="Headline writing exercise"></textarea>
                </div>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-headline">
                    <label for="complete-headline">Mark as Complete</label>
                </div>
            </div>

            <!-- Section 3: Introduction -->
            <div id="section-intro-section" class="section-card" role="region" aria-label="Introduction Section Content" aria-hidden="true">
                <h2>Hook Your Reader: The Introduction</h2>
                <p>The introduction sets the stage. It should hook the reader immediately, introduce the topic, and briefly outline what the post will cover (your thesis or main point).</p>
                 <div class="tips">
                    <span class="material-symbols-rounded">lightbulb</span>
                    <div class="tips-content">
                        <strong>Tips for Engaging Intros:</strong>
                        <ul>
                            <li>Start with a question, statistic, anecdote, or bold statement.</li>
                            <li>Clearly state the problem you're addressing or the topic.</li>
                            <li>Explain why this topic is important to the reader.</li>
                            <li>Briefly mention what the reader will learn or gain.</li>
                        </ul>
                    </div>
                </div>
                 <div class="example-box">
                    <strong>Good Example:</strong> "Are your blog post headlines falling flat? You're not alone. Many writers struggle to craft titles that capture attention in a crowded online world. This guide will show you how to write headlines that not only get clicks but accurately reflect your content."
                    <br><strong>Bad Example:</strong> "This blog post is about headlines."
                </div>
                <div class="exercise">
                    <h3>Exercise: Write Your Introduction</h3>
                    <p>Based on the topic and headlines you brainstormed, write an introduction for your blog post.</p>
                    <textarea id="exercise-intro-section" placeholder="Write your introduction here..." aria-label="Introduction writing exercise"></textarea>
                </div>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-intro-section">
                    <label for="complete-intro-section">Mark as Complete</label>
                </div>
            </div>

            <!-- Section 4: Body -->
             <div id="section-body" class="section-card" role="region" aria-label="Body Section" aria-hidden="true">
                <h2>Structuring the Body</h2>
                <p>The body is where you deliver on the promise of your headline and introduction. Break down your ideas into logical sections using paragraphs and subheadings. Each section or paragraph should focus on a single main point.</p>
                 <div class="tips">
                    <span class="material-symbols-rounded">lightbulb</span>
                    <div class="tips-content">
                        <strong>Tips for a Strong Body:</strong>
                        <ul>
                            <li>Use clear and concise language.</li>
                            <li>Support your points with examples, data, or anecdotes.</li>
                            <li>Use transition words and phrases to ensure smooth flow between paragraphs.</li>
                            <li>Keep paragraphs relatively short for readability online.</li>
                            <li>Use bullet points or numbered lists for easy scanning.</li>
                        </ul>
                    </div>
                </div>
                 <div class="exercise">
                    <h3>Exercise: Outline Your Body</h3>
                    <p>Think about the main points you would cover in the body of your blog post. Write down the key subheadings and a brief note about the content for each section.</p>
                    <textarea id="exercise-body" placeholder="Outline your body content here (e.g., Subheading 1: Point A, Point B; Subheading 2: Point C)..." aria-label="Body outlining exercise"></textarea>
                </div>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-body">
                    <label for="complete-body">Mark as Complete</label>
                </div>
            </div>

            <!-- Section 5: Conclusion -->
             <div id="section-conclusion" class="section-card" role="region" aria-label="Conclusion Section" aria-hidden="true">
                <h2>Wrapping It Up: The Conclusion</h2>
                <p>The conclusion summarizes your main points and provides a sense of closure. It's also a great place to include a Call to Action (CTA).</p>
                 <div class="tips">
                    <span class="material-symbols-rounded">lightbulb</span>
                    <div class="tips-content">
                        <strong>Tips for Effective Conclusions:</strong>
                        <ul>
                            <li>Restate your main points or thesis in a new way.</li>
                            <li>Avoid introducing new information.</li>
                            <li>End with a thought-provoking statement, a question, or a clear CTA.</li>
                            <li>Encourage comments, shares, or subscribing to your newsletter.</li>
                        </ul>
                    </div>
                </div>
                 <div class="exercise">
                    <h3>Exercise: Write Your Conclusion & CTA</h3>
                    <p>Write a concluding paragraph for your blog post, including a clear call to action.</p>
                    <textarea id="exercise-conclusion" placeholder="Write your conclusion and CTA here..." aria-label="Conclusion and Call to Action writing exercise"></textarea>
                </div>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-conclusion">
                    <label for="complete-conclusion">Mark as Complete</label>
                </div>
            </div>

             <!-- Section 6: Visuals -->
             <div id="section-visuals" class="section-card" role="region" aria-label="Visuals Section" aria-hidden="true">
                <h2>Enhancing with Visuals</h2>
                <p>Images, videos, infographics, and other visuals break up text, make your post more appealing, and can help explain complex ideas. Choose visuals that are relevant and high-quality.</p>
                 <div class="tips">
                    <span class="material-symbols-rounded">lightbulb</span>
                    <div class="tips-content">
                        <strong>Tips for Using Visuals:</strong>
                        <ul>
                            <li>Use a featured image that represents the post's topic well.</li>
                            <li>Break up long blocks of text with images or graphics.</li>
                            <li>Ensure images are optimized for web (file size).</li>
                            <li>Use alt text for accessibility and SEO.</li>
                            <li>Credit sources if necessary.</li>
                        </ul>
                    </div>
                </div>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-visuals">
                    <label for="complete-visuals">Mark as Complete</label>
                </div>
            </div>

             <!-- Section 7: SEO Basics -->
             <div id="section-seo" class="section-card" role="region" aria-label="SEO Basics Section" aria-hidden="true">
                <h2>Basic SEO for Blog Posts</h2>
                <p>Search Engine Optimization (SEO) helps people find your blog post through search engines like Google. Basic on-page SEO involves using keywords strategically.</p>
                 <div class="tips">
                    <span class="material-symbols-rounded">lightbulb</span>
                    <div class="tips-content">
                        <strong>Basic SEO Checklist:</strong>
                        <ul>
                            <li>Include your main keyword in the headline.</li>
                            <li>Include your main keyword in the introduction.</li>
                            <li>Use keywords naturally throughout the body text.</li>
                            <li>Use keywords in subheadings.</li>
                            <li>Include internal links (to other posts on your site).</li>
                            <li>Include external links (to reputable sources).</li>
                            <li>Write a compelling meta description (appears in search results).</li>
                            <li>Optimize image alt text with keywords.</li>
                        </ul>
                    </div>
                </div>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-seo">
                    <label for="complete-seo">Mark as Complete</label>
                </div>
            </div>

             <!-- Section 8: Proofreading -->
             <div id="section-proofreading" class="section-card" role="region" aria-label="Proofreading Section" aria-hidden="true">
                <h2>Proofreading and Editing</h2>
                <p>Don't skip this step! Typos, grammatical errors, and awkward phrasing can undermine your credibility. Read through your post carefully, or even better, have someone else read it.</p>
                 <div class="tips">
                    <span class="material-symbols-rounded">lightbulb</span>
                    <div class="tips-content">
                        <strong>Tips for Proofreading:</strong>
                        <ul>
                            <li>Read your post aloud to catch awkward sentences.</li>
                            <li>Read it backward to spot spelling errors.</li>
                            <li>Take a break before proofreading.</li>
                            <li>Use online grammar checkers (like Grammarly or Hemingway Editor).</li>
                            <li>Ask a friend to review it.</li>
                        </ul>
                    </div>
                </div>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-proofreading">
                    <label for="complete-proofreading">Mark as Complete</label>
                </div>
            </div>

             <!-- Section 9: Conclusion Guide -->
             <div id="section-guide-conclusion" class="section-card" role="region" aria-label="Guide Conclusion Section" aria-hidden="true">
                <h2>You've Finished the Guide!</h2>
                <p>Congratulations! You've learned about the key elements that make a blog post successful. Remember, practice is key. The more you write, the better you'll become.</p>
                <p>Here's a quick recap:</p>
                <ul>
                    <li>Start with a strong **Headline**.</li>
                    <li>Write an engaging **Introduction** that hooks the reader.</li>
                    <li>Structure the **Body** logically with subheadings and clear paragraphs.</li>
                    <li>Write a concise **Conclusion** with a clear Call to Action.</li>
                    <li>Enhance readability and appeal with relevant **Visuals**.</li>
                    <li>Apply basic **SEO** techniques to improve discoverability.</li>
                    <li>Always **Proofread** and edit your work.</li>
                </ul>
                <p>Keep practicing, and happy blogging!</p>
                 <div class="completion-checkbox">
                    <input type="checkbox" id="complete-guide-conclusion">
                    <label for="complete-guide-conclusion">Mark as Complete</label>
                </div>
            </div>

        </main>

        <div class="navigation">
            <button id="prev-button" disabled aria-disabled="true">Previous</button>
            <button id="next-button">Next</button>
        </div>
    </div>

    <script>
        const sections = [
            'section-intro',
            'section-headline',
            'section-intro-section',
            'section-body',
            'section-conclusion',
            'section-visuals',
            'section-seo',
            'section-proofreading',
            'section-guide-conclusion'
        ];
        let currentSectionIndex = 0;

        const progressBar = document.getElementById('progress-bar');
        const progressContainer = document.querySelector('.progress-container');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const sectionElements = sections.map(id => document.getElementById(id));
        const completionCheckboxes = sections.map(id => document.getElementById(`complete-${id.replace('section-', '')}`));
        const exerciseTextareas = {
            'section-headline': document.getElementById('exercise-headline'),
            'section-intro-section': document.getElementById('exercise-intro-section'),
            'section-body': document.getElementById('exercise-body'),
            'section-conclusion': document.getElementById('exercise-conclusion')
        };

        // Load state from localStorage
        function loadState() {
            const savedState = localStorage.getItem('blogGuideState');
            if (savedState) {
                const state = JSON.parse(savedState);
                currentSectionIndex = state.currentSectionIndex || 0;

                // Restore checkbox state
                if (state.completedSections) {
                    state.completedSections.forEach((isComplete, index) => {
                        if (completionCheckboxes[index]) {
                             completionCheckboxes[index].checked = isComplete;
                        }
                    });
                }

                // Restore textarea content
                if (state.exerciseContent) {
                    for (const sectionId in state.exerciseContent) {
                        if (exerciseTextareas[sectionId]) {
                            exerciseTextareas[sectionId].value = state.exerciseContent[sectionId];
                        }
                    }
                }
            }
        }

        // Save state to localStorage
        function saveState() {
            const completedSections = completionCheckboxes.map(checkbox => checkbox ? checkbox.checked : false);
            const exerciseContent = {};
            for (const sectionId in exerciseTextareas) {
                if (exerciseTextareas[sectionId]) {
                    exerciseContent[sectionId] = exerciseTextareas[sectionId].value;
                }
            }

            const state = {
                currentSectionIndex: currentSectionIndex,
                completedSections: completedSections,
                exerciseContent: exerciseContent
            };
            localStorage.setItem('blogGuideState', JSON.stringify(state));
        }

        function updateProgress() {
            const completedCount = completionCheckboxes.filter(checkbox => checkbox && checkbox.checked).length;
            const totalSections = sections.length;
            const progressPercentage = totalSections > 0 ? (completedCount / totalSections) * 100 : 0;
            progressBar.style.width = progressPercentage + '%';
            progressContainer.setAttribute('aria-valuenow', Math.round(progressPercentage));
        }

        function showSection(index) {
            if (index < 0 || index >= sections.length) return;

            // Hide current section with transition
            if (sectionElements[currentSectionIndex]) {
                 sectionElements[currentSectionIndex].classList.remove('active');
                 sectionElements[currentSectionIndex].setAttribute('aria-hidden', 'true');
                 // Use a small timeout to allow transition to start before changing display
                 setTimeout(() => {
                     sectionElements[currentSectionIndex].style.display = 'none';
                 }, 400); // Match CSS transition duration
            }

            currentSectionIndex = index;

            // Show new section with transition
            if (sectionElements[currentSectionIndex]) {
                 sectionElements[currentSectionIndex].style.display = 'block'; // Or 'flex'/'grid'
                 sectionElements[currentSectionIndex].setAttribute('aria-hidden', 'false');
                 // Allow display change to register before adding active class
                 requestAnimationFrame(() => {
                     sectionElements[currentSectionIndex].classList.add('active');
                     // Set focus to the new section for accessibility
                     sectionElements[currentSectionIndex].focus();
                 });
            }

            // Update navigation buttons
            prevButton.disabled = currentSectionIndex === 0;
            nextButton.disabled = currentSectionIndex === sections.length - 1;
            prevButton.setAttribute('aria-disabled', prevButton.disabled);
            nextButton.setAttribute('aria-disabled', nextButton.disabled);


            updateProgress();
            saveState(); // Save current section index and content
        }

        // Event listeners for navigation
        prevButton.addEventListener('click', () => {
            showSection(currentSectionIndex - 1);
        });

        nextButton.addEventListener('click', () => {
            showSection(currentSectionIndex + 1);
        });

        // Event listeners for completion checkboxes
        completionCheckboxes.forEach(checkbox => {
            if (checkbox) {
                checkbox.addEventListener('change', updateProgress);
                checkbox.addEventListener('change', saveState); // Save completion status
            }
        });

        // Event listeners for textarea input to save content
        for (const sectionId in exerciseTextareas) {
             if (exerciseTextareas[sectionId]) {
                 exerciseTextareas[sectionId].addEventListener('input', saveState);
             }
        }

        // Initial load and display
        loadState();
        showSection(currentSectionIndex);
        updateProgress(); // Initial progress update

        // Add keyboard navigation (Arrow keys)
        document.addEventListener('keydown', (event) => {
            if (event.target.tagName === 'TEXTAREA') {
                // Don't navigate when typing in a textarea
                return;
            }
            if (event.key === 'ArrowRight' && !nextButton.disabled) {
                nextButton.click();
            } else if (event.key === 'ArrowLeft' && !prevButton.disabled) {
                prevButton.click();
            }
        });

        // Ensure sections are focusable for keyboard navigation
        sectionElements.forEach(section => {
            section.setAttribute('tabindex', '-1'); // Make sections programmatically focusable
        });

    </script>
</body>
</html>
