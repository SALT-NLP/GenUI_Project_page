<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Clinic Analytics Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        :root {
            --primary: #2C7BE5;
            --primary-light: #e8f1fd;
            --primary-dark: #1a68d1;
            --secondary: #6B7280;
            --success: #00B894;
            --warning: #FFC107;
            --danger: #FF5252;
            --info: #17A2B8;
            --background: #F9FAFC;
            --foreground: #FFFFFF;
            --text-primary: #1E293B;
            --text-secondary: #64748B;
            --text-muted: #94A3B8;
            --border: #E2E8F0;
            --radius: 8px;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --transition: all 0.2s ease-in-out;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.5;
            overflow-x: hidden;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            background-color: var(--foreground);
            border-right: 1px solid var(--border);
            padding: 1.5rem 0;
            height: 100vh;
            position: sticky;
            top: 0;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 0 1.5rem 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
            font-size: 1.25rem;
            color: var(--text-primary);
        }

        .logo-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border-radius: var(--radius);
            background-color: var(--primary);
            color: white;
        }

        .nav-section {
            padding: 1.25rem 0;
        }

        .nav-section-title {
            padding: 0 1.5rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .nav-items {
            list-style: none;
        }

        .nav-item {
            position: relative;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background-color: var(--primary);
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
        }

        .nav-link:hover, .nav-item.active .nav-link {
            background-color: var(--primary-light);
            color: var(--primary);
        }

        .nav-item.active .nav-link {
            font-weight: 500;
        }

        .nav-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
        }

        /* Main content */
        .main-content {
            padding: 1.5rem;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            gap: 0.75rem;
        }

        /* Button styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            font-weight: 500;
            font-size: 0.875rem;
            border: 1px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            border-color: var(--border);
            background-color: var(--foreground);
            color: var(--text-secondary);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Card styles */
        .card {
            background-color: var(--foreground);
            border-radius: var(--radius);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
        }

        .card-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-body {
            padding: 1.5rem;
        }

        /* Metric cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .metric-card {
            padding: 1.5rem;
        }

        .metric-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .metric-trend {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .trend-positive {
            color: var(--success);
        }

        .trend-negative {
            color: var(--danger);
        }

        /* Charts grid */
        .charts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .floating-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            padding: 0.75rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            opacity: 0;
            transform: translateY(-10px);
            transition: var(--transition);
            pointer-events: none;
            z-index: 10;
        }

        .floating-controls.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .control-group {
            margin-bottom: 0.75rem;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            display: block;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .control-input {
            width: 100%;
            padding: 0.375rem 0.5rem;
            font-size: 0.75rem;
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) / 2);
        }

        /* Filters section */
        .filters-section {
            margin-bottom: 1.5rem;
        }

        .filters-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 1.5rem;
        }

        .filter-group {
            flex: 1;
            min-width: 180px;
        }

        .filter-label {
            display: block;
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .filter-input {
            width: 100%;
            padding: 0.5rem;
            font-size: 0.875rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background-color: var(--foreground);
        }

        /* Data upload modal */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            width: 100%;
            max-width: 500px;
            background-color: var(--foreground);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            transform: translateY(20px);
            transition: var(--transition);
        }

        .modal-backdrop.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text-secondary);
        }

        .modal-close:hover {
            color: var(--danger);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .upload-area {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-area:hover {
            border-color: var(--primary);
            background-color: var(--primary-light);
        }

        .upload-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            margin: 0 auto 1rem;
            color: var(--primary);
        }

        .upload-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .upload-subtitle {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .upload-input {
            display: none;
        }

        .upload-progress {
            margin-top: 1rem;
            display: none;
        }

        .progress-bar {
            height: 4px;
            background-color: var(--border);
            border-radius: 2px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-status {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .upload-actions {
            margin-top: 1.5rem;
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        /* Help tooltip */
        .help-tooltip {
            position: relative;
            display: inline-flex;
            margin-left: 0.5rem;
            color: var(--text-muted);
            cursor: help;
        }

        .tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--text-primary);
            color: white;
            font-size: 0.75rem;
            padding: 0.5rem 0.75rem;
            border-radius: calc(var(--radius) / 2);
            width: 200px;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 10;
        }

        .help-tooltip:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }

        /* Tab navigation */
        .tab-nav {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 1.5rem;
        }

        .tab-item {
            padding: 0.75rem 1.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: var(--transition);
        }

        .tab-item:hover {
            color: var(--primary);
        }

        .tab-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Table styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th,
        .data-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .data-table th {
            font-weight: 500;
            color: var(--text-secondary);
            background-color: var(--background);
        }

        .data-table tbody tr:hover {
            background-color: var(--primary-light);
        }

        /* Media queries */
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .dashboard {
                grid-template-columns: 200px 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }

            .sidebar {
                display: none;
            }

            .metrics-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">
                        <span class="material-symbols-rounded">health_and_safety</span>
                    </div>
                    <span>Clinic Analytics</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-section-title">Analytics</h3>
                    <ul class="nav-items">
                        <li class="nav-item active">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">dashboard</span>
                                </div>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">people</span>
                                </div>
                                <span>Patient Visits</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">medication</span>
                                </div>
                                <span>Treatments</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">calendar_month</span>
                                </div>
                                <span>Resource Utilization</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">diversity_3</span>
                                </div>
                                <span>Demographics</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Reports</h3>
                    <ul class="nav-items">
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">summarize</span>
                                </div>
                                <span>Impact Reports</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">monitoring</span>
                                </div>
                                <span>Trend Analysis</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h3 class="nav-section-title">Settings</h3>
                    <ul class="nav-items">
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">upload_file</span>
                                </div>
                                <span>Data Management</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">settings</span>
                                </div>
                                <span>Settings</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <div class="nav-icon">
                                    <span class="material-symbols-rounded">help</span>
                                </div>
                                <span>Help & Guide</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main content -->
        <main class="main-content">
            <header class="header">
                <h1 class="page-title">Clinic Analytics Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn-outline" id="export-btn">
                        <span class="btn-icon">
                            <span class="material-symbols-rounded">download</span>
                        </span>
                        <span>Export</span>
                    </button>
                    <button class="btn btn-primary" id="upload-btn">
                        <span class="btn-icon">
                            <span class="material-symbols-rounded">upload</span>
                        </span>
                        <span>Upload Data</span>
                    </button>
                </div>
            </header>

            <!-- Filters section -->
            <section class="filters-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Filters
                            <span class="help-tooltip">
                                <span class="material-symbols-rounded">info</span>
                                <div class="tooltip-content">Filter your data to focus on specific time periods, demographics, or clinical areas.</div>
                            </span>
                        </h2>
                    </div>
                    <div class="filters-container">
                        <div class="filter-group">
                            <label class="filter-label" for="date-range">Date Range</label>
                            <select class="filter-input" id="date-range">
                                <option value="last30">Last 30 Days</option>
                                <option value="last90">Last 90 Days</option>
                                <option value="last6months">Last 6 Months</option>
                                <option value="last1year" selected>Last 1 Year</option>
                                <option value="last5years">Last 5 Years</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label" for="age-group">Age Group</label>
                            <select class="filter-input" id="age-group">
                                <option value="all" selected>All Ages</option>
                                <option value="0-17">0-17 years</option>
                                <option value="18-34">18-34 years</option>
                                <option value="35-49">35-49 years</option>
                                <option value="50-64">50-64 years</option>
                                <option value="65+">65+ years</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label" for="gender">Gender</label>
                            <select class="filter-input" id="gender">
                                <option value="all" selected>All Genders</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="nonbinary">Non-binary</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label" for="visit-type">Visit Type</label>
                            <select class="filter-input" id="visit-type">
                                <option value="all" selected>All Visits</option>
                                <option value="routine">Routine Check-up</option>
                                <option value="emergency">Emergency</option>
                                <option value="followup">Follow-up</option>
                                <option value="specialist">Specialist Consultation</option>
                                <option value="vaccination">Vaccination</option>
                            </select>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Key metrics -->
            <section class="metrics-grid">
                <div class="card metric-card">
                    <h3 class="metric-label">Total Patients</h3>
                    <div class="metric-value">4,827</div>
                    <div class="metric-trend trend-positive">
                        <span class="material-symbols-rounded">trending_up</span>
                        <span>12% from last year</span>
                    </div>
                </div>
                <div class="card metric-card">
                    <h3 class="metric-label">Total Visits YTD</h3>
                    <div class="metric-value">12,438</div>
                    <div class="metric-trend trend-positive">
                        <span class="material-symbols-rounded">trending_up</span>
                        <span>8.5% from last year</span>
                    </div>
                </div>
                <div class="card metric-card">
                    <h3 class="metric-label">Average Wait Time</h3>
                    <div class="metric-value">18.2 min</div>
                    <div class="metric-trend trend-negative">
                        <span class="material-symbols-rounded">trending_down</span>
                        <span>5.3% from last year</span>
                    </div>
                </div>
                <div class="card metric-card">
                    <h3 class="metric-label">Treatment Success Rate</h3>
                    <div class="metric-value">84.7%</div>
                    <div class="metric-trend trend-positive">
                        <span class="material-symbols-rounded">trending_up</span>
                        <span>3.2% from last year</span>
                    </div>
                </div>
            </section>

            <!-- Charts section -->
            <section class="charts-grid">
                <!-- Patient Visits Chart -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Patient Visits Trend
                            <span class="help-tooltip">
                                <span class="material-symbols-rounded">info</span>
                                <div class="tooltip-content">Monthly patient visits over time. Identify seasonal patterns and growth trends.</div>
                            </span>
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="visitsChart"></canvas>
                            <!-- Floating controls -->
                            <div class="floating-controls" id="visitsChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="visitsChartType">Chart Type</label>
                                    <select class="control-input" id="visitsChartType">
                                        <option value="line" selected>Line</option>
                                        <option value="bar">Bar</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="visitsChartColor">Line Color</label>
                                    <input class="control-input" type="color" id="visitsChartColor" value="#2C7BE5">
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="visitsChartPeriod">Time Period</label>
                                    <select class="control-input" id="visitsChartPeriod">
                                        <option value="monthly" selected>Monthly</option>
                                        <option value="quarterly">Quarterly</option>
                                        <option value="yearly">Yearly</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visit Distribution Chart -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Visit Distribution by Day & Hour
                            <span class="help-tooltip">
                                <span class="material-symbols-rounded">info</span>
                                <div class="tooltip-content">Heatmap showing busiest days and times. Use this to optimize staffing.</div>
                            </span>
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="heatmapChart"></canvas>
                            <!-- Floating controls -->
                            <div class="floating-controls" id="heatmapChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="heatmapColorScheme">Color Scheme</label>
                                    <select class="control-input" id="heatmapColorScheme">
                                        <option value="blue" selected>Blue</option>
                                        <option value="green">Green</option>
                                        <option value="red">Red</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="heatmapIntensity">Intensity</label>
                                    <input class="control-input" type="range" id="heatmapIntensity" min="0.5" max="1.5" step="0.1" value="1">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Treatment Effectiveness Chart -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Treatment Effectiveness
                            <span class="help-tooltip">
                                <span class="material-symbols-rounded">info</span>
                                <div class="tooltip-content">Comparison of treatment outcomes across different diagnoses.</div>
                            </span>
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="treatmentChart"></canvas>
                            <!-- Floating controls -->
                            <div class="floating-controls" id="treatmentChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="treatmentChartType">Chart Type</label>
                                    <select class="control-input" id="treatmentChartType">
                                        <option value="bar" selected>Bar</option>
                                        <option value="horizontalBar">Horizontal Bar</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="treatmentMetric">Metric</label>
                                    <select class="control-input" id="treatmentMetric">
                                        <option value="successRate" selected>Success Rate</option>
                                        <option value="timeToRecovery">Time to Recovery</option>
                                        <option value="costEffectiveness">Cost Effectiveness</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Demographics Chart -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Patient Demographics
                            <span class="help-tooltip">
                                <span class="material-symbols-rounded">info</span>
                                <div class="tooltip-content">Breakdown of patient population by key demographics to identify underserved groups.</div>
                            </span>
                        </h2>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="demographicsChart"></canvas>
                            <!-- Floating controls -->
                            <div class="floating-controls" id="demographicsChartControls">
                                <div class="control-group">
                                    <label class="control-label" for="demographicDimension">Dimension</label>
                                    <select class="control-input" id="demographicDimension">
                                        <option value="age" selected>Age Groups</option>
                                        <option value="gender">Gender</option>
                                        <option value="ethnicity">Ethnicity</option>
                                        <option value="insurance">Insurance Type</option>
                                    </select>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="demographicChartType">Chart Type</label>
                                    <select class="control-input" id="demographicChartType">
                                        <option value="pie" selected>Pie</option>
                                        <option value="doughnut">Doughnut</option>
                                        <option value="bar">Bar</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Detailed Analysis Section -->
            <section class="card">
                <div class="card-header">
                    <h2 class="card-title">Detailed Analysis</h2>
                </div>
                <div class="card-body">
                    <div class="tab-nav">
                        <div class="tab-item active" data-tab="visits-tab">Patient Visits</div>
                        <div class="tab-item" data-tab="treatments-tab">Treatment Outcomes</div>
                        <div class="tab-item" data-tab="resources-tab">Resource Utilization</div>
                        <div class="tab-item" data-tab="underserved-tab">Underserved Populations</div>
                    </div>

                    <div class="tab-content active" id="visits-tab">
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">Detailed breakdown of patient visit patterns to identify trends and optimize clinic operations.</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Visit Type</th>
                                    <th>Total Visits</th>
                                    <th>Avg. Duration</th>
                                    <th>Avg. Wait Time</th>
                                    <th>YoY Change</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Routine Check-up</td>
                                    <td>5,842</td>
                                    <td>22 min</td>
                                    <td>15 min</td>
                                    <td>+8.3%</td>
                                </tr>
                                <tr>
                                    <td>Emergency</td>
                                    <td>1,245</td>
                                    <td>45 min</td>
                                    <td>12 min</td>
                                    <td>-3.2%</td>
                                </tr>
                                <tr>
                                    <td>Follow-up</td>
                                    <td>3,618</td>
                                    <td>18 min</td>
                                    <td>14 min</td>
                                    <td>+12.5%</td>
                                </tr>
                                <tr>
                                    <td>Specialist Consultation</td>
                                    <td>1,209</td>
                                    <td>35 min</td>
                                    <td>22 min</td>
                                    <td>+15.8%</td>
                                </tr>
                                <tr>
                                    <td>Vaccination</td>
                                    <td>524</td>
                                    <td>12 min</td>
                                    <td>8 min</td>
                                    <td>+42.1%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="tab-content" id="treatments-tab">
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">Analysis of treatment effectiveness across different conditions and demographic groups.</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Treatment Category</th>
                                    <th>Total Patients</th>
                                    <th>Success Rate</th>
                                    <th>Avg. Recovery Time</th>
                                    <th>Readmission Rate</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Hypertension Management</td>
                                    <td>826</td>
                                    <td>78.5%</td>
                                    <td>3 months</td>
                                    <td>12.3%</td>
                                </tr>
                                <tr>
                                    <td>Diabetes Care</td>
                                    <td>542</td>
                                    <td>82.1%</td>
                                    <td>4 months</td>
                                    <td>8.7%</td>
                                </tr>
                                <tr>
                                    <td>Respiratory Conditions</td>
                                    <td>687</td>
                                    <td>89.3%</td>
                                    <td>2 weeks</td>
                                    <td>5.2%</td>
                                </tr>
                                <tr>
                                    <td>Mental Health</td>
                                    <td>412</td>
                                    <td>72.8%</td>
                                    <td>6 months</td>
                                    <td>18.5%</td>
                                </tr>
                                <tr>
                                    <td>Preventive Care</td>
                                    <td>1,245</td>
                                    <td>95.2%</td>
                                    <td>N/A</td>
                                    <td>1.8%</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="tab-content" id="resources-tab">
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">Resource utilization analysis to optimize staffing and equipment allocation.</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Resource</th>
                                    <th>Utilization Rate</th>
                                    <th>Peak Hours</th>
                                    <th>Idle Time</th>
                                    <th>Cost per Use</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Primary Care Providers</td>
                                    <td>85.2%</td>
                                    <td>9am - 11am</td>
                                    <td>14.8%</td>
                                    <td>$45.80</td>
                                </tr>
                                <tr>
                                    <td>Nurses</td>
                                    <td>78.6%</td>
                                    <td>10am - 2pm</td>
                                    <td>21.4%</td>
                                    <td>$28.50</td>
                                </tr>
                                <tr>
                                    <td>Examination Rooms</td>
                                    <td>92.3%</td>
                                    <td>9am - 3pm</td>
                                    <td>7.7%</td>
                                    <td>$12.25</td>
                                </tr>
                                <tr>
                                    <td>Lab Equipment</td>
                                    <td>65.8%</td>
                                    <td>11am - 4pm</td>
                                    <td>34.2%</td>
                                    <td>$35.40</td>
                                </tr>
                                <tr>
                                    <td>Administrative Staff</td>
                                    <td>82.1%</td>
                                    <td>8am - 12pm</td>
                                    <td>17.9%</td>
                                    <td>$18.75</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="tab-content" id="underserved-tab">
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">Analysis of potentially underserved populations to ensure equitable healthcare access.</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Population Group</th>
                                    <th>% of Community</th>
                                    <th>% of Patients</th>
                                    <th>Visit Rate</th>
                                    <th>Access Barriers</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Low Income Households</td>
                                    <td>28.5%</td>
                                    <td>18.2%</td>
                                    <td>1.2 visits/year</td>
                                    <td>Transportation, Cost</td>
                                </tr>
                                <tr>
                                    <td>Hispanic/Latino</td>
                                    <td>22.3%</td>
                                    <td>15.7%</td>
                                    <td>1.5 visits/year</td>
                                    <td>Language, Documentation</td>
                                </tr>
                                <tr>
                                    <td>Elderly (65+)</td>
                                    <td>18.7%</td>
                                    <td>24.3%</td>
                                    <td>3.8 visits/year</td>
                                    <td>Mobility, Technology</td>
                                </tr>
                                <tr>
                                    <td>Rural Residents</td>
                                    <td>15.2%</td>
                                    <td>8.4%</td>
                                    <td>0.9 visits/year</td>
                                    <td>Distance, Transportation</td>
                                </tr>
                                <tr>
                                    <td>Uninsured</td>
                                    <td>12.8%</td>
                                    <td>7.5%</td>
                                    <td>0.7 visits/year</td>
                                    <td>Cost, Awareness</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Data Upload Modal -->
    <div class="modal-backdrop" id="uploadModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Upload Patient Data</h3>
                <button class="modal-close" id="closeModal">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="dropZone">
                    <div class="upload-icon">
                        <span class="material-symbols-rounded" style="font-size: 48px;">cloud_upload</span>
                    </div>
                    <h4 class="upload-title">Drag & Drop Files Here</h4>
                    <p class="upload-subtitle">or click to browse files</p>
                    <input type="file" id="fileInput" class="upload-input" accept=".csv, .xlsx" multiple>
                    <div class="upload-progress" id="uploadProgress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-status" id="progressStatus">0% complete</div>
                    </div>
                </div>
                <div class="upload-actions">
                    <button class="btn btn-outline" id="cancelUpload">Cancel</button>
                    <button class="btn btn-primary" id="processData">Process Data</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { Chart } from "https://esm.sh/chart.js/auto";

        // DOM Elements
        const uploadBtn = document.getElementById('upload-btn');
        const exportBtn = document.getElementById('export-btn');
        const uploadModal = document.getElementById('uploadModal');
        const closeModal = document.getElementById('closeModal');
        const cancelUpload = document.getElementById('cancelUpload');
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const processData = document.getElementById('processData');
        const uploadProgress = document.getElementById('uploadProgress');
        const progressFill = document.getElementById('progressFill');
        const progressStatus = document.getElementById('progressStatus');
        const tabItems = document.querySelectorAll('.tab-item');
        const tabContents = document.querySelectorAll('.tab-content');
        const chartContainers = document.querySelectorAll('.chart-container');
        const filterInputs = document.querySelectorAll('.filter-input');

        // Initialize Charts
        const charts = {};

        // Patient Visits Trend Chart
        const visitsChartCtx = document.getElementById('visitsChart').getContext('2d');
        charts.visits = new Chart(visitsChartCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Patient Visits',
                    data: [985, 1050, 1123, 1087, 1204, 1315, 1287, 1356, 1482, 1520, 1489, 1540],
                    backgroundColor: 'rgba(44, 123, 229, 0.2)',
                    borderColor: '#2C7BE5',
                    borderWidth: 2,
                    tension: 0.3,
                    pointRadius: 3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Number of Visits'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Month'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        backgroundColor: 'rgba(30, 41, 59, 0.8)',
                        padding: 10,
                        cornerRadius: 4
                    },
                    legend: {
                        position: 'top'
                    }
                },
                onClick: () => toggleControls('visitsChartControls')
            }
        });

        // Visit Distribution Heatmap Chart
        const heatmapChartCtx = document.getElementById('heatmapChart').getContext('2d');
        const weekdays = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
        const hours = ['8am', '9am', '10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm', '5pm', '6pm'];
        
        // Generate heatmap data
        const heatmapData = [];
        for (let i = 0; i < weekdays.length; i++) {
            for (let j = 0; j < hours.length; j++) {
                let value;
                if (i < 5) { // Weekdays
                    if (j >= 2 && j <= 5) { // 10am-1pm
                        value = Math.floor(Math.random() * 30) + 70; // High: 70-100
                    } else if ((j >= 1 && j <= 1) || (j >= 6 && j <= 8)) { // 9am or 2pm-4pm
                        value = Math.floor(Math.random() * 30) + 40; // Medium: 40-70
                    } else {
                        value = Math.floor(Math.random() * 30) + 10; // Low: 10-40
                    }
                } else { // Weekends
                    if (j >= 3 && j <= 6) { // 11am-2pm
                        value = Math.floor(Math.random() * 20) + 30; // Medium-low: 30-50
                    } else {
                        value = Math.floor(Math.random() * 20) + 5; // Very low: 5-25
                    }
                }
                
                heatmapData.push({
                    x: hours[j],
                    y: weekdays[i],
                    v: value
                });
            }
        }

        charts.heatmap = new Chart(heatmapChartCtx, {
            type: 'scatter',
            data: {
                datasets: [{
                    label: 'Visit Density',
                    data: heatmapData,
                    backgroundColor: (context) => {
                        const value = context.raw.v;
                        const alpha = value / 100;
                        return `rgba(44, 123, 229, ${alpha})`;
                    },
                    pointRadius: 10,
                    pointHoverRadius: 12
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        type: 'category',
                        labels: weekdays,
                        reverse: true,
                        grid: {
                            display: true,
                            drawBorder: true,
                            drawOnChartArea: true
                        }
                    },
                    x: {
                        type: 'category',
                        labels: hours,
                        grid: {
                            display: true,
                            drawBorder: true,
                            drawOnChartArea: true
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                const data = context.raw;
                                return `${data.y} at ${data.x}: ${data.v} visits`;
                            }
                        }
                    },
                    legend: {
                        display: false
                    }
                },
                onClick: () => toggleControls('heatmapChartControls')
            }
        });

        // Treatment Effectiveness Chart
        const treatmentChartCtx = document.getElementById('treatmentChart').getContext('2d');
        charts.treatment = new Chart(treatmentChartCtx, {
            type: 'bar',
            data: {
                labels: ['Hypertension', 'Diabetes', 'Respiratory', 'Mental Health', 'Preventive Care'],
                datasets: [{
                    label: 'Success Rate (%)',
                    data: [78.5, 82.1, 89.3, 72.8, 95.2],
                    backgroundColor: [
                        'rgba(44, 123, 229, 0.7)',
                        'rgba(0, 184, 148, 0.7)',
                        'rgba(255, 193, 7, 0.7)',
                        'rgba(255, 82, 82, 0.7)',
                        'rgba(23, 162, 184, 0.7)'
                    ],
                    borderColor: [
                        'rgba(44, 123, 229, 1)',
                        'rgba(0, 184, 148, 1)',
                        'rgba(255, 193, 7, 1)',
                        'rgba(255, 82, 82, 1)',
                        'rgba(23, 162, 184, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: 'Success Rate (%)'
                        }
                    },
                    x: {
                        title: {
                            display: true,
                            text: 'Treatment Category'
                        }
                    }
                },
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                return `Success Rate: ${context.raw}%`;
                            }
                        }
                    }
                },
                onClick: () => toggleControls('treatmentChartControls')
            }
        });

        // Demographics Chart
        const demographicsChartCtx = document.getElementById('demographicsChart').getContext('2d');
        charts.demographics = new Chart(demographicsChartCtx, {
            type: 'pie',
            data: {
                labels: ['0-17', '18-34', '35-49', '50-64', '65+'],
                datasets: [{
                    label: 'Patients by Age Group',
                    data: [15, 22, 28, 19, 16],
                    backgroundColor: [
                        'rgba(44, 123, 229, 0.7)',
                        'rgba(0, 184, 148, 0.7)',
                        'rgba(255, 193, 7, 0.7)',
                        'rgba(255, 82, 82, 0.7)',
                        'rgba(23, 162, 184, 0.7)'
                    ],
                    borderColor: [
                        'rgba(44, 123, 229, 1)',
                        'rgba(0, 184, 148, 1)',
                        'rgba(255, 193, 7, 1)',
                        'rgba(255, 82, 82, 1)',
                        'rgba(23, 162, 184, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                return `${context.label}: ${context.raw}%`;
                            }
                        }
                    },
                    legend: {
                        position: 'right'
                    }
                },
                onClick: () => toggleControls('demographicsChartControls')
            }
        });

        // Event Listeners
        
        // Chart controls toggle
        function toggleControls(controlsId) {
            const controls = document.getElementById(controlsId);
            const allControls = document.querySelectorAll('.floating-controls');
            
            // Hide all other controls
            allControls.forEach(control => {
                if (control.id !== controlsId) {
                    control.classList.remove('active');
                }
            });
            
            // Toggle the selected control
            controls.classList.toggle('active');
        }

        // Close controls when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.floating-controls') && !e.target.closest('canvas')) {
                document.querySelectorAll('.floating-controls').forEach(control => {
                    control.classList.remove('active');
                });
            }
        });

        // Chart control event listeners
        document.getElementById('visitsChartType').addEventListener('change', (e) => {
            charts.visits.config.type = e.target.value;
            charts.visits.update();
        });

        document.getElementById('visitsChartColor').addEventListener('change', (e) => {
            charts.visits.data.datasets[0].borderColor = e.target.value;
            charts.visits.data.datasets[0].backgroundColor = `${e.target.value}33`;
            charts.visits.update();
        });

        document.getElementById('visitsChartPeriod').addEventListener('change', (e) => {
            let labels, data;
            
            switch(e.target.value) {
                case 'quarterly':
                    labels = ['Q1', 'Q2', 'Q3', 'Q4'];
                    data = [3158, 3606, 4125, 4549];
                    break;
                case 'yearly':
                    labels = ['2019', '2020', '2021', '2022', '2023'];
                    data = [10254, 9876, 11452, 12876, 15438];
                    break;
                default: // monthly
                    labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                    data = [985, 1050, 1123, 1087, 1204, 1315, 1287, 1356, 1482, 1520, 1489, 1540];
            }
            
            charts.visits.data.labels = labels;
            charts.visits.data.datasets[0].data = data;
            charts.visits.update();
        });

        document.getElementById('heatmapColorScheme').addEventListener('change', (e) => {
            const colorScheme = e.target.value;
            let baseColor;
            
            switch(colorScheme) {
                case 'green':
                    baseColor = 'rgba(0, 184, 148,';
                    break;
                case 'red':
                    baseColor = 'rgba(255, 82, 82,';
                    break;
                default: // blue
                    baseColor = 'rgba(44, 123, 229,';
            }
            
            charts.heatmap.options.plugins.tooltip.callbacks.backgroundColor = (context) => {
                const value = context.raw.v;
                const alpha = value / 100;
                return `${baseColor} ${alpha})`;
            };
            
            charts.heatmap.update();
        });

        document.getElementById('heatmapIntensity').addEventListener('input', (e) => {
            const intensity = parseFloat(e.target.value);
            
            charts.heatmap.data.datasets[0].backgroundColor = (context) => {
                const value = context.raw.v;
                const alpha = (value / 100) * intensity;
                return `rgba(44, 123, 229, ${alpha})`;
            };
            
            charts.heatmap.update();
        });

        document.getElementById('treatmentChartType').addEventListener('change', (e) => {
            const chartType = e.target.value;
            charts.treatment.config.type = chartType;
            charts.treatment.update();
        });

        document.getElementById('treatmentMetric').addEventListener('change', (e) => {
            const metric = e.target.value;
            let data, label, max;
            
            switch(metric) {
                case 'timeToRecovery':
                    data = [90, 120, 14, 180, 7];
                    label = 'Average Recovery Time (days)';
                    max = 200;
                    break;
                case 'costEffectiveness':
                    data = [68.5, 72.3, 85.1, 62.4, 92.8];
                    label = 'Cost Effectiveness Score';
                    max = 100;
                    break;
                default: // successRate
                    data = [78.5, 82.1, 89.3, 72.8, 95.2];
                    label = 'Success Rate (%)';
                    max = 100;
            }
            
            charts.treatment.data.datasets[0].data = data;
            charts.treatment.data.datasets[0].label = label;
            charts.treatment.options.scales.y.max = max;
            charts.treatment.options.scales.y.title.text = label;
            charts.treatment.update();
        });

        document.getElementById('demographicDimension').addEventListener('change', (e) => {
            const dimension = e.target.value;
            let labels, data;
            
            switch(dimension) {
                case 'gender':
                    labels = ['Male', 'Female', 'Non-binary', 'Other'];
                    data = [42, 55, 2, 1];
                    break;
                case 'ethnicity':
                    labels = ['White', 'Hispanic/Latino', 'Black', 'Asian', 'Other'];
                    data = [45, 22, 18, 12, 3];
                    break;
                case 'insurance':
                    labels = ['Private', 'Medicare', 'Medicaid', 'Uninsured', 'Other'];
                    data = [52, 18, 22, 5, 3];
                    break;
                default: // age
                    labels = ['0-17', '18-34', '35-49', '50-64', '65+'];
                    data = [15, 22, 28, 19, 16];
            }
            
            charts.demographics.data.labels = labels;
            charts.demographics.data.datasets[0].data = data;
            charts.demographics.data.datasets[0].label = `Patients by ${dimension.charAt(0).toUpperCase() + dimension.slice(1)}`;
            charts.demographics.update();
        });

        document.getElementById('demographicChartType').addEventListener('change', (e) => {
            const chartType = e.target.value;
            charts.demographics.config.type = chartType;
            
            // Adjust legend position based on chart type
            if (chartType === 'bar') {
                charts.demographics.options.plugins.legend.position = 'top';
            } else {
                charts.demographics.options.plugins.legend.position = 'right';
            }
            
            charts.demographics.update();
        });

        // Tab navigation
        tabItems.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = tab.dataset.tab;
                
                // Update active tab
                tabItems.forEach(item => item.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active content
                tabContents.forEach(content => content.classList.remove('active'));
                document.getElementById(target).classList.add('active');
            });
        });

        // Upload modal
        uploadBtn.addEventListener('click', () => {
            uploadModal.classList.add('active');
        });

        closeModal.addEventListener('click', () => {
            uploadModal.classList.remove('active');
        });

        cancelUpload.addEventListener('click', () => {
            uploadModal.classList.remove('active');
        });

        dropZone.addEventListener('click', () => {
            fileInput.click();
        });

        // Drag and drop functionality
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
            dropZone.style.borderColor = 'var(--primary)';
            dropZone.style.backgroundColor = 'var(--primary-light)';
        }

        function unhighlight() {
            dropZone.style.borderColor = 'var(--border)';
            dropZone.style.backgroundColor = 'var(--foreground)';
        }

        dropZone.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            handleFiles(files);
        }

        fileInput.addEventListener('change', function() {
            handleFiles(this.files);
        });

        function handleFiles(files) {
            if (files.length > 0) {
                uploadProgress.style.display = 'block';
                simulateUpload();
            }
        }

        function simulateUpload() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += 5;
                progressFill.style.width = `${progress}%`;
                progressStatus.textContent = `${progress}% complete`;
                
                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        uploadModal.classList.remove('active');
                        // Reset for next time
                        setTimeout(() => {
                            progressFill.style.width = '0%';
                            progressStatus.textContent = '0% complete';
                            uploadProgress.style.display = 'none';
                        }, 500);
                    }, 1000);
                }
            }, 150);
        }

        // Filter change event listeners
        filterInputs.forEach(filter => {
            filter.addEventListener('change', () => {
                // Here you would typically fetch and update data based on filters
                // For demo purposes, we'll just show a visual change
                filter.style.borderColor = 'var(--primary)';
                setTimeout(() => {
                    filter.style.borderColor = 'var(--border)';
                }, 500);
            });
        });

        // Export button
        exportBtn.addEventListener('click', () => {
            alert('Export functionality would generate reports in PDF, Excel, or CSV formats based on your current analysis view.');
        });
    </script>
</body>
</html>